
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Deribit API</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-bc5c2852.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-29de3b05.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;javascript&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
      <a href="#" id="code-button">
        <span id="code-btn-txt">Show example code</span>
      </a>
    <div class="toc-wrapper">
      <img src="images/logo-74ceaf2a.jpg" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="javascript">javascript</a>
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#deribit-api-v2-1-1" class="toc-h1 toc-link" data-title="Deribit API v2.1.1">Deribit API v2.1.1</a>
          </li>
          <li>
            <a href="#overview" class="toc-h1 toc-link" data-title="Overview">Overview</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#naming" class="toc-h2 toc-link" data-title="Naming">Naming</a>
                  </li>
                  <li>
                    <a href="#rate-limits" class="toc-h2 toc-link" data-title="Rate Limits">Rate Limits</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#json-rpc" class="toc-h1 toc-link" data-title="JSON-RPC">JSON-RPC</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#request-messages" class="toc-h2 toc-link" data-title="Request messages">Request messages</a>
                  </li>
                  <li>
                    <a href="#response-messages" class="toc-h2 toc-link" data-title="Response messages">Response messages</a>
                  </li>
                  <li>
                    <a href="#detailed-response-for-private-cancel_all-and-private-cancel_by_label-methods" class="toc-h2 toc-link" data-title="Detailed response for private/cancel_all* and private/cancel_by_label methods">Detailed response for <code>private/cancel_all*</code> and <code>private/cancel_by_label</code> methods</a>
                  </li>
                  <li>
                    <a href="#security-keys" class="toc-h2 toc-link" data-title="Security keys">Security keys</a>
                  </li>
                  <li>
                    <a href="#notifications" class="toc-h2 toc-link" data-title="Notifications">Notifications</a>
                  </li>
                  <li>
                    <a href="#authentication" class="toc-h2 toc-link" data-title="Authentication">Authentication</a>
                  </li>
                  <li>
                    <a href="#access-scope" class="toc-h2 toc-link" data-title="Access scope">Access scope</a>
                  </li>
                  <li>
                    <a href="#creating-editing-removing-api-keys" class="toc-h2 toc-link" data-title="Creating/editing/removing API Keys">Creating/editing/removing API Keys</a>
                  </li>
                  <li>
                    <a href="#json-rpc-over-websocket" class="toc-h2 toc-link" data-title="JSON-RPC over websocket">JSON-RPC over websocket</a>
                  </li>
                  <li>
                    <a href="#json-rpc-over-http" class="toc-h2 toc-link" data-title="JSON-RPC over HTTP">JSON-RPC over HTTP</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#methods" class="toc-h1 toc-link" data-title="Methods">Methods</a>
          </li>
          <li>
            <a href="#authentication-2" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#public-auth" class="toc-h2 toc-link" data-title="/public/auth">/public/auth</a>
                  </li>
                  <li>
                    <a href="#public-exchange_token" class="toc-h2 toc-link" data-title="/public/exchange_token">/public/exchange_token</a>
                  </li>
                  <li>
                    <a href="#public-fork_token" class="toc-h2 toc-link" data-title="/public/fork_token">/public/fork_token</a>
                  </li>
                  <li>
                    <a href="#private-logout" class="toc-h2 toc-link" data-title="/private/logout">/private/logout</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#session-management" class="toc-h1 toc-link" data-title="Session management">Session management</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#public-set_heartbeat" class="toc-h2 toc-link" data-title="/public/set_heartbeat">/public/set_heartbeat</a>
                  </li>
                  <li>
                    <a href="#public-disable_heartbeat" class="toc-h2 toc-link" data-title="/public/disable_heartbeat">/public/disable_heartbeat</a>
                  </li>
                  <li>
                    <a href="#private-enable_cancel_on_disconnect" class="toc-h2 toc-link" data-title="/private/enable_cancel_on_disconnect">/private/enable_cancel_on_disconnect</a>
                  </li>
                  <li>
                    <a href="#private-disable_cancel_on_disconnect" class="toc-h2 toc-link" data-title="/private/disable_cancel_on_disconnect">/private/disable_cancel_on_disconnect</a>
                  </li>
                  <li>
                    <a href="#private-get_cancel_on_disconnect" class="toc-h2 toc-link" data-title="/private/get_cancel_on_disconnect">/private/get_cancel_on_disconnect</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#supporting" class="toc-h1 toc-link" data-title="Supporting">Supporting</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#public-get_time" class="toc-h2 toc-link" data-title="/public/get_time">/public/get_time</a>
                  </li>
                  <li>
                    <a href="#public-hello" class="toc-h2 toc-link" data-title="/public/hello">/public/hello</a>
                  </li>
                  <li>
                    <a href="#public-status" class="toc-h2 toc-link" data-title="/public/status">/public/status</a>
                  </li>
                  <li>
                    <a href="#public-test" class="toc-h2 toc-link" data-title="/public/test">/public/test</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#subscription-management" class="toc-h1 toc-link" data-title="Subscription management">Subscription management</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#public-subscribe" class="toc-h2 toc-link" data-title="/public/subscribe">/public/subscribe</a>
                  </li>
                  <li>
                    <a href="#public-unsubscribe" class="toc-h2 toc-link" data-title="/public/unsubscribe">/public/unsubscribe</a>
                  </li>
                  <li>
                    <a href="#public-unsubscribe_all" class="toc-h2 toc-link" data-title="/public/unsubscribe_all">/public/unsubscribe_all</a>
                  </li>
                  <li>
                    <a href="#private-subscribe" class="toc-h2 toc-link" data-title="/private/subscribe">/private/subscribe</a>
                  </li>
                  <li>
                    <a href="#private-unsubscribe" class="toc-h2 toc-link" data-title="/private/unsubscribe">/private/unsubscribe</a>
                  </li>
                  <li>
                    <a href="#private-unsubscribe_all" class="toc-h2 toc-link" data-title="/private/unsubscribe_all">/private/unsubscribe_all</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#market-data" class="toc-h1 toc-link" data-title="Market data">Market data</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#public-get_apr_history" class="toc-h2 toc-link" data-title="/public/get_apr_history">/public/get_apr_history</a>
                  </li>
                  <li>
                    <a href="#public-get_book_summary_by_currency" class="toc-h2 toc-link" data-title="/public/get_book_summary_by_currency">/public/get_book_summary_by_currency</a>
                  </li>
                  <li>
                    <a href="#public-get_book_summary_by_instrument" class="toc-h2 toc-link" data-title="/public/get_book_summary_by_instrument">/public/get_book_summary_by_instrument</a>
                  </li>
                  <li>
                    <a href="#public-get_contract_size" class="toc-h2 toc-link" data-title="/public/get_contract_size">/public/get_contract_size</a>
                  </li>
                  <li>
                    <a href="#public-get_currencies" class="toc-h2 toc-link" data-title="/public/get_currencies">/public/get_currencies</a>
                  </li>
                  <li>
                    <a href="#public-get_delivery_prices" class="toc-h2 toc-link" data-title="/public/get_delivery_prices">/public/get_delivery_prices</a>
                  </li>
                  <li>
                    <a href="#public-get_expirations" class="toc-h2 toc-link" data-title="/public/get_expirations">/public/get_expirations</a>
                  </li>
                  <li>
                    <a href="#public-get_funding_chart_data" class="toc-h2 toc-link" data-title="/public/get_funding_chart_data">/public/get_funding_chart_data</a>
                  </li>
                  <li>
                    <a href="#public-get_funding_rate_history" class="toc-h2 toc-link" data-title="/public/get_funding_rate_history">/public/get_funding_rate_history</a>
                  </li>
                  <li>
                    <a href="#public-get_funding_rate_value" class="toc-h2 toc-link" data-title="/public/get_funding_rate_value">/public/get_funding_rate_value</a>
                  </li>
                  <li>
                    <a href="#public-get_historical_volatility" class="toc-h2 toc-link" data-title="/public/get_historical_volatility">/public/get_historical_volatility</a>
                  </li>
                  <li>
                    <a href="#public-get_index" class="toc-h2 toc-link" data-title="/public/get_index">/public/get_index</a>
                  </li>
                  <li>
                    <a href="#public-get_index_price" class="toc-h2 toc-link" data-title="/public/get_index_price">/public/get_index_price</a>
                  </li>
                  <li>
                    <a href="#public-get_index_price_names" class="toc-h2 toc-link" data-title="/public/get_index_price_names">/public/get_index_price_names</a>
                  </li>
                  <li>
                    <a href="#public-get_instrument" class="toc-h2 toc-link" data-title="/public/get_instrument">/public/get_instrument</a>
                  </li>
                  <li>
                    <a href="#public-get_instruments" class="toc-h2 toc-link" data-title="/public/get_instruments">/public/get_instruments</a>
                  </li>
                  <li>
                    <a href="#public-get_last_settlements_by_currency" class="toc-h2 toc-link" data-title="/public/get_last_settlements_by_currency">/public/get_last_settlements_by_currency</a>
                  </li>
                  <li>
                    <a href="#public-get_last_settlements_by_instrument" class="toc-h2 toc-link" data-title="/public/get_last_settlements_by_instrument">/public/get_last_settlements_by_instrument</a>
                  </li>
                  <li>
                    <a href="#public-get_last_trades_by_currency" class="toc-h2 toc-link" data-title="/public/get_last_trades_by_currency">/public/get_last_trades_by_currency</a>
                  </li>
                  <li>
                    <a href="#public-get_last_trades_by_currency_and_time" class="toc-h2 toc-link" data-title="/public/get_last_trades_by_currency_and_time">/public/get_last_trades_by_currency_and_time</a>
                  </li>
                  <li>
                    <a href="#public-get_last_trades_by_instrument" class="toc-h2 toc-link" data-title="/public/get_last_trades_by_instrument">/public/get_last_trades_by_instrument</a>
                  </li>
                  <li>
                    <a href="#public-get_last_trades_by_instrument_and_time" class="toc-h2 toc-link" data-title="/public/get_last_trades_by_instrument_and_time">/public/get_last_trades_by_instrument_and_time</a>
                  </li>
                  <li>
                    <a href="#public-get_mark_price_history" class="toc-h2 toc-link" data-title="/public/get_mark_price_history">/public/get_mark_price_history</a>
                  </li>
                  <li>
                    <a href="#public-get_order_book" class="toc-h2 toc-link" data-title="/public/get_order_book">/public/get_order_book</a>
                  </li>
                  <li>
                    <a href="#public-get_order_book_by_instrument_id" class="toc-h2 toc-link" data-title="/public/get_order_book_by_instrument_id">/public/get_order_book_by_instrument_id</a>
                  </li>
                  <li>
                    <a href="#public-get_rfqs" class="toc-h2 toc-link" data-title="/public/get_rfqs">/public/get_rfqs</a>
                  </li>
                  <li>
                    <a href="#public-get_supported_index_names" class="toc-h2 toc-link" data-title="/public/get_supported_index_names">/public/get_supported_index_names</a>
                  </li>
                  <li>
                    <a href="#public-get_trade_volumes" class="toc-h2 toc-link" data-title="/public/get_trade_volumes">/public/get_trade_volumes</a>
                  </li>
                  <li>
                    <a href="#public-get_tradingview_chart_data" class="toc-h2 toc-link" data-title="/public/get_tradingview_chart_data">/public/get_tradingview_chart_data</a>
                  </li>
                  <li>
                    <a href="#public-get_volatility_index_data" class="toc-h2 toc-link" data-title="/public/get_volatility_index_data">/public/get_volatility_index_data</a>
                  </li>
                  <li>
                    <a href="#public-ticker" class="toc-h2 toc-link" data-title="/public/ticker">/public/ticker</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#trading" class="toc-h1 toc-link" data-title="Trading">Trading</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#private-buy" class="toc-h2 toc-link" data-title="/private/buy">/private/buy</a>
                  </li>
                  <li>
                    <a href="#private-sell" class="toc-h2 toc-link" data-title="/private/sell">/private/sell</a>
                  </li>
                  <li>
                    <a href="#private-edit" class="toc-h2 toc-link" data-title="/private/edit">/private/edit</a>
                  </li>
                  <li>
                    <a href="#private-edit_by_label" class="toc-h2 toc-link" data-title="/private/edit_by_label">/private/edit_by_label</a>
                  </li>
                  <li>
                    <a href="#private-cancel" class="toc-h2 toc-link" data-title="/private/cancel">/private/cancel</a>
                  </li>
                  <li>
                    <a href="#private-cancel_all" class="toc-h2 toc-link" data-title="/private/cancel_all">/private/cancel_all</a>
                  </li>
                  <li>
                    <a href="#private-cancel_all_by_currency" class="toc-h2 toc-link" data-title="/private/cancel_all_by_currency">/private/cancel_all_by_currency</a>
                  </li>
                  <li>
                    <a href="#private-cancel_all_by_currency_pair" class="toc-h2 toc-link" data-title="/private/cancel_all_by_currency_pair">/private/cancel_all_by_currency_pair</a>
                  </li>
                  <li>
                    <a href="#private-cancel_all_by_instrument" class="toc-h2 toc-link" data-title="/private/cancel_all_by_instrument">/private/cancel_all_by_instrument</a>
                  </li>
                  <li>
                    <a href="#private-cancel_all_by_kind_or_type" class="toc-h2 toc-link" data-title="/private/cancel_all_by_kind_or_type">/private/cancel_all_by_kind_or_type</a>
                  </li>
                  <li>
                    <a href="#private-cancel_by_label" class="toc-h2 toc-link" data-title="/private/cancel_by_label">/private/cancel_by_label</a>
                  </li>
                  <li>
                    <a href="#private-cancel_quotes" class="toc-h2 toc-link" data-title="/private/cancel_quotes">/private/cancel_quotes</a>
                  </li>
                  <li>
                    <a href="#private-close_position" class="toc-h2 toc-link" data-title="/private/close_position">/private/close_position</a>
                  </li>
                  <li>
                    <a href="#private-get_margins" class="toc-h2 toc-link" data-title="/private/get_margins">/private/get_margins</a>
                  </li>
                  <li>
                    <a href="#private-get_mmp_config" class="toc-h2 toc-link" data-title="/private/get_mmp_config">/private/get_mmp_config</a>
                  </li>
                  <li>
                    <a href="#private-get_mmp_status" class="toc-h2 toc-link" data-title="/private/get_mmp_status">/private/get_mmp_status</a>
                  </li>
                  <li>
                    <a href="#private-get_open_orders" class="toc-h2 toc-link" data-title="/private/get_open_orders">/private/get_open_orders</a>
                  </li>
                  <li>
                    <a href="#private-get_open_orders_by_currency" class="toc-h2 toc-link" data-title="/private/get_open_orders_by_currency">/private/get_open_orders_by_currency</a>
                  </li>
                  <li>
                    <a href="#private-get_open_orders_by_instrument" class="toc-h2 toc-link" data-title="/private/get_open_orders_by_instrument">/private/get_open_orders_by_instrument</a>
                  </li>
                  <li>
                    <a href="#private-get_open_orders_by_label" class="toc-h2 toc-link" data-title="/private/get_open_orders_by_label">/private/get_open_orders_by_label</a>
                  </li>
                  <li>
                    <a href="#private-get_order_history_by_currency" class="toc-h2 toc-link" data-title="/private/get_order_history_by_currency">/private/get_order_history_by_currency</a>
                  </li>
                  <li>
                    <a href="#private-get_order_history_by_instrument" class="toc-h2 toc-link" data-title="/private/get_order_history_by_instrument">/private/get_order_history_by_instrument</a>
                  </li>
                  <li>
                    <a href="#private-get_order_margin_by_ids" class="toc-h2 toc-link" data-title="/private/get_order_margin_by_ids">/private/get_order_margin_by_ids</a>
                  </li>
                  <li>
                    <a href="#private-get_order_state" class="toc-h2 toc-link" data-title="/private/get_order_state">/private/get_order_state</a>
                  </li>
                  <li>
                    <a href="#private-get_order_state_by_label" class="toc-h2 toc-link" data-title="/private/get_order_state_by_label">/private/get_order_state_by_label</a>
                  </li>
                  <li>
                    <a href="#private-get_trigger_order_history" class="toc-h2 toc-link" data-title="/private/get_trigger_order_history">/private/get_trigger_order_history</a>
                  </li>
                  <li>
                    <a href="#private-get_user_trades_by_currency" class="toc-h2 toc-link" data-title="/private/get_user_trades_by_currency">/private/get_user_trades_by_currency</a>
                  </li>
                  <li>
                    <a href="#private-get_user_trades_by_currency_and_time" class="toc-h2 toc-link" data-title="/private/get_user_trades_by_currency_and_time">/private/get_user_trades_by_currency_and_time</a>
                  </li>
                  <li>
                    <a href="#private-get_user_trades_by_instrument" class="toc-h2 toc-link" data-title="/private/get_user_trades_by_instrument">/private/get_user_trades_by_instrument</a>
                  </li>
                  <li>
                    <a href="#private-get_user_trades_by_instrument_and_time" class="toc-h2 toc-link" data-title="/private/get_user_trades_by_instrument_and_time">/private/get_user_trades_by_instrument_and_time</a>
                  </li>
                  <li>
                    <a href="#private-get_user_trades_by_order" class="toc-h2 toc-link" data-title="/private/get_user_trades_by_order">/private/get_user_trades_by_order</a>
                  </li>
                  <li>
                    <a href="#private-mass_quote" class="toc-h2 toc-link" data-title="/private/mass_quote">/private/mass_quote</a>
                  </li>
                  <li>
                    <a href="#private-move_positions" class="toc-h2 toc-link" data-title="/private/move_positions">/private/move_positions</a>
                  </li>
                  <li>
                    <a href="#private-reset_mmp" class="toc-h2 toc-link" data-title="/private/reset_mmp">/private/reset_mmp</a>
                  </li>
                  <li>
                    <a href="#private-send_rfq" class="toc-h2 toc-link" data-title="/private/send_rfq">/private/send_rfq</a>
                  </li>
                  <li>
                    <a href="#private-set_mmp_config" class="toc-h2 toc-link" data-title="/private/set_mmp_config">/private/set_mmp_config</a>
                  </li>
                  <li>
                    <a href="#private-get_settlement_history_by_instrument" class="toc-h2 toc-link" data-title="/private/get_settlement_history_by_instrument">/private/get_settlement_history_by_instrument</a>
                  </li>
                  <li>
                    <a href="#private-get_settlement_history_by_currency" class="toc-h2 toc-link" data-title="/private/get_settlement_history_by_currency">/private/get_settlement_history_by_currency</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#combo-books" class="toc-h1 toc-link" data-title="Combo Books">Combo Books</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#public-get_combo_details" class="toc-h2 toc-link" data-title="/public/get_combo_details">/public/get_combo_details</a>
                  </li>
                  <li>
                    <a href="#public-get_combo_ids" class="toc-h2 toc-link" data-title="/public/get_combo_ids">/public/get_combo_ids</a>
                  </li>
                  <li>
                    <a href="#public-get_combos" class="toc-h2 toc-link" data-title="/public/get_combos">/public/get_combos</a>
                  </li>
                  <li>
                    <a href="#private-create_combo" class="toc-h2 toc-link" data-title="/private/create_combo">/private/create_combo</a>
                  </li>
                  <li>
                    <a href="#private-get_leg_prices" class="toc-h2 toc-link" data-title="/private/get_leg_prices">/private/get_leg_prices</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#block-trade" class="toc-h1 toc-link" data-title="Block Trade">Block Trade</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#private-approve_block_trade" class="toc-h2 toc-link" data-title="/private/approve_block_trade">/private/approve_block_trade</a>
                  </li>
                  <li>
                    <a href="#private-execute_block_trade" class="toc-h2 toc-link" data-title="/private/execute_block_trade">/private/execute_block_trade</a>
                  </li>
                  <li>
                    <a href="#private-get_block_trade" class="toc-h2 toc-link" data-title="/private/get_block_trade">/private/get_block_trade</a>
                  </li>
                  <li>
                    <a href="#private-get_block_trades" class="toc-h2 toc-link" data-title="/private/get_block_trades">/private/get_block_trades</a>
                  </li>
                  <li>
                    <a href="#private-get_pending_block_trades" class="toc-h2 toc-link" data-title="/private/get_pending_block_trades">/private/get_pending_block_trades</a>
                  </li>
                  <li>
                    <a href="#private-invalidate_block_trade_signature" class="toc-h2 toc-link" data-title="/private/invalidate_block_trade_signature">/private/invalidate_block_trade_signature</a>
                  </li>
                  <li>
                    <a href="#private-reject_block_trade" class="toc-h2 toc-link" data-title="/private/reject_block_trade">/private/reject_block_trade</a>
                  </li>
                  <li>
                    <a href="#private-simulate_block_trade" class="toc-h2 toc-link" data-title="/private/simulate_block_trade">/private/simulate_block_trade</a>
                  </li>
                  <li>
                    <a href="#private-verify_block_trade" class="toc-h2 toc-link" data-title="/private/verify_block_trade">/private/verify_block_trade</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#block-rfq" class="toc-h1 toc-link" data-title="Block RFQ">Block RFQ</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#public-get_block_rfq_trades" class="toc-h2 toc-link" data-title="/public/get_block_rfq_trades">/public/get_block_rfq_trades</a>
                  </li>
                  <li>
                    <a href="#private-add_block_rfq_quote" class="toc-h2 toc-link" data-title="/private/add_block_rfq_quote">/private/add_block_rfq_quote</a>
                  </li>
                  <li>
                    <a href="#private-cancel_all_block_rfq_quotes" class="toc-h2 toc-link" data-title="/private/cancel_all_block_rfq_quotes">/private/cancel_all_block_rfq_quotes</a>
                  </li>
                  <li>
                    <a href="#private-cancel_block_rfq" class="toc-h2 toc-link" data-title="/private/cancel_block_rfq">/private/cancel_block_rfq</a>
                  </li>
                  <li>
                    <a href="#private-cancel_block_rfq_quote" class="toc-h2 toc-link" data-title="/private/cancel_block_rfq_quote">/private/cancel_block_rfq_quote</a>
                  </li>
                  <li>
                    <a href="#private-create_block_rfq" class="toc-h2 toc-link" data-title="/private/create_block_rfq">/private/create_block_rfq</a>
                  </li>
                  <li>
                    <a href="#private-edit_block_rfq_quote" class="toc-h2 toc-link" data-title="/private/edit_block_rfq_quote">/private/edit_block_rfq_quote</a>
                  </li>
                  <li>
                    <a href="#private-get_block_rfq_makers" class="toc-h2 toc-link" data-title="/private/get_block_rfq_makers">/private/get_block_rfq_makers</a>
                  </li>
                  <li>
                    <a href="#private-get_block_rfq_quotes" class="toc-h2 toc-link" data-title="/private/get_block_rfq_quotes">/private/get_block_rfq_quotes</a>
                  </li>
                  <li>
                    <a href="#private-get_block_rfq_user_info" class="toc-h2 toc-link" data-title="/private/get_block_rfq_user_info">/private/get_block_rfq_user_info</a>
                  </li>
                  <li>
                    <a href="#private-get_block_rfqs" class="toc-h2 toc-link" data-title="/private/get_block_rfqs">/private/get_block_rfqs</a>
                  </li>
                  <li>
                    <a href="#private-trade_block_rfq" class="toc-h2 toc-link" data-title="/private/trade_block_rfq">/private/trade_block_rfq</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#wallet" class="toc-h1 toc-link" data-title="Wallet">Wallet</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#private-add_to_address_book" class="toc-h2 toc-link" data-title="/private/add_to_address_book">/private/add_to_address_book</a>
                  </li>
                  <li>
                    <a href="#private-cancel_transfer_by_id" class="toc-h2 toc-link" data-title="/private/cancel_transfer_by_id">/private/cancel_transfer_by_id</a>
                  </li>
                  <li>
                    <a href="#private-cancel_withdrawal" class="toc-h2 toc-link" data-title="/private/cancel_withdrawal">/private/cancel_withdrawal</a>
                  </li>
                  <li>
                    <a href="#private-create_deposit_address" class="toc-h2 toc-link" data-title="/private/create_deposit_address">/private/create_deposit_address</a>
                  </li>
                  <li>
                    <a href="#private-get_address_book" class="toc-h2 toc-link" data-title="/private/get_address_book">/private/get_address_book</a>
                  </li>
                  <li>
                    <a href="#private-get_current_deposit_address" class="toc-h2 toc-link" data-title="/private/get_current_deposit_address">/private/get_current_deposit_address</a>
                  </li>
                  <li>
                    <a href="#private-get_deposits" class="toc-h2 toc-link" data-title="/private/get_deposits">/private/get_deposits</a>
                  </li>
                  <li>
                    <a href="#private-get_transfers" class="toc-h2 toc-link" data-title="/private/get_transfers">/private/get_transfers</a>
                  </li>
                  <li>
                    <a href="#private-get_withdrawals" class="toc-h2 toc-link" data-title="/private/get_withdrawals">/private/get_withdrawals</a>
                  </li>
                  <li>
                    <a href="#private-remove_from_address_book" class="toc-h2 toc-link" data-title="/private/remove_from_address_book">/private/remove_from_address_book</a>
                  </li>
                  <li>
                    <a href="#private-set_clearance_originator" class="toc-h2 toc-link" data-title="/private/set_clearance_originator">/private/set_clearance_originator</a>
                  </li>
                  <li>
                    <a href="#private-submit_transfer_between_subaccounts" class="toc-h2 toc-link" data-title="/private/submit_transfer_between_subaccounts">/private/submit_transfer_between_subaccounts</a>
                  </li>
                  <li>
                    <a href="#private-submit_transfer_to_subaccount" class="toc-h2 toc-link" data-title="/private/submit_transfer_to_subaccount">/private/submit_transfer_to_subaccount</a>
                  </li>
                  <li>
                    <a href="#private-submit_transfer_to_user" class="toc-h2 toc-link" data-title="/private/submit_transfer_to_user">/private/submit_transfer_to_user</a>
                  </li>
                  <li>
                    <a href="#private-update_in_address_book" class="toc-h2 toc-link" data-title="/private/update_in_address_book">/private/update_in_address_book</a>
                  </li>
                  <li>
                    <a href="#private-withdraw" class="toc-h2 toc-link" data-title="/private/withdraw">/private/withdraw</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#account-management" class="toc-h1 toc-link" data-title="Account management">Account management</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#public-get_announcements" class="toc-h2 toc-link" data-title="/public/get_announcements">/public/get_announcements</a>
                  </li>
                  <li>
                    <a href="#private-change_api_key_name" class="toc-h2 toc-link" data-title="/private/change_api_key_name">/private/change_api_key_name</a>
                  </li>
                  <li>
                    <a href="#private-change_margin_model" class="toc-h2 toc-link" data-title="/private/change_margin_model">/private/change_margin_model</a>
                  </li>
                  <li>
                    <a href="#private-change_scope_in_api_key" class="toc-h2 toc-link" data-title="/private/change_scope_in_api_key">/private/change_scope_in_api_key</a>
                  </li>
                  <li>
                    <a href="#private-change_subaccount_name" class="toc-h2 toc-link" data-title="/private/change_subaccount_name">/private/change_subaccount_name</a>
                  </li>
                  <li>
                    <a href="#private-create_api_key" class="toc-h2 toc-link" data-title="/private/create_api_key">/private/create_api_key</a>
                  </li>
                  <li>
                    <a href="#private-create_subaccount" class="toc-h2 toc-link" data-title="/private/create_subaccount">/private/create_subaccount</a>
                  </li>
                  <li>
                    <a href="#private-disable_api_key" class="toc-h2 toc-link" data-title="/private/disable_api_key">/private/disable_api_key</a>
                  </li>
                  <li>
                    <a href="#private-edit_api_key" class="toc-h2 toc-link" data-title="/private/edit_api_key">/private/edit_api_key</a>
                  </li>
                  <li>
                    <a href="#private-enable_affiliate_program" class="toc-h2 toc-link" data-title="/private/enable_affiliate_program">/private/enable_affiliate_program</a>
                  </li>
                  <li>
                    <a href="#private-enable_api_key" class="toc-h2 toc-link" data-title="/private/enable_api_key">/private/enable_api_key</a>
                  </li>
                  <li>
                    <a href="#private-get_access_log" class="toc-h2 toc-link" data-title="/private/get_access_log">/private/get_access_log</a>
                  </li>
                  <li>
                    <a href="#private-get_account_summaries" class="toc-h2 toc-link" data-title="/private/get_account_summaries">/private/get_account_summaries</a>
                  </li>
                  <li>
                    <a href="#private-get_account_summary" class="toc-h2 toc-link" data-title="/private/get_account_summary">/private/get_account_summary</a>
                  </li>
                  <li>
                    <a href="#private-get_affiliate_program_info" class="toc-h2 toc-link" data-title="/private/get_affiliate_program_info">/private/get_affiliate_program_info</a>
                  </li>
                  <li>
                    <a href="#private-get_email_language" class="toc-h2 toc-link" data-title="/private/get_email_language">/private/get_email_language</a>
                  </li>
                  <li>
                    <a href="#private-get_new_announcements" class="toc-h2 toc-link" data-title="/private/get_new_announcements">/private/get_new_announcements</a>
                  </li>
                  <li>
                    <a href="#private-get_position" class="toc-h2 toc-link" data-title="/private/get_position">/private/get_position</a>
                  </li>
                  <li>
                    <a href="#private-get_positions" class="toc-h2 toc-link" data-title="/private/get_positions">/private/get_positions</a>
                  </li>
                  <li>
                    <a href="#private-get_subaccounts" class="toc-h2 toc-link" data-title="/private/get_subaccounts">/private/get_subaccounts</a>
                  </li>
                  <li>
                    <a href="#private-get_subaccounts_details" class="toc-h2 toc-link" data-title="/private/get_subaccounts_details">/private/get_subaccounts_details</a>
                  </li>
                  <li>
                    <a href="#private-get_transaction_log" class="toc-h2 toc-link" data-title="/private/get_transaction_log">/private/get_transaction_log</a>
                  </li>
                  <li>
                    <a href="#private-get_user_locks" class="toc-h2 toc-link" data-title="/private/get_user_locks">/private/get_user_locks</a>
                  </li>
                  <li>
                    <a href="#private-list_api_keys" class="toc-h2 toc-link" data-title="/private/list_api_keys">/private/list_api_keys</a>
                  </li>
                  <li>
                    <a href="#private-list_custody_accounts" class="toc-h2 toc-link" data-title="/private/list_custody_accounts">/private/list_custody_accounts</a>
                  </li>
                  <li>
                    <a href="#private-pme-simulate" class="toc-h2 toc-link" data-title="/private/pme/simulate">/private/pme/simulate</a>
                  </li>
                  <li>
                    <a href="#private-remove_api_key" class="toc-h2 toc-link" data-title="/private/remove_api_key">/private/remove_api_key</a>
                  </li>
                  <li>
                    <a href="#private-remove_subaccount" class="toc-h2 toc-link" data-title="/private/remove_subaccount">/private/remove_subaccount</a>
                  </li>
                  <li>
                    <a href="#private-reset_api_key" class="toc-h2 toc-link" data-title="/private/reset_api_key">/private/reset_api_key</a>
                  </li>
                  <li>
                    <a href="#private-set_announcement_as_read" class="toc-h2 toc-link" data-title="/private/set_announcement_as_read">/private/set_announcement_as_read</a>
                  </li>
                  <li>
                    <a href="#private-set_disabled_trading_products" class="toc-h2 toc-link" data-title="/private/set_disabled_trading_products">/private/set_disabled_trading_products</a>
                  </li>
                  <li>
                    <a href="#private-set_email_for_subaccount" class="toc-h2 toc-link" data-title="/private/set_email_for_subaccount">/private/set_email_for_subaccount</a>
                  </li>
                  <li>
                    <a href="#private-set_email_language" class="toc-h2 toc-link" data-title="/private/set_email_language">/private/set_email_language</a>
                  </li>
                  <li>
                    <a href="#private-set_self_trading_config" class="toc-h2 toc-link" data-title="/private/set_self_trading_config">/private/set_self_trading_config</a>
                  </li>
                  <li>
                    <a href="#private-simulate_portfolio" class="toc-h2 toc-link" data-title="/private/simulate_portfolio">/private/simulate_portfolio</a>
                  </li>
                  <li>
                    <a href="#private-toggle_notifications_from_subaccount" class="toc-h2 toc-link" data-title="/private/toggle_notifications_from_subaccount">/private/toggle_notifications_from_subaccount</a>
                  </li>
                  <li>
                    <a href="#private-toggle_subaccount_login" class="toc-h2 toc-link" data-title="/private/toggle_subaccount_login">/private/toggle_subaccount_login</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#subscriptions" class="toc-h1 toc-link" data-title="Subscriptions">Subscriptions</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#announcements" class="toc-h2 toc-link" data-title="announcements">announcements</a>
                  </li>
                  <li>
                    <a href="#block_rfq-maker-quotes-currency" class="toc-h2 toc-link" data-title="block_rfq.maker.quotes.{currency}">block_rfq.maker.quotes.{currency}</a>
                  </li>
                  <li>
                    <a href="#block_rfq-maker-currency" class="toc-h2 toc-link" data-title="block_rfq.maker.{currency}">block_rfq.maker.{currency}</a>
                  </li>
                  <li>
                    <a href="#block_rfq-taker-currency" class="toc-h2 toc-link" data-title="block_rfq.taker.{currency}">block_rfq.taker.{currency}</a>
                  </li>
                  <li>
                    <a href="#block_rfq-trades-currency" class="toc-h2 toc-link" data-title="block_rfq.trades.{currency}">block_rfq.trades.{currency}</a>
                  </li>
                  <li>
                    <a href="#block_trade_confirmations" class="toc-h2 toc-link" data-title="block_trade_confirmations">block_trade_confirmations</a>
                  </li>
                  <li>
                    <a href="#block_trade_confirmations-currency" class="toc-h2 toc-link" data-title="block_trade_confirmations.{currency}">block_trade_confirmations.{currency}</a>
                  </li>
                  <li>
                    <a href="#book-instrument_name-group-depth-interval" class="toc-h2 toc-link" data-title="book.{instrument_name}.{group}.{depth}.{interval}">book.{instrument_name}.{group}.{depth}.{interval}</a>
                  </li>
                  <li>
                    <a href="#book-instrument_name-interval" class="toc-h2 toc-link" data-title="book.{instrument_name}.{interval}">book.{instrument_name}.{interval}</a>
                  </li>
                  <li>
                    <a href="#chart-trades-instrument_name-resolution" class="toc-h2 toc-link" data-title="chart.trades.{instrument_name}.{resolution}">chart.trades.{instrument_name}.{resolution}</a>
                  </li>
                  <li>
                    <a href="#deribit_price_index-index_name" class="toc-h2 toc-link" data-title="deribit_price_index.{index_name}">deribit_price_index.{index_name}</a>
                  </li>
                  <li>
                    <a href="#deribit_price_ranking-index_name" class="toc-h2 toc-link" data-title="deribit_price_ranking.{index_name}">deribit_price_ranking.{index_name}</a>
                  </li>
                  <li>
                    <a href="#deribit_price_statistics-index_name" class="toc-h2 toc-link" data-title="deribit_price_statistics.{index_name}">deribit_price_statistics.{index_name}</a>
                  </li>
                  <li>
                    <a href="#deribit_volatility_index-index_name" class="toc-h2 toc-link" data-title="deribit_volatility_index.{index_name}">deribit_volatility_index.{index_name}</a>
                  </li>
                  <li>
                    <a href="#estimated_expiration_price-index_name" class="toc-h2 toc-link" data-title="estimated_expiration_price.{index_name}">estimated_expiration_price.{index_name}</a>
                  </li>
                  <li>
                    <a href="#incremental_ticker-instrument_name" class="toc-h2 toc-link" data-title="incremental_ticker.{instrument_name}">incremental_ticker.{instrument_name}</a>
                  </li>
                  <li>
                    <a href="#instrument-state-kind-currency" class="toc-h2 toc-link" data-title="instrument.state.{kind}.{currency}">instrument.state.{kind}.{currency}</a>
                  </li>
                  <li>
                    <a href="#markprice-options-index_name" class="toc-h2 toc-link" data-title="markprice.options.{index_name}">markprice.options.{index_name}</a>
                  </li>
                  <li>
                    <a href="#perpetual-instrument_name-interval" class="toc-h2 toc-link" data-title="perpetual.{instrument_name}.{interval}">perpetual.{instrument_name}.{interval}</a>
                  </li>
                  <li>
                    <a href="#platform_state" class="toc-h2 toc-link" data-title="platform_state">platform_state</a>
                  </li>
                  <li>
                    <a href="#platform_state-public_methods_state" class="toc-h2 toc-link" data-title="platform_state.public_methods_state">platform_state.public_methods_state</a>
                  </li>
                  <li>
                    <a href="#quote-instrument_name" class="toc-h2 toc-link" data-title="quote.{instrument_name}">quote.{instrument_name}</a>
                  </li>
                  <li>
                    <a href="#rfq-currency" class="toc-h2 toc-link" data-title="rfq.{currency}">rfq.{currency}</a>
                  </li>
                  <li>
                    <a href="#ticker-instrument_name-interval" class="toc-h2 toc-link" data-title="ticker.{instrument_name}.{interval}">ticker.{instrument_name}.{interval}</a>
                  </li>
                  <li>
                    <a href="#trades-instrument_name-interval" class="toc-h2 toc-link" data-title="trades.{instrument_name}.{interval}">trades.{instrument_name}.{interval}</a>
                  </li>
                  <li>
                    <a href="#trades-kind-currency-interval" class="toc-h2 toc-link" data-title="trades.{kind}.{currency}.{interval}">trades.{kind}.{currency}.{interval}</a>
                  </li>
                  <li>
                    <a href="#user-access_log" class="toc-h2 toc-link" data-title="user.access_log">user.access_log</a>
                  </li>
                  <li>
                    <a href="#user-changes-instrument_name-interval" class="toc-h2 toc-link" data-title="user.changes.{instrument_name}.{interval}">user.changes.{instrument_name}.{interval}</a>
                  </li>
                  <li>
                    <a href="#user-changes-kind-currency-interval" class="toc-h2 toc-link" data-title="user.changes.{kind}.{currency}.{interval}">user.changes.{kind}.{currency}.{interval}</a>
                  </li>
                  <li>
                    <a href="#user-combo_trades-instrument_name-interval" class="toc-h2 toc-link" data-title="user.combo_trades.{instrument_name}.{interval}">user.combo_trades.{instrument_name}.{interval}</a>
                  </li>
                  <li>
                    <a href="#user-combo_trades-kind-currency-interval" class="toc-h2 toc-link" data-title="user.combo_trades.{kind}.{currency}.{interval}">user.combo_trades.{kind}.{currency}.{interval}</a>
                  </li>
                  <li>
                    <a href="#user-lock" class="toc-h2 toc-link" data-title="user.lock">user.lock</a>
                  </li>
                  <li>
                    <a href="#user-mmp_trigger-index_name" class="toc-h2 toc-link" data-title="user.mmp_trigger.{index_name}">user.mmp_trigger.{index_name}</a>
                  </li>
                  <li>
                    <a href="#user-orders-instrument_name-raw" class="toc-h2 toc-link" data-title="user.orders.{instrument_name}.raw">user.orders.{instrument_name}.raw</a>
                  </li>
                  <li>
                    <a href="#user-orders-instrument_name-interval" class="toc-h2 toc-link" data-title="user.orders.{instrument_name}.{interval}">user.orders.{instrument_name}.{interval}</a>
                  </li>
                  <li>
                    <a href="#user-orders-kind-currency-raw" class="toc-h2 toc-link" data-title="user.orders.{kind}.{currency}.raw">user.orders.{kind}.{currency}.raw</a>
                  </li>
                  <li>
                    <a href="#user-orders-kind-currency-interval" class="toc-h2 toc-link" data-title="user.orders.{kind}.{currency}.{interval}">user.orders.{kind}.{currency}.{interval}</a>
                  </li>
                  <li>
                    <a href="#user-portfolio-currency" class="toc-h2 toc-link" data-title="user.portfolio.{currency}">user.portfolio.{currency}</a>
                  </li>
                  <li>
                    <a href="#user-trades-instrument_name-interval" class="toc-h2 toc-link" data-title="user.trades.{instrument_name}.{interval}">user.trades.{instrument_name}.{interval}</a>
                  </li>
                  <li>
                    <a href="#user-trades-kind-currency-interval" class="toc-h2 toc-link" data-title="user.trades.{kind}.{currency}.{interval}">user.trades.{kind}.{currency}.{interval}</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#rpc-error-codes" class="toc-h1 toc-link" data-title="RPC Error Codes">RPC Error Codes</a>
          </li>
          <li>
            <a href="#fix-api" class="toc-h1 toc-link" data-title="FIX API">FIX API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#logon-a" class="toc-h2 toc-link" data-title="Logon(A)"><code>Logon</code>(<code>A</code>)</a>
                  </li>
                  <li>
                    <a href="#logout-5" class="toc-h2 toc-link" data-title="Logout(5)"><code>Logout</code>(<code>5</code>)</a>
                  </li>
                  <li>
                    <a href="#heartbeat-0" class="toc-h2 toc-link" data-title="Heartbeat(0)"><code>Heartbeat</code>(<code>0</code>)</a>
                  </li>
                  <li>
                    <a href="#test-request-1" class="toc-h2 toc-link" data-title="Test Request(1)"><code>Test Request</code>(<code>1</code>)</a>
                  </li>
                  <li>
                    <a href="#resend-request-2" class="toc-h2 toc-link" data-title="Resend Request(2)"><code>Resend Request</code>(<code>2</code>)</a>
                  </li>
                  <li>
                    <a href="#reject-3" class="toc-h2 toc-link" data-title="Reject(3)"><code>Reject</code>(<code>3</code>)</a>
                  </li>
                  <li>
                    <a href="#sequence-reset-4" class="toc-h2 toc-link" data-title="Sequence Reset(4)"><code>Sequence Reset</code>(<code>4</code>)</a>
                  </li>
                  <li>
                    <a href="#security-list-request-x" class="toc-h2 toc-link" data-title="Security List Request(x)"><code>Security List Request</code>(<code>x</code>)</a>
                  </li>
                  <li>
                    <a href="#security-list-y" class="toc-h2 toc-link" data-title="Security List(y)"><code>Security List</code>(<code>y</code>)</a>
                  </li>
                  <li>
                    <a href="#market-data-request-v" class="toc-h2 toc-link" data-title="Market Data Request(V)"><code>Market Data Request</code>(<code>V</code>)</a>
                  </li>
                  <li>
                    <a href="#market-data-request-reject-y" class="toc-h2 toc-link" data-title="Market Data Request Reject(Y)"><code>Market Data Request Reject</code>(<code>Y</code>)</a>
                  </li>
                  <li>
                    <a href="#market-data-snapshot-full-refresh-w" class="toc-h2 toc-link" data-title="Market Data Snapshot/Full Refresh(W)"><code>Market Data Snapshot/Full Refresh</code>(<code>W</code>)</a>
                  </li>
                  <li>
                    <a href="#market-data-incremental-refresh-x" class="toc-h2 toc-link" data-title="Market Data Incremental Refresh(X)"><code>Market Data Incremental Refresh</code>(<code>X</code>)</a>
                  </li>
                  <li>
                    <a href="#new-order-single-d" class="toc-h2 toc-link" data-title="New Order Single(D)"><code>New Order Single</code>(<code>D</code>)</a>
                  </li>
                  <li>
                    <a href="#order-cancel-request-f" class="toc-h2 toc-link" data-title="Order Cancel Request(F)"><code>Order Cancel Request</code>(<code>F</code>)</a>
                  </li>
                  <li>
                    <a href="#order-cancel-reject-9" class="toc-h2 toc-link" data-title="Order Cancel Reject(9)"><code>Order Cancel Reject</code>(<code>9</code>)</a>
                  </li>
                  <li>
                    <a href="#order-mass-cancel-request-q" class="toc-h2 toc-link" data-title="Order Mass Cancel Request(q)"><code>Order Mass Cancel Request</code>(<code>q</code>)</a>
                  </li>
                  <li>
                    <a href="#order-mass-cancel-report-r" class="toc-h2 toc-link" data-title="Order Mass Cancel Report(r)"><code>Order Mass Cancel Report</code>(<code>r</code>)</a>
                  </li>
                  <li>
                    <a href="#order-mass-status-request-af" class="toc-h2 toc-link" data-title="Order Mass Status Request(AF)"><code>Order Mass Status Request</code>(<code>AF</code>)</a>
                  </li>
                  <li>
                    <a href="#request-for-positions-an" class="toc-h2 toc-link" data-title="Request For Positions(AN)"><code>Request For Positions</code>(<code>AN</code>)</a>
                  </li>
                  <li>
                    <a href="#position-report-ap" class="toc-h2 toc-link" data-title="Position Report(AP)"><code>Position Report</code>(<code>AP</code>)</a>
                  </li>
                  <li>
                    <a href="#user-request-be" class="toc-h2 toc-link" data-title="User Request(BE)"><code>User Request</code>(<code>BE</code>)</a>
                  </li>
                  <li>
                    <a href="#user-response-bf" class="toc-h2 toc-link" data-title="User Response(BF)"><code>User Response</code>(<code>BF</code>)</a>
                  </li>
                  <li>
                    <a href="#order-cancel-replace-request-g" class="toc-h2 toc-link" data-title="Order Cancel/Replace Request(G)"><code>Order Cancel/Replace Request</code>(<code>G</code>)</a>
                  </li>
                  <li>
                    <a href="#execution-reports-8-about-order-changes" class="toc-h2 toc-link" data-title="Execution Reports(8) about order changes"><code>Execution Reports</code>(<code>8</code>) about order changes</a>
                  </li>
                  <li>
                    <a href="#security-status-request-e" class="toc-h2 toc-link" data-title="Security Status Request(e)"><code>Security Status Request</code>(<code>e</code>)</a>
                  </li>
                  <li>
                    <a href="#security-status-f" class="toc-h2 toc-link" data-title="Security Status (f)"><code>Security Status</code> (<code>f</code>)</a>
                  </li>
                  <li>
                    <a href="#mmprotection-limits-mm" class="toc-h2 toc-link" data-title="MMProtection Limits (MM)"><code>MMProtection Limits (MM)</code></a>
                  </li>
                  <li>
                    <a href="#mmprotection-limits-result-reject-mr" class="toc-h2 toc-link" data-title="MMProtection Limits Result/Reject (MR)"><code>MMProtection Limits Result/Reject</code> (<code>MR</code>)</a>
                  </li>
                  <li>
                    <a href="#mmprotection-reset-mz" class="toc-h2 toc-link" data-title="MMProtection Reset (MZ)"><code>MMProtection Reset</code> (<code>MZ</code>)</a>
                  </li>
                  <li>
                    <a href="#security-definition-request-c" class="toc-h2 toc-link" data-title="Security Definition Request (c)"><code>Security Definition Request</code> (<code>c</code>)</a>
                  </li>
                  <li>
                    <a href="#security-definition-d" class="toc-h2 toc-link" data-title="Security Definition (d)"><code>Security Definition</code> (<code>d</code>)</a>
                  </li>
                  <li>
                    <a href="#quote-request-r" class="toc-h2 toc-link" data-title="Quote Request (R)"><code>Quote Request</code> (<code>R</code>)</a>
                  </li>
                  <li>
                    <a href="#quote-request-reject-ag" class="toc-h2 toc-link" data-title="Quote Request Reject (AG)"><code>Quote Request Reject</code> (<code>AG</code>)</a>
                  </li>
                  <li>
                    <a href="#quote-status-report-ai" class="toc-h2 toc-link" data-title="Quote Status Report (AI)"><code>Quote Status Report</code> (<code>AI</code>)</a>
                  </li>
                  <li>
                    <a href="#rfq-request-ah" class="toc-h2 toc-link" data-title="RFQ Request (AH)"><code>RFQ Request</code> (<code>AH</code>)</a>
                  </li>
                  <li>
                    <a href="#tradecapturereportrequest-ad" class="toc-h2 toc-link" data-title="TradeCaptureReportRequest (AD)"><code>TradeCaptureReportRequest</code> (<code>AD</code>)</a>
                  </li>
                  <li>
                    <a href="#tradecapturereportrequestack-aq" class="toc-h2 toc-link" data-title="TradeCaptureReportRequestAck (AQ)"><code>TradeCaptureReportRequestAck</code> (<code>AQ</code>)</a>
                  </li>
                  <li>
                    <a href="#tradecapturereport-ae" class="toc-h2 toc-link" data-title="TradeCaptureReport (AE)"><code>TradeCaptureReport</code> (<code>AE</code>)</a>
                  </li>
                  <li>
                    <a href="#mass-quote-i" class="toc-h2 toc-link" data-title="Mass Quote (i)"><code>Mass Quote</code> (<code>i</code>)</a>
                  </li>
                  <li>
                    <a href="#mass-quote-acknowledgement-b" class="toc-h2 toc-link" data-title="Mass Quote Acknowledgement (b)"><code>Mass Quote Acknowledgement</code> (<code>b</code>)</a>
                  </li>
                  <li>
                    <a href="#quote-cancel-z" class="toc-h2 toc-link" data-title="Quote Cancel (Z)"><code>Quote Cancel</code> (<code>Z</code>)</a>
                  </li>
                  <li>
                    <a href="#changes-log" class="toc-h2 toc-link" data-title="Changes Log">Changes Log</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https://deribit.com'>To the Deribit website</a></li>
            <li><a href='https://github.com/slatedocs/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='deribit-api-v2-1-1'>Deribit API v2.1.1</h1><h1 id='overview'>Overview</h1>
<p>Deribit provides three different interfaces to access the API:</p>

<ul>
<li><a href="#json-rpc">JSON-RPC over Websocket</a></li>
<li><a href="#json-rpc">JSON-RPC over HTTP</a></li>
<li><a href="#fix-api">FIX</a> (Financial Information eXchange)</li>
</ul>

<p>Deribit features a testing environment, <code>test.deribit.com</code>, which can be used to test the API. For this reason all examples in this documentation refer to that environment. To reach the production environment it should be changed to <code>www.deribit.com</code>. Note that both environments are separate, which means that they require separate accounts and credentials (API keys) to authenticate using private methods - test credentials do not work in production environment and vice versa.</p>

<p>To see the list of your API keys check  <strong>Account &gt; API</strong> tab, where you&#39;ll also find a link to API Console (<code>&gt;_ Api Console</code>) which allows you to test JSON-RPC API, both via HTTP and Websocket.</p>

<ul>
<li><a href="#rpc-error-codes">Error Codes</a> (HTTP and Websocket RPC Error codes)</li>
</ul>
<h2 id='naming'>Naming</h2>
<p>Deribit tradeable assets or instruments use the following system of naming:</p>

<table><thead>
<tr>
<th>Kind</th>
<th>Examples</th>
<th>Template</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>Future</td>
<td><code>BTC-25MAR23</code>, <code>BTC-5AUG23</code></td>
<td><code>BTC-DMMMYY</code></td>
<td><code>BTC</code> is currency, <code>DMMMYY</code> is expiration date, <code>D</code> stands for day of month (1 or 2 digits), <code>MMM</code> - month (3 first letters in English), <code>YY</code> stands for year.</td>
</tr>
<tr>
<td>Perpetual</td>
<td><code>BTC-PERPETUAL</code></td>
<td></td>
<td>Perpetual contract for currency <code>BTC</code>.</td>
</tr>
<tr>
<td>Option</td>
<td><code>BTC-25MAR23-420-C</code>, <code>BTC-5AUG23-580-P</code></td>
<td><code>BTC-DMMMYY-STRIKE-K</code></td>
<td><code>STRIKE</code> is option strike price in USD. Template <code>K</code> is option kind: <code>C</code> for call options or <code>P</code> for put options. <p><b>In Linear Options <code>d</code> is used as a decimal point for decimal strikes.</p></b><p><b>Example: </b>For <code>XRP_USDC-30JUN23-0d625-C</code> strike is 0.625.</p></td>
</tr>
</tbody></table>
<h2 id='rate-limits'>Rate Limits</h2>
<p>Rate limits are described in <a href="https://support.deribit.com/hc/en-us/articles/25944617523357-Rate-Limits">separate document</a>.</p>
<h1 id='json-rpc'>JSON-RPC</h1>
<p>JSON-RPC is a light-weight remote procedure call (RPC) protocol. The 
<a href="https://www.jsonrpc.org/specification">JSON-RPC specification</a> defines the data
structures that are used for the messages that are exchanged between client
and server, as well as the rules around their processing. JSON-RPC uses
JSON (RFC 4627) as data format.</p>

<p>JSON-RPC is transport agnostic: it does not specify which transport
mechanism must be used. The Deribit API supports both Websocket (preferred)
and HTTP (with limitations: subscriptions are not supported over HTTP).</p>
<h2 id='request-messages'>Request messages</h2>
<blockquote>
<p>An example of a request message:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8066</span><span class="p">,</span><span class="w">
    </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"public/ticker"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"instrument"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-24AUG18-6500-P"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>According to the JSON-RPC specification the requests must be JSON objects with the following fields.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The version of the JSON-RPC spec: &quot;2.0&quot;</td>
</tr>
<tr>
<td>id</td>
<td>integer or string</td>
<td>An identifier of the request. If it is included, then the response will contain the same identifier</td>
</tr>
<tr>
<td>method</td>
<td>string</td>
<td>The method to be invoked</td>
</tr>
<tr>
<td>params</td>
<td>object</td>
<td>The parameters values for the method. The field names must match with the expected parameter names. The parameters that are expected are described in the documentation for the methods, below.</td>
</tr>
</tbody></table>

<aside class="warning">
The JSON-RPC specification describes two features
that are currently not supported by the API:

<ul>
<li>Specification of parameter values by position</li>
<li>Batch requests</li>
</ul>

</aside>
<h2 id='response-messages'>Response messages</h2>
<blockquote>
<p>An example of a response message:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5239</span><span class="p">,</span><span class="w">
    </span><span class="nl">"testnet"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"coin_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BITCOIN"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"currency_long"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bitcoin"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fee_precision"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
            </span><span class="nl">"min_confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"min_withdrawal_fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"withdrawal_fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
            </span><span class="nl">"withdrawal_priorities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.15</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"very_low"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"very_high"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"usIn"</span><span class="p">:</span><span class="w"> </span><span class="mi">1535043730126248</span><span class="p">,</span><span class="w">
    </span><span class="nl">"usOut"</span><span class="p">:</span><span class="w"> </span><span class="mi">1535043730126250</span><span class="p">,</span><span class="w">
    </span><span class="nl">"usDiff"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The JSON-RPC API always responds with a JSON object with the following fields.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>This is the same id that was sent in the request.</td>
</tr>
<tr>
<td>result</td>
<td>any</td>
<td>If successful, the result of the API call. The format for the result is described with each method.</td>
</tr>
<tr>
<td>error</td>
<td>error object</td>
<td>Only present if there was an error invoking the method. The error object is described below.</td>
</tr>
<tr>
<td>testnet</td>
<td>boolean</td>
<td>Indicates whether the API in use is actually the test API.  <code>false</code> for production server, <code>true</code> for test server.</td>
</tr>
<tr>
<td>usIn</td>
<td>integer</td>
<td>The timestamp when the requests was received (microseconds since the Unix epoch)</td>
</tr>
<tr>
<td>usOut</td>
<td>integer</td>
<td>The timestamp when the response was sent (microseconds since the Unix epoch)</td>
</tr>
<tr>
<td>usDiff</td>
<td>integer</td>
<td>The number of microseconds that was spent handling the request</td>
</tr>
</tbody></table>

<aside class="notice">
The fields <code>testnet</code>, <code>usIn</code>, <code>usOut</code> and
<code>usDiff</code> are not part of the JSON-RPC standard. 
<p>In order not to clutter the examples they will generally be omitted from
the example code.</p>
</aside>

<blockquote>
<p>An example of a response with an error:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8163</span><span class="p">,</span><span class="w">
    </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">11050</span><span class="p">,</span><span class="w">
        </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bad_request"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"testnet"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"usIn"</span><span class="p">:</span><span class="w"> </span><span class="mi">1535037392434763</span><span class="p">,</span><span class="w">
    </span><span class="nl">"usOut"</span><span class="p">:</span><span class="w"> </span><span class="mi">1535037392448119</span><span class="p">,</span><span class="w">
    </span><span class="nl">"usDiff"</span><span class="p">:</span><span class="w"> </span><span class="mi">13356</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>In case of an error the response message will contain the error field, with
as value an object with the following with the following fields:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>integer</td>
<td>A number that indicates the kind of error.</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>A short description that indicates the kind of error.</td>
</tr>
<tr>
<td>data</td>
<td>any</td>
<td>Additional data about the error. This field may be omitted.</td>
</tr>
</tbody></table>
<h2 id='detailed-response-for-private-cancel_all-and-private-cancel_by_label-methods'>Detailed response for <code>private/cancel_all*</code> and <code>private/cancel_by_label</code> methods</h2>
<blockquote>
<p>An example of a positive execution of cancellation trigger orders in ETH-PERPETUAL when one order was cancelled:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"trigger"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-PERPETUAL"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="nl">"web"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"triggered"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"trigger_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">1628.7</span><span class="p">,</span><span class="w">
      </span><span class="nl">"trigger"</span><span class="p">:</span><span class="w"> </span><span class="s2">"last_price"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_in_force"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"replaced"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market_price"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stop_market"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"untriggered"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-SLTS-250756"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"max_show"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634206091071</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_rebalance"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_liquidation"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634206000230</span><span class="p">,</span><span class="w">
      </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
    </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>When boolean parameter <code>detailed</code> with value <code>true</code> is added to <code>cancel_all*</code> or <code>cancel_by_label</code> methods response format
is changed. Instead of the number of cancelled orders there is a returned list of execution reports objects for every requested instrument, order type and currency: 
results of positive or erroneous execution. It is done this way because internally during processing 
cancel_all request there are done separate requests for every currency, order type and book.</p>
<h3 id='positive-execution-report'>Positive execution report</h3>
<aside class="notice">
It is returned only when there were orders that were cancelled!
</aside>

<p>Positive execution report is object with fields:
<ul>
<li><code>currency</code></li>
<li><code>type</code> - <code>trigger</code> or <code>limit</code></li>
<li><code>instrument_name</code></li>
<li><code>result</code> - array of orders formatted like in <code>private/cancel</code> response</li>
</ul></p>
<h3 id='erroneous-execution-report'>Erroneous execution report</h3>
<p>Erroneous execution report is object with fields:
<ul>
<li><code>currency</code></li>
<li><code>type</code> - <code>trigger</code> or <code>limit</code></li>
<li><code>instrument_name</code> - it is attached only if the error is related to specific instrument</li>
<li><code>error</code> - error message formatted as usual</li>
</ul></p>

<blockquote>
<p>An example of information that cancel of limit orders in ETH failed:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w"> 
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"matching_engine_queue_full"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">10047</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='security-keys'>Security keys</h2>
<blockquote>
<p>Request that may require security key authorization</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"private/list_api_keys"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Some methods may require additional authorization using Security Keys (depending on the user&#39;s account configuration). 
In this case, instead of a normal response, there is a returned response with field <code>security_key_authorization_required</code> set to <code>true</code>. 
When that happens the client is required to resend a request with additional parameters: <code>authorization_data</code> and <code>challenge</code>.</p>

<p>For example, after client sends request that needs Security Key confirmation, like <code>private/list_api_keys</code> server return (non error) response with field: <code>security_key_authorization_required</code> set to <code>true</code>. Other fields are attached too:
<ul>
<li><code>security_keys</code> -  a list of security keys that can be used for authentication. Fields in Security Key object are:
<ul>
  <li><code>type</code> - type of security key: <code>tfa</code> for TOTP Two Factor Authentication</li>
  <li><code>name</code> - name of security key</li>
  </ul></li>
<li><code>rp_id</code> - relying party identifier (need to be used with WebAuthn)</li>
<li><code>challenge</code> - this string needs to be resend, it is valid for 1 minute</li>
</ul></p>

<blockquote>
<p>Example of response with request to make Security Key authorization:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"security_keys"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tfa"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tfa"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"security_key_authorization_required"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rp_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.deribit.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"challenge"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+Di4SKN9VykrSoHlZO2KF3LEyEZF4ih9CZXVuudQiKQ="</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='tfa-authorization'>TFA authorization</h3>
<p>When the user chooses TFA authorization, he should read the TFA code from his application, and it should be added to original requests parameters as <code>authorization_data</code>. It is required to add to parameters <code>challenge</code> too. Then request should be repeated with those updated parameters.</p>

<blockquote>
<p>Example of request when TFA code is <code>602051</code>:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">88</span><span class="p">,</span><span class="w">
    </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"private/list_api_keys"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"authorization_data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"602051"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"challenge"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+Di4SKN9VykrSoHlZO2KF3LEyEZF4ih9CZXVuudQiKQ="</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='errors'>Errors:</h3>
<p>When there is an error related to the Security Key authorization, a response with the error <code>security_key_authorization_error</code> (code: 13668) is returned.  It will have a <code>data.reason</code> field that possible values are:
<ul>
<li><code>tfa_code_not_matched</code> - provided TFA code was invalid</li>
<li><code>used_tfa_code</code> - provided TFA code was already used</li>
<li><code>challenge_timeout</code> - challenge is invalid</li>
<li><code>tfa_code_is_required</code> - provided TFA code was empty</li>
</ul></p>

<p>When an error occurrs, the request needs to be repeated without authorization_data to obtain a new challenge.</p>

<blockquote>
<p>Example of erroneous response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"error"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"message"</span><span class="p">:</span><span class="s2">"security_key_authorization_error"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"reason"</span><span class="p">:</span><span class="s2">"tfa_code_not_matched"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"code"</span><span class="p">:</span><span class="mi">13668</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h2 id='notifications'>Notifications</h2>
<blockquote>
<p>An example of a notification:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deribit_price_index.btc_usd"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1535098298227</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">6521.17</span><span class="p">,</span><span class="w">
            </span><span class="nl">"index_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc_usd"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API users can subscribe to certain types of notifications. This means that they
will receive JSON-RPC notification-messages from the server when certain
events occur, such as changes to the index price or changes to the order
book for a certain instrument. </p>

<p>The API methods <a href="#public-subscribe">public/subscribe</a> and
<a href="#private-subscribe">private/subscribe</a> are used to set up a subscription.
Since HTTP does not support the sending of messages from server to client,
these methods are only available when using the Websocket transport
mechanism.</p>

<p>At the moment of subscription a &quot;channel&quot;
must be specified. The channel determines the type of events that will be
received.  See <a href="#subscriptions">Subscriptions</a> for more details about the channels.</p>

<p>In accordance with the JSON-RPC specification, the format of a notification 
is that of a request message without an <code>id</code> field. The value of the
<code>method</code> field will always be <code>&quot;subscription&quot;</code>. The
<code>params</code> field will always be an object with 2 members:
<code>channel</code> and <code>data</code>. The value of the
<code>channel</code> member is the name of the channel (a string). The
value of the <code>data</code> member is an object that contains data 
that is specific for the channel.</p>
<h2 id='authentication'>Authentication</h2>
<blockquote>
<p>An example of a JSON request with token:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5647</span><span class="p">,</span><span class="w">
    </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"private/get_subaccounts"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1582628593469.1MbQ-J_4.CBP-OqOwm_FBdMYj4cRK2dMXyHPfBtXGpzLxhWg31nHu3H_Q60FpE5_vqUBEQGSiMrIGzw3nC37NMb9d1tpBNqBOM_Ql9pXOmgtV9Yj3Pq1c6BqC6dU6eTxHMFO67x8GpJxqw_QcKP5IepwGBD-gfKSHfAv9AEnLJkNu3JkMJBdLToY1lrBnuedF3dU_uARm"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>The API consists of <code>public</code> and <code>private</code> methods. The public methods do not
require authentication. The private methods use OAuth 2.0 authentication.
This means that a valid OAuth access token must be included in the request, which
can be achieved by calling method <a href="#public-auth">public/auth</a>.</p>

<p>When the token was assigned to the user, it should be passed along, with other request parameters, back to the server:</p>

<table><thead>
<tr>
<th>Connection type</th>
<th>Access token placement</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Websocket</strong></td>
<td>Inside request JSON parameters, as an <code>access_token</code> field</td>
</tr>
<tr>
<td><strong>HTTP (REST)</strong></td>
<td>Header <code>Authorization: bearer</code><code>Token</code><code></code> value</td>
</tr>
</tbody></table>
<h3 id='additional-authorization-method-basic-user-credentials'>Additional authorization method - basic user credentials</h3>
<p>Every <code>private</code> method could be accessed by providing, inside HTTP <code>Authorization: Basic XXX</code> header, values with
user <code>ClientId</code> and assigned <code>ClientSecret</code> (both values can be found on the API page on the Deribit website) encoded with <code>Base64</code>:</p>

<p><code>Authorization: Basic BASE64(<code>ClientId</code> + <code>:</code> + <code>ClientSecret</code>)</code></p>

<aside class="notice">
This is the easiest way of authenticating HTTP (REST) requests. If you don't like the fact that you are sending ClientSecret over HTTPS connection, you can consider using one of the authorization methods described below.
</aside>
<h3 id='additional-authorization-method-deribit-signature-credentials'>Additional authorization method - Deribit signature credentials</h3>
<p>The Derbit service provides a dedicated authorization method, which harnesses user generated signature to increase
security level for passing request data. Generated value is passed inside <code>Authorization</code> header, coded as:</p>

<p><code>Authorization: deri-hmac-sha256 id=<code>ClientId</code>,ts=<code>Timestamp</code>,sig=<code>Signature</code>,nonce=<code>Nonce</code></code></p>

<p>where:</p>

<table><thead>
<tr>
<th>Deribit credential</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><em>ClientId</em></td>
<td>Can be found on the API page on the Deribit website (the user can configure up to 8 different <code>IDs</code> - with different privileges)</td>
</tr>
<tr>
<td><em>Timestamp</em></td>
<td>Time when the request was generated - given as <strong>milliseconds</strong>. It&#39;s valid for <strong>60 seconds</strong> since generation, after that time any request with an old timestamp will be rejected.</td>
</tr>
<tr>
<td><em>Signature</em></td>
<td>Value for signature calculated as described below</td>
</tr>
<tr>
<td><em>Nonce</em></td>
<td>Single usage, user generated initialization vector for the server token</td>
</tr>
</tbody></table>

<p>The signature is generated by the following formula:</p>

<p><code> RequestData = UPPERCASE(HTTP_METHOD())  + &quot;\n&quot; + URI() + &quot;\n&quot; + RequestBody + &quot;\n&quot;;</code></br>
<code> StringToSign = Timestamp + &quot;\n&quot; + Nonce + &quot;\n&quot; + RequestData;</code></br>
<code> Signature = HEX_STRING( HMAC-SHA256( ClientSecret, StringToSign ) );</code></br></p>

<p>Note the <em>newline</em> characters in <code>RequestData</code> and <code>StringToSign</code> variables. If <code>RequestBody</code> is omitted in <code>RequestData</code>, it&#39;s treated as an empty string, so these three newline characters <strong>must</strong> always be present.</p>

<p>Example using shell with <code>openssl</code> tool:</p>

<p><code>&nbsp;&nbsp;&nbsp;&nbsp;ClientId=AMANDA</code></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;ClientSecret=AMANDASECRECT</code></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Timestamp=$( date +%s000 )</code></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Nonce=$( cat /dev/urandom | tr -dc &#39;a-z0-9&#39; | head -c8 )</code></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;URI=&quot;/api/v2/private/get_account_summary?currency=BTC&quot;</code></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;HttpMethod=GET</code></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Body=&quot;&quot;</code></br></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Signature=$( echo -ne &quot;${Timestamp}\n${Nonce}\n${HttpMethod}\n${URI}\n${Body}\n&quot; | openssl sha256 -r -hmac &quot;$ClientSecret&quot; | cut -f1 -d&#39; &#39; )</code></br></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;echo $Signature</code></br></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;shell output&gt; 9bfbc51a2bc372d72cc396cf1a213dc78d42eb74cb7dc272351833ad0de276ab  (<strong>WARNING</strong>: Exact value depends on current timestamp and client credentials)</code></br></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;curl -s -X ${HttpMethod} -H &quot;Authorization: deri-hmac-sha256 id=${ClientId},ts=${Timestamp},nonce=${Nonce},sig=${Signature}&quot; &quot;https://www.deribit.com${URI}&quot;</code></br></br></p>
<h3 id='additional-authorization-method-signature-credentials-websocket-api'>Additional authorization method - signature credentials (WebSocket API)</h3>
<blockquote>
<p>Example of authorization using <code>client_signature</code>:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code><span class="c"># see javascript or python example</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// using CryptoJS library</span>
<span class="kd">var</span> <span class="nx">clientId</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">AMANDA</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">clientSecret</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">AMANDASECRECT</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">timestamp</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">nonce</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">abcd</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">CryptoJS</span><span class="p">.</span><span class="nx">HmacSHA256</span><span class="p">(</span><span class="s2">`</span><span class="p">${</span><span class="nx">timestamp</span><span class="p">}</span><span class="s2">\n</span><span class="p">${</span><span class="nx">nonce</span><span class="p">}</span><span class="s2">\n</span><span class="p">${</span><span class="nx">data</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span> <span class="nx">accessSecret</span><span class="p">).</span><span class="nx">toString</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">4316</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/auth</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">grant_type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">client_signature</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">client_id</span><span class="dl">"</span><span class="p">:</span> <span class="nx">clientId</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">timestamp</span><span class="dl">"</span><span class="p">:</span> <span class="nx">timestamp</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">signature</span><span class="dl">"</span><span class="p">:</span> <span class="nx">signature</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">nonce</span><span class="dl">"</span><span class="p">:</span> <span class="nx">nonce</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">:</span> <span class="nx">data</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="n">clientId</span> <span class="o">=</span> <span class="s">"AMANDA"</span>
<span class="n">clientSecret</span> <span class="o">=</span> <span class="s">"AMANDASECRECT"</span>
<span class="n">timestamp</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">().</span><span class="n">timestamp</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">nonce</span> <span class="o">=</span> <span class="s">"abcd"</span>
<span class="n">data</span> <span class="o">=</span> <span class="s">""</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="p">.</span><span class="n">new</span><span class="p">(</span>
    <span class="nb">bytes</span><span class="p">(</span><span class="n">clientSecret</span><span class="p">,</span> <span class="s">"latin-1"</span><span class="p">),</span>
    <span class="n">msg</span><span class="o">=</span><span class="nb">bytes</span><span class="p">(</span><span class="s">'{}</span><span class="se">\n</span><span class="s">{}</span><span class="se">\n</span><span class="s">{}'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">timestamp</span><span class="p">,</span> <span class="n">nonce</span><span class="p">,</span> <span class="n">data</span><span class="p">),</span> <span class="s">"latin-1"</span><span class="p">),</span>
    <span class="n">digestmod</span><span class="o">=</span><span class="n">hashlib</span><span class="p">.</span><span class="n">sha256</span>
<span class="p">).</span><span class="n">hexdigest</span><span class="p">().</span><span class="n">lower</span><span class="p">()</span>

<span class="n">msg</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
    <span class="s">"id"</span><span class="p">:</span> <span class="mi">8748</span><span class="p">,</span>
    <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/auth"</span><span class="p">,</span>
    <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"grant_type"</span><span class="p">:</span> <span class="s">"client_signature"</span><span class="p">,</span>
        <span class="s">"client_id"</span><span class="p">:</span> <span class="n">clientId</span><span class="p">,</span>
        <span class="s">"timestamp"</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>
        <span class="s">"signature"</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
        <span class="s">"nonce"</span><span class="p">:</span> <span class="n">nonce</span><span class="p">,</span>
        <span class="s">"data"</span><span class="p">:</span> <span class="n">data</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
        <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
            <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<p>When connecting through Websocket, user can request for authorization using <code>client_signature</code> method, which requires providing following parameters (as a part of JSON request):</p>

<table><thead>
<tr>
<th>JSON parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><em>grant_type</em></td>
<td>Must be <strong>client_signature</strong></td>
</tr>
<tr>
<td><em>client_id</em></td>
<td>Can be found on the API page on the Deribit website (the user can configure up to 8 different <code>IDs</code>  - with different privileges)</td>
</tr>
<tr>
<td><em>timestamp</em></td>
<td>Time when the request was generated - given as <strong>milliseconds</strong>. It&#39;s valid for <strong>60 seconds</strong> since generation, after that time any request with an old timestamp will be rejected.</td>
</tr>
<tr>
<td><em>signature</em></td>
<td>Value for signature calculated as described below</td>
</tr>
<tr>
<td><em>nonce</em></td>
<td>Single usage, user generated initialization vector for the server token</td>
</tr>
<tr>
<td><em>data</em></td>
<td><strong>Optional</strong> field, which contains any user specific value</td>
</tr>
</tbody></table>

<p>The signature is generated by the following formula:</p>

<p><code> StringToSign = Timestamp + &quot;\n&quot; + Nonce + &quot;\n&quot; + Data;</code></br>
<code> Signature = HEX_STRING( HMAC-SHA256( ClientSecret, StringToSign ) );</code></br></p>

<p>Note the <em>newline</em> characters separating parts of the <code>StringToSign</code> variable. If <code>Data</code> is omitted, it&#39;s treated as an empty string, so these two newline characters <strong>must</strong> always be present.</p>

<p>Example using shell with <code>openssl</code> tool:</p>

<p><code>&nbsp;&nbsp;&nbsp;&nbsp;ClientId=AMANDA</code></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;ClientSecret=AMANDASECRECT</code></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Timestamp=$( date +%s000 ) # e.g. 1576074319000 </code></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Nonce=$( cat /dev/urandom | tr -dc &#39;a-z0-9&#39; | head -c8 ) # e.g. 1iqt2wls </code></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Data=&quot;&quot;</code></br></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;Signature=$( echo -ne &quot;${Timestamp}\n${Nonce}\n${Data}&quot; | openssl sha256 -r -hmac &quot;$ClientSecret&quot; | cut -f1 -d&#39; &#39; )</code></br></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;echo $Signature</code></br></br>
<code>&nbsp;&nbsp;&nbsp;&nbsp;shell output&gt; 56590594f97921b09b18f166befe0d1319b198bbcdad7ca73382de2f88fe9aa1  (<strong>WARNING</strong>: Exact value depends on current timestamp and client credentials)</code></br></br></p>

<p>You can also check the signature value using some online tools like, e.g: <a href="https://codebeautify.org/hmac-generator">https://codebeautify.org/hmac-generator</a> (remember that you <strong>should use</strong> it only with your <strong>test credentials</strong>).</p>

<p>Here&#39;s a sample JSON request created using the values from the example above:</p>

<p><code>
{                            </br>
&nbsp;&nbsp;&quot;jsonrpc&quot; : &quot;2.0&quot;,         </br>
&nbsp;&nbsp;&quot;id&quot; : 9929,               </br>
&nbsp;&nbsp;&quot;method&quot; : &quot;public/auth&quot;,  </br>
&nbsp;&nbsp;&quot;params&quot; :                 </br>
&nbsp;&nbsp;{                        </br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;grant_type&quot; : &quot;client_signature&quot;,   </br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;client_id&quot; : &quot;AMANDA&quot;,         </br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;timestamp&quot;: 1576074319000,        </br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;nonce&quot;: &quot;1iqt2wls&quot;,                 </br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;data&quot;: &quot;&quot;,                          </br>
&nbsp;&nbsp;&nbsp;&nbsp;&quot;signature&quot; : &quot;56590594f97921b09b18f166befe0d1319b198bbcdad7ca73382de2f88fe9aa1&quot;  </br>
&nbsp;&nbsp;}                        </br>
}
</code></p>
<h2 id='access-scope'>Access scope</h2>
<p>When asking for <code>access token</code>, the user can provide the required access level (called <code>scope</code>) which defines
what type of functionality he/she wants to use, and whether requests are only going to check for some data or
also to update them. 
Scopes are required and checked for <code>private</code> methods, so if you plan to use only <code>public</code> information you
can stay with values assigned by default.</p>

<table><thead>
<tr>
<th>Scope</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><em>mainaccount</em></td>
<td>It is set <strong>automatically</strong> by the server when the currently connecting user (his/her credentials) is the main user, otherwise it&#39;s not included in the final scope.</td>
</tr>
<tr>
<td><em>connection</em></td>
<td>Access with requested parameters is granted when connection is open (or till expiration time). When the connection is closed, user need to repeat the authentication request to get new tokens. It is set and used automatically by the server when neither <strong>connection</strong> nor <strong>session</strong> scope is provided within the request.</td>
</tr>
<tr>
<td><em>session:name</em></td>
<td>The server creates a new session with the <em>name</em> provided by the user, then generates tokens and binds them with the session. Access is granted during session lifetime. It allows users to reconnect to the server and reuse assigned tokens (before their expiration time). Note that only 16 sessions are allowed per user - when the limit is reached, the session with the shortest lifetime is removed.</BR> When using <strong>WebSocket</strong> it also allows (due to the fact that tokens are bound to the created session) skipping providing <code>access_token</code> with every subsequent request.</td>
</tr>
<tr>
<td><em>account:read</em></td>
<td>Access to <strong>account</strong> methods - read only data.</td>
</tr>
<tr>
<td><em>account:read_write</em></td>
<td>Access to <strong>account</strong> methods - allows to manage account settings, add subaccounts, etc.</td>
</tr>
<tr>
<td><em>trade:read</em></td>
<td>Access to <strong>trade</strong> methods - read only data.</td>
</tr>
<tr>
<td><em>trade:read_write</em></td>
<td>Access to <strong>trade</strong> methods - required to create and modify orders.</td>
</tr>
<tr>
<td><em>wallet:read</em></td>
<td>Access to <strong>wallet</strong> methods - read only data.</td>
</tr>
<tr>
<td><em>wallet:read_write</em></td>
<td>Access to <strong>wallet</strong> methods - allows to withdraw, generate new deposit address, etc.</td>
</tr>
<tr>
<td><em>wallet:none</em>, <em>account:none</em>, <em>trade:none</em></td>
<td>Blocked access to specified functionality.</td>
</tr>
<tr>
<td><em>expires:NUMBER</em></td>
<td><strong>Access token</strong> will expire after <code>NUMBER</code> of seconds.</td>
</tr>
<tr>
<td><em>ip:ADDR</em></td>
<td>Token will work with connection from <code>ADDR</code> IPv4 address, when <code>*</code> is provided as an <code>ADDR</code> token will work from all IP addresses.</td>
</tr>
<tr>
<td><em>block_trade:read</em></td>
<td>Access to <strong>block_trade</strong> methods - reading info about block trades - read only data.</td>
</tr>
<tr>
<td><em>block_trade:read_write</em></td>
<td>Access to <strong>block_trade</strong> methods - required to create block trades.</td>
</tr>
<tr>
<td><em>block_rfq:read</em></td>
<td>Access to <strong>block_rfq</strong> methods - reading info about Block RFQs, quotes and available makers - read only data.</td>
</tr>
<tr>
<td><em>block_rfq:read_write</em></td>
<td>Access to <strong>block_rfq</strong> methods - required to create and quote Block RFQs.</td>
</tr>
</tbody></table>

<p><span style="color:red"><strong>NOTICE:</strong></span> Depending on choosing an authentication method (<code>grant type</code>) some scopes could be narrowed by the server or limited by user API key configured scope, e.g. when <code>grant_type = client_credentials</code> and <code>scope = wallet:read_write</code> could be modified by the server as <code>scope = wallet:read</code>.
</br></br>
<strong>The user shouldn&#39;t assume that requested values are blindly accepted and should verify assigned scopes.</strong></p>
<h2 id='creating-editing-removing-api-keys'>Creating/editing/removing API Keys</h2>
<p>Creating, editing and removing API Keys is available only with access tokens with scope <code>account:read_write</code>. Additionally when the methods of the API Key management are called with access token with scope set than server ensures that we do allow to create/remove/manage (or show client secrets in case of <code>private/list_api_keys</code>) the keys up to the same level of the scopes as calling set from access token. If not error <code>scope_exceeded</code> (code: 13403) is returned.</p>
<h2 id='json-rpc-over-websocket'>JSON-RPC over websocket</h2>
<p>Websocket is the preferred transport mechanism for the JSON-RPC API, because
it is faster and because it can support <a href="#subscriptions">subscriptions</a> and
<a href="#private-enable_cancel_on_disconnect">cancel on disconnect</a>. The code examples
that can be found next to each of the methods show how websockets can be
used from Python or Javascript/node.js.</p>
<h2 id='json-rpc-over-http'>JSON-RPC over HTTP</h2>
<p>Besides websockets it is also possible to use the API via HTTP. The code
examples for &#39;shell&#39; show how this can be done using curl. Note that
subscriptions and cancel on disconnect are not supported via HTTP.</p>

<!-- ## Deribit Event Nodes
Deribit has implemented a new feature called "Deribit Event Nodes" to offload traffic from the retail nodes and decrease latency. This feature is dedicated to handling public subscriptions and specific endpoints, allowing unauthorized users to subscribe to "raw" market data, as well as to aggregated ones.

|Supported endpoints|
|-|
|public/test|
|public/ping|
|public/get_time|
|public/set_heartbeat|
|public/disable_heartbeat|
|public/hello|
|public/unsubscribe_all|
|public/subscribe|
|public/unsubscribe|



In order to use Deribit Event Nodes, simply change websocket endpoint from `wss://test.deribit.com/ws/api/v2` to `wss://test.deribit.com/den/ws` for test environment, or change `wss://www.deribit.com/ws/api/v2` to `wss://streams.deribit.com/ws/api/v2` for production environment.
We strongly suggest using Deribit Event Nodes for all public subscriptions. -->
<h1 id='methods'>Methods</h1><h1 id='authentication-2'>Authentication</h1><h2 id='public-auth'>/public/auth</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/auth?client_id=fo7WAPRm4P&amp;client_secret=W0H6FJW4IRPZ1MOQ8FP6KMC5RZDUUKXS&amp;grant_type=client_credentials"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">9929</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/auth</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">grant_type</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">client_credentials</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">client_id</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">fo7WAPRm4P</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">client_secret</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">W0H6FJW4IRPZ1MOQ8FP6KMC5RZDUUKXS</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">9929</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/auth"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"grant_type"</span> <span class="p">:</span> <span class="s">"client_credentials"</span><span class="p">,</span>
    <span class="s">"client_id"</span> <span class="p">:</span> <span class="s">"fo7WAPRm4P"</span><span class="p">,</span>
    <span class="s">"client_secret"</span> <span class="p">:</span> <span class="s">"W0H6FJW4IRPZ1MOQ8FP6KMC5RZDUUKXS"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">9929</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1582628593469.1MbQ-J_4.CBP-OqOwm_FBdMYj4cRK2dMXyHPfBtXGpzLxhWg31nHu3H_Q60FpE5_vqUBEQGSiMrIGzw3nC37NMb9d1tpBNqBOM_Ql9pXOmgtV9Yj3Pq1c6BqC6dU6eTxHMFO67x8GpJxqw_QcKP5IepwGBD-gfKSHfAv9AEnLJkNu3JkMJBdLToY1lrBnuedF3dU_uARm"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">31536000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1582628593469.1GP4rQd0.A9Wa78o5kFRIUP49mScaD1CqHgiK50HOl2VA6kCtWa8BQZU5Dr03BhcbXPNvEh3I_MVixKZXnyoBeKJwLl8LXnfo180ckAiPj3zOclcUu4zkXuF3NNP3sTPcDf1B3C1CwMKkJ1NOcf1yPmRbsrd7hbgQ-hLa40tfx6Oa-85ymm_3Z65LZcnCeLrqlj_A9jM"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"connection mainaccount"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"enabled_features"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve an Oauth access token, to be used for authentication of &#39;private&#39; requests.</p>

<p>Three methods of authentication are supported:</p>

<ul>
<li><code>client_credentials</code> - using the client id and client secret that can be found on the API page on the website</li>
<li><code>client_signature</code> - using the client id that can be found on the API page on the website and user generated signature. The signature is calculated using some fields provided in the request, using formula described here <a href="#additional-authorization-method-signature-credentials-websocket-api">Deribit signature credentials</a></li>
<li><code>refresh_token</code> - using a refresh token that was received from an earlier invocation</li>
</ul>

<p>The response will contain an access token, expiration period (number of seconds that the token is valid) and a refresh token that can
be used to get a new set of tokens.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fauth" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>grant_type</td>
<td>true</td>
<td>string</td>
<td><code>client_credentials</code><br><code>client_signature</code><br><code>refresh_token</code></td>
<td>Method of authentication</td>
</tr>
<tr>
<td>client_id</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Required for grant type <code>client_credentials</code> and <code>client_signature</code></td>
</tr>
<tr>
<td>client_secret</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Required for grant type <code>client_credentials</code></td>
</tr>
<tr>
<td>refresh_token</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Required for grant type <code>refresh_token</code></td>
</tr>
<tr>
<td>timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Required for grant type <code>client_signature</code>, provides time when request has been generated (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>signature</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Required for grant type <code>client_signature</code>; it&#39;s a cryptographic signature calculated over provided fields using user <strong>secret key</strong>. The signature should be calculated as an HMAC (Hash-based Message Authentication Code) with <code>SHA256</code> hash algorithm</td>
</tr>
<tr>
<td>nonce</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Optional for grant type <code>client_signature</code>; delivers user generated initialization vector for the server token</td>
</tr>
<tr>
<td>data</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Optional for grant type <code>client_signature</code>; contains any user specific value</td>
</tr>
<tr>
<td>state</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Will be passed back in the response</td>
</tr>
<tr>
<td>scope</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Describes type of the access for assigned token, possible values: <code>connection</code>, <code>session:name</code>, <code>trade:[read, read_write, none]</code>, <code>wallet:[read, read_write, none]</code>, <code>account:[read, read_write, none]</code>, <code>expires:NUMBER</code>, <code>ip:ADDR</code>.</BR></BR> Details are elucidated in <a href="#access-scope">Access scope</a></td>
</tr>
</tbody></table>
<h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;access_token</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;enabled_features</td>
<td>array of string</td>
<td>List of enabled advanced on-key features. Available options:<br> - <code>restricted_block_trades</code>: Limit the block_trade read the scope of the API key to block trades that have been made using this specific API key<br> - <code>block_trade_approval</code>: Block trades created using this API key require additional user approval.  Methods that use <code>block_rfq</code> scope are not affected by Block Trade approval feature<br></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;expires_in</td>
<td>integer</td>
<td>Token lifetime in seconds</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;google_login</td>
<td>boolean</td>
<td>The access token was acquired by logging in through Google.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mandatory_tfa_status</td>
<td>string</td>
<td>2FA is required for privileged methods</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_token</td>
<td>string</td>
<td>Can be used to request a new token (with a new lifetime)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;scope</td>
<td>string</td>
<td>Type of the access for assigned token</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;sid</td>
<td>string</td>
<td>Optional Session id</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Copied from the input (if applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;token_type</td>
<td>string</td>
<td>Authorization type, allowed value - <code>bearer</code></td>
</tr>
</tbody></table>
<h2 id='public-exchange_token'>/public/exchange_token</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/exchange_token?refresh_token=1568800656974.1CWcuzUS.MGy49NK4hpTwvR1OYWfpqMEkH4T4oDg4tNIcrM7KdeyxXRcSFqiGzA_D4Cn7mqWocHmlS89FFmUYcmaN2H7lNKKTnhRg5EtrzsFCCiuyN0Wv9y-LbGLV3-Ojv_kbD50FoScQ8BDXS5b_w6Ir1MqEdQ3qFZ3MLcvlPiIgG2BqyJX3ybYnVpIlrVrrdYD1-lkjLcjxOBNJvvUKNUAzkQ&amp;subject_id=10"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7619</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/exchange_token</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">refresh_token</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">1568800656974.1CWcuzUS.MGy49NK4hpTwvR1OYWfpqMEkH4T4oDg4tNIcrM7KdeyxXRcSFqiGzA_D4Cn7mqWocHmlS89FFmUYcmaN2H7lNKKTnhRg5EtrzsFCCiuyN0Wv9y-LbGLV3-Ojv_kbD50FoScQ8BDXS5b_w6Ir1MqEdQ3qFZ3MLcvlPiIgG2BqyJX3ybYnVpIlrVrrdYD1-lkjLcjxOBNJvvUKNUAzkQ</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">subject_id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">10</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">7619</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/exchange_token"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"refresh_token"</span> <span class="p">:</span> <span class="s">"1568800656974.1CWcuzUS.MGy49NK4hpTwvR1OYWfpqMEkH4T4oDg4tNIcrM7KdeyxXRcSFqiGzA_D4Cn7mqWocHmlS89FFmUYcmaN2H7lNKKTnhRg5EtrzsFCCiuyN0Wv9y-LbGLV3-Ojv_kbD50FoScQ8BDXS5b_w6Ir1MqEdQ3qFZ3MLcvlPiIgG2BqyJX3ybYnVpIlrVrrdYD1-lkjLcjxOBNJvvUKNUAzkQ"</span><span class="p">,</span>
    <span class="s">"subject_id"</span> <span class="p">:</span> <span class="mi">10</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">9929</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1582628593469.1MbQ-J_4.CBP-OqOwm_FBdMYj4cRK2dMXyHPfBtXGpzLxhWg31nHu3H_Q60FpE5_vqUBEQGSiMrIGzw3nC37NMb9d1tpBNqBOM_Ql9pXOmgtV9Yj3Pq1c6BqC6dU6eTxHMFO67x8GpJxqw_QcKP5IepwGBD-gfKSHfAv9AEnLJkNu3JkMJBdLToY1lrBnuedF3dU_uARm"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">31536000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1582628593469.1GP4rQd0.A9Wa78o5kFRIUP49mScaD1CqHgiK50HOl2VA6kCtWa8BQZU5Dr03BhcbXPNvEh3I_MVixKZXnyoBeKJwLl8LXnfo180ckAiPj3zOclcUu4zkXuF3NNP3sTPcDf1B3C1CwMKkJ1NOcf1yPmRbsrd7hbgQ-hLa40tfx6Oa-85ymm_3Z65LZcnCeLrqlj_A9jM"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"session:named_session mainaccount"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Generates a token for a new subject id. This method can be used to switch between subaccounts.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fexchange_token" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>refresh_token</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Refresh token</td>
</tr>
<tr>
<td>subject_id</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>New subject id</td>
</tr>
<tr>
<td>scope</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Optional scope override for the new session. Cannot exceed caller&#39;s permissions. Supports <code>session</code> scope for direct session creation during token exchange.</td>
</tr>
</tbody></table>
<h3 id='response-2'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;access_token</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;expires_in</td>
<td>integer</td>
<td>Token lifetime in seconds</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_token</td>
<td>string</td>
<td>Can be used to request a new token (with a new lifetime)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;scope</td>
<td>string</td>
<td>Type of the access for assigned token</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;sid</td>
<td>string</td>
<td>Optional Session id</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;token_type</td>
<td>string</td>
<td>Authorization type, allowed value - <code>bearer</code></td>
</tr>
</tbody></table>
<h2 id='public-fork_token'>/public/fork_token</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/fork_token?refresh_token=1568800656974.1CWcuzUS.MGy49NK4hpTwvR1OYWfpqMEkH4T4oDg4tNIcrM7KdeyxXRcSFqiGzA_D4Cn7mqWocHmlS89FFmUYcmaN2H7lNKKTnhRg5EtrzsFCCiuyN0Wv9y-LbGLV3-Ojv_kbD50FoScQ8BDXS5b_w6Ir1MqEdQ3qFZ3MLcvlPiIgG2BqyJX3ybYnVpIlrVrrdYD1-lkjLcjxOBNJvvUKNUAzkQ&amp;session_name=forked_session_name"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7620</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/fork_token</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">refresh_token</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">1568800656974.1CWcuzUS.MGy49NK4hpTwvR1OYWfpqMEkH4T4oDg4tNIcrM7KdeyxXRcSFqiGzA_D4Cn7mqWocHmlS89FFmUYcmaN2H7lNKKTnhRg5EtrzsFCCiuyN0Wv9y-LbGLV3-Ojv_kbD50FoScQ8BDXS5b_w6Ir1MqEdQ3qFZ3MLcvlPiIgG2BqyJX3ybYnVpIlrVrrdYD1-lkjLcjxOBNJvvUKNUAzkQ</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">session_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">forked_session_name</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">7620</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/fork_token"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"refresh_token"</span> <span class="p">:</span> <span class="s">"1568800656974.1CWcuzUS.MGy49NK4hpTwvR1OYWfpqMEkH4T4oDg4tNIcrM7KdeyxXRcSFqiGzA_D4Cn7mqWocHmlS89FFmUYcmaN2H7lNKKTnhRg5EtrzsFCCiuyN0Wv9y-LbGLV3-Ojv_kbD50FoScQ8BDXS5b_w6Ir1MqEdQ3qFZ3MLcvlPiIgG2BqyJX3ybYnVpIlrVrrdYD1-lkjLcjxOBNJvvUKNUAzkQ"</span><span class="p">,</span>
    <span class="s">"session_name"</span> <span class="p">:</span> <span class="s">"forked_session_name"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">9929</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1582628593469.1MbQ-J_4.CBP-OqOwm_FBdMYj4cRK2dMXyHPfBtXGpzLxhWg31nHu3H_Q60FpE5_vqUBEQGSiMrIGzw3nC37NMb9d1tpBNqBOM_Ql9pXOmgtV9Yj3Pq1c6BqC6dU6eTxHMFO67x8GpJxqw_QcKP5IepwGBD-gfKSHfAv9AEnLJkNu3JkMJBdLToY1lrBnuedF3dU_uARm"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">31536000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1582628593469.1GP4rQd0.A9Wa78o5kFRIUP49mScaD1CqHgiK50HOl2VA6kCtWa8BQZU5Dr03BhcbXPNvEh3I_MVixKZXnyoBeKJwLl8LXnfo180ckAiPj3zOclcUu4zkXuF3NNP3sTPcDf1B3C1CwMKkJ1NOcf1yPmRbsrd7hbgQ-hLa40tfx6Oa-85ymm_3Z65LZcnCeLrqlj_A9jM"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"session:named_session mainaccount"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Generates a token for a new named session. This method can be used only with session scoped tokens.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Ffork_token" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-3'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>refresh_token</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Refresh token</td>
</tr>
<tr>
<td>session_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>New session name</td>
</tr>
</tbody></table>
<h3 id='response-3'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;access_token</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;expires_in</td>
<td>integer</td>
<td>Token lifetime in seconds</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_token</td>
<td>string</td>
<td>Can be used to request a new token (with a new lifetime)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;scope</td>
<td>string</td>
<td>Type of the access for assigned token</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;sid</td>
<td>string</td>
<td>Optional Session id</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;token_type</td>
<td>string</td>
<td>Authorization type, allowed value - <code>bearer</code></td>
</tr>
</tbody></table>
<h2 id='private-logout'>/private/logout</h2>
<blockquote>
<p><em>This method is only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">private/logout</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">access_token</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">invalidate_token</span><span class="dl">"</span><span class="p">:</span> <span class="kc">true</span><span class="p">}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"private/logout"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"access_token"</span><span class="p">:</span> <span class="s">"1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span><span class="p">,</span>
        <span class="s">"invalidate_token"</span><span class="p">:</span> <span class="bp">True</span><span class="p">}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p><em>This method has no response body</em></p>
</blockquote>

<p>Gracefully close websocket connection, when COD (Cancel On Disconnect) is enabled orders are not cancelled</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Flogout" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-4'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>invalidate_token</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>If value is <code>true</code> all tokens created in current session are invalidated, default: <code>true</code></td>
</tr>
</tbody></table>
<h3 id='response-4'>Response</h3>
<p><em>This method has no response body</em></p>
<h1 id='session-management'>Session management</h1><h2 id='public-set_heartbeat'>/public/set_heartbeat</h2>
<blockquote>
<p><em>This method is only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">9098</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/set_heartbeat</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">interval</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">30</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">9098</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/set_heartbeat"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"interval"</span> <span class="p">:</span> <span class="mi">30</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">9098</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Signals the Websocket connection to send and request heartbeats. Heartbeats can be used to detect stale connections.
When heartbeats have been set up, the API server will send <code>heartbeat</code> messages and <code>test_request</code> messages. Your software should respond to <code>test_request</code> messages by sending a <code>/api/v2/public/test</code> request. If your software fails to do so, the API server will immediately close the connection. If your account is configured to cancel on disconnect, any orders opened over the connection will be cancelled.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fset_heartbeat" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-5'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>interval</td>
<td>true</td>
<td>number</td>
<td></td>
<td>The heartbeat interval in seconds, but not less than 10</td>
</tr>
</tbody></table>
<h3 id='response-5'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h2 id='public-disable_heartbeat'>/public/disable_heartbeat</h2>
<blockquote>
<p><em>This method is only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3562</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/disable_heartbeat</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">3562</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/disable_heartbeat"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3562</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Stop sending heartbeat messages.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fdisable_heartbeat" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-6'>Parameters</h3>
<p><em>This method takes no parameters</em></p>
<h3 id='response-6'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h2 id='private-enable_cancel_on_disconnect'>/private/enable_cancel_on_disconnect</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/enable_cancel_on_disconnect?scope=account"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7859</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/enable_cancel_on_disconnect</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">scope</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">account</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">7859</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/enable_cancel_on_disconnect"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"scope"</span> <span class="p">:</span> <span class="s">"account"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7859</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Enable Cancel On Disconnect for the connection. After enabling Cancel On Disconnect all orders created by the connection will be removed when the connection is closed. </br></br> <strong>NOTICE</strong> It does not affect orders created by other connections - they will remain active !</br></br> When change is applied for the account, then every newly opened connection will start with <strong>active</strong> Cancel on Disconnect.</p>

<p><strong>Scope: </strong> <code>account:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fenable_cancel_on_disconnect" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-7'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>scope</td>
<td>false</td>
<td>string</td>
<td><code>connection</code><br><code>account</code></td>
<td>Specifies if Cancel On Disconnect change should be applied/checked for the current connection or the account (default - <code>connection</code>)<br/><br/> <strong>NOTICE:</strong> Scope <code>connection</code> can be used only when working via Websocket.</td>
</tr>
</tbody></table>
<h3 id='response-7'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h2 id='private-disable_cancel_on_disconnect'>/private/disable_cancel_on_disconnect</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/disable_cancel_on_disconnect?scope=account"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1569</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/disable_cancel_on_disconnect</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">scope</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">account</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1569</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/disable_cancel_on_disconnect"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"scope"</span> <span class="p">:</span> <span class="s">"account"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1569</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Disable Cancel On Disconnect for the connection.</br></br> When change is applied for the account, then every newly opened connection will start with <strong>inactive</strong> Cancel on Disconnect.</p>

<p><strong>Scope: </strong> <code>account:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fdisable_cancel_on_disconnect" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-8'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>scope</td>
<td>false</td>
<td>string</td>
<td><code>connection</code><br><code>account</code></td>
<td>Specifies if Cancel On Disconnect change should be applied/checked for the current connection or the account (default - <code>connection</code>)<br/><br/> <strong>NOTICE:</strong> Scope <code>connection</code> can be used only when working via Websocket.</td>
</tr>
</tbody></table>
<h3 id='response-8'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h2 id='private-get_cancel_on_disconnect'>/private/get_cancel_on_disconnect</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_cancel_on_disconnect?scope=account"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">220</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_cancel_on_disconnect</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">scope</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">account</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">220</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_cancel_on_disconnect"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"scope"</span> <span class="p">:</span> <span class="s">"account"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">220</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"scope"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"account"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Read current Cancel On Disconnect configuration for the account.</p>

<p><strong>Scope: </strong> <code>account:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_cancel_on_disconnect" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-9'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>scope</td>
<td>false</td>
<td>string</td>
<td><code>connection</code><br><code>account</code></td>
<td>Specifies if Cancel On Disconnect change should be applied/checked for the current connection or the account (default - <code>connection</code>)<br/><br/> <strong>NOTICE:</strong> Scope <code>connection</code> can be used only when working via Websocket.</td>
</tr>
</tbody></table>
<h3 id='response-9'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;enabled</td>
<td>boolean</td>
<td>Current configuration status</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;scope</td>
<td>string</td>
<td>Informs if Cancel on Disconnect was checked for the current connection or the account</td>
</tr>
</tbody></table>
<h1 id='supporting'>Supporting</h1><h2 id='public-get_time'>/public/get_time</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_time?"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7365</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_time</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">7365</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_time"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7365</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550147385946</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves the current time (in milliseconds). This API endpoint can be used to check the clock skew between your software and Deribit&#39;s systems.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_time" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-10'>Parameters</h3>
<p><em>This method takes no parameters</em></p>
<h3 id='response-10'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>integer</td>
<td>Current timestamp (milliseconds since the UNIX epoch)</td>
</tr>
</tbody></table>
<h2 id='public-hello'>/public/hello</h2>
<blockquote>
<p><em>This method is only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2841</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/hello</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">client_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">My Trading Software</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">client_version</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">1.0.2</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2841</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/hello"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"client_name"</span> <span class="p">:</span> <span class="s">"My Trading Software"</span><span class="p">,</span>
    <span class="s">"client_version"</span> <span class="p">:</span> <span class="s">"1.0.2"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2841</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.2.26"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Method used to introduce the client software connected to Deribit platform over websocket. Provided data may have an impact on the maintained connection and will be collected for internal statistical purposes. In response, Deribit will also introduce itself.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fhello" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-11'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>client_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Client software name</td>
</tr>
<tr>
<td>client_version</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Client software version</td>
</tr>
</tbody></table>
<h3 id='response-11'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;version</td>
<td>string</td>
<td>The API version</td>
</tr>
</tbody></table>
<h2 id='public-status'>/public/status</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/status?"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">55</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/status</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">55</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/status"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">55</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"locked_currencies"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"BTC"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"locked"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Method used to get information about locked currencies</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fstatus" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-12'>Parameters</h3>
<p><em>This method takes no parameters</em></p>
<h3 id='response-12'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;locked</td>
<td>string</td>
<td><code>true</code> when platform is locked in all currencies, <code>partial</code> when some currencies are locked, <code>false</code> - when there are not currencies locked</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;locked_indices</td>
<td>array</td>
<td>List of currency indices locked platform-wise</td>
</tr>
</tbody></table>
<h2 id='public-test'>/public/test</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/test?"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">8212</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/test</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">8212</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/test"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8212</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.2.26"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Tests the connection to the API server, and returns its version. You can use this to make sure the API is reachable, and matches the expected version.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Ftest" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-13'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>expected_result</td>
<td>false</td>
<td>string</td>
<td><code>exception</code></td>
<td>The value &quot;exception&quot; will trigger an error response. This may be useful for testing wrapper libraries.</td>
</tr>
</tbody></table>
<h3 id='response-13'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;version</td>
<td>string</td>
<td>The API version</td>
</tr>
</tbody></table>
<h1 id='subscription-management'>Subscription management</h1>
<p>Subscription works as <a href="#notifications">notifications</a>, so users will automatically (after subscribing) receive messages from the server. Overview for each channel response format is described in <a href="#subscriptions">subscriptions</a> section.</p>
<h2 id='public-subscribe'>/public/subscribe</h2>
<blockquote>
<p><em>This method is only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="dl">"</span><span class="s2">deribit_price_index.btc_usd</span><span class="dl">"</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"channels"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="s">"deribit_price_index.btc_usd"</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3600</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"deribit_price_index.btc_usd"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Subscribe to one or more channels.</p>

<p>This is the same method as <a href="#private_subscribe">/private/subscribe</a>, but it can only
be used for &#39;public&#39; channels.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fsubscribe" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-14'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channels</td>
<td>true</td>
<td>array</td>
<td></td>
<td>A list of channels to subscribe to.</td>
</tr>
</tbody></table>
<h3 id='response-14'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of string</td>
<td>A list of subscribed channels.</td>
</tr>
</tbody></table>
<h2 id='public-unsubscribe'>/public/unsubscribe</h2>
<blockquote>
<p><em>This method is only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">8691</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/unsubscribe</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="dl">"</span><span class="s2">deribit_price_index.btc_usd</span><span class="dl">"</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">8691</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/unsubscribe"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"channels"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="s">"deribit_price_index.btc_usd"</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8691</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"deribit_price_index.btc_usd"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Unsubscribe from one or more channels.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Funsubscribe" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-15'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channels</td>
<td>true</td>
<td>array</td>
<td></td>
<td>A list of channels to unsubscribe from.</td>
</tr>
</tbody></table>
<h3 id='response-15'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of string</td>
<td>A list of subscribed channels.</td>
</tr>
</tbody></table>
<h2 id='public-unsubscribe_all'>/public/unsubscribe_all</h2>
<blockquote>
<p><em>This method is only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">153</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/unsubscribe_all</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">153</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/unsubscribe_all"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">153</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Unsubscribe from all the channels subscribed so far.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Funsubscribe_all" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-16'>Parameters</h3>
<p><em>This method takes no parameters</em></p>
<h3 id='response-16'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h2 id='private-subscribe'>/private/subscribe</h2>
<blockquote>
<p><em>This method is only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">4235</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/subscribe</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="dl">"</span><span class="s2">deribit_price_index.btc_usd</span><span class="dl">"</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">4235</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/subscribe"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"channels"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="s">"deribit_price_index.btc_usd"</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4235</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"deribit_price_index.btc_usd"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Subscribe to one or more channels.</p>

<p>The name of the channel determines what information will be provided, and
in what form.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-17'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channels</td>
<td>true</td>
<td>array</td>
<td></td>
<td>A list of channels to subscribe to.</td>
</tr>
<tr>
<td>label</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Optional label which will be added to notifications of private channels (max 16 characters).</td>
</tr>
</tbody></table>
<h3 id='response-17'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of string</td>
<td>A list of subscribed channels.</td>
</tr>
</tbody></table>
<h2 id='private-unsubscribe'>/private/unsubscribe</h2>
<blockquote>
<p><em>This method is only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3370</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/unsubscribe</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="dl">"</span><span class="s2">deribit_price_index.btc_usd</span><span class="dl">"</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">3370</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/unsubscribe"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"channels"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="s">"deribit_price_index.btc_usd"</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3370</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"deribit_price_index.btc_usd"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Unsubscribe from one or more channels.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Funsubscribe" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-18'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>channels</td>
<td>true</td>
<td>array</td>
<td></td>
<td>A list of channels to unsubscribe from.</td>
</tr>
</tbody></table>
<h3 id='response-18'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of string</td>
<td>A list of subscribed channels.</td>
</tr>
</tbody></table>
<h2 id='private-unsubscribe_all'>/private/unsubscribe_all</h2>
<blockquote>
<p><em>This method is only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">154</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/unsubscribe_all</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">154</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/unsubscribe_all"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">154</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Unsubscribe from all the channels subscribed so far.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Funsubscribe_all" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-19'>Parameters</h3>
<p><em>This method takes no parameters</em></p>
<h3 id='response-19'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h1 id='market-data'>Market data</h1><h2 id='public-get_apr_history'>/public/get_apr_history</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_apr_history?currency=steth&amp;limit=5"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_apr_history</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">steth</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">limit</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">5</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_apr_history"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"steth"</span><span class="p">,</span>
    <span class="s">"limit"</span> <span class="p">:</span> <span class="mi">5</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"day"</span><span class="p">:</span><span class="w"> </span><span class="mi">20200</span><span class="p">,</span><span class="w">
        </span><span class="nl">"apr"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.814</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"day"</span><span class="p">:</span><span class="w"> </span><span class="mi">20199</span><span class="p">,</span><span class="w">
        </span><span class="nl">"apr"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.749</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"day"</span><span class="p">:</span><span class="w"> </span><span class="mi">20198</span><span class="p">,</span><span class="w">
        </span><span class="nl">"apr"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.684</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"day"</span><span class="p">:</span><span class="w"> </span><span class="mi">20197</span><span class="p">,</span><span class="w">
        </span><span class="nl">"apr"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.667</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"day"</span><span class="p">:</span><span class="w"> </span><span class="mi">20196</span><span class="p">,</span><span class="w">
        </span><span class="nl">"apr"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.722</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"continuation"</span><span class="p">:</span><span class="w"> </span><span class="mi">20196</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w"> 
</span></code></pre></div>
<p>Retrieves historical APR data for specified currency. Only applicable to yield-generating tokens (<code>USDE</code>, <code>STETH</code>).</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_apr_history" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-20'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>usde</code><br><code>steth</code></td>
<td>Currency for which to retrieve APR history</td>
</tr>
<tr>
<td>limit</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of days to retrieve (default <code>365</code>, maximum <code>365</code>)</td>
</tr>
<tr>
<td>before</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Used to receive APR history before given epoch day</td>
</tr>
</tbody></table>
<h3 id='response-20'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;continuation</td>
<td>string</td>
<td>Continuation token for pagination.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;data</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;apr</td>
<td>number</td>
<td>The APR of the day</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;day</td>
<td>integer</td>
<td>The full epoch day</td>
</tr>
</tbody></table>
<h2 id='public-get_book_summary_by_currency'>/public/get_book_summary_by_currency</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_book_summary_by_currency?currency=BTC&amp;kind=future"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">9344</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_book_summary_by_currency</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">kind</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">future</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">9344</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_book_summary_by_currency"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"kind"</span> <span class="p">:</span> <span class="s">"future"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">9344</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"volume_usd"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quote_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price_change"</span><span class="p">:</span><span class="w"> </span><span class="mf">-11.1896349</span><span class="p">,</span><span class="w">
      </span><span class="nl">"open_interest"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mid_price"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">3579.73</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mark_iv"</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w">
      </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-22FEB19"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"estimated_delivery_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">3579.73</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550230036440</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bid_price"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"base_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ask_price"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"volume_usd"</span><span class="p">:</span><span class="w"> </span><span class="mi">22440</span><span class="p">,</span><span class="w">
      </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="mf">6.24</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quote_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price_change"</span><span class="p">:</span><span class="w"> </span><span class="mf">-60.8183509</span><span class="p">,</span><span class="w">
      </span><span class="nl">"open_interest"</span><span class="p">:</span><span class="w"> </span><span class="mi">183180</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mid_price"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">3579.73</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mark_iv"</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w">
      </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="mi">3591</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="mi">3595</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="mi">3595</span><span class="p">,</span><span class="w">
      </span><span class="nl">"funding_8h"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0002574</span><span class="p">,</span><span class="w">
      </span><span class="nl">"estimated_delivery_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">3579.73</span><span class="p">,</span><span class="w">
      </span><span class="nl">"current_funding"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550230036440</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bid_price"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"base_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ask_price"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves the summary information such as open interest, 24h volume, etc. for all instruments for the currency (optionally filtered by kind).
<strong>Note</strong> - For real-time updates, we recommend using the WebSocket subscription to <code>ticker.{instrument_name}.{interval}</code> instead of polling this endpoint.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_book_summary_by_currency" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-21'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>kind</td>
<td>false</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code></td>
<td>Instrument kind, if not provided instruments of all kinds are considered</td>
</tr>
</tbody></table>
<h3 id='response-21'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ask_price</td>
<td>number</td>
<td>The current best ask price, <code>null</code> if there aren&#39;t any asks</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;base_currency</td>
<td>string</td>
<td>Base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;bid_price</td>
<td>number</td>
<td>The current best bid price, <code>null</code> if there aren&#39;t any bids</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;current_funding</td>
<td>number</td>
<td>Current funding (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;estimated_delivery_price</td>
<td>number</td>
<td>Optional (only for derivatives). Estimated delivery price for the market. For more details, see Contract Specification &gt; General Documentation &gt; Expiration Price.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;funding_8h</td>
<td>number</td>
<td>Funding 8h (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;high</td>
<td>number</td>
<td>Price of the 24h highest trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interest_rate</td>
<td>number</td>
<td>Interest rate used in implied volatility calculations (options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last</td>
<td>number</td>
<td>The price of the latest trade, <code>null</code> if there weren&#39;t any trades</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;low</td>
<td>number</td>
<td>Price of the 24h lowest trade, <code>null</code> if there weren&#39;t any trades</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_iv</td>
<td>number</td>
<td>(Only for option) implied volatility for mark price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>The current instrument market price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mid_price</td>
<td>number</td>
<td>The average of the best bid and ask, <code>null</code> if there aren&#39;t any asks or bids</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;open_interest</td>
<td>number</td>
<td>Optional (only for derivatives). The total amount of outstanding contracts in the corresponding amount units. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price_change</td>
<td>number</td>
<td>24-hour price change expressed as a percentage, <code>null</code> if there weren&#39;t any trades</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_currency</td>
<td>string</td>
<td>Quote currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_index</td>
<td>string</td>
<td>Name of the underlying future, or <code>&#39;index_price&#39;</code> (options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>underlying price for implied volatility calculations (options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;volume</td>
<td>number</td>
<td>The total 24h traded volume (in base currency)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;volume_notional</td>
<td>number</td>
<td>Volume in quote currency (futures and spots only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;volume_usd</td>
<td>number</td>
<td>Volume in USD</td>
</tr>
</tbody></table>
<h2 id='public-get_book_summary_by_instrument'>/public/get_book_summary_by_instrument</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_book_summary_by_instrument?instrument_name=ETH-22FEB19-140-P"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3659</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_book_summary_by_instrument</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">ETH-22FEB19-140-P</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">3659</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_book_summary_by_instrument"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"ETH-22FEB19-140-P"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3659</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.55</span><span class="p">,</span><span class="w">
      </span><span class="nl">"underlying_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">121.38</span><span class="p">,</span><span class="w">
      </span><span class="nl">"underlying_index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_price"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quote_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price_change"</span><span class="p">:</span><span class="w"> </span><span class="mf">-26.7793594</span><span class="p">,</span><span class="w">
      </span><span class="nl">"open_interest"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.55</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mid_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2444</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.179112</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w">
      </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.34</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.34</span><span class="p">,</span><span class="w">
      </span><span class="nl">"interest_rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.207</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-22FEB19-140-P"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.34</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550227952163</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bid_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1488</span><span class="p">,</span><span class="w">
      </span><span class="nl">"base_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ask_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.34</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves the summary information such as open interest, 24h volume, etc. for a specific instrument.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_book_summary_by_instrument" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-22'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
</tbody></table>
<h3 id='response-22'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ask_price</td>
<td>number</td>
<td>The current best ask price, <code>null</code> if there aren&#39;t any asks</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;base_currency</td>
<td>string</td>
<td>Base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;bid_price</td>
<td>number</td>
<td>The current best bid price, <code>null</code> if there aren&#39;t any bids</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;current_funding</td>
<td>number</td>
<td>Current funding (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;estimated_delivery_price</td>
<td>number</td>
<td>Optional (only for derivatives). Estimated delivery price for the market. For more details, see Contract Specification &gt; General Documentation &gt; Expiration Price.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;funding_8h</td>
<td>number</td>
<td>Funding 8h (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;high</td>
<td>number</td>
<td>Price of the 24h highest trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interest_rate</td>
<td>number</td>
<td>Interest rate used in implied volatility calculations (options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last</td>
<td>number</td>
<td>The price of the latest trade, <code>null</code> if there weren&#39;t any trades</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;low</td>
<td>number</td>
<td>Price of the 24h lowest trade, <code>null</code> if there weren&#39;t any trades</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_iv</td>
<td>number</td>
<td>(Only for option) implied volatility for mark price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>The current instrument market price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mid_price</td>
<td>number</td>
<td>The average of the best bid and ask, <code>null</code> if there aren&#39;t any asks or bids</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;open_interest</td>
<td>number</td>
<td>Optional (only for derivatives). The total amount of outstanding contracts in the corresponding amount units. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price_change</td>
<td>number</td>
<td>24-hour price change expressed as a percentage, <code>null</code> if there weren&#39;t any trades</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_currency</td>
<td>string</td>
<td>Quote currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_index</td>
<td>string</td>
<td>Name of the underlying future, or <code>&#39;index_price&#39;</code> (options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>underlying price for implied volatility calculations (options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;volume</td>
<td>number</td>
<td>The total 24h traded volume (in base currency)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;volume_notional</td>
<td>number</td>
<td>Volume in quote currency (futures and spots only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;volume_usd</td>
<td>number</td>
<td>Volume in USD</td>
</tr>
</tbody></table>
<h2 id='public-get_contract_size'>/public/get_contract_size</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_contract_size?instrument_name=BTC-PERPETUAL"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_contract_size</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span><span class="p">}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/get_contract_size"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"instrument_name"</span><span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span><span class="p">}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"contract_size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieves contract size of provided instrument.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_contract_size" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-23'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
</tbody></table>
<h3 id='response-23'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contract_size</td>
<td>integer</td>
<td>Contract size, for futures in USD, for options in base currency of the instrument (BTC, ETH, ...)</td>
</tr>
</tbody></table>
<h2 id='public-get_currencies'>/public/get_currencies</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_currencies?"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7538</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_currencies</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">7538</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_currencies"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7538</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="nl">"coin_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETHER"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"currency_long"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ethereum"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fee_precision"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
          </span><span class="nl">"min_confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"min_withdrawal_fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
          </span><span class="nl">"withdrawal_fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0006</span><span class="p">,</span><span class="w">
          </span><span class="nl">"withdrawal_priorities"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="nl">"coin_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BITCOIN"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"currency_long"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bitcoin"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fee_precision"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
          </span><span class="nl">"min_confirmations"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"min_withdrawal_fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
          </span><span class="nl">"withdrawal_fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
          </span><span class="nl">"withdrawal_priorities"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.15</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"very_low"</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"very_high"</span><span class="w">
              </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">    

</span></code></pre></div>
<p>Retrieves all cryptocurrencies supported by the API.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_currencies" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-24'>Parameters</h3>
<p><em>This method takes no parameters</em></p>
<h3 id='response-24'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;apr</td>
<td>number</td>
<td>Simple Moving Average (SMA) of the last 7 days of rewards. If fewer than 7 days of reward data are available, the APR is calculated as the average of the available rewards. Only applicable to yield-generating tokens (<code>USDE</code>, <code>STETH</code>).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;coin_type</td>
<td>string</td>
<td>The type of the currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>The abbreviation of the currency. This abbreviation is used elsewhere in the API to identify the currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency_long</td>
<td>string</td>
<td>The full name for the currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_precision</td>
<td>integer</td>
<td>fee precision</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;in_cross_collateral_pool</td>
<td>boolean</td>
<td><code>true</code> if the currency is part of the cross collateral pool</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;min_confirmations</td>
<td>integer</td>
<td>Minimum number of block chain confirmations before deposit is accepted.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;min_withdrawal_fee</td>
<td>number</td>
<td>The minimum transaction fee paid for withdrawals</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;withdrawal_fee</td>
<td>number</td>
<td>The total transaction fee paid for withdrawals</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;withdrawal_priorities</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;value</td>
<td>number</td>
<td></td>
</tr>
</tbody></table>
<h2 id='public-get_delivery_prices'>/public/get_delivery_prices</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_delivery_prices?count=5&amp;index_name=btc_usd&amp;offset=0"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3601</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_delivery_prices</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">index_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">btc_usd</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">offset</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">5</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">3601</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_delivery_prices"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"index_name"</span> <span class="p">:</span> <span class="s">"btc_usd"</span><span class="p">,</span>
    <span class="s">"offset"</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">5</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3601</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-01-02"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"delivery_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">7131.214606410254</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-21"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"delivery_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">7150.943217777777</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-20"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"delivery_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">7175.988445532345</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-19"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"delivery_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">7189.540776143791</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-12-18"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"delivery_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">6698.353743857118</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"records_total"</span><span class="p">:</span><span class="w"> </span><span class="mi">58</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieves delivery prices for then given index</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_delivery_prices" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-25'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>index_name</td>
<td>true</td>
<td>string</td>
<td><code>btc_usd</code><br><code>eth_usd</code><br><code>ada_usdc</code><br><code>algo_usdc</code><br><code>avax_usdc</code><br><code>bch_usdc</code><br><code>bnb_usdc</code><br><code>btc_usdc</code><br><code>btcdvol_usdc</code><br><code>buidl_usdc</code><br><code>doge_usdc</code><br><code>dot_usdc</code><br><code>eurr_usdc</code><br><code>eth_usdc</code><br><code>ethdvol_usdc</code><br><code>link_usdc</code><br><code>ltc_usdc</code><br><code>near_usdc</code><br><code>paxg_usdc</code><br><code>shib_usdc</code><br><code>sol_usdc</code><br><code>steth_usdc</code><br><code>trump_usdc</code><br><code>trx_usdc</code><br><code>uni_usdc</code><br><code>usde_usdc</code><br><code>usyc_usdc</code><br><code>xrp_usdc</code><br><code>btc_usdt</code><br><code>eth_usdt</code><br><code>eurr_usdt</code><br><code>sol_usdt</code><br><code>steth_usdt</code><br><code>usdc_usdt</code><br><code>usde_usdt</code><br><code>btc_eurr</code><br><code>btc_usde</code><br><code>btc_usyc</code><br><code>eth_btc</code><br><code>eth_eurr</code><br><code>eth_usde</code><br><code>eth_usyc</code><br><code>steth_eth</code><br><code>paxg_btc</code></td>
<td>Index identifier, matches (base) cryptocurrency with quote currency</td>
</tr>
<tr>
<td>offset</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The offset for pagination, default - <code>0</code></td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>10</code></td>
</tr>
</tbody></table>
<h3 id='response-25'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;data</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;date</td>
<td>string</td>
<td>The event date with year, month and day</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delivery_price</td>
<td>number</td>
<td>The settlement price for the instrument. Only when <code>state = closed</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;records_total</td>
<td>number</td>
<td>Available delivery prices</td>
</tr>
</tbody></table>
<h2 id='public-get_expirations'>/public/get_expirations</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_expirations?currency=any&amp;kind=any"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_expirations</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">any</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">kind</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">any</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_expirations"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"any"</span><span class="p">,</span>
    <span class="s">"kind"</span> <span class="p">:</span> <span class="s">"any"</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"future"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"21SEP24"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"22SEP24"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"PERPETUAL"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"option"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"21SEP24"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"22SEP24"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"23SEP24"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves expirations for instruments. This method can be used to see instruments&#39;s expirations.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_expirations" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-26'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>any</code><br><code>grouped</code></td>
<td>The currency symbol or <code>&quot;any&quot;</code> for all or &#39;&quot;grouped&quot;&#39; for all grouped by currency</td>
</tr>
<tr>
<td>kind</td>
<td>true</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>any</code></td>
<td>Instrument kind, <code>&quot;future&quot;</code> or <code>&quot;option&quot;</code> or <code>&quot;any&quot;</code></td>
</tr>
<tr>
<td>currency_pair</td>
<td>false</td>
<td>string</td>
<td><code>btc_usd</code><br><code>eth_usd</code><br><code>ada_usdc</code><br><code>algo_usdc</code><br><code>avax_usdc</code><br><code>bch_usdc</code><br><code>bnb_usdc</code><br><code>btc_usdc</code><br><code>btcdvol_usdc</code><br><code>buidl_usdc</code><br><code>doge_usdc</code><br><code>dot_usdc</code><br><code>eurr_usdc</code><br><code>eth_usdc</code><br><code>ethdvol_usdc</code><br><code>link_usdc</code><br><code>ltc_usdc</code><br><code>near_usdc</code><br><code>paxg_usdc</code><br><code>shib_usdc</code><br><code>sol_usdc</code><br><code>steth_usdc</code><br><code>trump_usdc</code><br><code>trx_usdc</code><br><code>uni_usdc</code><br><code>usde_usdc</code><br><code>usyc_usdc</code><br><code>xrp_usdc</code><br><code>btc_usdt</code><br><code>eth_usdt</code><br><code>eurr_usdt</code><br><code>sol_usdt</code><br><code>steth_usdt</code><br><code>usdc_usdt</code><br><code>usde_usdt</code><br><code>btc_eurr</code><br><code>btc_usde</code><br><code>btc_usyc</code><br><code>eth_btc</code><br><code>eth_eurr</code><br><code>eth_usde</code><br><code>eth_usyc</code><br><code>steth_eth</code><br><code>paxg_btc</code></td>
<td>The currency pair symbol</td>
</tr>
</tbody></table>
<h3 id='response-26'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td>A map where each key is valid currency (e.g. btc, eth, usdc), and the value is a list of expirations or a map where each key is a valid kind (future or options) and value is a list of expirations from every instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency name or <code>&quot;any&quot;</code> if don&#39;t care or <code>&quot;grouped&quot;</code> if grouped by currencies</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;kind</td>
<td>string</td>
<td>Instrument kind: <code>&quot;future&quot;</code>, <code>&quot;option&quot;</code> or <code>&quot;any&quot;</code> for all</td>
</tr>
</tbody></table>
<h2 id='public-get_funding_chart_data'>/public/get_funding_chart_data</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_funding_chart_data?instrument_name=BTC-PERPETUAL&amp;length=8h"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_funding_chart_data</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">length</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">8h</span><span class="dl">"</span><span class="p">}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/get_funding_chart_data"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"instrument_name"</span><span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span><span class="p">,</span>
        <span class="s">"length"</span><span class="p">:</span> <span class="s">"8h"</span><span class="p">}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"current_interest"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0050006706</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
                </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8247.27</span><span class="p">,</span><span class="w">
                </span><span class="nl">"interest_8h"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0049995114</span><span class="p">,</span><span class="w">
                </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1536569522277</span><span class="w">
            </span><span class="p">}],</span><span class="w">
        </span><span class="nl">"interest_8h"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0040080897</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieve the list of the latest PERPETUAL funding chart points within a given time period.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_funding_chart_data" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-27'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>length</td>
<td>true</td>
<td>string</td>
<td><code>8h</code><br><code>24h</code><br><code>1m</code></td>
<td>Specifies time period. <code>8h</code> - 8 hours, <code>24h</code> - 24 hours, <code>1m</code> - 1 month</td>
</tr>
</tbody></table>
<h3 id='response-27'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;current_interest</td>
<td>number</td>
<td>Current interest</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;data</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Current index price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interest_8h</td>
<td>number</td>
<td>Historical interest 8h value</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interest_8h</td>
<td>number</td>
<td>Current interest 8h</td>
</tr>
</tbody></table>
<h2 id='public-get_funding_rate_history'>/public/get_funding_rate_history</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_funding_rate_history?end_timestamp=1569902400000&amp;instrument_name=BTC-PERPETUAL&amp;start_timestamp=1569888000000"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7617</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_funding_rate_history</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">start_timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1569888000000</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">end_timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1569902400000</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">7617</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_funding_rate_history"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span><span class="p">,</span>
    <span class="s">"start_timestamp"</span> <span class="p">:</span> <span class="mi">1569888000000</span><span class="p">,</span>
    <span class="s">"end_timestamp"</span> <span class="p">:</span> <span class="mi">1569902400000</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7617</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1569891600000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8222.87</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prev_index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8305.72</span><span class="p">,</span><span class="w">
      </span><span class="nl">"interest_8h"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.00009234260068476106</span><span class="p">,</span><span class="w">
      </span><span class="nl">"interest_1h"</span><span class="p">:</span><span class="w"> </span><span class="mf">-4.739622041017375e-7</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1569895200000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8286.49</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prev_index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8222.87</span><span class="p">,</span><span class="w">
      </span><span class="nl">"interest_8h"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.00006720918180255509</span><span class="p">,</span><span class="w">
      </span><span class="nl">"interest_1h"</span><span class="p">:</span><span class="w"> </span><span class="mf">-2.8583510923267753e-7</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1569898800000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8431.97</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prev_index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8286.49</span><span class="p">,</span><span class="w">
      </span><span class="nl">"interest_8h"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.00003544496169694662</span><span class="p">,</span><span class="w">
      </span><span class="nl">"interest_1h"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.000003815906848177951</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1569902400000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8422.36</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prev_index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8431.97</span><span class="p">,</span><span class="w">
      </span><span class="nl">"interest_8h"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.00001404147515584998</span><span class="p">,</span><span class="w">
      </span><span class="nl">"interest_1h"</span><span class="p">:</span><span class="w"> </span><span class="mf">8.312033064379086e-7</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves hourly historical interest rate for requested PERPETUAL instrument.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_funding_rate_history" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-28'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>start_timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The earliest timestamp to return result from (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>end_timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The most recent timestamp to return result from (milliseconds since the UNIX epoch)</td>
</tr>
</tbody></table>
<h3 id='response-28'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interest_1h</td>
<td>float</td>
<td>1hour interest rate</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interest_8h</td>
<td>float</td>
<td>8hour interest rate</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;prev_index_price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='public-get_funding_rate_value'>/public/get_funding_rate_value</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_funding_rate_value?end_timestamp=1569974400000&amp;instrument_name=BTC-PERPETUAL&amp;start_timestamp=1569888000000"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7617</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_funding_rate_value</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">start_timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1569888000000</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">end_timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1569974400000</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">7617</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_funding_rate_value"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span><span class="p">,</span>
    <span class="s">"start_timestamp"</span> <span class="p">:</span> <span class="mi">1569888000000</span><span class="p">,</span>
    <span class="s">"end_timestamp"</span> <span class="p">:</span> <span class="mi">1569974400000</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7617</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.00025056853702101664</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves interest rate value for requested period. Applicable only for PERPETUAL instruments.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_funding_rate_value" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-29'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>start_timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The earliest timestamp to return result from (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>end_timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The most recent timestamp to return result from (milliseconds since the UNIX epoch)</td>
</tr>
</tbody></table>
<h3 id='response-29'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>float</td>
<td></td>
</tr>
</tbody></table>
<h2 id='public-get_historical_volatility'>/public/get_historical_volatility</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_historical_volatility?currency=BTC"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">8387</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_historical_volatility</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">8387</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_historical_volatility"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8387</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">[</span><span class="w">
          </span><span class="mi">1549720800000</span><span class="p">,</span><span class="w">
          </span><span class="mf">14.747743607344217</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="p">[</span><span class="w">
          </span><span class="mi">1549720800000</span><span class="p">,</span><span class="w">
          </span><span class="mf">14.747743607344217</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="p">[</span><span class="w">
          </span><span class="mi">1549724400000</span><span class="p">,</span><span class="w">
          </span><span class="mf">14.74257778551467</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="p">[</span><span class="w">
          </span><span class="mi">1549728000000</span><span class="p">,</span><span class="w">
          </span><span class="mf">14.73502799931767</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="p">[</span><span class="w">
          </span><span class="mi">1549731600000</span><span class="p">,</span><span class="w">
          </span><span class="mf">14.73502799931767</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="p">[</span><span class="w">
          </span><span class="mi">1549735200000</span><span class="p">,</span><span class="w">
          </span><span class="mf">14.73502799931767</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="p">[</span><span class="w">
          </span><span class="mi">1550228400000</span><span class="p">,</span><span class="w">
          </span><span class="mf">46.371891307340015</span><span class="w">
      </span><span class="p">]</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Provides information about historical volatility for given cryptocurrency.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_historical_volatility" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-30'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
</tbody></table>
<h3 id='response-30'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of [timestamp, value]</td>
<td></td>
</tr>
</tbody></table>
<h2 id='public-get_index'>/public/get_index</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_index?currency=BTC"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_index</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/get_index"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"currency"</span><span class="p">:</span> <span class="s">"BTC"</span><span class="p">}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"BTC"</span><span class="p">:</span><span class="w"> </span><span class="mf">11628.81</span><span class="p">,</span><span class="w">
        </span><span class="nl">"edp"</span><span class="p">:</span><span class="w"> </span><span class="mf">11628.81</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieves the current index price for the instruments, for the selected currency.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_index" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='warning'>This method is deprecated and will be removed in the future.</aside>
<h3 id='parameters-31'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
</tbody></table>
<h3 id='response-31'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;BTC</td>
<td>number</td>
<td>The current index price for BTC-USD (only for selected currency == BTC)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ETH</td>
<td>number</td>
<td>The current index price for ETH-USD (only for selected currency == ETH)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;edp</td>
<td>number</td>
<td>Estimated delivery price for the currency. For more details, see Documentation &gt; General &gt; Expiration Price</td>
</tr>
</tbody></table>
<h2 id='public-get_index_price'>/public/get_index_price</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_index_price?index_name=btc_usd"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_index_price</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">index_name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">btc_usd</span><span class="dl">"</span><span class="p">}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/get_index_price"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"index_name"</span><span class="p">:</span> <span class="s">"btc_usd"</span><span class="p">}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"estimated_delivery_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">11628.81</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">11628.81</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieves the current index price value for given index name.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_index_price" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-32'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>index_name</td>
<td>true</td>
<td>string</td>
<td><code>btc_usd</code><br><code>eth_usd</code><br><code>ada_usdc</code><br><code>algo_usdc</code><br><code>avax_usdc</code><br><code>bch_usdc</code><br><code>bnb_usdc</code><br><code>btc_usdc</code><br><code>btcdvol_usdc</code><br><code>buidl_usdc</code><br><code>doge_usdc</code><br><code>dot_usdc</code><br><code>eurr_usdc</code><br><code>eth_usdc</code><br><code>ethdvol_usdc</code><br><code>link_usdc</code><br><code>ltc_usdc</code><br><code>near_usdc</code><br><code>paxg_usdc</code><br><code>shib_usdc</code><br><code>sol_usdc</code><br><code>steth_usdc</code><br><code>trump_usdc</code><br><code>trx_usdc</code><br><code>uni_usdc</code><br><code>usde_usdc</code><br><code>usyc_usdc</code><br><code>xrp_usdc</code><br><code>btc_usdt</code><br><code>eth_usdt</code><br><code>eurr_usdt</code><br><code>sol_usdt</code><br><code>steth_usdt</code><br><code>usdc_usdt</code><br><code>usde_usdt</code><br><code>btc_eurr</code><br><code>btc_usde</code><br><code>btc_usyc</code><br><code>eth_btc</code><br><code>eth_eurr</code><br><code>eth_usde</code><br><code>eth_usyc</code><br><code>steth_eth</code><br><code>paxg_btc</code></td>
<td>Index identifier, matches (base) cryptocurrency with quote currency</td>
</tr>
</tbody></table>
<h3 id='response-32'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;estimated_delivery_price</td>
<td>number</td>
<td>Estimated delivery price for the market. For more details, see Documentation &gt; General &gt; Expiration Price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Value of requested index</td>
</tr>
</tbody></table>
<h2 id='public-get_index_price_names'>/public/get_index_price_names</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_index_price_names"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_index_price_names</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/get_index_price_names"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7617</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"btc_usd"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"eth_usd"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"btc_usdc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"eth_usdc"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves the identifiers of all supported Price Indexes</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_index_price_names" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-33'>Parameters</h3>
<p><em>This method takes no parameters</em></p>
<h3 id='response-33'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='public-get_instrument'>/public/get_instrument</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_instrument?instrument_name=BTC-13JAN23-16000-P"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_instrument</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-13JAN23-16000-P</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_instrument"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-13JAN23-16000-P"</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"tick_size"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0005</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tick_size_steps"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"above_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_size"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.001</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"above_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_size"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.003</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"taker_commission"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0003</span><span class="p">,</span><span class="w">
    </span><span class="nl">"strike"</span><span class="p">:</span><span class="w"> </span><span class="mi">16000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"settlement_period"</span><span class="p">:</span><span class="w"> </span><span class="s2">"week"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"settlement_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"rfq"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quote_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price_index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc_usd"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"option_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"put"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_trade_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"maker_commission"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0003</span><span class="p">,</span><span class="w">
    </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"option"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"is_active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-13JAN23-16000-P"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"instrument_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">144613</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expiration_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1673596800000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1671696002000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"counter_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contract_size"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"block_trade_tick_size"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
    </span><span class="nl">"block_trade_min_trade_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
    </span><span class="nl">"block_trade_commission"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00015</span><span class="p">,</span><span class="w">
    </span><span class="nl">"base_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves information about instrument</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_instrument" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-34'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
</tbody></table>
<h3 id='response-34'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;base_currency</td>
<td>string</td>
<td>The underlying currency being traded.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_commission</td>
<td>number</td>
<td>Block Trade commission for instrument.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_min_trade_amount</td>
<td>number</td>
<td>Minimum amount for block trading.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_tick_size</td>
<td>number</td>
<td>Specifies minimal price change for block trading.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contract_size</td>
<td>integer</td>
<td>Contract size for instrument.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;counter_currency</td>
<td>string</td>
<td>Counter currency for the instrument.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The time when the instrument was first created (milliseconds since the UNIX epoch).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;expiration_timestamp</td>
<td>integer</td>
<td>The time when the instrument will expire (milliseconds since the UNIX epoch).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;future_type</td>
<td>string</td>
<td>Future type (only for futures)(field is deprecated and will be removed in the future, <code>instrument_type</code> should be used instead).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_id</td>
<td>integer</td>
<td>Instrument ID</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_type</td>
<td>string</td>
<td>Type of the instrument. <code>linear</code> or <code>reversed</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_active</td>
<td>boolean</td>
<td>Indicates if the instrument can currently be traded.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;kind</td>
<td>string</td>
<td>Instrument kind: <code>&quot;future&quot;</code>, <code>&quot;option&quot;</code>, <code>&quot;spot&quot;</code>, <code>&quot;future_combo&quot;</code>, <code>&quot;option_combo&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maker_commission</td>
<td>number</td>
<td>Maker commission for instrument.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;max_leverage</td>
<td>integer</td>
<td>Maximal leverage for instrument (only for futures).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;max_liquidation_commission</td>
<td>number</td>
<td>Maximal liquidation trade commission for instrument (only for futures).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;min_trade_amount</td>
<td>number</td>
<td>Minimum amount for trading. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;option_type</td>
<td>string</td>
<td>The option type (only for options).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price_index</td>
<td>string</td>
<td>Name of price index that is used for this instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_currency</td>
<td>string</td>
<td>The currency in which the instrument prices are quoted.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;rfq</td>
<td>boolean</td>
<td>Whether or not RFQ is active on the instrument.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlement_currency</td>
<td>string</td>
<td>Optional (not added for spot). Settlement currency for the instrument.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlement_period</td>
<td>string</td>
<td>Optional (not added for spot). The settlement period.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;strike</td>
<td>number</td>
<td>The strike value (only for options).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;taker_commission</td>
<td>number</td>
<td>Taker commission for instrument.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_size</td>
<td>number</td>
<td>Specifies minimal price change and, as follows, the number of decimal places for instrument prices.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_size_steps</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;above_price</td>
<td>number</td>
<td>The price from which the increased tick size applies</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_size</td>
<td>number</td>
<td>Tick size to be used above the price. It must be multiple of the minimum tick size.</td>
</tr>
</tbody></table>
<h2 id='public-get_instruments'>/public/get_instruments</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_instruments?currency=BTC&amp;kind=future"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_instruments</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">kind</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">future</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_instruments"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"kind"</span> <span class="p">:</span> <span class="s">"future"</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"tick_size"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tick_size_steps"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"taker_commission"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0005</span><span class="p">,</span><span class="w">
      </span><span class="nl">"settlement_period"</span><span class="p">:</span><span class="w"> </span><span class="s2">"month"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"settlement_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rfq"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quote_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price_index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc_usd"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"min_trade_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"max_liquidation_commission"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0075</span><span class="p">,</span><span class="w">
      </span><span class="nl">"max_leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
      </span><span class="nl">"maker_commission"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"future"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-29SEP23"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">138583</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reversed"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"expiration_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1695974400000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1664524802000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"counter_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"contract_size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"block_trade_tick_size"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="p">,</span><span class="w">
      </span><span class="nl">"block_trade_min_trade_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">200000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"block_trade_commission"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00025</span><span class="p">,</span><span class="w">
      </span><span class="nl">"base_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"tick_size"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tick_size_steps"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nl">"taker_commission"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0005</span><span class="p">,</span><span class="w">
      </span><span class="nl">"settlement_period"</span><span class="p">:</span><span class="w"> </span><span class="s2">"perpetual"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"settlement_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"rfq"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quote_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price_index"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc_usd"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"min_trade_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"max_liquidation_commission"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0075</span><span class="p">,</span><span class="w">
      </span><span class="nl">"max_leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
      </span><span class="nl">"maker_commission"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"future"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">124972</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reversed"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"expiration_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">32503708800000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1534167754000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"counter_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"contract_size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"block_trade_tick_size"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="p">,</span><span class="w">
      </span><span class="nl">"block_trade_min_trade_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">200000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"block_trade_commission"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00025</span><span class="p">,</span><span class="w">
      </span><span class="nl">"base_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves available trading instruments. This method can be used to see which instruments are available for trading, or which instruments have recently expired.
<strong>Note - This endpoint has distinct API rate limiting requirements:</strong> 1 request per 10 seconds, with a burst of 5. To avoid rate limits, we recommend using either the REST requests for server-cached data or the WebSocket subscription to <a href="https://docs.deribit.com/#instrument-state-kind-currency">instrument_state.{kind}.{currency}</a> for real-time updates. For more information, see <a href="https://support.deribit.com/hc/en-us/articles/25944617523357-Rate-Limits">Rate Limits</a>.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_instruments" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-35'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>any</code></td>
<td>The currency symbol or <code>&quot;any&quot;</code> for all</td>
</tr>
<tr>
<td>kind</td>
<td>false</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code></td>
<td>Instrument kind, if not provided instruments of all kinds are considered</td>
</tr>
<tr>
<td>expired</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Set to true to show recently expired instruments instead of active ones.</td>
</tr>
</tbody></table>
<h3 id='response-35'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;base_currency</td>
<td>string</td>
<td>The underlying currency being traded.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_commission</td>
<td>number</td>
<td>Block Trade commission for instrument.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_min_trade_amount</td>
<td>number</td>
<td>Minimum amount for block trading.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_tick_size</td>
<td>number</td>
<td>Specifies minimal price change for block trading.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contract_size</td>
<td>integer</td>
<td>Contract size for instrument.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;counter_currency</td>
<td>string</td>
<td>Counter currency for the instrument.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The time when the instrument was first created (milliseconds since the UNIX epoch).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;expiration_timestamp</td>
<td>integer</td>
<td>The time when the instrument will expire (milliseconds since the UNIX epoch).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;future_type</td>
<td>string</td>
<td>Future type (only for futures)(field is deprecated and will be removed in the future, <code>instrument_type</code> should be used instead).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_id</td>
<td>integer</td>
<td>Instrument ID</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_type</td>
<td>string</td>
<td>Type of the instrument. <code>linear</code> or <code>reversed</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_active</td>
<td>boolean</td>
<td>Indicates if the instrument can currently be traded.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;kind</td>
<td>string</td>
<td>Instrument kind: <code>&quot;future&quot;</code>, <code>&quot;option&quot;</code>, <code>&quot;spot&quot;</code>, <code>&quot;future_combo&quot;</code>, <code>&quot;option_combo&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maker_commission</td>
<td>number</td>
<td>Maker commission for instrument.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;max_leverage</td>
<td>integer</td>
<td>Maximal leverage for instrument (only for futures).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;max_liquidation_commission</td>
<td>number</td>
<td>Maximal liquidation trade commission for instrument (only for futures).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;min_trade_amount</td>
<td>number</td>
<td>Minimum amount for trading. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;option_type</td>
<td>string</td>
<td>The option type (only for options).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price_index</td>
<td>string</td>
<td>Name of price index that is used for this instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_currency</td>
<td>string</td>
<td>The currency in which the instrument prices are quoted.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;rfq</td>
<td>boolean</td>
<td>Whether or not RFQ is active on the instrument.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlement_currency</td>
<td>string</td>
<td>Optional (not added for spot). Settlement currency for the instrument.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlement_period</td>
<td>string</td>
<td>Optional (not added for spot). The settlement period.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;strike</td>
<td>number</td>
<td>The strike value (only for options).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;taker_commission</td>
<td>number</td>
<td>Taker commission for instrument.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_size</td>
<td>number</td>
<td>Specifies minimal price change and, as follows, the number of decimal places for instrument prices.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_size_steps</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;above_price</td>
<td>number</td>
<td>The price from which the increased tick size applies</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_size</td>
<td>number</td>
<td>Tick size to be used above the price. It must be multiple of the minimum tick size.</td>
</tr>
</tbody></table>
<h2 id='public-get_last_settlements_by_currency'>/public/get_last_settlements_by_currency</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_last_settlements_by_currency?count=2&amp;currency=BTC&amp;type=delivery"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">4497</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_last_settlements_by_currency</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">delivery</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">4497</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_last_settlements_by_currency"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"type"</span> <span class="p">:</span> <span class="s">"delivery"</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">2</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4497</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"settlements"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delivery"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550242800013</span><span class="p">,</span><span class="w">
        </span><span class="nl">"session_profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mf">4.703907906</span><span class="p">,</span><span class="w">
        </span><span class="nl">"profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.427669766</span><span class="p">,</span><span class="w">
        </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.121679828</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-15FEB19-4000-P"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">3566.08</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delivery"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550242800013</span><span class="p">,</span><span class="w">
        </span><span class="nl">"session_profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.135938604</span><span class="p">,</span><span class="w">
        </span><span class="nl">"profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mf">-2.539278115</span><span class="p">,</span><span class="w">
        </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">206</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-15FEB19-4000-C"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">3566.08</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"continuation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"29XjjMM7Zc6U4oytmV27f7a6YRb5aSdVijwfuYhHRTLphugjRf1edP8uGLo3w2mWKV23QgrxsmenRGqzucc7"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieves historical settlement, delivery and bankruptcy events coming from all instruments within a given currency.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_last_settlements_by_currency" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-36'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>type</td>
<td>false</td>
<td>string</td>
<td><code>settlement</code><br><code>delivery</code><br><code>bankruptcy</code></td>
<td>Settlement type</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>20</code></td>
</tr>
<tr>
<td>continuation</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Continuation token for pagination</td>
</tr>
<tr>
<td>search_start_timestamp</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The latest timestamp to return result from (milliseconds since the UNIX epoch)</td>
</tr>
</tbody></table>
<h3 id='response-36'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;continuation</td>
<td>string</td>
<td>Continuation token for pagination.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlements</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;funded</td>
<td>number</td>
<td>funded amount (bankruptcy only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;funding</td>
<td>number</td>
<td>funding (in base currency ; settlement for perpetual product only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>underlying index price at time of event (in quote currency; settlement and delivery only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>instrument name (settlement and delivery only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>mark price for at the settlement time (in quote currency; settlement and delivery only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;position</td>
<td>number</td>
<td>position size (in quote currency; settlement and delivery only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>profit and loss (in base currency; settlement and delivery only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_bankruptcy</td>
<td>number</td>
<td>value of session bankruptcy (in base currency; bankruptcy only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_profit_loss</td>
<td>number</td>
<td>total value of session profit and losses (in base currency)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_tax</td>
<td>number</td>
<td>total amount of paid taxes/fees (in base currency; bankruptcy only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_tax_rate</td>
<td>number</td>
<td>rate of paid taxes/fees (in base currency; bankruptcy only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;socialized</td>
<td>number</td>
<td>the amount of the socialized losses (in base currency; bankruptcy only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>The type of settlement. <code>settlement</code>, <code>delivery</code> or <code>bankruptcy</code>.</td>
</tr>
</tbody></table>
<h2 id='public-get_last_settlements_by_instrument'>/public/get_last_settlements_by_instrument</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_last_settlements_by_instrument?count=1&amp;instrument_name=BTC-22FEB19&amp;type=settlement"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">5482</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_last_settlements_by_instrument</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-22FEB19</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">settlement</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">5482</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_last_settlements_by_instrument"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-22FEB19"</span><span class="p">,</span>
    <span class="s">"type"</span> <span class="p">:</span> <span class="s">"settlement"</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5482</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"settlements"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"settlement"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550502000023</span><span class="p">,</span><span class="w">
        </span><span class="nl">"session_profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.116509752</span><span class="p">,</span><span class="w">
        </span><span class="nl">"profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mf">-9.999999999886402e-10</span><span class="p">,</span><span class="w">
        </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">240</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">3578.16</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-22FEB19"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">3796.43</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"continuation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2Z7mdtavzYvfuyYcHkJXvPTr9ZSMsEzM3sLCH7AbYEDd1AzTXY2hnhegQDiaP1TtU4b5iSJZ4"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieves historical public settlement, delivery and bankruptcy events filtered by instrument name.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_last_settlements_by_instrument" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-37'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>type</td>
<td>false</td>
<td>string</td>
<td><code>settlement</code><br><code>delivery</code><br><code>bankruptcy</code></td>
<td>Settlement type</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>20</code></td>
</tr>
<tr>
<td>continuation</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Continuation token for pagination</td>
</tr>
<tr>
<td>search_start_timestamp</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The latest timestamp to return result from (milliseconds since the UNIX epoch)</td>
</tr>
</tbody></table>
<h3 id='response-37'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;continuation</td>
<td>string</td>
<td>Continuation token for pagination.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlements</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;funded</td>
<td>number</td>
<td>funded amount (bankruptcy only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;funding</td>
<td>number</td>
<td>funding (in base currency ; settlement for perpetual product only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>underlying index price at time of event (in quote currency; settlement and delivery only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>instrument name (settlement and delivery only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>mark price for at the settlement time (in quote currency; settlement and delivery only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;position</td>
<td>number</td>
<td>position size (in quote currency; settlement and delivery only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>profit and loss (in base currency; settlement and delivery only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_bankruptcy</td>
<td>number</td>
<td>value of session bankruptcy (in base currency; bankruptcy only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_profit_loss</td>
<td>number</td>
<td>total value of session profit and losses (in base currency)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_tax</td>
<td>number</td>
<td>total amount of paid taxes/fees (in base currency; bankruptcy only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_tax_rate</td>
<td>number</td>
<td>rate of paid taxes/fees (in base currency; bankruptcy only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;socialized</td>
<td>number</td>
<td>the amount of the socialized losses (in base currency; bankruptcy only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>The type of settlement. <code>settlement</code>, <code>delivery</code> or <code>bankruptcy</code>.</td>
</tr>
</tbody></table>
<h2 id='public-get_last_trades_by_currency'>/public/get_last_trades_by_currency</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_last_trades_by_currency?count=1&amp;currency=BTC"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">9290</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_last_trades_by_currency</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">9290</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_last_trades_by_currency"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">9290</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">36798</span><span class="p">,</span><span class="w">
                </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"277976"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1590476708320</span><span class="p">,</span><span class="w">
                </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8767.08</span><span class="p">,</span><span class="w">
                </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8829.7</span><span class="p">,</span><span class="w">
                </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8878.53</span><span class="p">,</span><span class="w">
                </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"has_more"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve the latest trades that have occurred for instruments in a specific currency symbol.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_last_trades_by_currency" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-38'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>kind</td>
<td>false</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code><br><code>combo</code><br><code>any</code></td>
<td>Instrument kind, <code>&quot;combo&quot;</code> for any combo or <code>&quot;any&quot;</code> for all. If not provided instruments of all kinds are considered</td>
</tr>
<tr>
<td>start_id</td>
<td>false</td>
<td>string</td>
<td></td>
<td>The ID of the first trade to be returned. Number for BTC trades, or hyphen name in ex. <code>&quot;ETH-15&quot;</code> # <code>&quot;ETH_USDC-16&quot;</code></td>
</tr>
<tr>
<td>end_id</td>
<td>false</td>
<td>string</td>
<td></td>
<td>The ID of the last trade to be returned. Number for BTC trades, or hyphen name in ex. <code>&quot;ETH-15&quot;</code> # <code>&quot;ETH_USDC-16&quot;</code></td>
</tr>
<tr>
<td>start_timestamp</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The earliest timestamp to return result from (milliseconds since the UNIX epoch). When param is provided trades are returned from the earliest</td>
</tr>
<tr>
<td>end_timestamp</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The most recent timestamp to return result from (milliseconds since the UNIX epoch). Only one of params: start_timestamp, end_timestamp is truly required</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>10</code></td>
</tr>
<tr>
<td>sorting</td>
<td>false</td>
<td>string</td>
<td><code>asc</code><br><code>desc</code><br><code>default</code></td>
<td>Direction of results sorting (<code>default</code> value means no sorting, results will be returned in order in which they left the database)</td>
</tr>
</tbody></table>
<h3 id='response-38'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;has_more</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_leg_count</td>
<td>integer</td>
<td>Block trade leg count - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
</tbody></table>
<h2 id='public-get_last_trades_by_currency_and_time'>/public/get_last_trades_by_currency_and_time</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_last_trades_by_currency_and_time?count=1&amp;currency=BTC&amp;end_timestamp=1590480022768&amp;start_timestamp=1590470022768"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1469</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_last_trades_by_currency_and_time</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">start_timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1590470022768</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">end_timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1590480022768</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1469</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_last_trades_by_currency_and_time"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"start_timestamp"</span> <span class="p">:</span> <span class="mi">1590470022768</span><span class="p">,</span>
    <span class="s">"end_timestamp"</span> <span class="p">:</span> <span class="mi">1590480022768</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1469</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">3471</span><span class="p">,</span><span class="w">
                </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48077291"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1590470616101</span><span class="p">,</span><span class="w">
                </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.032</span><span class="p">,</span><span class="w">
                </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.04070324</span><span class="p">,</span><span class="w">
                </span><span class="nl">"iv"</span><span class="p">:</span><span class="w"> </span><span class="mf">74.74</span><span class="p">,</span><span class="w">
                </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-25SEP20-6000-P"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8899.93</span><span class="p">,</span><span class="w">
                </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"has_more"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieve the latest trades that have occurred for instruments in a specific currency symbol and within a given time range.</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_last_trades_by_currency_and_time" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-39'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>kind</td>
<td>false</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code><br><code>combo</code><br><code>any</code></td>
<td>Instrument kind, <code>&quot;combo&quot;</code> for any combo or <code>&quot;any&quot;</code> for all. If not provided instruments of all kinds are considered</td>
</tr>
<tr>
<td>start_timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The earliest timestamp to return result from (milliseconds since the UNIX epoch). When param is provided trades are returned from the earliest</td>
</tr>
<tr>
<td>end_timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The most recent timestamp to return result from (milliseconds since the UNIX epoch). Only one of params: start_timestamp, end_timestamp is truly required</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>10</code></td>
</tr>
<tr>
<td>sorting</td>
<td>false</td>
<td>string</td>
<td><code>asc</code><br><code>desc</code><br><code>default</code></td>
<td>Direction of results sorting (<code>default</code> value means no sorting, results will be returned in order in which they left the database)</td>
</tr>
</tbody></table>
<h3 id='response-39'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;has_more</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_leg_count</td>
<td>integer</td>
<td>Block trade leg count - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
</tbody></table>
<h2 id='public-get_last_trades_by_instrument'>/public/get_last_trades_by_instrument</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_last_trades_by_instrument?count=1&amp;instrument_name=BTC-PERPETUAL"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">9267</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_last_trades_by_instrument</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">9267</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_last_trades_by_instrument"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">9267</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">36798</span><span class="p">,</span><span class="w">
                </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"277976"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1590476708320</span><span class="p">,</span><span class="w">
                </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8767.08</span><span class="p">,</span><span class="w">
                </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8829.7</span><span class="p">,</span><span class="w">
                </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8878.53</span><span class="p">,</span><span class="w">
                </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"has_more"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieve the latest trades that have occurred for a specific instrument.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_last_trades_by_instrument" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-40'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>start_seq</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The sequence number of the first trade to be returned</td>
</tr>
<tr>
<td>end_seq</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The sequence number of the last trade to be returned</td>
</tr>
<tr>
<td>start_timestamp</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The earliest timestamp to return result from (milliseconds since the UNIX epoch). When param is provided trades are returned from the earliest</td>
</tr>
<tr>
<td>end_timestamp</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The most recent timestamp to return result from (milliseconds since the UNIX epoch). Only one of params: start_timestamp, end_timestamp is truly required</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>10</code></td>
</tr>
<tr>
<td>sorting</td>
<td>false</td>
<td>string</td>
<td><code>asc</code><br><code>desc</code><br><code>default</code></td>
<td>Direction of results sorting (<code>default</code> value means no sorting, results will be returned in order in which they left the database)</td>
</tr>
</tbody></table>
<h3 id='response-40'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;has_more</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_leg_count</td>
<td>integer</td>
<td>Block trade leg count - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
</tbody></table>
<h2 id='public-get_last_trades_by_instrument_and_time'>/public/get_last_trades_by_instrument_and_time</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_last_trades_by_instrument_and_time?count=1&amp;end_timestamp=1590480022768&amp;instrument_name=ETH-PERPETUAL"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3983</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_last_trades_by_instrument_and_time</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">ETH-PERPETUAL</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">end_timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1590480022768</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">3983</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_last_trades_by_instrument_and_time"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"ETH-PERPETUAL"</span><span class="p">,</span>
    <span class="s">"end_timestamp"</span> <span class="p">:</span> <span class="mi">1590480022768</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3983</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">1966031</span><span class="p">,</span><span class="w">
                </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-2696055"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1590479408216</span><span class="p">,</span><span class="w">
                </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">203.6</span><span class="p">,</span><span class="w">
                </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">203.41</span><span class="p">,</span><span class="w">
                </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-PERPETUAL"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">203.45</span><span class="p">,</span><span class="w">
                </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"has_more"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve the latest trades that have occurred for a specific instrument and within a given time range.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_last_trades_by_instrument_and_time" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-41'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>start_timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The earliest timestamp to return result from (milliseconds since the UNIX epoch). When param is provided trades are returned from the earliest</td>
</tr>
<tr>
<td>end_timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The most recent timestamp to return result from (milliseconds since the UNIX epoch). Only one of params: start_timestamp, end_timestamp is truly required</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>10</code></td>
</tr>
<tr>
<td>sorting</td>
<td>false</td>
<td>string</td>
<td><code>asc</code><br><code>desc</code><br><code>default</code></td>
<td>Direction of results sorting (<code>default</code> value means no sorting, results will be returned in order in which they left the database)</td>
</tr>
</tbody></table>
<h3 id='response-41'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;has_more</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_leg_count</td>
<td>integer</td>
<td>Block trade leg count - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
</tbody></table>
<h2 id='public-get_mark_price_history'>/public/get_mark_price_history</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_mark_price_history?end_timestamp=1609376810000&amp;instrument_name=BTC-25JUN21-50000-C&amp;start_timestamp=1609376800000"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_mark_price_history</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-25JUN21-50000-C</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">start_timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1609376800000</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">end_timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1609376810000</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_mark_price_history"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-25JUN21-50000-C"</span><span class="p">,</span>
    <span class="s">"start_timestamp"</span> <span class="p">:</span> <span class="mi">1609376800000</span><span class="p">,</span>
    <span class="s">"end_timestamp"</span> <span class="p">:</span> <span class="mi">1609376810000</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">[</span><span class="mi">1608142381229</span><span class="p">,</span><span class="mf">0.5165791606037885</span><span class="p">],</span><span class="w">
    </span><span class="p">[</span><span class="mi">1608142380231</span><span class="p">,</span><span class="mf">0.5165737855432504</span><span class="p">],</span><span class="w">
    </span><span class="p">[</span><span class="mi">1608142379227</span><span class="p">,</span><span class="mf">0.5165768236356326</span><span class="p">]</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Public request for 5min history of markprice values for the instrument. For now the markprice history is available only for a subset of options which take part in the volatility index calculations. All other instruments, futures and perpetuals will return an empty list.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_mark_price_history" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-42'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>start_timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The earliest timestamp to return result from (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>end_timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The most recent timestamp to return result from (milliseconds since the UNIX epoch)</td>
</tr>
</tbody></table>
<h3 id='response-42'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array</td>
<td>Markprice history values as an array of arrays with 2 values each. The inner values correspond to the timestamp in ms and the markprice itself.</td>
</tr>
</tbody></table>
<h2 id='public-get_order_book'>/public/get_order_book</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_order_book?depth=5&amp;instrument_name=BTC-PERPETUAL"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">8772</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_order_book</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">depth</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">5</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">8772</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_order_book"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span><span class="p">,</span>
    <span class="s">"depth"</span> <span class="p">:</span> <span class="mi">5</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">8772</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="mi">1550757626706</span><span class="p">,</span><span class="w">
        </span><span class="nl">"stats"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"volume"</span><span class="p">:</span><span class="mf">93.35589552</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price_change"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6913</span><span class="p">,</span><span class="w">
            </span><span class="nl">"low"</span><span class="p">:</span><span class="mf">3940.75</span><span class="p">,</span><span class="w">
            </span><span class="nl">"high"</span><span class="p">:</span><span class="mf">3976.25</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"open"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"settlement_price"</span><span class="p">:</span><span class="mf">3925.85</span><span class="p">,</span><span class="w">
        </span><span class="nl">"open_interest"</span><span class="p">:</span><span class="mf">45.27600333464605</span><span class="p">,</span><span class="w">
        </span><span class="nl">"min_price"</span><span class="p">:</span><span class="mf">3932.22</span><span class="p">,</span><span class="w">
        </span><span class="nl">"max_price"</span><span class="p">:</span><span class="mf">3971.74</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="mf">3931.97</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_price"</span><span class="p">:</span><span class="mf">3955.75</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="mf">3910.46</span><span class="p">,</span><span class="w">
        </span><span class="nl">"funding_8h"</span><span class="p">:</span><span class="mf">0.00455263</span><span class="p">,</span><span class="w">
        </span><span class="nl">"current_funding"</span><span class="p">:</span><span class="mf">0.00500063</span><span class="p">,</span><span class="w">
        </span><span class="nl">"change_id"</span><span class="p">:</span><span class="mi">474988</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bids"</span><span class="p">:[</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="mf">3955.75</span><span class="p">,</span><span class="w">
                </span><span class="mf">30.0</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="mf">3940.75</span><span class="p">,</span><span class="w">
                </span><span class="mf">102020.0</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="mf">3423.0</span><span class="p">,</span><span class="w">
                </span><span class="mf">42840.0</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"best_bid_price"</span><span class="p">:</span><span class="mf">3955.75</span><span class="p">,</span><span class="w">
        </span><span class="nl">"best_bid_amount"</span><span class="p">:</span><span class="mf">30.0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"best_ask_price"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"best_ask_amount"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"asks"</span><span class="p">:[</span><span class="w">

        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieves the order book, along with other market values for a given instrument.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_order_book" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-43'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>The instrument name for which to retrieve the order book, see <a href="#public-get_instruments"><code>public/get_instruments</code></a> to obtain instrument names.</td>
</tr>
<tr>
<td>depth</td>
<td>false</td>
<td>integer</td>
<td><code>1</code><br><code>5</code><br><code>10</code><br><code>20</code><br><code>50</code><br><code>100</code><br><code>1000</code><br><code>10000</code></td>
<td>The number of entries to return for bids and asks.</td>
</tr>
</tbody></table>
<h3 id='response-43'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ask_iv</td>
<td>number</td>
<td>(Only for option) implied volatility for best ask</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;asks</td>
<td>array of [price, amount]</td>
<td>List of asks</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_ask_amount</td>
<td>number</td>
<td>It represents the requested order size of all best asks</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_ask_price</td>
<td>number</td>
<td>The current best ask price, <code>null</code> if there aren&#39;t any asks</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_bid_amount</td>
<td>number</td>
<td>It represents the requested order size of all best bids</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_bid_price</td>
<td>number</td>
<td>The current best bid price, <code>null</code> if there aren&#39;t any bids</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;bid_iv</td>
<td>number</td>
<td>(Only for option) implied volatility for best bid</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;bids</td>
<td>array of [price, amount]</td>
<td>List of bids</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;current_funding</td>
<td>number</td>
<td>Current funding (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delivery_price</td>
<td>number</td>
<td>The settlement price for the instrument. Only when <code>state = closed</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;funding_8h</td>
<td>number</td>
<td>Funding 8h (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;greeks</td>
<td><em>object</em></td>
<td>Only for options</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delta</td>
<td>number</td>
<td>(Only for option) The delta value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;gamma</td>
<td>number</td>
<td>(Only for option) The gamma value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;rho</td>
<td>number</td>
<td>(Only for option) The rho value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;theta</td>
<td>number</td>
<td>(Only for option) The theta value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;vega</td>
<td>number</td>
<td>(Only for option) The vega value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Current index price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interest_rate</td>
<td>number</td>
<td>Interest rate used in implied volatility calculations (options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_price</td>
<td>number</td>
<td>The price for the last trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_iv</td>
<td>number</td>
<td>(Only for option) implied volatility for mark price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>The mark price for the instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;max_price</td>
<td>number</td>
<td>The maximum price for the future. Any buy orders you submit higher than this price, will be clamped to this maximum.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;min_price</td>
<td>number</td>
<td>The minimum price for the future. Any sell orders you submit lower than this price will be clamped to this minimum.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;open_interest</td>
<td>number</td>
<td>The total amount of outstanding contracts in the corresponding amount units. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlement_price</td>
<td>number</td>
<td>Optional (not added for spot). The settlement price for the instrument. Only when <code>state = open</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>The state of the order book. Possible values are <code>open</code> and <code>closed</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;stats</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;high</td>
<td>number</td>
<td>Highest price during 24h</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;low</td>
<td>number</td>
<td>Lowest price during 24h</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price_change</td>
<td>number</td>
<td>24-hour price change expressed as a percentage, <code>null</code> if there weren&#39;t any trades</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;volume</td>
<td>number</td>
<td>Volume during last 24h in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;volume_usd</td>
<td>number</td>
<td>Volume in usd (futures only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_index</td>
<td>number</td>
<td>Name of the underlying future, or <code>index_price</code> (options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (options only)</td>
</tr>
</tbody></table>
<h2 id='public-get_order_book_by_instrument_id'>/public/get_order_book_by_instrument_id</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_order_book_by_instrument_id?instrument_id=42&amp;depth=1"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_order_book_by_instrument_id</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">depth</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/get_order_book_by_instrument_id"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"instrument_id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
        <span class="s">"depth"</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">8772</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="mi">1550757626706</span><span class="p">,</span><span class="w">
        </span><span class="nl">"stats"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"volume"</span><span class="p">:</span><span class="mf">93.35589552</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price_change"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6913</span><span class="p">,</span><span class="w">
            </span><span class="nl">"low"</span><span class="p">:</span><span class="mf">3940.75</span><span class="p">,</span><span class="w">
            </span><span class="nl">"high"</span><span class="p">:</span><span class="mf">3976.25</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"open"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"settlement_price"</span><span class="p">:</span><span class="mf">3925.85</span><span class="p">,</span><span class="w">
        </span><span class="nl">"open_interest"</span><span class="p">:</span><span class="mf">45.27600333464605</span><span class="p">,</span><span class="w">
        </span><span class="nl">"min_price"</span><span class="p">:</span><span class="mf">3932.22</span><span class="p">,</span><span class="w">
        </span><span class="nl">"max_price"</span><span class="p">:</span><span class="mf">3971.74</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="mf">3931.97</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_price"</span><span class="p">:</span><span class="mf">3955.75</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="mf">3910.46</span><span class="p">,</span><span class="w">
        </span><span class="nl">"funding_8h"</span><span class="p">:</span><span class="mf">0.00455263</span><span class="p">,</span><span class="w">
        </span><span class="nl">"current_funding"</span><span class="p">:</span><span class="mf">0.00500063</span><span class="p">,</span><span class="w">
        </span><span class="nl">"change_id"</span><span class="p">:</span><span class="mi">474988</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bids"</span><span class="p">:[</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="mf">3955.75</span><span class="p">,</span><span class="w">
                </span><span class="mf">30.0</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="mf">3940.75</span><span class="p">,</span><span class="w">
                </span><span class="mf">102020.0</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="p">[</span><span class="w">
                </span><span class="mf">3423.0</span><span class="p">,</span><span class="w">
                </span><span class="mf">42840.0</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"best_bid_price"</span><span class="p">:</span><span class="mf">3955.75</span><span class="p">,</span><span class="w">
        </span><span class="nl">"best_bid_amount"</span><span class="p">:</span><span class="mf">30.0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"best_ask_price"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"best_ask_amount"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"asks"</span><span class="p">:[</span><span class="w">

        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieves the order book, along with other market values for a given instrument ID.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_order_book_by_instrument_id" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-44'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_id</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The instrument ID for which to retrieve the order book, see <a href="#public-get_instruments"><code>public/get_instruments</code></a> to obtain instrument IDs.</td>
</tr>
<tr>
<td>depth</td>
<td>false</td>
<td>integer</td>
<td><code>1</code><br><code>5</code><br><code>10</code><br><code>20</code><br><code>50</code><br><code>100</code><br><code>1000</code><br><code>10000</code></td>
<td>The number of entries to return for bids and asks.</td>
</tr>
</tbody></table>
<h3 id='response-44'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ask_iv</td>
<td>number</td>
<td>(Only for option) implied volatility for best ask</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;asks</td>
<td>array of [price, amount]</td>
<td>List of asks</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_ask_amount</td>
<td>number</td>
<td>It represents the requested order size of all best asks</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_ask_price</td>
<td>number</td>
<td>The current best ask price, <code>null</code> if there aren&#39;t any asks</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_bid_amount</td>
<td>number</td>
<td>It represents the requested order size of all best bids</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_bid_price</td>
<td>number</td>
<td>The current best bid price, <code>null</code> if there aren&#39;t any bids</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;bid_iv</td>
<td>number</td>
<td>(Only for option) implied volatility for best bid</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;bids</td>
<td>array of [price, amount]</td>
<td>List of bids</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;current_funding</td>
<td>number</td>
<td>Current funding (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delivery_price</td>
<td>number</td>
<td>The settlement price for the instrument. Only when <code>state = closed</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;funding_8h</td>
<td>number</td>
<td>Funding 8h (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;greeks</td>
<td><em>object</em></td>
<td>Only for options</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delta</td>
<td>number</td>
<td>(Only for option) The delta value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;gamma</td>
<td>number</td>
<td>(Only for option) The gamma value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;rho</td>
<td>number</td>
<td>(Only for option) The rho value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;theta</td>
<td>number</td>
<td>(Only for option) The theta value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;vega</td>
<td>number</td>
<td>(Only for option) The vega value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Current index price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interest_rate</td>
<td>number</td>
<td>Interest rate used in implied volatility calculations (options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_price</td>
<td>number</td>
<td>The price for the last trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_iv</td>
<td>number</td>
<td>(Only for option) implied volatility for mark price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>The mark price for the instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;max_price</td>
<td>number</td>
<td>The maximum price for the future. Any buy orders you submit higher than this price, will be clamped to this maximum.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;min_price</td>
<td>number</td>
<td>The minimum price for the future. Any sell orders you submit lower than this price will be clamped to this minimum.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;open_interest</td>
<td>number</td>
<td>The total amount of outstanding contracts in the corresponding amount units. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlement_price</td>
<td>number</td>
<td>Optional (not added for spot). The settlement price for the instrument. Only when <code>state = open</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>The state of the order book. Possible values are <code>open</code> and <code>closed</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;stats</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;high</td>
<td>number</td>
<td>Highest price during 24h</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;low</td>
<td>number</td>
<td>Lowest price during 24h</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price_change</td>
<td>number</td>
<td>24-hour price change expressed as a percentage, <code>null</code> if there weren&#39;t any trades</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;volume</td>
<td>number</td>
<td>Volume during last 24h in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;volume_usd</td>
<td>number</td>
<td>Volume in usd (futures only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_index</td>
<td>number</td>
<td>Name of the underlying future, or <code>index_price</code> (options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (options only)</td>
</tr>
</tbody></table>
<h2 id='public-get_rfqs'>/public/get_rfqs</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_rfqs?currency=BTC&amp;kind=future"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_rfqs</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">kind</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">future</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_rfqs"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"kind"</span> <span class="p">:</span> <span class="s">"future"</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"traded_volume"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_rfq_tstamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1634816611595</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve active RFQs for instruments in given currency.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_rfqs" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-45'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>kind</td>
<td>false</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code></td>
<td>Instrument kind, if not provided instruments of all kinds are considered</td>
</tr>
</tbody></table>
<h3 id='response-45'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_rfq_timestamp</td>
<td>integer</td>
<td>The timestamp of last RFQ (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;side</td>
<td>string</td>
<td>Side - <code>buy</code> or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;traded_volume</td>
<td>number</td>
<td>Volume traded since last RFQ</td>
</tr>
</tbody></table>
<h2 id='public-get_supported_index_names'>/public/get_supported_index_names</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_supported_index_names?type=all"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_supported_index_names</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">all</span><span class="dl">"</span><span class="p">}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/get_supported_index_names"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"type"</span><span class="p">:</span> <span class="s">"all"</span><span class="p">}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">25718</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"btc_eth"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"btc_usdc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"eth_usdc"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves the identifiers of all supported Price Indexes</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_supported_index_names" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-46'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>false</td>
<td>string</td>
<td><code>all</code><br><code>spot</code><br><code>derivative</code></td>
<td>Type of a cryptocurrency price index</td>
</tr>
</tbody></table>
<h3 id='response-46'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='public-get_trade_volumes'>/public/get_trade_volumes</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_trade_volumes?"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">6387</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_trade_volumes</span><span class="dl">"</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">6387</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_trade_volumes"</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6387</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"puts_volume"</span><span class="p">:</span><span class="w"> </span><span class="mi">48</span><span class="p">,</span><span class="w">
      </span><span class="nl">"futures_volume"</span><span class="p">:</span><span class="w"> </span><span class="mf">6.25578452</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"calls_volume"</span><span class="p">:</span><span class="w"> </span><span class="mi">145</span><span class="p">,</span><span class="w">
      </span><span class="nl">"spot_volume"</span><span class="p">:</span><span class="w"> </span><span class="mf">11.1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"puts_volume"</span><span class="p">:</span><span class="w"> </span><span class="mf">122.65</span><span class="p">,</span><span class="w">
      </span><span class="nl">"futures_volume"</span><span class="p">:</span><span class="w"> </span><span class="mf">374.392173</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"calls_volume"</span><span class="p">:</span><span class="w"> </span><span class="mf">37.4</span><span class="p">,</span><span class="w">
      </span><span class="nl">"spot_volume"</span><span class="p">:</span><span class="w"> </span><span class="mf">57.7</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves aggregated 24h trade volumes for different instrument types and currencies.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_trade_volumes" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-47'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>extended</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Request for extended statistics. Including also 7 and 30 days volumes (default false)</td>
</tr>
</tbody></table>
<h3 id='response-47'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;calls_volume</td>
<td>number</td>
<td>Total 24h trade volume for call options.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;calls_volume_30d</td>
<td>number</td>
<td>Total 30d trade volume for call options.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;calls_volume_7d</td>
<td>number</td>
<td>Total 7d trade volume for call options.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;futures_volume</td>
<td>number</td>
<td>Total 24h trade volume for futures.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;futures_volume_30d</td>
<td>number</td>
<td>Total 30d trade volume for futures.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;futures_volume_7d</td>
<td>number</td>
<td>Total 7d trade volume for futures.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;puts_volume</td>
<td>number</td>
<td>Total 24h trade volume for put options.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;puts_volume_30d</td>
<td>number</td>
<td>Total 30d trade volume for put options.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;puts_volume_7d</td>
<td>number</td>
<td>Total 7d trade volume for put options.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;spot_volume</td>
<td>number</td>
<td>Total 24h trade for spot.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;spot_volume_30d</td>
<td>number</td>
<td>Total 30d trade for spot.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;spot_volume_7d</td>
<td>number</td>
<td>Total 7d trade for spot.</td>
</tr>
</tbody></table>
<h2 id='public-get_tradingview_chart_data'>/public/get_tradingview_chart_data</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_tradingview_chart_data?end_timestamp=1554376800000&amp;instrument_name=BTC-5APR19&amp;resolution=30&amp;start_timestamp=1554373800000"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">833</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_tradingview_chart_data</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-5APR19</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">start_timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1554373800000</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">end_timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1554376800000</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">resolution</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">30</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">833</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_tradingview_chart_data"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-5APR19"</span><span class="p">,</span>
    <span class="s">"start_timestamp"</span> <span class="p">:</span> <span class="mi">1554373800000</span><span class="p">,</span>
    <span class="s">"end_timestamp"</span> <span class="p">:</span> <span class="mi">1554376800000</span><span class="p">,</span>
    <span class="s">"resolution"</span> <span class="p">:</span> <span class="s">"30"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">833</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="mf">19.007942601</span><span class="p">,</span><span class="w">
      </span><span class="mf">20.095877981</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"cost"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="mf">19000.0</span><span class="p">,</span><span class="w">
      </span><span class="mf">23400.0</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"ticks"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="mi">1554373800000</span><span class="p">,</span><span class="w">
      </span><span class="mi">1554375600000</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"open"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="mf">4963.42</span><span class="p">,</span><span class="w">
      </span><span class="mf">4986.29</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="mf">4728.94</span><span class="p">,</span><span class="w">
      </span><span class="mf">4726.6</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="mf">5185.45</span><span class="p">,</span><span class="w">
      </span><span class="mf">5250.87</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"close"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="mf">5052.95</span><span class="p">,</span><span class="w">
      </span><span class="mf">5013.59</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"usIn"</span><span class="p">:</span><span class="w"> </span><span class="mi">1554381680742493</span><span class="p">,</span><span class="w">
  </span><span class="nl">"usOut"</span><span class="p">:</span><span class="w"> </span><span class="mi">1554381680742698</span><span class="p">,</span><span class="w">
  </span><span class="nl">"usDiff"</span><span class="p">:</span><span class="w"> </span><span class="mi">205</span><span class="p">,</span><span class="w">
  </span><span class="nl">"testnet"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Publicly available market data used to generate a TradingView candle chart.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_tradingview_chart_data" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-48'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>start_timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The earliest timestamp to return result from (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>end_timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The most recent timestamp to return result from (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>resolution</td>
<td>true</td>
<td>string</td>
<td><code>1</code><br><code>3</code><br><code>5</code><br><code>10</code><br><code>15</code><br><code>30</code><br><code>60</code><br><code>120</code><br><code>180</code><br><code>360</code><br><code>720</code><br><code>1D</code></td>
<td>Chart bars resolution given in full minutes or keyword <code>1D</code> (only some specific resolutions are supported)</td>
</tr>
</tbody></table>
<h3 id='response-48'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;close</td>
<td>array of number</td>
<td>List of prices at close (one per candle)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cost</td>
<td>array of number</td>
<td>List of cost bars (volume in quote currency, one per candle)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;high</td>
<td>array of number</td>
<td>List of highest price levels (one per candle)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;low</td>
<td>array of number</td>
<td>List of lowest price levels (one per candle)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;open</td>
<td>array of number</td>
<td>List of prices at open (one per candle)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;status</td>
<td>string</td>
<td>Status of the query: <code>ok</code> or <code>no_data</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ticks</td>
<td>array of integer</td>
<td>Values of the time axis given in milliseconds since UNIX epoch</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;volume</td>
<td>array of number</td>
<td>List of volume bars (in base currency, one per candle)</td>
</tr>
</tbody></table>
<h2 id='public-get_volatility_index_data'>/public/get_volatility_index_data</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_volatility_index_data?currency=BTC&amp;end_timestamp=1599376800000&amp;resolution=60&amp;start_timestamp=1599373800000"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">833</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_volatility_index_data</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">start_timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1599373800000</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">end_timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1599376800000</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">resolution</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">60</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">833</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_volatility_index_data"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"start_timestamp"</span> <span class="p">:</span> <span class="mi">1599373800000</span><span class="p">,</span>
    <span class="s">"end_timestamp"</span> <span class="p">:</span> <span class="mi">1599376800000</span><span class="p">,</span>
    <span class="s">"resolution"</span> <span class="p">:</span> <span class="s">"60"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">[</span><span class="mi">1598019300000</span><span class="p">,</span><span class="mf">0.210084879</span><span class="p">,</span><span class="mf">0.212860821</span><span class="p">,</span><span class="mf">0.210084879</span><span class="p">,</span><span class="mf">0.212860821</span><span class="p">],</span><span class="w">
      </span><span class="p">[</span><span class="mi">1598019360000</span><span class="p">,</span><span class="mf">0.212869011</span><span class="p">,</span><span class="mf">0.212987527</span><span class="p">,</span><span class="mf">0.212869011</span><span class="p">,</span><span class="mf">0.212987527</span><span class="p">],</span><span class="w">
      </span><span class="p">[</span><span class="mi">1598019420000</span><span class="p">,</span><span class="mf">0.212987723</span><span class="p">,</span><span class="mf">0.212992597</span><span class="p">,</span><span class="mf">0.212987723</span><span class="p">,</span><span class="mf">0.212992597</span><span class="p">]</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"continuation"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Public market data request for volatility index candles.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_volatility_index_data" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-49'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>start_timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The earliest timestamp to return result from (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>end_timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The most recent timestamp to return result from (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>resolution</td>
<td>true</td>
<td>string</td>
<td><code>1</code><br><code>60</code><br><code>3600</code><br><code>43200</code><br><code>1D</code></td>
<td>Time resolution given in full seconds or keyword <code>1D</code> (only some specific resolutions are supported)</td>
</tr>
</tbody></table>
<h3 id='response-49'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td>Volatility index candles.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;continuation</td>
<td>integer</td>
<td>Continuation - to be used as the <code>end_timestamp</code> parameter on the next request. <code>NULL</code> when no continuation.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;data</td>
<td>array</td>
<td>Candles as an array of arrays with 5 values each. The inner values correspond to the timestamp in ms, open, high, low, and close values of the volatility index correspondingly.</td>
</tr>
</tbody></table>
<h2 id='public-ticker'>/public/ticker</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/ticker?instrument_name=BTC-PERPETUAL"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">8106</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/ticker</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">8106</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/ticker"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8106</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"best_ask_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">53040</span><span class="p">,</span><span class="w">
    </span><span class="nl">"best_ask_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">36290</span><span class="p">,</span><span class="w">
    </span><span class="nl">"best_bid_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">4600</span><span class="p">,</span><span class="w">
    </span><span class="nl">"best_bid_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">36289.5</span><span class="p">,</span><span class="w">
    </span><span class="nl">"current_funding"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"estimated_delivery_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">36297.02</span><span class="p">,</span><span class="w">
    </span><span class="nl">"funding_8h"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00002203</span><span class="p">,</span><span class="w">
    </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">36297.02</span><span class="p">,</span><span class="w">
    </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"interest_value"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.7362511643080387</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">36289.5</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">36288.31</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">36833.4</span><span class="p">,</span><span class="w">
    </span><span class="nl">"min_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">35744.73</span><span class="p">,</span><span class="w">
    </span><span class="nl">"open_interest"</span><span class="p">:</span><span class="w"> </span><span class="mi">502231260</span><span class="p">,</span><span class="w">
    </span><span class="nl">"settlement_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">36169.49</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"stats"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"high"</span><span class="p">:</span><span class="w"> </span><span class="mf">36824.5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"low"</span><span class="p">:</span><span class="w"> </span><span class="mf">35213.5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price_change"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2362</span><span class="p">,</span><span class="w">
      </span><span class="nl">"volume"</span><span class="p">:</span><span class="w"> </span><span class="mf">7831.26548117</span><span class="p">,</span><span class="w">
      </span><span class="nl">"volume_usd"</span><span class="p">:</span><span class="w"> </span><span class="mi">282615600</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1623059681955</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Get ticker for an instrument.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fticker" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-50'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
</tbody></table>
<h3 id='response-50'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ask_iv</td>
<td>number</td>
<td>(Only for option) implied volatility for best ask</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_ask_amount</td>
<td>number</td>
<td>It represents the requested order size of all best asks</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_ask_price</td>
<td>number</td>
<td>The current best ask price, <code>null</code> if there aren&#39;t any asks</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_bid_amount</td>
<td>number</td>
<td>It represents the requested order size of all best bids</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_bid_price</td>
<td>number</td>
<td>The current best bid price, <code>null</code> if there aren&#39;t any bids</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;bid_iv</td>
<td>number</td>
<td>(Only for option) implied volatility for best bid</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;current_funding</td>
<td>number</td>
<td>Current funding (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delivery_price</td>
<td>number</td>
<td>The settlement price for the instrument. Only when <code>state = closed</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;estimated_delivery_price</td>
<td>number</td>
<td>Estimated delivery price for the market. For more details, see Contract Specification &gt; General Documentation &gt; Expiration Price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;funding_8h</td>
<td>number</td>
<td>Funding 8h (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;greeks</td>
<td><em>object</em></td>
<td>Only for options</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delta</td>
<td>number</td>
<td>(Only for option) The delta value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;gamma</td>
<td>number</td>
<td>(Only for option) The gamma value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;rho</td>
<td>number</td>
<td>(Only for option) The rho value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;theta</td>
<td>number</td>
<td>(Only for option) The theta value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;vega</td>
<td>number</td>
<td>(Only for option) The vega value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Current index price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interest_rate</td>
<td>number</td>
<td>Interest rate used in implied volatility calculations (options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interest_value</td>
<td>number</td>
<td>Value used to calculate <code>realized_funding</code> in positions (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_price</td>
<td>number</td>
<td>The price for the last trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_iv</td>
<td>number</td>
<td>(Only for option) implied volatility for mark price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>The mark price for the instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;max_price</td>
<td>number</td>
<td>The maximum price for the future. Any buy orders you submit higher than this price, will be clamped to this maximum.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;min_price</td>
<td>number</td>
<td>The minimum price for the future. Any sell orders you submit lower than this price will be clamped to this minimum.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;open_interest</td>
<td>number</td>
<td>The total amount of outstanding contracts in the corresponding amount units. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlement_price</td>
<td>number</td>
<td>Optional (not added for spot). The settlement price for the instrument. Only when <code>state = open</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>The state of the order book. Possible values are <code>open</code> and <code>closed</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;stats</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;high</td>
<td>number</td>
<td>Highest price during 24h</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;low</td>
<td>number</td>
<td>Lowest price during 24h</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price_change</td>
<td>number</td>
<td>24-hour price change expressed as a percentage, <code>null</code> if there weren&#39;t any trades</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;volume</td>
<td>number</td>
<td>Volume during last 24h in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;volume_usd</td>
<td>number</td>
<td>Volume in usd (futures only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_index</td>
<td>number</td>
<td>Name of the underlying future, or <code>index_price</code> (options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (options only)</td>
</tr>
</tbody></table>
<h1 id='trading'>Trading</h1><h2 id='private-buy'>/private/buy</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/buy?amount=40&amp;instrument_name=ETH-PERPETUAL&amp;label=market0000234&amp;type=market"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">5275</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/buy</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">ETH-PERPETUAL</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">40</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">market</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">label</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">market0000234</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">5275</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/buy"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"ETH-PERPETUAL"</span><span class="p">,</span>
    <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">40</span><span class="p">,</span>
    <span class="s">"type"</span> <span class="p">:</span> <span class="s">"market"</span><span class="p">,</span>
    <span class="s">"label"</span> <span class="p">:</span> <span class="s">"market0000234"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5275</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">1966056</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-2696083"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1590483938456</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">203.3</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-584849853"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"matching_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">203.28</span><span class="p">,</span><span class="w">
        </span><span class="nl">"liquidity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market0000234"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">203.33</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00014757</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"order"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"web"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_in_force"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"replaced"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">207.3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-584849853"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"max_show"</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1590483938456</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market0000234"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_rebalance"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_liquidation"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"filled_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1590483938456</span><span class="p">,</span><span class="w">
      </span><span class="nl">"average_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">203.3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Places a buy order for an instrument.</p>

<p><strong>Scope: </strong> <code>trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fbuy" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-51'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>amount</td>
<td>false</td>
<td>number</td>
<td></td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin. The <code>amount</code> is a mandatory parameter if <code>contracts</code> parameter is missing. If both <code>contracts</code> and <code>amount</code> parameter are passed they must match each other otherwise error is returned.</td>
</tr>
<tr>
<td>contracts</td>
<td>false</td>
<td>number</td>
<td></td>
<td>It represents the requested order size in contract units and can be passed instead of <code>amount</code>. The <code>contracts</code> is a mandatory parameter if <code>amount</code> parameter is missing. If both <code>contracts</code> and <code>amount</code> parameter are passed they must match each other otherwise error is returned.</td>
</tr>
<tr>
<td>type</td>
<td>false</td>
<td>string</td>
<td><code>limit</code><br><code>stop_limit</code><br><code>take_limit</code><br><code>market</code><br><code>stop_market</code><br><code>take_market</code><br><code>market_limit</code><br><code>trailing_stop</code></td>
<td>The order type, default: <code>&quot;limit&quot;</code></td>
</tr>
<tr>
<td>label</td>
<td>false</td>
<td>string</td>
<td></td>
<td>user defined label for the order (maximum 64 characters)</td>
</tr>
<tr>
<td>price</td>
<td>false</td>
<td>number</td>
<td></td>
<td><p>The order price in base currency (Only for limit and stop_limit orders)</p> <p>When adding an order with advanced=usd, the field price should be the option price value in USD.</p> <p>When adding an order with advanced=implv, the field price should be a value of implied volatility in percentages. For example,  price=100, means implied volatility of 100%</p></td>
</tr>
<tr>
<td>time_in_force</td>
<td>false</td>
<td>string</td>
<td><code>good_til_cancelled</code><br><code>good_til_day</code><br><code>fill_or_kill</code><br><code>immediate_or_cancel</code></td>
<td><p>Specifies how long the order remains in effect. Default <code>&quot;good_til_cancelled&quot;</code></p> <ul> <li><code>&quot;good_til_cancelled&quot;</code> - unfilled order remains in order book until cancelled</li> <li><code>&quot;good_til_day&quot;</code> - unfilled order remains in order book till the end of the trading session</li> <li><code>&quot;fill_or_kill&quot;</code> - execute a transaction immediately and completely or not at all</li> <li><code>&quot;immediate_or_cancel&quot;</code> - execute a transaction immediately, and any portion of the order that cannot be immediately filled is cancelled</li> </ul></td>
</tr>
<tr>
<td>display_amount</td>
<td>false</td>
<td>number</td>
<td></td>
<td>Initial display amount for iceberg order. Has to be at least 100 times minimum amount for instrument and ratio of hidden part vs visible part has to be less than 100 as well.</td>
</tr>
<tr>
<td>post_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td><p>If true, the order is considered post-only. If the new price would cause the order to be filled immediately (as taker), the price will be changed to be just below the spread.</p> <p>Only valid in combination with time_in_force=<code>&quot;good_til_cancelled&quot;</code></p></td>
</tr>
<tr>
<td>reject_post_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td><p>If an order is considered post-only and this field is set to true then the order is put to the order book unmodified or the request is rejected.</p> <p>Only valid in combination with <code>&quot;post_only&quot;</code> set to true</p></td>
</tr>
<tr>
<td>reduce_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>If <code>true</code>, the order is considered reduce-only which is intended to only reduce a current position</td>
</tr>
<tr>
<td>trigger_price</td>
<td>false</td>
<td>number</td>
<td></td>
<td>Trigger price, required for trigger orders only (Stop-loss or Take-profit orders)</td>
</tr>
<tr>
<td>trigger_offset</td>
<td>false</td>
<td>number</td>
<td></td>
<td>The maximum deviation from the price peak beyond which the order will be triggered</td>
</tr>
<tr>
<td>trigger</td>
<td>false</td>
<td>string</td>
<td><code>index_price</code><br><code>mark_price</code><br><code>last_price</code></td>
<td>Defines the trigger type. Required for <code>&quot;Stop-Loss&quot;</code>, <code>&quot;Take-Profit&quot;</code> and <code>&quot;Trailing&quot;</code> trigger orders</td>
</tr>
<tr>
<td>advanced</td>
<td>false</td>
<td>string</td>
<td><code>usd</code><br><code>implv</code></td>
<td>Advanced option order type. (Only for options. Advanced USD orders are not supported for linear options.)</td>
</tr>
<tr>
<td>mmp</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Order MMP flag, only for order_type &#39;limit&#39;</td>
</tr>
<tr>
<td>valid_until</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Timestamp, when provided server will start processing request in Matching Engine only before given timestamp, in other cases <code>timed_out</code> error will be responded. Remember that the given timestamp should be consistent with the server&#39;s time, use <a href='#public-get_time'>/public/time</a> method to obtain current server time.</td>
</tr>
<tr>
<td>linked_order_type</td>
<td>false</td>
<td>string</td>
<td><code>one_triggers_other</code><br><code>one_cancels_other</code><br><code>one_triggers_one_cancels_other</code></td>
<td><p>The type of the linked order.</p> <ul> <li><code>&quot;one_triggers_other&quot;</code> - Execution of primary order triggers the placement of one or more secondary orders.</li> <li><code>&quot;one_cancels_other&quot;</code> -  The execution of one order in a pair automatically cancels the other, typically used to set a stop-loss and take-profit simultaneously.</li> <li><code>&quot;one_triggers_one_cancels_other&quot;</code> - The execution of a primary order triggers two secondary orders (a stop-loss and take-profit pair), where the execution of one secondary order cancels the other.</li> </ul></td>
</tr>
<tr>
<td>trigger_fill_condition</td>
<td>false</td>
<td>string</td>
<td><code>first_hit</code><br><code>complete_fill</code><br><code>incremental</code></td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>otoco_config</td>
<td>false</td>
<td>array of objects</td>
<td></td>
<td><p>List of trades to create or cancel when this order is filled.</p></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>false</td>
<td>number</td>
<td></td>
<td>It represents the requested trade size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>true</td>
<td>string</td>
<td><code>buy</code><br><code>sell</code></td>
<td>Direction of trade from the maker perspective</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>false</td>
<td>string</td>
<td><code>limit</code><br><code>stop_limit</code><br><code>take_limit</code><br><code>market</code><br><code>stop_market</code><br><code>take_market</code><br><code>market_limit</code><br><code>trailing_stop</code></td>
<td>The order type, default: <code>&quot;limit&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>false</td>
<td>string</td>
<td></td>
<td>user defined label for the order (maximum 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>false</td>
<td>number</td>
<td></td>
<td><p>The order price in base currency (Only for limit and stop_limit orders)</p> <p>When adding an order with advanced=usd, the field price should be the option price value in USD.</p> <p>When adding an order with advanced=implv, the field price should be a value of implied volatility in percentages. For example,  price=100, means implied volatility of 100%</p></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>If <code>true</code>, the order is considered reduce-only which is intended to only reduce a current position</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>false</td>
<td>string</td>
<td><code>good_til_cancelled</code><br><code>good_til_day</code><br><code>fill_or_kill</code><br><code>immediate_or_cancel</code></td>
<td><p>Specifies how long the order remains in effect. Default <code>&quot;good_til_cancelled&quot;</code></p> <ul> <li><code>&quot;good_til_cancelled&quot;</code> - unfilled order remains in order book until cancelled</li> <li><code>&quot;good_til_day&quot;</code> - unfilled order remains in order book till the end of the trading session</li> <li><code>&quot;fill_or_kill&quot;</code> - execute a transaction immediately and completely or not at all</li> <li><code>&quot;immediate_or_cancel&quot;</code> - execute a transaction immediately, and any portion of the order that cannot be immediately filled is cancelled</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td><p>If true, the order is considered post-only. If the new price would cause the order to be filled immediately (as taker), the price will be changed to be just below or above the spread (according to the direction of the order).</p> <p>Only valid in combination with time_in_force=<code>&quot;good_til_cancelled&quot;</code></p></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td><p>If an order is considered post-only and this field is set to true then the order is put to the order book unmodified or the request is rejected.</p> <p>Only valid in combination with <code>&quot;post_only&quot;</code> set to true</p></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>false</td>
<td>number</td>
<td></td>
<td>Trigger price, required for trigger orders only (Stop-loss or Take-profit orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>false</td>
<td>number</td>
<td></td>
<td>The maximum deviation from the price peak beyond which the order will be triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>false</td>
<td>string</td>
<td><code>index_price</code><br><code>mark_price</code><br><code>last_price</code></td>
<td>Defines the trigger type. Required for <code>&quot;Stop-Loss&quot;</code>, <code>&quot;Take-Profit&quot;</code> and <code>&quot;Trailing&quot;</code> trigger orders</td>
</tr>
</tbody></table>
<h3 id='response-51'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h2 id='private-sell'>/private/sell</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/sell?amount=123&amp;instrument_name=ETH-PERPETUAL&amp;price=1.45610000000000013642e%2B02&amp;trigger=last_price&amp;trigger_price=145&amp;type=stop_limit"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2148</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/sell</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">ETH-PERPETUAL</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">stop_limit</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">145.61</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">trigger_price</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">145</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">trigger</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">last_price</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2148</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/sell"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"ETH-PERPETUAL"</span><span class="p">,</span>
    <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="s">"type"</span> <span class="p">:</span> <span class="s">"stop_limit"</span><span class="p">,</span>
    <span class="s">"price"</span> <span class="p">:</span> <span class="mf">145.61</span><span class="p">,</span>
    <span class="s">"trigger_price"</span> <span class="p">:</span> <span class="mi">145</span><span class="p">,</span>
    <span class="s">"trigger"</span> <span class="p">:</span> <span class="s">"last_price"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2148</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"order"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"triggered"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"trigger"</span><span class="p">:</span><span class="w"> </span><span class="s2">"last_price"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_in_force"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"trigger_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">145</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">145.61</span><span class="p">,</span><span class="w">
      </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stop_limit"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"untriggered"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-SLTS-28"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"max_show"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550659803407</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_rebalance"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_liquidation"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550659803407</span><span class="p">,</span><span class="w">
      </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Places a sell order for an instrument.</p>

<p><strong>Scope: </strong> <code>trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsell" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-52'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>amount</td>
<td>false</td>
<td>number</td>
<td></td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin. The <code>amount</code> is a mandatory parameter if <code>contracts</code> parameter is missing. If both <code>contracts</code> and <code>amount</code> parameter are passed they must match each other otherwise error is returned.</td>
</tr>
<tr>
<td>contracts</td>
<td>false</td>
<td>number</td>
<td></td>
<td>It represents the requested order size in contract units and can be passed instead of <code>amount</code>. The <code>contracts</code> is a mandatory parameter if <code>amount</code> parameter is missing. If both <code>contracts</code> and <code>amount</code> parameter are passed they must match each other otherwise error is returned.</td>
</tr>
<tr>
<td>type</td>
<td>false</td>
<td>string</td>
<td><code>limit</code><br><code>stop_limit</code><br><code>take_limit</code><br><code>market</code><br><code>stop_market</code><br><code>take_market</code><br><code>market_limit</code><br><code>trailing_stop</code></td>
<td>The order type, default: <code>&quot;limit&quot;</code></td>
</tr>
<tr>
<td>label</td>
<td>false</td>
<td>string</td>
<td></td>
<td>user defined label for the order (maximum 64 characters)</td>
</tr>
<tr>
<td>price</td>
<td>false</td>
<td>number</td>
<td></td>
<td><p>The order price in base currency (Only for limit and stop_limit orders)</p> <p>When adding an order with advanced=usd, the field price should be the option price value in USD.</p> <p>When adding an order with advanced=implv, the field price should be a value of implied volatility in percentages. For example,  price=100, means implied volatility of 100%</p></td>
</tr>
<tr>
<td>time_in_force</td>
<td>false</td>
<td>string</td>
<td><code>good_til_cancelled</code><br><code>good_til_day</code><br><code>fill_or_kill</code><br><code>immediate_or_cancel</code></td>
<td><p>Specifies how long the order remains in effect. Default <code>&quot;good_til_cancelled&quot;</code></p> <ul> <li><code>&quot;good_til_cancelled&quot;</code> - unfilled order remains in order book until cancelled</li> <li><code>&quot;good_til_day&quot;</code> - unfilled order remains in order book till the end of the trading session</li> <li><code>&quot;fill_or_kill&quot;</code> - execute a transaction immediately and completely or not at all</li> <li><code>&quot;immediate_or_cancel&quot;</code> - execute a transaction immediately, and any portion of the order that cannot be immediately filled is cancelled</li> </ul></td>
</tr>
<tr>
<td>display_amount</td>
<td>false</td>
<td>number</td>
<td></td>
<td>Initial display amount for iceberg order. Has to be at least 100 times minimum amount for instrument and ratio of hidden part vs visible part has to be less than 100 as well.</td>
</tr>
<tr>
<td>post_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td><p>If true, the order is considered post-only. If the new price would cause the order to be filled immediately (as taker), the price will be changed to be just above the spread.</p> <p>Only valid in combination with time_in_force=<code>&quot;good_til_cancelled&quot;</code></p></td>
</tr>
<tr>
<td>reject_post_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td><p>If an order is considered post-only and this field is set to true then the order is put to the order book unmodified or the request is rejected.</p> <p>Only valid in combination with <code>&quot;post_only&quot;</code> set to true</p></td>
</tr>
<tr>
<td>reduce_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>If <code>true</code>, the order is considered reduce-only which is intended to only reduce a current position</td>
</tr>
<tr>
<td>trigger_price</td>
<td>false</td>
<td>number</td>
<td></td>
<td>Trigger price, required for trigger orders only (Stop-loss or Take-profit orders)</td>
</tr>
<tr>
<td>trigger_offset</td>
<td>false</td>
<td>number</td>
<td></td>
<td>The maximum deviation from the price peak beyond which the order will be triggered</td>
</tr>
<tr>
<td>trigger</td>
<td>false</td>
<td>string</td>
<td><code>index_price</code><br><code>mark_price</code><br><code>last_price</code></td>
<td>Defines the trigger type. Required for <code>&quot;Stop-Loss&quot;</code>, <code>&quot;Take-Profit&quot;</code> and <code>&quot;Trailing&quot;</code> trigger orders</td>
</tr>
<tr>
<td>advanced</td>
<td>false</td>
<td>string</td>
<td><code>usd</code><br><code>implv</code></td>
<td>Advanced option order type. (Only for options. Advanced USD orders are not supported for linear options.)</td>
</tr>
<tr>
<td>mmp</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Order MMP flag, only for order_type &#39;limit&#39;</td>
</tr>
<tr>
<td>valid_until</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Timestamp, when provided server will start processing request in Matching Engine only before given timestamp, in other cases <code>timed_out</code> error will be responded. Remember that the given timestamp should be consistent with the server&#39;s time, use <a href='#public-get_time'>/public/time</a> method to obtain current server time.</td>
</tr>
<tr>
<td>linked_order_type</td>
<td>false</td>
<td>string</td>
<td><code>one_triggers_other</code><br><code>one_cancels_other</code><br><code>one_triggers_one_cancels_other</code></td>
<td><p>The type of the linked order.</p> <ul> <li><code>&quot;one_triggers_other&quot;</code> - Execution of primary order triggers the placement of one or more secondary orders.</li> <li><code>&quot;one_cancels_other&quot;</code> -  The execution of one order in a pair automatically cancels the other, typically used to set a stop-loss and take-profit simultaneously.</li> <li><code>&quot;one_triggers_one_cancels_other&quot;</code> - The execution of a primary order triggers two secondary orders (a stop-loss and take-profit pair), where the execution of one secondary order cancels the other.</li> </ul></td>
</tr>
<tr>
<td>trigger_fill_condition</td>
<td>false</td>
<td>string</td>
<td><code>first_hit</code><br><code>complete_fill</code><br><code>incremental</code></td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>otoco_config</td>
<td>false</td>
<td>array of objects</td>
<td></td>
<td><p>List of trades to create or cancel when this order is filled.</p></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>false</td>
<td>number</td>
<td></td>
<td>It represents the requested trade size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>true</td>
<td>string</td>
<td><code>buy</code><br><code>sell</code></td>
<td>Direction of trade from the maker perspective</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>false</td>
<td>string</td>
<td><code>limit</code><br><code>stop_limit</code><br><code>take_limit</code><br><code>market</code><br><code>stop_market</code><br><code>take_market</code><br><code>market_limit</code><br><code>trailing_stop</code></td>
<td>The order type, default: <code>&quot;limit&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>false</td>
<td>string</td>
<td></td>
<td>user defined label for the order (maximum 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>false</td>
<td>number</td>
<td></td>
<td><p>The order price in base currency (Only for limit and stop_limit orders)</p> <p>When adding an order with advanced=usd, the field price should be the option price value in USD.</p> <p>When adding an order with advanced=implv, the field price should be a value of implied volatility in percentages. For example,  price=100, means implied volatility of 100%</p></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>If <code>true</code>, the order is considered reduce-only which is intended to only reduce a current position</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>false</td>
<td>string</td>
<td><code>good_til_cancelled</code><br><code>good_til_day</code><br><code>fill_or_kill</code><br><code>immediate_or_cancel</code></td>
<td><p>Specifies how long the order remains in effect. Default <code>&quot;good_til_cancelled&quot;</code></p> <ul> <li><code>&quot;good_til_cancelled&quot;</code> - unfilled order remains in order book until cancelled</li> <li><code>&quot;good_til_day&quot;</code> - unfilled order remains in order book till the end of the trading session</li> <li><code>&quot;fill_or_kill&quot;</code> - execute a transaction immediately and completely or not at all</li> <li><code>&quot;immediate_or_cancel&quot;</code> - execute a transaction immediately, and any portion of the order that cannot be immediately filled is cancelled</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td><p>If true, the order is considered post-only. If the new price would cause the order to be filled immediately (as taker), the price will be changed to be just below or above the spread (according to the direction of the order).</p> <p>Only valid in combination with time_in_force=<code>&quot;good_til_cancelled&quot;</code></p></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td><p>If an order is considered post-only and this field is set to true then the order is put to the order book unmodified or the request is rejected.</p> <p>Only valid in combination with <code>&quot;post_only&quot;</code> set to true</p></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>false</td>
<td>number</td>
<td></td>
<td>Trigger price, required for trigger orders only (Stop-loss or Take-profit orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>false</td>
<td>number</td>
<td></td>
<td>The maximum deviation from the price peak beyond which the order will be triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>false</td>
<td>string</td>
<td><code>index_price</code><br><code>mark_price</code><br><code>last_price</code></td>
<td>Defines the trigger type. Required for <code>&quot;Stop-Loss&quot;</code>, <code>&quot;Take-Profit&quot;</code> and <code>&quot;Trailing&quot;</code> trigger orders</td>
</tr>
</tbody></table>
<h3 id='response-52'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h2 id='private-edit'>/private/edit</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/edit?advanced=implv&amp;amount=4&amp;order_id=438994&amp;price=222"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3725</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/edit</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">order_id</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">438994</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">222</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">advanced</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">implv</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">3725</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/edit"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"order_id"</span> <span class="p">:</span> <span class="s">"438994"</span><span class="p">,</span>
    <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="s">"price"</span> <span class="p">:</span> <span class="mi">222</span><span class="p">,</span>
    <span class="s">"advanced"</span> <span class="p">:</span> <span class="s">"implv"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3725</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"order"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"time_in_force"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1448</span><span class="p">,</span><span class="w">
      </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"438994"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"max_show"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550585797677</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_rebalance"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_liquidation"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-22FEB19-3500-C"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"implv"</span><span class="p">:</span><span class="w"> </span><span class="mi">222</span><span class="p">,</span><span class="w">
      </span><span class="nl">"filled_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550585741277</span><span class="p">,</span><span class="w">
      </span><span class="nl">"average_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
      </span><span class="nl">"advanced"</span><span class="p">:</span><span class="w"> </span><span class="s2">"implv"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Change price, amount and/or other properties of an order.</p>

<p><strong>Scope: </strong> <code>trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fedit" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-53'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>true</td>
<td>string</td>
<td></td>
<td>The order id</td>
</tr>
<tr>
<td>amount</td>
<td>false</td>
<td>number</td>
<td></td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin. The <code>amount</code> is a mandatory parameter if <code>contracts</code> parameter is missing. If both <code>contracts</code> and <code>amount</code> parameter are passed they must match each other otherwise error is returned.</td>
</tr>
<tr>
<td>contracts</td>
<td>false</td>
<td>number</td>
<td></td>
<td>It represents the requested order size in contract units and can be passed instead of <code>amount</code>. The <code>contracts</code> is a mandatory parameter if <code>amount</code> parameter is missing. If both <code>contracts</code> and <code>amount</code> parameter are passed they must match each other otherwise error is returned.</td>
</tr>
<tr>
<td>price</td>
<td>false</td>
<td>number</td>
<td></td>
<td><p>The order price in base currency.</p> <p>When editing an option order with advanced=usd, the field price should be the option price value in USD.</p> <p>When editing an option order with advanced=implv, the field price should be a value of implied volatility in percentages. For example,  price=100, means implied volatility of 100%</p></td>
</tr>
<tr>
<td>post_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td><p>If true, the order is considered post-only. If the new price would cause the order to be filled immediately (as taker), the price will be changed to be just below or above the spread (accordingly to the original order type).</p> <p>Only valid in combination with time_in_force=<code>&quot;good_til_cancelled&quot;</code></p></td>
</tr>
<tr>
<td>reduce_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>If <code>true</code>, the order is considered reduce-only which is intended to only reduce a current position</td>
</tr>
<tr>
<td>reject_post_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td><p>If an order is considered post-only and this field is set to true then the order is put to the order book unmodified or the request is rejected.</p> <p>Only valid in combination with <code>&quot;post_only&quot;</code> set to true</p></td>
</tr>
<tr>
<td>advanced</td>
<td>false</td>
<td>string</td>
<td><code>usd</code><br><code>implv</code></td>
<td>Advanced option order type. If you have posted an advanced option order, it is necessary to re-supply this parameter when editing it (Only for options)</td>
</tr>
<tr>
<td>trigger_price</td>
<td>false</td>
<td>number</td>
<td></td>
<td>Trigger price, required for trigger orders only (Stop-loss or Take-profit orders)</td>
</tr>
<tr>
<td>trigger_offset</td>
<td>false</td>
<td>number</td>
<td></td>
<td>The maximum deviation from the price peak beyond which the order will be triggered</td>
</tr>
<tr>
<td>mmp</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Order MMP flag, only for order_type &#39;limit&#39;</td>
</tr>
<tr>
<td>valid_until</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Timestamp, when provided server will start processing request in Matching Engine only before given timestamp, in other cases <code>timed_out</code> error will be responded. Remember that the given timestamp should be consistent with the server&#39;s time, use <a href='#public-get_time'>/public/time</a> method to obtain current server time.</td>
</tr>
<tr>
<td>display_amount</td>
<td>false</td>
<td>number</td>
<td></td>
<td>Initial display amount for iceberg order. Has to be at least 100 times minimum amount for instrument and ratio of hidden part vs visible part has to be less than 100 as well.</td>
</tr>
</tbody></table>
<h3 id='response-53'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h2 id='private-edit_by_label'>/private/edit_by_label</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/edit_by_label?amount=150&amp;instrument_name=BTC-PERPETUAL&amp;label=i_love_deribit&amp;price=50111"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/edit_by_label</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">9</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">label</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">i_love_deribit</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">150</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">50111</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/edit_by_label"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">9</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span><span class="p">,</span>
    <span class="s">"label"</span> <span class="p">:</span> <span class="s">"i_love_deribit"</span><span class="p">,</span>
    <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">150</span><span class="p">,</span>
    <span class="s">"price"</span> <span class="p">:</span> <span class="mi">50111</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"order"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"web"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_in_force"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"replaced"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">50111.0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"94166"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"max_show"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1616155550773</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"i_love_deribit"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_rebalance"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_liquidation"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"filled_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1616155547764</span><span class="p">,</span><span class="w">
      </span><span class="nl">"average_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Change price, amount and/or other properties of an order with a given label. It works only when there is one open order with this label</p>

<p><strong>Scope: </strong> <code>trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fedit_by_label" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-54'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>label</td>
<td>false</td>
<td>string</td>
<td></td>
<td>user defined label for the order (maximum 64 characters)</td>
</tr>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>amount</td>
<td>false</td>
<td>number</td>
<td></td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin. The <code>amount</code> is a mandatory parameter if <code>contracts</code> parameter is missing. If both <code>contracts</code> and <code>amount</code> parameter are passed they must match each other otherwise error is returned.</td>
</tr>
<tr>
<td>contracts</td>
<td>false</td>
<td>number</td>
<td></td>
<td>It represents the requested order size in contract units and can be passed instead of <code>amount</code>. The <code>contracts</code> is a mandatory parameter if <code>amount</code> parameter is missing. If both <code>contracts</code> and <code>amount</code> parameter are passed they must match each other otherwise error is returned.</td>
</tr>
<tr>
<td>price</td>
<td>false</td>
<td>number</td>
<td></td>
<td><p>The order price in base currency.</p> <p>When editing an option order with advanced=usd, the field price should be the option price value in USD.</p> <p>When editing an option order with advanced=implv, the field price should be a value of implied volatility in percentages. For example,  price=100, means implied volatility of 100%</p></td>
</tr>
<tr>
<td>post_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td><p>If true, the order is considered post-only. If the new price would cause the order to be filled immediately (as taker), the price will be changed to be just below or above the spread (accordingly to the original order type).</p> <p>Only valid in combination with time_in_force=<code>&quot;good_til_cancelled&quot;</code></p></td>
</tr>
<tr>
<td>reduce_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>If <code>true</code>, the order is considered reduce-only which is intended to only reduce a current position</td>
</tr>
<tr>
<td>reject_post_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td><p>If an order is considered post-only and this field is set to true then the order is put to the order book unmodified or the request is rejected.</p> <p>Only valid in combination with <code>&quot;post_only&quot;</code> set to true</p></td>
</tr>
<tr>
<td>advanced</td>
<td>false</td>
<td>string</td>
<td><code>usd</code><br><code>implv</code></td>
<td>Advanced option order type. If you have posted an advanced option order, it is necessary to re-supply this parameter when editing it (Only for options)</td>
</tr>
<tr>
<td>trigger_price</td>
<td>false</td>
<td>number</td>
<td></td>
<td>Trigger price, required for trigger orders only (Stop-loss or Take-profit orders)</td>
</tr>
<tr>
<td>mmp</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Order MMP flag, only for order_type &#39;limit&#39;</td>
</tr>
<tr>
<td>valid_until</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Timestamp, when provided server will start processing request in Matching Engine only before given timestamp, in other cases <code>timed_out</code> error will be responded. Remember that the given timestamp should be consistent with the server&#39;s time, use <a href='#public-get_time'>/public/time</a> method to obtain current server time.</td>
</tr>
</tbody></table>
<h3 id='response-54'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h2 id='private-cancel'>/private/cancel</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/cancel?order_id=ETH-SLIS-12"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">4214</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/cancel</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">order_id</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">ETH-SLIS-12</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">4214</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/cancel"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"order_id"</span> <span class="p">:</span> <span class="s">"ETH-SLIS-12"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4214</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"triggered"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"trigger"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index_price"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time_in_force"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"trigger_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">144.73</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market_price"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stop_market"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"order_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"untriggered"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-SLIS-12"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max_show"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550575961291</span><span class="p">,</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"is_rebalance"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"is_liquidation"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-PERPETUAL"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550575961291</span><span class="p">,</span><span class="w">
    </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Cancel an order, specified by order id</p>

<p><strong>Scope: </strong> <code>trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fcancel" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-55'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>true</td>
<td>string</td>
<td></td>
<td>The order id</td>
</tr>
</tbody></table>
<h3 id='response-55'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
</tbody></table>
<h2 id='private-cancel_all'>/private/cancel_all</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/cancel_all?"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">8748</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/cancel_all</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">8748</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/cancel_all"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8748</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="mi">37</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This method cancels all users orders and trigger orders within all currencies and instrument kinds.</p>

<p><strong>Scope: </strong> <code>trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fcancel_all" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-56'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>detailed</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>When detailed is set to <code>true</code> output format is changed. See <a href='#detailed-response-for-private-cancel_all-and-private-cancel_by_label-methods'>description</a>. Default: <code>false</code></td>
</tr>
<tr>
<td>freeze_quotes</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Whether or not to reject incoming quotes for 1 second after cancelling (<code>false</code> by default). Related to <code>private/mass_quote</code> request.</td>
</tr>
</tbody></table>
<h3 id='response-56'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>number</td>
<td>Total number of successfully cancelled orders</td>
</tr>
</tbody></table>
<h2 id='private-cancel_all_by_currency'>/private/cancel_all_by_currency</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/cancel_all_by_currency?currency=BTC&amp;kind=option"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">5663</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/cancel_all_by_currency</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">kind</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">option</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">5663</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/cancel_all_by_currency"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"kind"</span> <span class="p">:</span> <span class="s">"option"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5663</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Cancels all orders by currency, optionally filtered by instrument kind and/or order type.</p>

<p><strong>Scope: </strong> <code>trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fcancel_all_by_currency" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-57'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>kind</td>
<td>false</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code><br><code>combo</code><br><code>any</code></td>
<td>Instrument kind, <code>&quot;combo&quot;</code> for any combo or <code>&quot;any&quot;</code> for all. If not provided instruments of all kinds are considered</td>
</tr>
<tr>
<td>type</td>
<td>false</td>
<td>string</td>
<td><code>all</code><br><code>limit</code><br><code>trigger_all</code><br><code>stop</code><br><code>take</code><br><code>trailing_stop</code></td>
<td>Order type - <code>limit</code>, <code>stop</code>, <code>take</code>, <code>trigger_all</code> or <code>all</code>, default - <code>all</code></td>
</tr>
<tr>
<td>detailed</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>When detailed is set to <code>true</code> output format is changed. See <a href='#detailed-response-for-private-cancel_all-and-private-cancel_by_label-methods'>description</a>. Default: <code>false</code></td>
</tr>
<tr>
<td>freeze_quotes</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Whether or not to reject incoming quotes for 1 second after cancelling (<code>false</code> by default). Related to <code>private/mass_quote</code> request.</td>
</tr>
</tbody></table>
<h3 id='response-57'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>number</td>
<td>Total number of successfully cancelled orders</td>
</tr>
</tbody></table>
<h2 id='private-cancel_all_by_currency_pair'>/private/cancel_all_by_currency_pair</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/cancel_all_by_currency_pair?currency_pair=BTC_USD&amp;kind=option"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">5663</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/cancel_all_by_currency_pair</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency_pair</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC_USD</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">kind</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">option</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">5663</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/cancel_all_by_currency_pair"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency_pair"</span> <span class="p">:</span> <span class="s">"BTC_USD"</span><span class="p">,</span>
    <span class="s">"kind"</span> <span class="p">:</span> <span class="s">"option"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5663</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Cancels all orders by currency pair, optionally filtered by instrument kind and/or order type.</p>

<p><strong>Scope: </strong> <code>trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fcancel_all_by_currency_pair" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-58'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency_pair</td>
<td>true</td>
<td>string</td>
<td><code>btc_usd</code><br><code>eth_usd</code><br><code>ada_usdc</code><br><code>algo_usdc</code><br><code>avax_usdc</code><br><code>bch_usdc</code><br><code>bnb_usdc</code><br><code>btc_usdc</code><br><code>btcdvol_usdc</code><br><code>buidl_usdc</code><br><code>doge_usdc</code><br><code>dot_usdc</code><br><code>eurr_usdc</code><br><code>eth_usdc</code><br><code>ethdvol_usdc</code><br><code>link_usdc</code><br><code>ltc_usdc</code><br><code>near_usdc</code><br><code>paxg_usdc</code><br><code>shib_usdc</code><br><code>sol_usdc</code><br><code>steth_usdc</code><br><code>trump_usdc</code><br><code>trx_usdc</code><br><code>uni_usdc</code><br><code>usde_usdc</code><br><code>usyc_usdc</code><br><code>xrp_usdc</code><br><code>btc_usdt</code><br><code>eth_usdt</code><br><code>eurr_usdt</code><br><code>sol_usdt</code><br><code>steth_usdt</code><br><code>usdc_usdt</code><br><code>usde_usdt</code><br><code>btc_eurr</code><br><code>btc_usde</code><br><code>btc_usyc</code><br><code>eth_btc</code><br><code>eth_eurr</code><br><code>eth_usde</code><br><code>eth_usyc</code><br><code>steth_eth</code><br><code>paxg_btc</code></td>
<td>The currency pair symbol</td>
</tr>
<tr>
<td>kind</td>
<td>false</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code><br><code>combo</code><br><code>any</code></td>
<td>Instrument kind, <code>&quot;combo&quot;</code> for any combo or <code>&quot;any&quot;</code> for all. If not provided instruments of all kinds are considered</td>
</tr>
<tr>
<td>type</td>
<td>false</td>
<td>string</td>
<td><code>all</code><br><code>limit</code><br><code>trigger_all</code><br><code>stop</code><br><code>take</code><br><code>trailing_stop</code></td>
<td>Order type - <code>limit</code>, <code>stop</code>, <code>take</code>, <code>trigger_all</code> or <code>all</code>, default - <code>all</code></td>
</tr>
<tr>
<td>detailed</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>When detailed is set to <code>true</code> output format is changed. See <a href='#detailed-response-for-private-cancel_all-and-private-cancel_by_label-methods'>description</a>. Default: <code>false</code></td>
</tr>
<tr>
<td>freeze_quotes</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Whether or not to reject incoming quotes for 1 second after cancelling (<code>false</code> by default). Related to <code>private/mass_quote</code> request.</td>
</tr>
</tbody></table>
<h3 id='response-58'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>number</td>
<td>Total number of successfully cancelled orders</td>
</tr>
</tbody></table>
<h2 id='private-cancel_all_by_instrument'>/private/cancel_all_by_instrument</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/cancel_all_by_instrument?instrument_name=ETH-22FEB19-120-P&amp;type=all"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">4122</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/cancel_all_by_instrument</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">ETH-22FEB19-120-P</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">all</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">4122</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/cancel_all_by_instrument"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"ETH-22FEB19-120-P"</span><span class="p">,</span>
    <span class="s">"type"</span> <span class="p">:</span> <span class="s">"all"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4122</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Cancels all orders by instrument, optionally filtered by order type.</p>

<p><strong>Scope: </strong> <code>trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fcancel_all_by_instrument" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-59'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>type</td>
<td>false</td>
<td>string</td>
<td><code>all</code><br><code>limit</code><br><code>trigger_all</code><br><code>stop</code><br><code>take</code><br><code>trailing_stop</code></td>
<td>Order type - <code>limit</code>, <code>stop</code>, <code>take</code>, <code>trigger_all</code> or <code>all</code>, default - <code>all</code></td>
</tr>
<tr>
<td>detailed</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>When detailed is set to <code>true</code> output format is changed. See <a href='#detailed-response-for-private-cancel_all-and-private-cancel_by_label-methods'>description</a>. Default: <code>false</code></td>
</tr>
<tr>
<td>include_combos</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>When set to <code>true</code> orders in combo instruments affecting a given position will also be cancelled. Default: <code>false</code></td>
</tr>
<tr>
<td>freeze_quotes</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Whether or not to reject incoming quotes for 1 second after cancelling (<code>false</code> by default). Related to <code>private/mass_quote</code> request.</td>
</tr>
</tbody></table>
<h3 id='response-59'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>number</td>
<td>Total number of successfully cancelled orders</td>
</tr>
</tbody></table>
<h2 id='private-cancel_all_by_kind_or_type'>/private/cancel_all_by_kind_or_type</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/cancel_all_by_kind_or_type?currency=%5B%22BTC%22%2C%22ETH%22%5D&amp;kind=future"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/cancel_all_by_kind_or_type</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">ETH</span><span class="dl">"</span>
    <span class="p">],</span>
    <span class="dl">"</span><span class="s2">kind</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">future</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/cancel_all_by_kind_or_type"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="s">"BTC"</span><span class="p">,</span>
      <span class="s">"ETH"</span>
    <span class="p">],</span>
    <span class="s">"kind"</span> <span class="p">:</span> <span class="s">"future"</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Cancels all orders in currency(currencies), optionally filtered by instrument kind and/or order type.</p>

<p><strong>Scope: </strong> <code>trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fcancel_all_by_kind_or_type" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-60'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string or array of strings</td>
<td></td>
<td>The currency symbol, list of currency symbols or <code>&quot;any&quot;</code> for all</td>
</tr>
<tr>
<td>kind</td>
<td>false</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code><br><code>combo</code><br><code>any</code></td>
<td>Instrument kind, <code>&quot;combo&quot;</code> for any combo or <code>&quot;any&quot;</code> for all. If not provided instruments of all kinds are considered</td>
</tr>
<tr>
<td>type</td>
<td>false</td>
<td>string</td>
<td><code>all</code><br><code>limit</code><br><code>trigger_all</code><br><code>stop</code><br><code>take</code><br><code>trailing_stop</code></td>
<td>Order type - <code>limit</code>, <code>stop</code>, <code>take</code>, <code>trigger_all</code> or <code>all</code>, default - <code>all</code></td>
</tr>
<tr>
<td>detailed</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>When detailed is set to <code>true</code> output format is changed. See <a href='#detailed-response-for-private-cancel_all-and-private-cancel_by_label-methods'>description</a>. Default: <code>false</code></td>
</tr>
<tr>
<td>freeze_quotes</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Whether or not to reject incoming quotes for 1 second after cancelling (<code>false</code> by default). Related to <code>private/mass_quote</code> request.</td>
</tr>
</tbody></table>
<h3 id='response-60'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>number</td>
<td>Total number of successfully cancelled orders</td>
</tr>
</tbody></table>
<h2 id='private-cancel_by_label'>/private/cancel_by_label</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/cancel_by_label?label=label"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">47</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/cancel_by_label</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">label</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">label</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">47</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/cancel_by_label"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"label"</span> <span class="p">:</span> <span class="s">"label"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">47</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="mi">4</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Cancels orders by label. All user&#39;s orders (trigger orders too), with a given label are cancelled in all currencies or in one given currency (in this case currency queue is used) </p>

<p><strong>Scope: </strong> <code>trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fcancel_by_label" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-61'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>label</td>
<td>true</td>
<td>string</td>
<td></td>
<td>user defined label for the order (maximum 64 characters)</td>
</tr>
<tr>
<td>currency</td>
<td>false</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
</tbody></table>
<h3 id='response-61'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>number</td>
<td>Total number of successfully cancelled orders</td>
</tr>
</tbody></table>
<h2 id='private-cancel_quotes'>/private/cancel_quotes</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/cancel_quotes?cancel_type=delta&amp;max_delta=5.99999999999999977796e-01&amp;min_delta=4.00000000000000022204e-01"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">5663</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/cancel_quotes</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">cancel_type</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">delta</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">min_delta</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">0.4</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">max_delta</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">0.6</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">5663</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/cancel_quotes"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"cancel_type"</span> <span class="p">:</span> <span class="s">"delta"</span><span class="p">,</span>
    <span class="s">"min_delta"</span> <span class="p">:</span> <span class="mf">0.4</span><span class="p">,</span>
    <span class="s">"max_delta"</span> <span class="p">:</span> <span class="mf">0.6</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5663</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Cancels quotes based on the provided type. <code>delta</code> cancels quotes within a Delta range defined by <code>min_delta</code> and <code>max_delta</code>. <code>quote_set_id</code> cancels quotes by a specific Quote Set identifier. <code>instrument</code> cancels all quotes associated with a particular instrument. <code>kind</code> cancels all quotes for a certain instrument kind. <code>currency</code> cancels all quotes in a specified currency. <code>currency_pair</code> cancels all quotes in a specified currency pair. <code>all</code> cancels all quotes.</p>

<p><strong>Scope: </strong> <code>trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fcancel_quotes" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-62'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>detailed</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>When detailed is set to <code>true</code> output format is changed. See <a href='#detailed-response-for-private-cancel_all-and-private-cancel_by_label-methods'>description</a>. Default: <code>false</code></td>
</tr>
<tr>
<td>freeze_quotes</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Whether or not to reject incoming quotes for 1 second after cancelling (<code>false</code> by default). Related to <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>cancel_type</td>
<td>true</td>
<td>string</td>
<td><code>delta</code><br><code>quote_set_id</code><br><code>instrument</code><br><code>instrument_kind</code><br><code>currency</code><br><code>currency_pair</code><br><code>all</code></td>
<td>Type of cancel criteria.</td>
</tr>
<tr>
<td>min_delta</td>
<td>false</td>
<td>number</td>
<td></td>
<td>Min delta to cancel by delta (for <code>cancel_type</code>: <code>delta</code>).</td>
</tr>
<tr>
<td>max_delta</td>
<td>false</td>
<td>number</td>
<td></td>
<td>Max delta to cancel by delta (for <code>cancel_type</code>: <code>delta</code>).</td>
</tr>
<tr>
<td>quote_set_id</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Unique identifier for the Quote set.</td>
</tr>
<tr>
<td>instrument_name</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Instrument name.</td>
</tr>
<tr>
<td>kind</td>
<td>false</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code><br><code>combo</code><br><code>any</code></td>
<td>Instrument kind, <code>&quot;combo&quot;</code> for any combo or <code>&quot;any&quot;</code> for all. If not provided instruments of all kinds are considered</td>
</tr>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>currency_pair</td>
<td>true</td>
<td>string</td>
<td><code>btc_usd</code><br><code>eth_usd</code><br><code>ada_usdc</code><br><code>algo_usdc</code><br><code>avax_usdc</code><br><code>bch_usdc</code><br><code>bnb_usdc</code><br><code>btc_usdc</code><br><code>btcdvol_usdc</code><br><code>buidl_usdc</code><br><code>doge_usdc</code><br><code>dot_usdc</code><br><code>eurr_usdc</code><br><code>eth_usdc</code><br><code>ethdvol_usdc</code><br><code>link_usdc</code><br><code>ltc_usdc</code><br><code>near_usdc</code><br><code>paxg_usdc</code><br><code>shib_usdc</code><br><code>sol_usdc</code><br><code>steth_usdc</code><br><code>trump_usdc</code><br><code>trx_usdc</code><br><code>uni_usdc</code><br><code>usde_usdc</code><br><code>usyc_usdc</code><br><code>xrp_usdc</code><br><code>btc_usdt</code><br><code>eth_usdt</code><br><code>eurr_usdt</code><br><code>sol_usdt</code><br><code>steth_usdt</code><br><code>usdc_usdt</code><br><code>usde_usdt</code><br><code>btc_eurr</code><br><code>btc_usde</code><br><code>btc_usyc</code><br><code>eth_btc</code><br><code>eth_eurr</code><br><code>eth_usde</code><br><code>eth_usyc</code><br><code>steth_eth</code><br><code>paxg_btc</code></td>
<td>The currency pair symbol</td>
</tr>
</tbody></table>
<h3 id='response-62'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>number</td>
<td>Total number of successfully cancelled quotes</td>
</tr>
</tbody></table>
<h2 id='private-close_position'>/private/close_position</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/close_position?instrument_name=ETH-PERPETUAL&amp;price=1.45169999999999987494e%2B02&amp;type=limit"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">6130</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/close_position</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">ETH-PERPETUAL</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">limit</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">145.17</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">6130</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/close_position"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"ETH-PERPETUAL"</span><span class="p">,</span>
    <span class="s">"type"</span> <span class="p">:</span> <span class="s">"limit"</span><span class="p">,</span>
    <span class="s">"price"</span> <span class="p">:</span> <span class="mf">145.17</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6130</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">1966068</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-2696097"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1590486335742</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">202.8</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-584864807"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"matching_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">202.79</span><span class="p">,</span><span class="w">
        </span><span class="nl">"liquidity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">202.86</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00007766</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">21</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"order"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"web"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_in_force"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"replaced"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">198.75</span><span class="p">,</span><span class="w">
      </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-584864807"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"max_show"</span><span class="p">:</span><span class="w"> </span><span class="mi">21</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1590486335742</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_rebalance"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_liquidation"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"filled_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">21</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1590486335742</span><span class="p">,</span><span class="w">
      </span><span class="nl">"average_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">202.8</span><span class="p">,</span><span class="w">
      </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">21</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Makes closing position reduce only order .</p>

<p><strong>Scope: </strong> <code>trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fclose_position" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-63'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>type</td>
<td>true</td>
<td>string</td>
<td><code>limit</code><br><code>market</code></td>
<td>The order type</td>
</tr>
<tr>
<td>price</td>
<td>false</td>
<td>number</td>
<td></td>
<td>Optional price for limit order.</td>
</tr>
</tbody></table>
<h3 id='response-63'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h2 id='private-get_margins'>/private/get_margins</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_margins?amount=10000&amp;instrument_name=BTC-PERPETUAL&amp;price=3725"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_margins</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3725</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_margins"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span><span class="p">,</span>
    <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
    <span class="s">"price"</span> <span class="p">:</span> <span class="mi">3725</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"buy"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01681367</span><span class="p">,</span><span class="w">
        </span><span class="nl">"max_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">42.0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"min_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">42.0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"sell"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01680479</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get margins for a given instrument, amount and price.</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_margins" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-64'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>amount</td>
<td>true</td>
<td>number</td>
<td></td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>price</td>
<td>true</td>
<td>number</td>
<td></td>
<td>Price</td>
</tr>
</tbody></table>
<h3 id='response-64'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;buy</td>
<td>number</td>
<td>Margin when buying</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;max_price</td>
<td>number</td>
<td>The maximum price for the future. Any buy orders you submit higher than this price, will be clamped to this maximum.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;min_price</td>
<td>number</td>
<td>The minimum price for the future. Any sell orders you submit lower than this price will be clamped to this minimum.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;sell</td>
<td>number</td>
<td>Margin when selling</td>
</tr>
</tbody></table>
<h2 id='private-get_mmp_config'>/private/get_mmp_config</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_mmp_config?index_name=btc_usd&amp;mmp_group=MassQuoteBot7"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7859</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_mmp_config</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">index_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">btc_usd</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">mmp_group</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">MassQuoteBot7</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">7859</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_mmp_config"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"index_name"</span> <span class="p">:</span> <span class="s">"btc_usd"</span><span class="p">,</span>
    <span class="s">"mmp_group"</span> <span class="p">:</span> <span class="s">"MassQuoteBot7"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7859</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"index_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc_usd"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mmp_group"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MassQuoteBot7"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"interval"</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
      </span><span class="nl">"frozen_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"quantity_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"delta_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"vega_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Get MMP configuration for an index, if the parameter is not provided, a list of all MMP configurations is returned. Empty list means no MMP configuration.</p>

<p><strong>Scope: </strong> <code>trade:read</code> or <code>block_rfq:read</code> (when <code>block_rfq</code> = <code>true</code>)</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_mmp_config" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-65'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>index_name</td>
<td>false</td>
<td>string</td>
<td><code>btc_usd</code><br><code>eth_usd</code><br><code>btc_usdc</code><br><code>eth_usdc</code><br><code>ada_usdc</code><br><code>algo_usdc</code><br><code>avax_usdc</code><br><code>bch_usdc</code><br><code>bnb_usdc</code><br><code>doge_usdc</code><br><code>dot_usdc</code><br><code>link_usdc</code><br><code>ltc_usdc</code><br><code>near_usdc</code><br><code>paxg_usdc</code><br><code>shib_usdc</code><br><code>sol_usdc</code><br><code>trx_usdc</code><br><code>trump_usdc</code><br><code>uni_usdc</code><br><code>xrp_usdc</code><br><code>usde_usdc</code><br><code>buidl_usdc</code><br><code>btcdvol_usdc</code><br><code>ethdvol_usdc</code><br><code>btc_usdt</code><br><code>eth_usdt</code><br><code>all</code></td>
<td>Index identifier of derivative instrument on the platform; skipping this parameter will return all configurations</td>
</tr>
<tr>
<td>mmp_group</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Specifies the MMP group for which the configuration is being retrieved. MMP groups are used for Mass Quotes. If MMP group is not provided, the endpoint returns the configuration for the MMP settings for regular orders. The index_name must be specified before using this parameter</td>
</tr>
<tr>
<td>block_rfq</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>If true, retrieves MMP configuration for Block RFQ. When set, requires <code>block_rfq</code> scope instead of <code>trade</code> scope. Block RFQ MMP settings are completely separate from normal order/quote MMP settings.</td>
</tr>
</tbody></table>
<h3 id='response-65'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq</td>
<td>boolean</td>
<td>If true, indicates MMP configuration for Block RFQ. Block RFQ MMP settings are completely separate from normal order/quote MMP settings.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delta_limit</td>
<td>number</td>
<td>Delta limit</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;frozen_time</td>
<td>integer</td>
<td>MMP frozen time in seconds, if set to 0 manual reset is required</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_name</td>
<td>string</td>
<td>Index identifier, matches (base) cryptocurrency with quote currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interval</td>
<td>integer</td>
<td>MMP Interval in seconds, if set to 0 MMP is disabled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Specified MMP Group</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quantity_limit</td>
<td>number</td>
<td>Quantity limit</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_count_limit</td>
<td>integer</td>
<td>For Block RFQ only. The maximum number of Block RFQ trades allowed in the lookback window. Each RFQ trade counts as +1 towards the limit (not individual legs). Works across all currency pairs.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;vega_limit</td>
<td>number</td>
<td>Vega limit</td>
</tr>
</tbody></table>
<h2 id='private-get_mmp_status'>/private/get_mmp_status</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_mmp_status?index_name=btc_usd&amp;mmp_group=MassQuoteBot7"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7851</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_mmp_status</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">index_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">btc_usd</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">mmp_group</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">MassQuoteBot7</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">7851</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_mmp_status"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"index_name"</span> <span class="p">:</span> <span class="s">"btc_usd"</span><span class="p">,</span>
    <span class="s">"mmp_group"</span> <span class="p">:</span> <span class="s">"MassQuoteBot7"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7851</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"index_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc_usd"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"frozen_until"</span><span class="p">:</span><span class="w"> </span><span class="mi">1744275841861</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mmp_group"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MassQuoteBot7"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get MMP status for triggered index (or group). If the parameter is not provided, a list of all triggered MMP statuses is returned.</p>

<p><strong>Scope: </strong> <code>trade:read</code> or <code>block_rfq:read</code> (when <code>block_rfq</code> = <code>true</code>)</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_mmp_status" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-66'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>index_name</td>
<td>false</td>
<td>string</td>
<td><code>btc_usd</code><br><code>eth_usd</code><br><code>btc_usdc</code><br><code>eth_usdc</code><br><code>ada_usdc</code><br><code>algo_usdc</code><br><code>avax_usdc</code><br><code>bch_usdc</code><br><code>bnb_usdc</code><br><code>doge_usdc</code><br><code>dot_usdc</code><br><code>link_usdc</code><br><code>ltc_usdc</code><br><code>near_usdc</code><br><code>paxg_usdc</code><br><code>shib_usdc</code><br><code>sol_usdc</code><br><code>trx_usdc</code><br><code>trump_usdc</code><br><code>uni_usdc</code><br><code>xrp_usdc</code><br><code>usde_usdc</code><br><code>buidl_usdc</code><br><code>btcdvol_usdc</code><br><code>ethdvol_usdc</code><br><code>btc_usdt</code><br><code>eth_usdt</code><br><code>all</code></td>
<td>Index identifier of derivative instrument on the platform; skipping this parameter will return all configurations</td>
</tr>
<tr>
<td>mmp_group</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Specifies the MMP group for which the status is being retrieved. The <code>index_name</code> must be specified before using this parameter.</td>
</tr>
<tr>
<td>block_rfq</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>If true, retrieves MMP status for Block RFQ. When set, requires <code>block_rfq</code> scope instead of <code>trade</code> scope. Block RFQ MMP status is completely separate from normal order/quote MMP status.</td>
</tr>
</tbody></table>
<h3 id='response-66'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq</td>
<td>boolean</td>
<td>If true, indicates that the MMP status is for Block RFQ. Block RFQ MMP status is completely separate from normal order/quote MMP status.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;frozen_until</td>
<td>integer</td>
<td>Timestamp (milliseconds since the UNIX epoch) until the user will be frozen - 0 means that the user is frozen until manual reset.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_name</td>
<td>string</td>
<td>Index identifier, matches (base) cryptocurrency with quote currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Triggered mmp group, this parameter is optional (appears only for Mass Quote orders trigger)</td>
</tr>
</tbody></table>
<h2 id='private-get_open_orders'>/private/get_open_orders</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_open_orders?"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1953</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_open_orders</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1953</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_open_orders"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1953</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"time_in_force"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0028</span><span class="p">,</span><span class="w">
            </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"146062"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"max_show"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
            </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550050597036</span><span class="p">,</span><span class="w">
            </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_rebalance"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_liquidation"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-15FEB19-3250-P"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"filled_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550050597036</span><span class="p">,</span><span class="w">
            </span><span class="nl">"average_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves list of user&#39;s open orders across many currencies.</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_open_orders" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-67'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>kind</td>
<td>false</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code></td>
<td>Instrument kind, if not provided instruments of all kinds are considered</td>
</tr>
<tr>
<td>type</td>
<td>false</td>
<td>string</td>
<td><code>all</code><br><code>limit</code><br><code>trigger_all</code><br><code>stop_all</code><br><code>stop_limit</code><br><code>stop_market</code><br><code>take_all</code><br><code>take_limit</code><br><code>take_market</code><br><code>trailing_all</code><br><code>trailing_stop</code></td>
<td>Order type, default - <code>all</code></td>
</tr>
</tbody></table>
<h3 id='response-67'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
</tbody></table>
<h2 id='private-get_open_orders_by_currency'>/private/get_open_orders_by_currency</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_open_orders_by_currency?currency=BTC"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1953</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_open_orders_by_currency</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1953</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_open_orders_by_currency"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1953</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"time_in_force"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0028</span><span class="p">,</span><span class="w">
            </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"146062"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"max_show"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
            </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550050597036</span><span class="p">,</span><span class="w">
            </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_rebalance"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_liquidation"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-15FEB19-3250-P"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"filled_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550050597036</span><span class="p">,</span><span class="w">
            </span><span class="nl">"average_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves list of user&#39;s open orders.</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_open_orders_by_currency" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-68'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>kind</td>
<td>false</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code></td>
<td>Instrument kind, if not provided instruments of all kinds are considered</td>
</tr>
<tr>
<td>type</td>
<td>false</td>
<td>string</td>
<td><code>all</code><br><code>limit</code><br><code>trigger_all</code><br><code>stop_all</code><br><code>stop_limit</code><br><code>stop_market</code><br><code>take_all</code><br><code>take_limit</code><br><code>take_market</code><br><code>trailing_all</code><br><code>trailing_stop</code></td>
<td>Order type, default - <code>all</code></td>
</tr>
</tbody></table>
<h3 id='response-68'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
</tbody></table>
<h2 id='private-get_open_orders_by_instrument'>/private/get_open_orders_by_instrument</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_open_orders_by_instrument?instrument_name=ETH-22FEB19-120-C"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">8442</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_open_orders_by_instrument</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">ETH-22FEB19-120-C</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">8442</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_open_orders_by_instrument"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"ETH-22FEB19-120-C"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8442</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"time_in_force"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.135</span><span class="p">,</span><span class="w">
            </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-252017"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"max_show"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
            </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550050594882</span><span class="p">,</span><span class="w">
            </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_rebalance"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_liquidation"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-22FEB19-120-C"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"filled_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550050594882</span><span class="p">,</span><span class="w">
            </span><span class="nl">"average_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves list of user&#39;s open orders within a given Instrument.</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_open_orders_by_instrument" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-69'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>type</td>
<td>false</td>
<td>string</td>
<td><code>all</code><br><code>limit</code><br><code>trigger_all</code><br><code>stop_all</code><br><code>stop_limit</code><br><code>stop_market</code><br><code>take_all</code><br><code>take_limit</code><br><code>take_market</code><br><code>trailing_all</code><br><code>trailing_stop</code></td>
<td>Order type, default - <code>all</code></td>
</tr>
</tbody></table>
<h3 id='response-69'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
</tbody></table>
<h2 id='private-get_open_orders_by_label'>/private/get_open_orders_by_label</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_open_orders_by_label?currency=BTC&amp;label=fooBar"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1953</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_open_orders_by_label</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">label</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">fooBar</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1953</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_open_orders_by_label"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"label"</span> <span class="p">:</span> <span class="s">"fooBar"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1953</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"time_in_force"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0028</span><span class="p">,</span><span class="w">
            </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"146062"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"max_show"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
            </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550050597036</span><span class="p">,</span><span class="w">
            </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fooBar"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_rebalance"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_liquidation"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-15FEB19-3250-P"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"filled_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550050597036</span><span class="p">,</span><span class="w">
            </span><span class="nl">"average_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves list of user&#39;s open orders for given currency and label.</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_open_orders_by_label" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-70'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>label</td>
<td>false</td>
<td>string</td>
<td></td>
<td>user defined label for the order (maximum 64 characters)</td>
</tr>
</tbody></table>
<h3 id='response-70'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
</tbody></table>
<h2 id='private-get_order_history_by_currency'>/private/get_order_history_by_currency</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_order_history_by_currency?count=1&amp;currency=BTC&amp;kind=future"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">9305</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_order_history_by_currency</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">kind</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">future</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">9305</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_order_history_by_currency"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"kind"</span> <span class="p">:</span> <span class="s">"future"</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">9305</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"time_in_force"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">3886.5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"146475"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"max_show"</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550661808761</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_rebalance"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_liquidation"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"filled_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550661808761</span><span class="p">,</span><span class="w">
      </span><span class="nl">"average_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">3659.8</span><span class="p">,</span><span class="w">
      </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves history of orders that have been partially or fully filled.</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_order_history_by_currency" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-71'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>kind</td>
<td>false</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code><br><code>combo</code><br><code>any</code></td>
<td>Instrument kind, <code>&quot;combo&quot;</code> for any combo or <code>&quot;any&quot;</code> for all. If not provided instruments of all kinds are considered</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>20</code></td>
</tr>
<tr>
<td>offset</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The offset for pagination, default - <code>0</code></td>
</tr>
<tr>
<td>include_old</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Include in result orders older than 2 days, default - <code>false</code></td>
</tr>
<tr>
<td>include_unfilled</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Include in result fully unfilled closed orders, default - <code>false</code></td>
</tr>
<tr>
<td>with_continuation</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>When set to true, the API response format changes from a simple list of orders to an object containing the orders and a continuation token.</td>
</tr>
<tr>
<td>continuation</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Continuation token for pagination</td>
</tr>
<tr>
<td>historical</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td><p>Determines whether historical trade and order records should be retrieved.</p> <ul> <li><code>false</code> (default): Returns recent records: orders for 30 min, trades for 24h.</li> <li><code>true</code>: Fetches historical records, available after a short delay due to indexing. Recent data is not included.</li> </ul></td>
</tr>
</tbody></table>
<h3 id='response-71'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
</tbody></table>
<h2 id='private-get_order_history_by_instrument'>/private/get_order_history_by_instrument</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_order_history_by_instrument?count=1&amp;instrument_name=BTC-PERPETUAL"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1032</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_order_history_by_instrument</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1032</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_order_history_by_instrument"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1032</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"time_in_force"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">3886.5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"146475"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"max_show"</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550661808761</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_rebalance"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_liquidation"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"filled_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550661808761</span><span class="p">,</span><span class="w">
      </span><span class="nl">"average_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">3659.8</span><span class="p">,</span><span class="w">
      </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves history of orders that have been partially or fully filled.</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_order_history_by_instrument" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-72'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>20</code></td>
</tr>
<tr>
<td>offset</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The offset for pagination, default - <code>0</code></td>
</tr>
<tr>
<td>include_old</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Include in result orders older than 2 days, default - <code>false</code></td>
</tr>
<tr>
<td>include_unfilled</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Include in result fully unfilled closed orders, default - <code>false</code></td>
</tr>
<tr>
<td>with_continuation</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>When set to true, the API response format changes from a simple list of orders to an object containing the orders and a continuation token.</td>
</tr>
<tr>
<td>continuation</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Continuation token for pagination</td>
</tr>
<tr>
<td>historical</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td><p>Determines whether historical trade and order records should be retrieved.</p> <ul> <li><code>false</code> (default): Returns recent records: orders for 30 min, trades for 24h.</li> <li><code>true</code>: Fetches historical records, available after a short delay due to indexing. Recent data is not included.</li> </ul></td>
</tr>
</tbody></table>
<h3 id='response-72'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
</tbody></table>
<h2 id='private-get_order_margin_by_ids'>/private/get_order_margin_by_ids</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_order_margin_by_ids?ids=%5B%22ETH-349280%22%2C%22ETH-349279%22%2C%22ETH-349278%22%5D"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">5625</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_order_margin_by_ids</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">ids</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="dl">"</span><span class="s2">ETH-349280</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">ETH-349279</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">ETH-349278</span><span class="dl">"</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">5625</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_order_margin_by_ids"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"ids"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="s">"ETH-349280"</span><span class="p">,</span>
      <span class="s">"ETH-349279"</span><span class="p">,</span>
      <span class="s">"ETH-349278"</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5625</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-349278"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00091156</span><span class="p">,</span><span class="w">
      </span><span class="nl">"initial_margin_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-349279"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"initial_margin_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-349280"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"initial_margin_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves initial margins of given orders</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_order_margin_by_ids" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-73'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ids</td>
<td>true</td>
<td>array</td>
<td></td>
<td>Ids of orders</td>
</tr>
</tbody></table>
<h3 id='response-73'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;initial_margin</td>
<td>number</td>
<td>Initial margin of order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;initial_margin_currency</td>
<td>string</td>
<td>Currency of initial margin</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
</tbody></table>
<h2 id='private-get_order_state'>/private/get_order_state</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_order_state?order_id=ETH-331562"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">4316</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_order_state</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">order_id</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">ETH-331562</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">4316</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_order_state"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"order_id"</span> <span class="p">:</span> <span class="s">"ETH-331562"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4316</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"time_in_force"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">118.94</span><span class="p">,</span><span class="w">
    </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"order_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-331562"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max_show"</span><span class="p">:</span><span class="w"> </span><span class="mi">37</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550219810944</span><span class="p">,</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"is_rebalance"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"is_liquidation"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-PERPETUAL"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"filled_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">37</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550219749176</span><span class="p">,</span><span class="w">
    </span><span class="nl">"average_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">118.94</span><span class="p">,</span><span class="w">
    </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">37</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve the current state of an order.</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_order_state" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-74'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>true</td>
<td>string</td>
<td></td>
<td>The order id</td>
</tr>
</tbody></table>
<h3 id='response-74'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
</tbody></table>
<h2 id='private-get_order_state_by_label'>/private/get_order_state_by_label</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_order_state_by_label?currency=ETH&amp;label=fooBar"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">4316</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_order_state_by_label</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">ETH</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">label</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">fooBar</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">4316</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_order_state_by_label"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"ETH"</span><span class="p">,</span>
    <span class="s">"label"</span> <span class="p">:</span> <span class="s">"fooBar"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4316</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"time_in_force"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">118.94</span><span class="p">,</span><span class="w">
      </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-331562"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"max_show"</span><span class="p">:</span><span class="w"> </span><span class="mi">37</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550219810944</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fooBar"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_rebalance"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_liquidation"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"filled_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">37</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550219749176</span><span class="p">,</span><span class="w">
      </span><span class="nl">"average_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">118.94</span><span class="p">,</span><span class="w">
      </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">37</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve the state of recent orders with a given label.</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_order_state_by_label" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-75'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>label</td>
<td>false</td>
<td>string</td>
<td></td>
<td>user defined label for the order (maximum 64 characters)</td>
</tr>
</tbody></table>
<h3 id='response-75'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
</tbody></table>
<h2 id='private-get_trigger_order_history'>/private/get_trigger_order_history</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_trigger_order_history?count=10&amp;currency=ETH"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2552</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_trigger_order_history</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">ETH</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">10</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2552</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_trigger_order_history"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"ETH"</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">10</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2192</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"entries"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trigger"</span><span class="p">:</span><span class="w"> </span><span class="s2">"index"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1555918941451</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trigger_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">5285</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trigger_order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SLIS-103"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="s2">"trigger:order"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">5179.28</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"671473"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">277</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"continuation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1555918941451.SLIS-103"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves detailed log of the user&#39;s trigger orders.</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_trigger_order_history" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-76'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>instrument_name</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>20</code></td>
</tr>
<tr>
<td>continuation</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Continuation token for pagination</td>
</tr>
</tbody></table>
<h3 id='response-76'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;continuation</td>
<td>string</td>
<td>Continuation token for pagination.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;entries</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;triggered&quot;</code>, <code>&quot;cancelled&quot;</code>, or <code>&quot;rejected&quot;</code> with rejection reason (e.g. <code>&quot;rejected:reduce_direction&quot;</code>).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Requested order type: <code>&quot;limit</code> or <code>&quot;market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;request</td>
<td>string</td>
<td>Type of last request performed on the trigger order by user or system. <code>&quot;cancel&quot;</code> - when order was cancelled, <code>&quot;trigger:order&quot;</code> - when trigger order spawned market or limit order after being triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;source</td>
<td>string</td>
<td>Source of the order that is linked to the trigger order.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the user order used for the trigger-order reference before triggering</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
</tbody></table>
<h2 id='private-get_user_trades_by_currency'>/private/get_user_trades_by_currency</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_user_trades_by_currency?count=2&amp;currency=ETH&amp;start_id=ETH-34066"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">9367</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_user_trades_by_currency</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">ETH</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">start_id</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">ETH-34066</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">9367</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_user_trades_by_currency"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"ETH"</span><span class="p">,</span>
    <span class="s">"start_id"</span> <span class="p">:</span> <span class="s">"ETH-34066"</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">2</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">9367</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"underlying_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">204.5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-2696060"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1590480363130</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.361</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-584827850"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"matching_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.364585</span><span class="p">,</span><span class="w">
        </span><span class="nl">"liquidity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"iv"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-29MAY20-130-C"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">203.72</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.002</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"underlying_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">204.82</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-2696062"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1590480416119</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.015</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-584828229"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"matching_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.000596</span><span class="p">,</span><span class="w">
        </span><span class="nl">"liquidity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"iv"</span><span class="p">:</span><span class="w"> </span><span class="mf">352.91</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-29MAY20-140-P"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">204.06</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.002</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"has_more"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve the latest user trades that have occurred for instruments in a specific currency symbol. To read subaccount trades, use <code>subaccount_id</code> parameter.</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_user_trades_by_currency" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-77'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>kind</td>
<td>false</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code><br><code>combo</code><br><code>any</code></td>
<td>Instrument kind, <code>&quot;combo&quot;</code> for any combo or <code>&quot;any&quot;</code> for all. If not provided instruments of all kinds are considered</td>
</tr>
<tr>
<td>start_id</td>
<td>false</td>
<td>string</td>
<td></td>
<td>The ID of the first trade to be returned. Number for BTC trades, or hyphen name in ex. <code>&quot;ETH-15&quot;</code> # <code>&quot;ETH_USDC-16&quot;</code></td>
</tr>
<tr>
<td>end_id</td>
<td>false</td>
<td>string</td>
<td></td>
<td>The ID of the last trade to be returned. Number for BTC trades, or hyphen name in ex. <code>&quot;ETH-15&quot;</code> # <code>&quot;ETH_USDC-16&quot;</code></td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>10</code></td>
</tr>
<tr>
<td>start_timestamp</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The earliest timestamp to return result from (milliseconds since the UNIX epoch). When param is provided trades are returned from the earliest</td>
</tr>
<tr>
<td>end_timestamp</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The most recent timestamp to return result from (milliseconds since the UNIX epoch). Only one of params: start_timestamp, end_timestamp is truly required</td>
</tr>
<tr>
<td>sorting</td>
<td>false</td>
<td>string</td>
<td><code>asc</code><br><code>desc</code><br><code>default</code></td>
<td>Direction of results sorting (<code>default</code> value means no sorting, results will be returned in order in which they left the database)</td>
</tr>
<tr>
<td>historical</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td><p>Determines whether historical trade and order records should be retrieved.</p> <ul> <li><code>false</code> (default): Returns recent records: orders for 30 min, trades for 24h.</li> <li><code>true</code>: Fetches historical records, available after a short delay due to indexing. Recent data is not included.</li> </ul></td>
</tr>
<tr>
<td>subaccount_id</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The user id for the subaccount</td>
</tr>
</tbody></table>
<h3 id='response-77'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;has_more</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h2 id='private-get_user_trades_by_currency_and_time'>/private/get_user_trades_by_currency_and_time</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_user_trades_by_currency_and_time?count=2&amp;currency=BTC&amp;end_timestamp=1510480630731&amp;start_timestamp=1590480630731"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">9292</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_user_trades_by_currency_and_time</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">start_timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1590480630731</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">end_timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1510480630731</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">9292</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_user_trades_by_currency_and_time"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"start_timestamp"</span> <span class="p">:</span> <span class="mi">1590480630731</span><span class="p">,</span>
    <span class="s">"end_timestamp"</span> <span class="p">:</span> <span class="mi">1510480630731</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">2</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">9292</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"underlying_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8994.95</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48078936"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1590480620145</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.028</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4008699030"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"matching_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03135383</span><span class="p">,</span><span class="w">
        </span><span class="nl">"liquidity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"M"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"iv"</span><span class="p">:</span><span class="w"> </span><span class="mf">38.51</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-27MAY20-8750-C"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8993.47</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0004</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">299513</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"47958936"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1589923311862</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">9681.5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3993343822"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"matching_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">9684</span><span class="p">,</span><span class="w">
        </span><span class="nl">"liquidity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"M"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-26JUN20"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">9679.48</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">-2.1e-7</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"has_more"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve the latest user trades that have occurred for instruments in a specific currency symbol and within a given time range.</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_user_trades_by_currency_and_time" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-78'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>kind</td>
<td>false</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code><br><code>combo</code><br><code>any</code></td>
<td>Instrument kind, <code>&quot;combo&quot;</code> for any combo or <code>&quot;any&quot;</code> for all. If not provided instruments of all kinds are considered</td>
</tr>
<tr>
<td>start_timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The earliest timestamp to return result from (milliseconds since the UNIX epoch). When param is provided trades are returned from the earliest</td>
</tr>
<tr>
<td>end_timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The most recent timestamp to return result from (milliseconds since the UNIX epoch). Only one of params: start_timestamp, end_timestamp is truly required</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>10</code></td>
</tr>
<tr>
<td>sorting</td>
<td>false</td>
<td>string</td>
<td><code>asc</code><br><code>desc</code><br><code>default</code></td>
<td>Direction of results sorting (<code>default</code> value means no sorting, results will be returned in order in which they left the database)</td>
</tr>
<tr>
<td>historical</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td><p>Determines whether historical trade and order records should be retrieved.</p> <ul> <li><code>false</code> (default): Returns recent records: orders for 30 min, trades for 24h.</li> <li><code>true</code>: Fetches historical records, available after a short delay due to indexing. Recent data is not included.</li> </ul></td>
</tr>
</tbody></table>
<h3 id='response-78'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;has_more</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h2 id='private-get_user_trades_by_instrument'>/private/get_user_trades_by_instrument</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_user_trades_by_instrument?count=2&amp;instrument_name=ETH-PERPETUAL&amp;start_seq=1966042"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">5728</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_user_trades_by_instrument</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">ETH-PERPETUAL</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">start_seq</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1966042</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">5728</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_user_trades_by_instrument"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"ETH-PERPETUAL"</span><span class="p">,</span>
    <span class="s">"start_seq"</span> <span class="p">:</span> <span class="mi">1966042</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">2</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5728</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">1966042</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-2696068"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1590480712800</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">203.8</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-584830574"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"matching_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">203.78</span><span class="p">,</span><span class="w">
        </span><span class="nl">"liquidity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">203.89</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00036801</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">1966043</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-2696069"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1590480724473</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">203.8</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-584830695"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"matching_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">203.81</span><span class="p">,</span><span class="w">
        </span><span class="nl">"liquidity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">203.92</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00036801</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"has_more"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve the latest user trades that have occurred for a specific instrument.</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_user_trades_by_instrument" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-79'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>start_seq</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The sequence number of the first trade to be returned</td>
</tr>
<tr>
<td>end_seq</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The sequence number of the last trade to be returned</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>10</code></td>
</tr>
<tr>
<td>start_timestamp</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The earliest timestamp to return result from (milliseconds since the UNIX epoch). When param is provided trades are returned from the earliest</td>
</tr>
<tr>
<td>end_timestamp</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The most recent timestamp to return result from (milliseconds since the UNIX epoch). Only one of params: start_timestamp, end_timestamp is truly required</td>
</tr>
<tr>
<td>historical</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td><p>Determines whether historical trade and order records should be retrieved.</p> <ul> <li><code>false</code> (default): Returns recent records: orders for 30 min, trades for 24h.</li> <li><code>true</code>: Fetches historical records, available after a short delay due to indexing. Recent data is not included.</li> </ul></td>
</tr>
<tr>
<td>sorting</td>
<td>false</td>
<td>string</td>
<td><code>asc</code><br><code>desc</code><br><code>default</code></td>
<td>Direction of results sorting (<code>default</code> value means no sorting, results will be returned in order in which they left the database)</td>
</tr>
</tbody></table>
<h3 id='response-79'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;has_more</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h2 id='private-get_user_trades_by_instrument_and_time'>/private/get_user_trades_by_instrument_and_time</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_user_trades_by_instrument_and_time?count=2&amp;end_timestamp=1590480872894&amp;instrument_name=BTC-PERPETUAL&amp;start_timestamp=1590470872894"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">276</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_user_trades_by_instrument_and_time</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">start_timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1590470872894</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">end_timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1590480872894</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">276</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_user_trades_by_instrument_and_time"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span><span class="p">,</span>
    <span class="s">"start_timestamp"</span> <span class="p">:</span> <span class="mi">1590470872894</span><span class="p">,</span>
    <span class="s">"end_timestamp"</span> <span class="p">:</span> <span class="mi">1590480872894</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">2</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">276</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">30289127</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48078944"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1590480866924</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8988.5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4008716877"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"matching_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8990.52</span><span class="p">,</span><span class="w">
        </span><span class="nl">"liquidity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8995.15</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00037465</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">4490</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">30289128</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"48078945"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1590480866924</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8983.5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4008716877"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"matching_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8990.52</span><span class="p">,</span><span class="w">
        </span><span class="nl">"liquidity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8995.15</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00001503</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">180</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"has_more"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve the latest user trades that have occurred for a specific instrument and within a given time range.</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_user_trades_by_instrument_and_time" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-80'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>start_timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The earliest timestamp to return result from (milliseconds since the UNIX epoch). When param is provided trades are returned from the earliest</td>
</tr>
<tr>
<td>end_timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The most recent timestamp to return result from (milliseconds since the UNIX epoch). Only one of params: start_timestamp, end_timestamp is truly required</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>10</code></td>
</tr>
<tr>
<td>sorting</td>
<td>false</td>
<td>string</td>
<td><code>asc</code><br><code>desc</code><br><code>default</code></td>
<td>Direction of results sorting (<code>default</code> value means no sorting, results will be returned in order in which they left the database)</td>
</tr>
<tr>
<td>historical</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td><p>Determines whether historical trade and order records should be retrieved.</p> <ul> <li><code>false</code> (default): Returns recent records: orders for 30 min, trades for 24h.</li> <li><code>true</code>: Fetches historical records, available after a short delay due to indexing. Recent data is not included.</li> </ul></td>
</tr>
</tbody></table>
<h3 id='response-80'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;has_more</td>
<td>boolean</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h2 id='private-get_user_trades_by_order'>/private/get_user_trades_by_order</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_user_trades_by_order?order_id=ETH-584830574"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3466</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_user_trades_by_order</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">order_id</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">ETH-584830574</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">3466</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_user_trades_by_order"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"order_id"</span> <span class="p">:</span> <span class="s">"ETH-584830574"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3466</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">1966042</span><span class="p">,</span><span class="w">
      </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-2696068"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1590480712800</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">203.8</span><span class="p">,</span><span class="w">
      </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-584830574"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"matching_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">203.78</span><span class="p">,</span><span class="w">
      </span><span class="nl">"liquidity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">203.89</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fee_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00036801</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve the list of user trades that was created for given order</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_user_trades_by_order" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-81'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>true</td>
<td>string</td>
<td></td>
<td>The order id</td>
</tr>
<tr>
<td>sorting</td>
<td>false</td>
<td>string</td>
<td><code>asc</code><br><code>desc</code><br><code>default</code></td>
<td>Direction of results sorting (<code>default</code> value means no sorting, results will be returned in order in which they left the database)</td>
</tr>
<tr>
<td>historical</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td><p>Determines whether historical trade and order records should be retrieved.</p> <ul> <li><code>false</code> (default): Returns recent records: orders for 30 min, trades for 24h.</li> <li><code>true</code>: Fetches historical records, available after a short delay due to indexing. Recent data is not included.</li> </ul></td>
</tr>
</tbody></table>
<h3 id='response-81'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>array of</td>
<td>trade_id</td>
<td>string</td>
</tr>
<tr>
<td>tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h2 id='private-mass_quote'>/private/mass_quote</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/mass_quote?detailed=true&amp;mmp_group=default&amp;quote_id=1&amp;quotes=%5B%7B%22quote_set_id%22%3A%22futures%22%2C%22instrument_name%22%3A%22BTC-PERPETUAL%22%2C%22bid%22%3A%7B%22price%22%3A43700%2C%22amount%22%3A10%7D%2C%22ask%22%3A%7B%22price%22%3A43800%2C%22amount%22%3A10%7D%7D%2C%7B%22quote_set_id%22%3A%22options%22%2C%22instrument_name%22%3A%22BTC-22DEC23-41600-C%22%2C%22bid%22%3A%7B%22price%22%3A0.04%2C%22amount%22%3A1%7D%2C%22ask%22%3A%7B%22price%22%3A0.05%2C%22amount%22%3A1%7D%7D%5D"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7859</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/mass_quote</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">detailed</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">quote_id</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">mmp_group</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">default</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">quotes</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">quote_set_id</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">futures</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">ask</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
          <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">43800</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">10</span>
        <span class="p">},</span>
        <span class="dl">"</span><span class="s2">bid</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
          <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">43700</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">10</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-22DEC23-41600-C</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">quote_set_id</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">options</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">ask</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
          <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">0.05</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
        <span class="p">},</span>
        <span class="dl">"</span><span class="s2">bid</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
          <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">0.04</span><span class="p">,</span>
          <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">7859</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/mass_quote"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"detailed"</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="s">"quote_id"</span> <span class="p">:</span> <span class="s">"1"</span><span class="p">,</span>
    <span class="s">"mmp_group"</span> <span class="p">:</span> <span class="s">"default"</span><span class="p">,</span>
    <span class="s">"quotes"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span><span class="p">,</span>
        <span class="s">"quote_set_id"</span> <span class="p">:</span> <span class="s">"futures"</span><span class="p">,</span>
        <span class="s">"ask"</span> <span class="p">:</span> <span class="p">{</span>
          <span class="s">"price"</span> <span class="p">:</span> <span class="mi">43800</span><span class="p">,</span>
          <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">10</span>
        <span class="p">},</span>
        <span class="s">"bid"</span> <span class="p">:</span> <span class="p">{</span>
          <span class="s">"price"</span> <span class="p">:</span> <span class="mi">43700</span><span class="p">,</span>
          <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">10</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-22DEC23-41600-C"</span><span class="p">,</span>
        <span class="s">"quote_set_id"</span> <span class="p">:</span> <span class="s">"options"</span><span class="p">,</span>
        <span class="s">"ask"</span> <span class="p">:</span> <span class="p">{</span>
          <span class="s">"price"</span> <span class="p">:</span> <span class="mf">0.05</span><span class="p">,</span>
          <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">1</span>
        <span class="p">},</span>
        <span class="s">"bid"</span> <span class="p">:</span> <span class="p">{</span>
          <span class="s">"price"</span> <span class="p">:</span> <span class="mf">0.04</span><span class="p">,</span>
          <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7859</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bid"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"price_too_high 43666.4288"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">10007</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"orders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"is_liquidation"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"risk_reducing"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1703162550180</span><span class="p">,</span><span class="w">
        </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1703162478689</span><span class="p">,</span><span class="w">
        </span><span class="nl">"filled_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"average_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quote"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quote_set_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"options"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quote_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"replaced"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mmp_group"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"web"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mmp"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-22DEC23-41600-C"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6653852"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"max_show"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time_in_force"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.04</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"is_liquidation"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"risk_reducing"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1703162550180</span><span class="p">,</span><span class="w">
        </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1703162478689</span><span class="p">,</span><span class="w">
        </span><span class="nl">"filled_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"average_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quote"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quote_set_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"options"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quote_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"replaced"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mmp_group"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"web"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mmp"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-22DEC23-41600-C"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6653853"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"max_show"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time_in_force"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"is_liquidation"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"risk_reducing"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1703162550180</span><span class="p">,</span><span class="w">
        </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1703162478689</span><span class="p">,</span><span class="w">
        </span><span class="nl">"filled_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"average_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quote"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quote_set_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"futures"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quote_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"replaced"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mmp_group"</span><span class="p">:</span><span class="w"> </span><span class="s2">"default"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"web"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mmp"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6653855"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"max_show"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="nl">"time_in_force"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">43800</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Place buy and/or sell orders on one or more instruments. This endpoint can only be used after approval from the administrators.</p>

<p><strong>Scope: </strong> <code>trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fmass_quote" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-82'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>wait_for_response</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>If false, the response is sent immediately after the risk check. If true, the response is sent after the orders all go through the matching engine. Default - <code>true</code>.</td>
</tr>
<tr>
<td>detailed</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Flag to receive a list of all order changes and a list of errors, or to only receive a list of errors. Default - <code>false</code>.</td>
</tr>
<tr>
<td>quote_id</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Identifier of a mass quote message. Can be used to match trades to requests. We recommend using an incrementing counter.</td>
</tr>
<tr>
<td>mmp_group</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Name of the MMP group. An MMP group has to be used and only one quote can exist per instrument per side per MMP group.</td>
</tr>
<tr>
<td>valid_until</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Timestamp, when provided server will start processing request in Matching Engine only before given timestamp, in other cases <code>timed_out</code> error will be responded. Remember that the given timestamp should be consistent with the server&#39;s time, use <a href='#public-get_time'>/public/time</a> method to obtain current server time.</td>
</tr>
<tr>
<td>quotes</td>
<td>true</td>
<td>array of objects</td>
<td></td>
<td>List of quotes.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>The name of the instrument.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>true</td>
<td>string</td>
<td></td>
<td>User-defined label that can be used for targeted cancels using private/cancel_quotes.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ask</td>
<td>false</td>
<td>object</td>
<td></td>
<td>Order details for the ask. If not provided, <code>bid</code> must be present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>false</td>
<td>number</td>
<td></td>
<td>The price of this side of the quote. If no price is supplied, only the amount is amended.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>false</td>
<td>number</td>
<td></td>
<td>The amount of this side of the quote. If no quantity is supplied, only the price is amended.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>If true, the order is considered post-only. If the new price would cause the order to be filled immediately (as taker), the price will be changed to be just below the spread. Default - <code>false</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>If an order is considered post-only and this field is set to true then the order is put to the order book unmodified or the request is rejected. Only valid in combination with &quot;post_only&quot; set to <code>true</code>. Default value - <code>false</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;bid</td>
<td>false</td>
<td>object</td>
<td></td>
<td>Order details for the bid. If not provided, <code>ask</code> must be present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>false</td>
<td>number</td>
<td></td>
<td>The price of this side of the quote. If no price is supplied, only the amount is amended.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>false</td>
<td>number</td>
<td></td>
<td>The amount of this side of the quote. If no quantity is supplied, only the price is amended.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>If true, the order is considered post-only. If the new price would cause the order to be filled immediately (as taker), the price will be changed to be just below the spread. Default - <code>false</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>If an order is considered post-only and this field is set to true then the order is put to the order book unmodified or the request is rejected. Only valid in combination with &quot;post_only&quot; set to <code>true</code>. Default value - <code>false</code></td>
</tr>
</tbody></table>
<h3 id='response-82'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;errors</td>
<td>array of <em>object</em></td>
<td>List of errors (present when <code>detailed</code> : <code>true</code>).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;code</td>
<td>int</td>
<td>Error code</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;error</td>
<td>object</td>
<td>Error data.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Instrument name.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;message</td>
<td>string</td>
<td>Error message.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;side</td>
<td>string</td>
<td>Quote side - <code>bid</code> or <code>ask</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;errors_count</td>
<td>int</td>
<td>Number of errors (present when <code>detailed</code> : <code>false</code>).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;orders</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;pending_requests</td>
<td>array of <em>object</em></td>
<td>List of pending quotes (present when <code>wait_for_response</code>: <code>false</code> and <code>detailed</code> : <code>true</code>).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Instrument name.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;side</td>
<td>string</td>
<td>Quote side - <code>bid</code> or <code>ask</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;pending_requests_count</td>
<td>int</td>
<td>Number of pending quotes (present when <code>wait_for_response</code>: <code>false</code> and <code>detailed</code> : <code>false</code>).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h2 id='private-move_positions'>/private/move_positions</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/move_positions?currency=BTC&amp;source_uid=3&amp;target_uid=23&amp;trades=%5B%7B%22price%22%3A%2235800%22%2C%22instrument_name%22%3A%22BTC-PERPETUAL%22%2C%22amount%22%3A%22110%22%7D%2C%7B%22instrument_name%22%3A%22BTC-28JAN22-32500-C%22%2C%22amount%22%3A%220.1%22%7D%5D"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/move_positions</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">source_uid</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">target_uid</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">23</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">trades</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">35800</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">110</span><span class="dl">"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-28JAN22-32500-C</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">0.1</span><span class="dl">"</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/move_positions"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"source_uid"</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s">"target_uid"</span> <span class="p">:</span> <span class="mi">23</span><span class="p">,</span>
    <span class="s">"trades"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span><span class="p">,</span>
        <span class="s">"price"</span> <span class="p">:</span> <span class="s">"35800"</span><span class="p">,</span>
        <span class="s">"amount"</span> <span class="p">:</span> <span class="s">"110"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-28JAN22-32500-C"</span><span class="p">,</span>
        <span class="s">"amount"</span> <span class="p">:</span> <span class="s">"0.1"</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">3</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"target_uid"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w">
      </span><span class="nl">"source_uid"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1223</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-28JAN22-32500-C"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"target_uid"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w">
      </span><span class="nl">"source_uid"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">35800</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">110</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Moves positions from source subaccount to target subaccount <p><b>Note:</b><br>In rare cases, the request may return an <code>internal_server_error</code>. This does not necessarily mean the operation failed entirely. Part or all of the position transfer might have still been processed successfully.</p></p>

<p><strong>Scope: </strong> <code>trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fmove_positions" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-83'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>false</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>source_uid</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Id of source subaccount. Can be found in <code>My Account &gt;&gt; Subaccounts</code> tab</td>
</tr>
<tr>
<td>target_uid</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Id of target subaccount. Can be found in <code>My Account &gt;&gt; Subaccounts</code> tab</td>
</tr>
<tr>
<td>trades</td>
<td>true</td>
<td>array of objects</td>
<td></td>
<td>List of trades for position move</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>false</td>
<td>number</td>
<td></td>
<td>Price for trade - if not provided average price of the position is used</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>true</td>
<td>number</td>
<td></td>
<td>It represents the requested trade size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin. Amount can&#39;t exceed position size.</td>
</tr>
</tbody></table>
<h3 id='response-83'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;source_uid</td>
<td>integer</td>
<td>Trade source uid</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;target_uid</td>
<td>integer</td>
<td>Trade target uid</td>
</tr>
</tbody></table>
<h2 id='private-reset_mmp'>/private/reset_mmp</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/reset_mmp?index_name=btc_usd&amp;mmp_group=MassQuoteBot7"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7859</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/reset_mmp</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">index_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">btc_usd</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">mmp_group</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">MassQuoteBot7</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">7859</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/reset_mmp"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"index_name"</span> <span class="p">:</span> <span class="s">"btc_usd"</span><span class="p">,</span>
    <span class="s">"mmp_group"</span> <span class="p">:</span> <span class="s">"MassQuoteBot7"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Reset MMP</p>

<p><strong>Scope: </strong> <code>trade:read_write</code> or <code>block_rfq:read_write</code> (when <code>block_rfq</code> = <code>true</code>)</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Freset_mmp" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-84'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>index_name</td>
<td>true</td>
<td>string</td>
<td><code>btc_usd</code><br><code>eth_usd</code><br><code>btc_usdc</code><br><code>eth_usdc</code><br><code>ada_usdc</code><br><code>algo_usdc</code><br><code>avax_usdc</code><br><code>bch_usdc</code><br><code>bnb_usdc</code><br><code>doge_usdc</code><br><code>dot_usdc</code><br><code>link_usdc</code><br><code>ltc_usdc</code><br><code>near_usdc</code><br><code>paxg_usdc</code><br><code>shib_usdc</code><br><code>sol_usdc</code><br><code>trx_usdc</code><br><code>trump_usdc</code><br><code>uni_usdc</code><br><code>xrp_usdc</code><br><code>usde_usdc</code><br><code>buidl_usdc</code><br><code>btcdvol_usdc</code><br><code>ethdvol_usdc</code><br><code>btc_usdt</code><br><code>eth_usdt</code><br><code>all</code></td>
<td>Index identifier of derivative instrument on the platform</td>
</tr>
<tr>
<td>mmp_group</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Specifies the MMP group for which limits are being reset. If this parameter is omitted, the endpoint resets the traditional (no group) MMP limits</td>
</tr>
<tr>
<td>block_rfq</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>If true, resets MMP for Block RFQ. When set, requires <code>block_rfq</code> scope instead of <code>trade</code> scope. Block RFQ MMP settings are completely separate from normal order/quote MMP settings.</td>
</tr>
</tbody></table>
<h3 id='response-84'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h2 id='private-send_rfq'>/private/send_rfq</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/send_rfq?amount=10000&amp;instrument_name=BTC-PERPETUAL&amp;side=sell"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">8352</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/send_rfq</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">side</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">sell</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">8352</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/send_rfq"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span><span class="p">,</span>
    <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
    <span class="s">"side"</span> <span class="p">:</span> <span class="s">"sell"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Sends RFQ on a given instrument.</p>

<p><strong>Scope: </strong> <code>trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsend_rfq" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-85'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>amount</td>
<td>false</td>
<td>number</td>
<td></td>
<td>Amount</td>
</tr>
<tr>
<td>side</td>
<td>false</td>
<td>string</td>
<td><code>buy</code><br><code>sell</code></td>
<td>Side - <code>buy</code> or <code>sell</code></td>
</tr>
</tbody></table>
<h3 id='response-85'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h2 id='private-set_mmp_config'>/private/set_mmp_config</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/set_mmp_config?frozen_time=0&amp;index_name=btc_usd&amp;interval=60&amp;mmp_group=MassQuoteBot7&amp;quantity_limit=3.00000000000000000000e%2B00"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7859</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/set_mmp_config</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">index_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">btc_usd</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">mmp_group</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">MassQuoteBot7</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">interval</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">frozen_time</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">quantity_limit</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">3.0</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">7859</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/set_mmp_config"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"index_name"</span> <span class="p">:</span> <span class="s">"btc_usd"</span><span class="p">,</span>
    <span class="s">"mmp_group"</span> <span class="p">:</span> <span class="s">"MassQuoteBot7"</span><span class="p">,</span>
    <span class="s">"interval"</span> <span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
    <span class="s">"frozen_time"</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s">"quantity_limit"</span> <span class="p">:</span> <span class="mf">3.0</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7859</span><span class="p">,</span><span class="w">
  </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"private/set_mmp_config"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"index_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc_usd"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mmp_group"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MassQuoteBot7"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"interval"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span><span class="w">
    </span><span class="nl">"frozen_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quantity_limit"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.0</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Set config for MMP - triggers MMP reset</p>

<p><strong>Scope: </strong> <code>trade:read_write</code> or <code>block_rfq:read_write</code> (when <code>block_rfq</code> = <code>true</code>)</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fset_mmp_config" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-86'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>index_name</td>
<td>true</td>
<td>string</td>
<td><code>btc_usd</code><br><code>eth_usd</code><br><code>btc_usdc</code><br><code>eth_usdc</code><br><code>ada_usdc</code><br><code>algo_usdc</code><br><code>avax_usdc</code><br><code>bch_usdc</code><br><code>bnb_usdc</code><br><code>doge_usdc</code><br><code>dot_usdc</code><br><code>link_usdc</code><br><code>ltc_usdc</code><br><code>near_usdc</code><br><code>paxg_usdc</code><br><code>shib_usdc</code><br><code>sol_usdc</code><br><code>trx_usdc</code><br><code>trump_usdc</code><br><code>uni_usdc</code><br><code>xrp_usdc</code><br><code>usde_usdc</code><br><code>buidl_usdc</code><br><code>btcdvol_usdc</code><br><code>ethdvol_usdc</code><br><code>btc_usdt</code><br><code>eth_usdt</code><br><code>all</code></td>
<td>Index identifier of derivative instrument on the platform</td>
</tr>
<tr>
<td>interval</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>MMP Interval in seconds, if set to 0 MMP is removed</td>
</tr>
<tr>
<td>frozen_time</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>MMP frozen time in seconds, if set to 0 manual reset is required</td>
</tr>
<tr>
<td>mmp_group</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Designates the MMP group for which the configuration is being set. If the specified group is already associated with a different index_name, an error is returned. This parameter enables distinct configurations for each MMP group, linked to particular index_name</td>
</tr>
<tr>
<td>quantity_limit</td>
<td>false</td>
<td>number</td>
<td></td>
<td>Quantity limit, positive value</td>
</tr>
<tr>
<td>delta_limit</td>
<td>false</td>
<td>number</td>
<td></td>
<td>Delta limit, positive value</td>
</tr>
<tr>
<td>vega_limit</td>
<td>false</td>
<td>number</td>
<td></td>
<td>Vega limit, positive value</td>
</tr>
<tr>
<td>block_rfq</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>If true, configures MMP for Block RFQ. When set, requires block_rfq scope instead of trade scope. Block RFQ MMP settings are completely separate from normal order/quote MMP settings.</td>
</tr>
<tr>
<td>trade_count_limit</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>For Block RFQ only (<code>block_rfq</code> = <code>true</code>). Sets the maximum number of Block RFQ trades allowed in the lookback window. Each RFQ trade counts as <code>+1</code> towards the limit (not individual legs). Works across all currency pairs. When using this parameter, <code>index_name</code> must be set to <code>&quot;all&quot;</code>.</td>
</tr>
</tbody></table>
<h3 id='response-86'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq</td>
<td>boolean</td>
<td>If true, indicates MMP configuration for Block RFQ. Block RFQ MMP settings are completely separate from normal order/quote MMP settings.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delta_limit</td>
<td>number</td>
<td>Delta limit</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;frozen_time</td>
<td>integer</td>
<td>MMP frozen time in seconds, if set to 0 manual reset is required</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_name</td>
<td>string</td>
<td>Index identifier, matches (base) cryptocurrency with quote currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interval</td>
<td>integer</td>
<td>MMP Interval in seconds, if set to 0 MMP is disabled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Specified MMP Group</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quantity_limit</td>
<td>number</td>
<td>Quantity limit</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_count_limit</td>
<td>integer</td>
<td>For Block RFQ only. The maximum number of Block RFQ trades allowed in the lookback window. Each RFQ trade counts as +1 towards the limit (not individual legs). Works across all currency pairs.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;vega_limit</td>
<td>number</td>
<td>Vega limit</td>
</tr>
</tbody></table>
<h2 id='private-get_settlement_history_by_instrument'>/private/get_settlement_history_by_instrument</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_settlement_history_by_instrument?count=1&amp;instrument_name=ETH-22FEB19&amp;type=settlement"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2192</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_settlement_history_by_instrument</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">ETH-22FEB19</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">settlement</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2192</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_settlement_history_by_instrument"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"ETH-22FEB19"</span><span class="p">,</span>
    <span class="s">"type"</span> <span class="p">:</span> <span class="s">"settlement"</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2192</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"settlements"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"settlement"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550475692526</span><span class="p">,</span><span class="w">
        </span><span class="nl">"session_profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.038358299</span><span class="p">,</span><span class="w">
        </span><span class="nl">"profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.001783937</span><span class="p">,</span><span class="w">
        </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">-66</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">121.67</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-22FEB19"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">119.8</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"continuation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"xY7T6cusbMBNpH9SNmKb94jXSBxUPojJEdCPL4YociHBUgAhWQvEP"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieves public settlement, delivery and bankruptcy events filtered by instrument name</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_settlement_history_by_instrument" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-87'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>type</td>
<td>false</td>
<td>string</td>
<td><code>settlement</code><br><code>delivery</code><br><code>bankruptcy</code></td>
<td>Settlement type</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>20</code></td>
</tr>
<tr>
<td>continuation</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Continuation token for pagination</td>
</tr>
<tr>
<td>search_start_timestamp</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The latest timestamp to return result from (milliseconds since the UNIX epoch)</td>
</tr>
</tbody></table>
<h3 id='response-87'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;continuation</td>
<td>string</td>
<td>Continuation token for pagination.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlements</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;funded</td>
<td>number</td>
<td>funded amount (bankruptcy only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;funding</td>
<td>number</td>
<td>funding (in base currency ; settlement for perpetual product only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>underlying index price at time of event (in quote currency; settlement and delivery only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>instrument name (settlement and delivery only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>mark price for at the settlement time (in quote currency; settlement and delivery only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;position</td>
<td>number</td>
<td>position size (in quote currency; settlement and delivery only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>profit and loss (in base currency; settlement and delivery only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_bankruptcy</td>
<td>number</td>
<td>value of session bankruptcy (in base currency; bankruptcy only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_profit_loss</td>
<td>number</td>
<td>total value of session profit and losses (in base currency)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_tax</td>
<td>number</td>
<td>total amount of paid taxes/fees (in base currency; bankruptcy only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_tax_rate</td>
<td>number</td>
<td>rate of paid taxes/fees (in base currency; bankruptcy only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;socialized</td>
<td>number</td>
<td>the amount of the socialized losses (in base currency; bankruptcy only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>The type of settlement. <code>settlement</code>, <code>delivery</code> or <code>bankruptcy</code>.</td>
</tr>
</tbody></table>
<h2 id='private-get_settlement_history_by_currency'>/private/get_settlement_history_by_currency</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_settlement_history_by_currency?count=1&amp;currency=BTC&amp;type=delivery"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">8304</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_settlement_history_by_currency</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">delivery</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">8304</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_settlement_history_by_currency"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"type"</span> <span class="p">:</span> <span class="s">"delivery"</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6074</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"settlements"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"delivery"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550242800013</span><span class="p">,</span><span class="w">
        </span><span class="nl">"session_profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.567969302</span><span class="p">,</span><span class="w">
        </span><span class="nl">"profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.251617338</span><span class="p">,</span><span class="w">
        </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.121679828</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-15FEB19-4000-P"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">3566.08</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"continuation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AHmpC39UH5EeGVjryrf731YEhjL16oqCQorSvBFZFAbbwvCN7GCbMFgno7U5JKW"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieves settlement, delivery and bankruptcy events that have affected your account.</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_settlement_history_by_currency" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-88'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>type</td>
<td>false</td>
<td>string</td>
<td><code>settlement</code><br><code>delivery</code><br><code>bankruptcy</code></td>
<td>Settlement type</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>20</code></td>
</tr>
<tr>
<td>continuation</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Continuation token for pagination</td>
</tr>
<tr>
<td>search_start_timestamp</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The latest timestamp to return result from (milliseconds since the UNIX epoch)</td>
</tr>
</tbody></table>
<h3 id='response-88'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;continuation</td>
<td>string</td>
<td>Continuation token for pagination.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlements</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;funded</td>
<td>number</td>
<td>funded amount (bankruptcy only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;funding</td>
<td>number</td>
<td>funding (in base currency ; settlement for perpetual product only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>underlying index price at time of event (in quote currency; settlement and delivery only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>instrument name (settlement and delivery only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>mark price for at the settlement time (in quote currency; settlement and delivery only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;position</td>
<td>number</td>
<td>position size (in quote currency; settlement and delivery only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>profit and loss (in base currency; settlement and delivery only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_bankruptcy</td>
<td>number</td>
<td>value of session bankruptcy (in base currency; bankruptcy only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_profit_loss</td>
<td>number</td>
<td>total value of session profit and losses (in base currency)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_tax</td>
<td>number</td>
<td>total amount of paid taxes/fees (in base currency; bankruptcy only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_tax_rate</td>
<td>number</td>
<td>rate of paid taxes/fees (in base currency; bankruptcy only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;socialized</td>
<td>number</td>
<td>the amount of the socialized losses (in base currency; bankruptcy only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>The type of settlement. <code>settlement</code>, <code>delivery</code> or <code>bankruptcy</code>.</td>
</tr>
</tbody></table>
<h1 id='combo-books'>Combo Books</h1><h2 id='public-get_combo_details'>/public/get_combo_details</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_combo_details?combo_id=BTC-FS-29APR22_PERP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_combo_details</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">combo_id</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-FS-29APR22_PERP</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_combo_details"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"combo_id"</span> <span class="p">:</span> <span class="s">"BTC-FS-29APR22_PERP"</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">3</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"state_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1650620605150</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"legs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-29APR22"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-FS-29APR22_PERP"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"instrument_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1650620575000</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves information about a combo</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_combo_details" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-89'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>combo_id</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Combo ID</td>
</tr>
</tbody></table>
<h3 id='response-89'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>string</td>
<td>Unique combo identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_id</td>
<td>integer</td>
<td>Instrument ID</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>integer</td>
<td>Size multiplier of a leg. A negative value indicates that the trades on given leg are in opposite direction to the combo trades they originate from</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Combo state: <code>&quot;rfq&quot;</code>, <code>&quot;active&quot;</code>, &quot;<code>inactive</code>&quot;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='public-get_combo_ids'>/public/get_combo_ids</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_combo_ids?currency=BTC&amp;state=active"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_combo_ids</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">state</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">active</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_combo_ids"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"state"</span> <span class="p">:</span> <span class="s">"active"</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"BTC-CS-29APR22-39300_39600"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"BTC-FS-29APR22_PERP"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves available combos. This method can be used to get the list of all combos, or only the list of combos in the given state.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_combo_ids" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-90'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>state</td>
<td>false</td>
<td>string</td>
<td><code>rfq</code><br><code>active</code><br><code>inactive</code></td>
<td>Combo state, if not provided combos of all states are considered</td>
</tr>
</tbody></table>
<h3 id='response-90'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of string</td>
<td>Unique combo identifier</td>
</tr>
</tbody></table>
<h2 id='public-get_combos'>/public/get_combos</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_combos?currency=BTC"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_combos</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_combos"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"state_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1650636265101</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"legs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-29APR22-39300-C"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-29APR22-39600-C"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-CS-29APR22-39300_39600"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1650636235000</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"state_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1650620605150</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"active"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"legs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-29APR22"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-FS-29APR22_PERP"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1650620575000</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves information about active combos</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_combos" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-91'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>any</code></td>
<td>The currency symbol or <code>&quot;any&quot;</code> for all</td>
</tr>
</tbody></table>
<h3 id='response-91'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>string</td>
<td>Unique combo identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_id</td>
<td>integer</td>
<td>Instrument ID</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>integer</td>
<td>Size multiplier of a leg. A negative value indicates that the trades on given leg are in opposite direction to the combo trades they originate from</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Combo state: <code>&quot;rfq&quot;</code>, <code>&quot;active&quot;</code>, &quot;<code>inactive</code>&quot;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='private-create_combo'>/private/create_combo</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/create_combo?trades=%5B%7B%22instrument_name%22%3A%22BTC-29APR22-37500-C%22%2C%22direction%22%3A%22buy%22%2C%22amount%22%3A%221%22%7D%2C%7B%22instrument_name%22%3A%22BTC-29APR22-37500-P%22%2C%22direction%22%3A%22sell%22%2C%22amount%22%3A%221%22%7D%5D"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/create_combo</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">trades</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-29APR22-37500-C</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-29APR22-37500-P</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">sell</span><span class="dl">"</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">6</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/create_combo"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"trades"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-29APR22-37500-C"</span><span class="p">,</span>
        <span class="s">"amount"</span> <span class="p">:</span> <span class="s">"1"</span><span class="p">,</span>
        <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"buy"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-29APR22-37500-P"</span><span class="p">,</span>
        <span class="s">"amount"</span> <span class="p">:</span> <span class="s">"1"</span><span class="p">,</span>
        <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"sell"</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">6</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"state_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1650960943922</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rfq"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"legs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-29APR22-37500-C"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-29APR22-37500-P"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-REV-29APR22-37500"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"instrument_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">52</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1650960943000</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Verifies and creates a combo book or returns an existing combo matching given trades</p>

<p><strong>Scope: </strong> <code>trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fcreate_combo" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-92'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>trades</td>
<td>true</td>
<td>array of objects</td>
<td></td>
<td>List of trades used to create a combo</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>false</td>
<td>number</td>
<td></td>
<td>It represents the requested trade size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>true</td>
<td>string</td>
<td><code>buy</code><br><code>sell</code></td>
<td>Direction of trade from the maker perspective</td>
</tr>
</tbody></table>
<h3 id='response-92'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>string</td>
<td>Unique combo identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_id</td>
<td>integer</td>
<td>Instrument ID</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>integer</td>
<td>Size multiplier of a leg. A negative value indicates that the trades on given leg are in opposite direction to the combo trades they originate from</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Combo state: <code>&quot;rfq&quot;</code>, <code>&quot;active&quot;</code>, &quot;<code>inactive</code>&quot;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='private-get_leg_prices'>/private/get_leg_prices</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_leg_prices?legs=%5B%7B%22instrument_name%22%3A%22BTC-1NOV24-67000-C%22%2C%22direction%22%3A%22buy%22%2C%22amount%22%3A2%7D%2C%7B%22instrument_name%22%3A%22BTC-1NOV24-66000-C%22%2C%22direction%22%3A%22sell%22%2C%22amount%22%3A2%7D%5D&amp;price=5.99999999999999977796e-01"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_leg_prices</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">0.6</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">legs</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-1NOV24-67000-C</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-1NOV24-66000-C</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">sell</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_leg_prices"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"price"</span> <span class="p">:</span> <span class="mf">0.6</span><span class="p">,</span>
    <span class="s">"legs"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-1NOV24-67000-C"</span><span class="p">,</span>
        <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"buy"</span><span class="p">,</span>
        <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">2</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-1NOV24-66000-C"</span><span class="p">,</span>
        <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"sell"</span><span class="p">,</span>
        <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">2</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"legs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"ratio"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-1NOV24-67000-C"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6001</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"ratio"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-1NOV24-66000-C"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This method returns individual leg prices for a given combo structure based on an aggregated price of the strategy and the mark prices of the individual legs. Please note that leg prices change dynamically with mark price fluctuations, and the algorithm is calibrated only for conventional option structures and future spreads. This method supports both inverse strategies and known linear structures within a single currency pair.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_leg_prices" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-93'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>legs</td>
<td>true</td>
<td>array of objects</td>
<td></td>
<td>List of legs for which the prices will be calculated</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>true</td>
<td>number</td>
<td></td>
<td>It represents the requested trade size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>true</td>
<td>string</td>
<td><code>buy</code><br><code>sell</code></td>
<td>Direction of selected leg</td>
</tr>
<tr>
<td>price</td>
<td>true</td>
<td>number</td>
<td></td>
<td>Price for the whole leg structure</td>
</tr>
</tbody></table>
<h3 id='response-93'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price for a leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ratio</td>
<td>integer</td>
<td>Ratio of amount between legs</td>
</tr>
</tbody></table>
<h1 id='block-trade'>Block Trade</h1><h2 id='private-approve_block_trade'>/private/approve_block_trade</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/approve_block_trade?nonce=bt-468nha&amp;role=maker&amp;timestamp=1711468813551"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/approve_block_trade</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1711468813551</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">nonce</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">bt-468nha</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">role</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">maker</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/approve_block_trade"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"timestamp"</span> <span class="p">:</span> <span class="mi">1711468813551</span><span class="p">,</span>
    <span class="s">"nonce"</span> <span class="p">:</span> <span class="s">"bt-468nha"</span><span class="p">,</span>
    <span class="s">"role"</span> <span class="p">:</span> <span class="s">"maker"</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Used to approve a pending block trade. <code>nonce</code> and <code>timestamp</code> are used to identify the block trade while <code>role</code> should be opposite to the trading counterparty.<br><br> To use a block trade approval feature the additional API key setting feature called: <code>enabled_features: block_trade_approval</code> is required. This key has to be given to broker/registered partner who performs the trades on behalf of the user for the feature to be active. If the user wants to approve the trade, he has to approve it from different API key with doesn&#39;t have this feature enabled.</p>

<p><strong>Scope: </strong> <code>block_trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fapprove_block_trade" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-94'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Timestamp, shared with other party (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>nonce</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Nonce, shared with other party</td>
</tr>
<tr>
<td>role</td>
<td>true</td>
<td>string</td>
<td><code>maker</code><br><code>taker</code></td>
<td>Describes if user wants to be maker or taker of trades</td>
</tr>
</tbody></table>
<h3 id='response-94'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h2 id='private-execute_block_trade'>/private/execute_block_trade</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/execute_block_trade?counterparty_signature=1590485595899.1Mn52L_Q.lNyNBzXXo-_QBT_wDuMgnhA7uS9tBqdQ5TLN6rxbuoAiQhyaJYGJrm5IV_9enp9niY_x8D60AJLm3yEKPUY1Dv3T0TW0n5-ADPpJF7Fpj0eVDZpZ6QCdX8snBWrSJ0TtqevnO64RCBlN1dIm2T70PP9dlhiqPDAUYI4fpB1vLYI&amp;nonce=bszyprbq&amp;role=maker&amp;timestamp=1590485535899&amp;trades=%5B%7B%22price%22%3A8900.0%2C%22instrument_name%22%3A%22BTC-PERPETUAL%22%2C%22direction%22%3A%22sell%22%2C%22amount%22%3A200000%7D%2C%7B%22price%22%3A0.0133%2C%22instrument_name%22%3A%22BTC-28MAY20-9000-C%22%2C%22direction%22%3A%22sell%22%2C%22amount%22%3A5.0%7D%5D"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/execute_block_trade</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">nonce</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">bszyprbq</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1590485535899</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">role</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">maker</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">trades</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">sell</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">8900.0</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">200000</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-28MAY20-9000-C</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">sell</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">0.0133</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="dl">"</span><span class="s2">counterparty_signature</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">1590485595899.1Mn52L_Q.lNyNBzXXo-_QBT_wDuMgnhA7uS9tBqdQ5TLN6rxbuoAiQhyaJYGJrm5IV_9enp9niY_x8D60AJLm3yEKPUY1Dv3T0TW0n5-ADPpJF7Fpj0eVDZpZ6QCdX8snBWrSJ0TtqevnO64RCBlN1dIm2T70PP9dlhiqPDAUYI4fpB1vLYI</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/execute_block_trade"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"nonce"</span> <span class="p">:</span> <span class="s">"bszyprbq"</span><span class="p">,</span>
    <span class="s">"timestamp"</span> <span class="p">:</span> <span class="mi">1590485535899</span><span class="p">,</span>
    <span class="s">"role"</span> <span class="p">:</span> <span class="s">"maker"</span><span class="p">,</span>
    <span class="s">"trades"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span><span class="p">,</span>
        <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"sell"</span><span class="p">,</span>
        <span class="s">"price"</span> <span class="p">:</span> <span class="mf">8900.0</span><span class="p">,</span>
        <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">200000</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-28MAY20-9000-C"</span><span class="p">,</span>
        <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"sell"</span><span class="p">,</span>
        <span class="s">"amount"</span> <span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span>
        <span class="s">"price"</span> <span class="p">:</span> <span class="mf">0.0133</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="s">"counterparty_signature"</span> <span class="p">:</span> <span class="s">"1590485595899.1Mn52L_Q.lNyNBzXXo-_QBT_wDuMgnhA7uS9tBqdQ5TLN6rxbuoAiQhyaJYGJrm5IV_9enp9niY_x8D60AJLm3yEKPUY1Dv3T0TW0n5-ADPpJF7Fpj0eVDZpZ6QCdX8snBWrSJ0TtqevnO64RCBlN1dIm2T70PP9dlhiqPDAUYI4fpB1vLYI"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"trades"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="mi">30289730</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="s2">"48079573"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="mi">1590485535978</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="mf">8900.0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="p">:</span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="s2">"4009043192"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"matching_id"</span><span class="p">:</span><span class="s2">"None"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="mf">8895.19</span><span class="p">,</span><span class="w">
        </span><span class="nl">"liquidity"</span><span class="p">:</span><span class="s2">"M"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="mf">8900.45</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_currency"</span><span class="p">:</span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="mf">-0.00561798</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"block_trade_id"</span><span class="p">:</span><span class="s2">"6165"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="mf">200000.0</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"underlying_price"</span><span class="p">:</span><span class="mf">8902.86</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="s2">"48079574"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="mi">1590485535979</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="mf">0.0133</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="p">:</span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="s2">"4009043194"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"matching_id"</span><span class="p">:</span><span class="s2">"None"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="mf">0.01831619</span><span class="p">,</span><span class="w">
        </span><span class="nl">"liquidity"</span><span class="p">:</span><span class="s2">"M"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"iv"</span><span class="p">:</span><span class="mf">62.44</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="s2">"BTC-28MAY20-9000-C"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="mf">8900.45</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_currency"</span><span class="p">:</span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="mf">0.002</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"block_trade_id"</span><span class="p">:</span><span class="s2">"6165"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="mf">5.0</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="mi">1590485535980</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="s2">"6165"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Creates block trade<br><br>The whole request have to be exact the same as in <code>private/verify_block_trade</code>, only role field should be set appropriately - it basically means that both sides have to agree on the same timestamp, nonce, trades fields and server will assure that role field is different between sides (each party accepted own role).<br><br> Using the same timestamp and nonce by both sides in <code>private/verify_block_trade</code> assures that even if unintentionally both sides execute given block trade with valid counterparty_signature, the given block trade will be executed only once.</p>

<p><strong>Scope: </strong> <code>block_trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fexecute_block_trade" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-95'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Timestamp, shared with other party (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>nonce</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Nonce, shared with other party</td>
</tr>
<tr>
<td>role</td>
<td>true</td>
<td>string</td>
<td><code>maker</code><br><code>taker</code></td>
<td>Describes if user wants to be maker or taker of trades</td>
</tr>
<tr>
<td>trades</td>
<td>true</td>
<td>array of objects</td>
<td></td>
<td>List of trades for block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>true</td>
<td>number</td>
<td></td>
<td>Price for trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>false</td>
<td>number</td>
<td></td>
<td>It represents the requested trade size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>true</td>
<td>string</td>
<td><code>buy</code><br><code>sell</code></td>
<td>Direction of trade from the maker perspective</td>
</tr>
<tr>
<td>counterparty_signature</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Signature of block trade generated by <code>private/verify_block_trade_method</code></td>
</tr>
</tbody></table>
<h3 id='response-95'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that executed the block trade on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>string</td>
<td>Block trade id</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h2 id='private-get_block_trade'>/private/get_block_trade</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_block_trade?id=61"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_block_trade</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">61</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_block_trade"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"id"</span> <span class="p">:</span> <span class="s">"61"</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">37</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"92437"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1565089523719</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"343062"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"matching_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"liquidity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"iv"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-9AUG19-10250-C"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">11738</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00025</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"block_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"61"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">25350</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"92435"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1565089523719</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">11590</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"343058"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"matching_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"liquidity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">11737.98</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00000164</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"block_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"61"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">190</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1565089523720</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"61"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Returns information about the users block trade</p>

<p><strong>Scope: </strong> <code>block_trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_block_trade" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-96'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Block trade id</td>
</tr>
</tbody></table>
<h3 id='response-96'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that executed the block trade on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>string</td>
<td>Block trade id</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h2 id='private-get_block_trades'>/private/get_block_trades</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_block_trades?count=1&amp;currency=BTC"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_block_trades</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_block_trades"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
          </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"92462"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1565093070164</span><span class="p">,</span><span class="w">
          </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0151</span><span class="p">,</span><span class="w">
          </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"343121"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"matching_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"liquidity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"M"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"iv"</span><span class="p">:</span><span class="w"> </span><span class="mf">72.38</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-9AUG19-11500-P"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">11758.65</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fee_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"block_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"66"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.3</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">41</span><span class="p">,</span><span class="w">
          </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"92460"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1565093070164</span><span class="p">,</span><span class="w">
          </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">11753</span><span class="p">,</span><span class="w">
          </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"343117"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"matching_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"liquidity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"M"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-9AUG19"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">11758.65</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fee_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"block_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"66"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1565093070165</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"66"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Returns list of users block trades. <code>block_rfq_id</code> can be provided to receive block trades related to that particular Block RFQ.</p>

<p><strong>Scope: </strong> <code>block_trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_block_trades" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-97'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>20</code></td>
</tr>
<tr>
<td>start_id</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Response will contain block trades older than the one provided in this field</td>
</tr>
<tr>
<td>end_id</td>
<td>false</td>
<td>string</td>
<td></td>
<td>The id of the oldest block trade to be returned, <code>start_id</code> is required with <code>end_id</code></td>
</tr>
<tr>
<td>block_rfq_id</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>ID of the Block RFQ</td>
</tr>
</tbody></table>
<h3 id='response-97'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that executed the block trade on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>string</td>
<td>Block trade id</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h2 id='private-get_pending_block_trades'>/private/get_pending_block_trades</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_pending_block_trades?"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_pending_block_trades</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">6</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_pending_block_trades"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">6</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"nonce"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bt-468nha"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"app_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">70246.66</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"maker"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"initial"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1711468813552</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1711468813551</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Provides a list of pending block trade approvals. <code>timestamp</code> and <code>nonce</code> received in response can be used to approve or reject the pending block trade.<br><br> To use a block trade approval feature the additional API key setting feature called: <code>enabled_features: block_trade_approval</code> is required. This key has to be given to broker/registered partner who performs the trades on behalf of the user for the feature to be active. If the user wants to approve the trade, he has to approve it from different API key with doesn&#39;t have this feature enabled.</p>

<p><strong>Scope: </strong> <code>block_trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_pending_block_trades" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-98'>Parameters</h3>
<p><em>This method takes no parameters</em></p>
<h3 id='response-98'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that executed the block trade on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;counterparty_state</td>
<td><em>object</em></td>
<td>State of the pending block trade for the other party (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>State timestamp.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;value</td>
<td>string</td>
<td>State value.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;nonce</td>
<td>string</td>
<td>Nonce that can be used to approve or reject pending block trade.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;role</td>
<td>string</td>
<td>Trade role of the user: <code>maker</code> or <code>taker</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td><em>object</em></td>
<td>State of the pending block trade for current user.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>State timestamp.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;value</td>
<td>string</td>
<td>State value.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>Timestamp that can be used to approve or reject pending block trade.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;user_id</td>
<td>integer</td>
<td>Unique user identifier</td>
</tr>
</tbody></table>
<h2 id='private-invalidate_block_trade_signature'>/private/invalidate_block_trade_signature</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/invalidate_block_trade_signature?signature=1565173369982.1M9tO0Q-.z9n9WyZUU5op9pEz6Jtd2CI71QxQMMsCZAexnIfK9HQRT1pKH3clxeIbY7Bqm-yMcWIoE3IfCDPW5VEdiN-6oS0YkKUyXPD500MUf3ULKhfkmH81EZs"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/invalidate_block_trade_signature</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">signature</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">1565173369982.1M9tO0Q-.z9n9WyZUU5op9pEz6Jtd2CI71QxQMMsCZAexnIfK9HQRT1pKH3clxeIbY7Bqm-yMcWIoE3IfCDPW5VEdiN-6oS0YkKUyXPD500MUf3ULKhfkmH81EZs</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/invalidate_block_trade_signature"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"signature"</span> <span class="p">:</span> <span class="s">"1565173369982.1M9tO0Q-.z9n9WyZUU5op9pEz6Jtd2CI71QxQMMsCZAexnIfK9HQRT1pKH3clxeIbY7Bqm-yMcWIoE3IfCDPW5VEdiN-6oS0YkKUyXPD500MUf3ULKhfkmH81EZs"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>User at any time (before the private/execute_block_trade is called) can invalidate its own signature effectively cancelling block trade</p>

<p><strong>Scope: </strong> <code>block_trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Finvalidate_block_trade_signature" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-99'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>signature</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Signature of block trade that will be invalidated</td>
</tr>
</tbody></table>
<h3 id='response-99'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h2 id='private-reject_block_trade'>/private/reject_block_trade</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/reject_block_trade?nonce=bt-468nha&amp;role=maker&amp;timestamp=1711468813551"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/reject_block_trade</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1711468813551</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">nonce</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">bt-468nha</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">role</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">maker</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/reject_block_trade"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"timestamp"</span> <span class="p">:</span> <span class="mi">1711468813551</span><span class="p">,</span>
    <span class="s">"nonce"</span> <span class="p">:</span> <span class="s">"bt-468nha"</span><span class="p">,</span>
    <span class="s">"role"</span> <span class="p">:</span> <span class="s">"maker"</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Used to reject a pending block trade. <code>nonce</code> and <code>timestamp</code> are used to identify the block trade while <code>role</code> should be opposite to the trading counterparty.<br><br> To use a block trade approval feature the additional API key setting feature called: <code>enabled_features: block_trade_approval</code> is required. This key has to be given to broker/registered partner who performs the trades on behalf of the user for the feature to be active. If the user wants to approve the trade, he has to approve it from different API key with doesn&#39;t have this feature enabled.</p>

<p><strong>Scope: </strong> <code>block_trade:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Freject_block_trade" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-100'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Timestamp, shared with other party (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>nonce</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Nonce, shared with other party</td>
</tr>
<tr>
<td>role</td>
<td>true</td>
<td>string</td>
<td><code>maker</code><br><code>taker</code></td>
<td>Describes if user wants to be maker or taker of trades</td>
</tr>
</tbody></table>
<h3 id='response-100'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h2 id='private-simulate_block_trade'>/private/simulate_block_trade</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/simulate_block_trade?role=maker&amp;trades=%5B%7B%22price%22%3A11624%2C%22instrument_name%22%3A%22BTC-PERPETUAL%22%2C%22direction%22%3A%22buy%22%2C%22amount%22%3A40%7D%2C%7B%22price%22%3A0.0707%2C%22instrument_name%22%3A%22BTC-9AUG19-10250-P%22%2C%22direction%22%3A%22buy%22%2C%22amount%22%3A1.2%7D%5D"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/simulate_block_trade</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">role</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">maker</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">trades</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">11624</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">40</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-9AUG19-10250-P</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">1.2</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">0.0707</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/simulate_block_trade"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"role"</span> <span class="p">:</span> <span class="s">"maker"</span><span class="p">,</span>
    <span class="s">"trades"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span><span class="p">,</span>
        <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"buy"</span><span class="p">,</span>
        <span class="s">"price"</span> <span class="p">:</span> <span class="mi">11624</span><span class="p">,</span>
        <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">40</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-9AUG19-10250-P"</span><span class="p">,</span>
        <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"buy"</span><span class="p">,</span>
        <span class="s">"amount"</span> <span class="p">:</span> <span class="mf">1.2</span><span class="p">,</span>
        <span class="s">"price"</span> <span class="p">:</span> <span class="mf">0.0707</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Checks if a block trade can be executed</p>

<p><strong>Scope: </strong> <code>block_trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsimulate_block_trade" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-101'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>role</td>
<td>false</td>
<td>string</td>
<td><code>maker</code><br><code>taker</code></td>
<td>Describes if user wants to be maker or taker of trades</td>
</tr>
<tr>
<td>trades</td>
<td>true</td>
<td>array of objects</td>
<td></td>
<td>List of trades for block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>true</td>
<td>number</td>
<td></td>
<td>Price for trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>false</td>
<td>number</td>
<td></td>
<td>It represents the requested trade size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>true</td>
<td>string</td>
<td><code>buy</code><br><code>sell</code></td>
<td>Direction of trade from the maker perspective</td>
</tr>
</tbody></table>
<h3 id='response-101'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>boolean</td>
<td><code>true</code> if block trade can be executed, <code>false</code> otherwise</td>
</tr>
</tbody></table>
<h2 id='private-verify_block_trade'>/private/verify_block_trade</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/verify_block_trade?nonce=okpdjkdo&amp;role=maker&amp;timestamp=1565172650935&amp;trades=%5B%7B%22price%22%3A11624%2C%22instrument_name%22%3A%22BTC-PERPETUAL%22%2C%22direction%22%3A%22buy%22%2C%22amount%22%3A40%7D%2C%7B%22price%22%3A0.0707%2C%22instrument_name%22%3A%22BTC-9AUG19-10250-P%22%2C%22direction%22%3A%22buy%22%2C%22amount%22%3A1.2%7D%5D"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/verify_block_trade</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">nonce</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">okpdjkdo</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1565172650935</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">role</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">maker</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">trades</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">11624</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">40</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-9AUG19-10250-P</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">1.2</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">0.0707</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/verify_block_trade"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"nonce"</span> <span class="p">:</span> <span class="s">"okpdjkdo"</span><span class="p">,</span>
    <span class="s">"timestamp"</span> <span class="p">:</span> <span class="mi">1565172650935</span><span class="p">,</span>
    <span class="s">"role"</span> <span class="p">:</span> <span class="s">"maker"</span><span class="p">,</span>
    <span class="s">"trades"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span><span class="p">,</span>
        <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"buy"</span><span class="p">,</span>
        <span class="s">"price"</span> <span class="p">:</span> <span class="mi">11624</span><span class="p">,</span>
        <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">40</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-9AUG19-10250-P"</span><span class="p">,</span>
        <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"buy"</span><span class="p">,</span>
        <span class="s">"amount"</span> <span class="p">:</span> <span class="mf">1.2</span><span class="p">,</span>
        <span class="s">"price"</span> <span class="p">:</span> <span class="mf">0.0707</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"signature"</span><span class="p">:</span><span class="s2">"1565172710935.1ESE83qh.g6fbgRd4VWagaJz7xdi2WaV-q-d3J0njoz1jZavuRudZJZif9uH8XdUAx1LHsu0E3e0ZG_xe1UPYlwo41xRVrkWU6OMgygDRafUkEmBuk9iLqjc9rh4"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Verifies and creates block trade signature</p>

<p><strong>Scope: </strong> <code>block_trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fverify_block_trade" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div><div>  This is a matching engine method.</div></aside>
<h3 id='parameters-102'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Timestamp, shared with other party (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>nonce</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Nonce, shared with other party</td>
</tr>
<tr>
<td>role</td>
<td>true</td>
<td>string</td>
<td><code>maker</code><br><code>taker</code></td>
<td>Describes if user wants to be maker or taker of trades</td>
</tr>
<tr>
<td>trades</td>
<td>true</td>
<td>array of objects</td>
<td></td>
<td>List of trades for block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>true</td>
<td>number</td>
<td></td>
<td>Price for trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>false</td>
<td>number</td>
<td></td>
<td>It represents the requested trade size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>true</td>
<td>string</td>
<td><code>buy</code><br><code>sell</code></td>
<td>Direction of trade from the maker perspective</td>
</tr>
</tbody></table>
<h3 id='response-102'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;signature</td>
<td>string</td>
<td>Signature of block trade<br>It is valid only for 5 minutes around given timestamp</br></td>
</tr>
</tbody></table>
<h1 id='block-rfq'>Block RFQ</h1><h2 id='public-get_block_rfq_trades'>/public/get_block_rfq_trades</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_block_rfq_trades?currency=BTC"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_block_rfq_trades</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_block_rfq_trades"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"continuation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1739739009234:6570"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"block_rfqs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6611</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1739803305362</span><span class="p">,</span><span class="w">
        </span><span class="nl">"combo_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-CS-28FEB25-100000_106000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"legs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-28FEB25-100000-C"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"ratio"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-28FEB25-106000-C"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"ratio"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.010356754</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.5</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"hedge_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"hedge"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">96000</span><span class="p">,</span><span class="w">
          </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6600</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1739774397766</span><span class="p">,</span><span class="w">
        </span><span class="nl">"combo_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-CS-28FEB25-100000_106000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"legs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-28FEB25-100000-C"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"ratio"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-28FEB25-106000-C"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"ratio"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.007458089</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.5</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"hedge_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"hedge"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">96000</span><span class="p">,</span><span class="w">
          </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6579</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1739743922308</span><span class="p">,</span><span class="w">
        </span><span class="nl">"combo_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-CS-17FEB25-89000_90000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"legs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.08</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-17FEB25-89000-C"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"ratio"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.075</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-17FEB25-90000-C"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"ratio"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.010314468</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.005</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.5</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This method returns a list of recent Block RFQs trades. Can be optionally filtered by currency.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_block_rfq_trades" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-103'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>any</code></td>
<td>The currency symbol or <code>&quot;any&quot;</code> for all</td>
</tr>
<tr>
<td>continuation</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The continuation parameter specifies the starting point for fetching historical Block RFQs. When provided, the endpoint returns Block RFQs, starting from the specified ID and continuing backward (e.g., if <code>continuation</code> is 50, results will include Block RFQs of ID 49, 48, etc.)</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Count of Block RFQs returned</td>
</tr>
</tbody></table>
<h3 id='response-103'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfqs</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Unique combo identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;hedge</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>integer</td>
<td>It represents the requested hedge leg size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price for a hedge leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>ID of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price for a leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ratio</td>
<td>integer</td>
<td>Ratio of amount between legs</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For options, linear futures, linear perpetuals and spots the amount is denominated in the underlying base currency coin. The inverse perpetuals and inverse futures are denominated in USD units.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;hedge_amount</td>
<td>number</td>
<td>Amount of the hedge leg. For linear futures, linear perpetuals and spots the amount is denominated in the underlying base currency coin. The inverse perpetuals and inverse futures are denominated in USD units.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;continuation</td>
<td>string</td>
<td>Continuation token for pagination. <code>NULL</code> when no continuation. Consists of <code>timestamp</code> and <code>block_rfq_id</code>.</td>
</tr>
</tbody></table>
<h2 id='private-add_block_rfq_quote'>/private/add_block_rfq_quote</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/add_block_rfq_quote?amount=10000&amp;block_rfq_id=3&amp;direction=buy&amp;execution_instruction=any_part_of&amp;expires_at=1745312540321&amp;hedge=%7B%22price%22%3A70000%2C%22instrument_name%22%3A%22BTC-PERPETUAL%22%2C%22direction%22%3A%22buy%22%2C%22amount%22%3A10%7D&amp;label=example_quote&amp;legs=%5B%7B%22ratio%22%3A%221%22%2C%22price%22%3A69600%2C%22instrument_name%22%3A%22BTC-15NOV24%22%2C%22direction%22%3A%22buy%22%7D%5D"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/add_block_rfq_quote</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">label</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">example_quote</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">block_rfq_id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">legs</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-15NOV24</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">69600</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">ratio</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="dl">"</span><span class="s2">hedge</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">70000</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span>
    <span class="p">},</span>
    <span class="dl">"</span><span class="s2">execution_instruction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">any_part_of</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">expires_at</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1745312540321</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/add_block_rfq_quote"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"label"</span> <span class="p">:</span> <span class="s">"example_quote"</span><span class="p">,</span>
    <span class="s">"block_rfq_id"</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
    <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"buy"</span><span class="p">,</span>
    <span class="s">"legs"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-15NOV24"</span><span class="p">,</span>
        <span class="s">"price"</span> <span class="p">:</span> <span class="mi">69600</span><span class="p">,</span>
        <span class="s">"ratio"</span> <span class="p">:</span> <span class="s">"1"</span><span class="p">,</span>
        <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"buy"</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="s">"hedge"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"buy"</span><span class="p">,</span>
      <span class="s">"price"</span> <span class="p">:</span> <span class="mi">70000</span><span class="p">,</span>
      <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span>
    <span class="p">},</span>
    <span class="s">"execution_instruction"</span> <span class="p">:</span> <span class="s">"any_part_of"</span><span class="p">,</span>
    <span class="s">"expires_at"</span> <span class="p">:</span> <span class="mi">1745312540321</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example_quote"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">69600</span><span class="p">,</span><span class="w">
    </span><span class="nl">"legs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">69600</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-15NOV24"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ratio"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1731076586371</span><span class="p">,</span><span class="w">
    </span><span class="nl">"block_rfq_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"replaced"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"filled_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"hedge"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">70000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1731076586371</span><span class="p">,</span><span class="w">
    </span><span class="nl">"block_rfq_quote_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quote_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p><b>Maker method</b> <p>This method adds quote to the existing Block RFQ. To calculate individual leg prices, the <code>private/get_leg_prices</code> endpoint can be utilized.</p></p>

<p><strong>Scope: </strong> <code>block_rfq:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fadd_block_rfq_quote" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-104'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>label</td>
<td>false</td>
<td>string</td>
<td></td>
<td>User defined label for the Block RFQ quote (maximum 64 characters). Used to identify quotes of a selected Block RFQ</td>
</tr>
<tr>
<td>block_rfq_id</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>ID of the Block RFQ</td>
</tr>
<tr>
<td>amount</td>
<td>true</td>
<td>number</td>
<td></td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>direction</td>
<td>true</td>
<td>string</td>
<td><code>buy</code><br><code>sell</code></td>
<td>Direction of trade from the maker perspective</td>
</tr>
<tr>
<td>legs</td>
<td>true</td>
<td>array of objects</td>
<td></td>
<td>List of legs used for Block RFQ quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>true</td>
<td>number</td>
<td></td>
<td>Price for trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ratio</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Ratio of amount between legs</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>true</td>
<td>string</td>
<td><code>buy</code><br><code>sell</code></td>
<td>Direction of selected leg. Must match the direction of the corresponding leg in the Block RFQ</td>
</tr>
<tr>
<td>hedge</td>
<td>false</td>
<td>object</td>
<td></td>
<td>Hedge leg of the Block RFQ. There is only one hedge leg allowed per Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>true</td>
<td>string</td>
<td><code>buy</code><br><code>sell</code></td>
<td>Direction of selected leg. Must match the direction of the corresponding leg in the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>true</td>
<td>number</td>
<td></td>
<td>Hedge leg price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>true</td>
<td>number</td>
<td></td>
<td>It represents the requested trade size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>execution_instruction</td>
<td>false</td>
<td>string</td>
<td><code>all_or_none</code><br><code>any_part_of</code></td>
<td><p>Execution instruction of the quote. Default - <code>any_part_of</code></p> <ul> <li><code>&quot;all_or_none (AON)&quot;</code> - The quote can only be filled entirely or not at all, ensuring that its amount matches the amount specified in the Block RFQ. </li> <li><code>&quot;any_part_of (APO)&quot;</code> - The quote can be filled either partially or fully, with the filled amount potentially being less than the Block RFQ amount. Additionally, &#39;any_part_of&#39; quotes have priority over &#39;all_or_none&#39; quotes at the same price level.</li> </ul></td>
</tr>
<tr>
<td>price</td>
<td>false</td>
<td>number</td>
<td></td>
<td>Aggregated price used for quoting future spreads.</td>
</tr>
<tr>
<td>expires_at</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The timestamp when the quote expires (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h3 id='response-104'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the quote on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp when quote was created (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction of trade from the maker perspective</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;execution_instruction</td>
<td>string</td>
<td><p>Execution instruction of the quote. Default - <code>any_part_of</code></p> <ul> <li><code>&quot;all_or_none (AON)&quot;</code> - The quote can only be filled entirely or not at all, ensuring that its amount matches the amount specified in the Block RFQ. Additionally, &#39;all_or_none&#39; quotes have priority over &#39;any_part_of&#39; quotes at the same price level.</li> <li><code>&quot;any_part_of (APO)&quot;</code> - The quote can be filled either partially or fully, with the filled amount potentially being less than the Block RFQ amount. </li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the quote. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;hedge</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>integer</td>
<td>It represents the requested hedge leg size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price for a hedge leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label for the quote (maximum 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>Timestamp of the last update of the quote (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price for a leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ratio</td>
<td>integer</td>
<td>Ratio of amount between legs</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price of a quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_state</td>
<td>string</td>
<td>State of the quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_state_reason</td>
<td>string</td>
<td>Reason of quote cancellation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the quote was edited, otherwise <code>false</code>.</td>
</tr>
</tbody></table>
<h2 id='private-cancel_all_block_rfq_quotes'>/private/cancel_all_block_rfq_quotes</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/cancel_all_block_rfq_quotes?block_rfq_id=154"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/cancel_all_block_rfq_quotes</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">block_rfq_id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">154</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">24</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/cancel_all_block_rfq_quotes"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"block_rfq_id"</span> <span class="p">:</span> <span class="mi">154</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">24</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p><b>Maker method</b> <p>This method cancels all user quotes in all Block RFQs. Optionally cancels all quotes in a specific RFQ if the <code>block_rfq_id</code> is provided.</p></p>

<p><strong>Scope: </strong> <code>block_rfq:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fcancel_all_block_rfq_quotes" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-105'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>block_rfq_id</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>ID of the Block RFQ</td>
</tr>
<tr>
<td>detailed</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>When detailed is set to <code>true</code> output format is changed. See <a href='#detailed-response-for-private-cancel_all-and-private-cancel_by_label-methods'>description</a>. Default: <code>false</code></td>
</tr>
</tbody></table>
<h3 id='response-105'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>number</td>
<td>Total number of successfully cancelled quotes</td>
</tr>
</tbody></table>
<h2 id='private-cancel_block_rfq'>/private/cancel_block_rfq</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/cancel_block_rfq?block_rfq_id=366"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/cancel_block_rfq</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">block_rfq_id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">366</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/cancel_block_rfq"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"block_rfq_id"</span> <span class="p">:</span> <span class="mi">366</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1729855159611</span><span class="p">,</span><span class="w">
    </span><span class="nl">"block_rfq_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">366</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expiration_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1729855459611</span><span class="p">,</span><span class="w">
    </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"taker"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"asks"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"bids"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"makers"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">100000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"legs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"ratio"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-1NOV24"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"ratio"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"combo_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-FS-1NOV24_PERP"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><b>Taker method</b> <p>This method cancels a Block RFQ using the specified <code>block_rfq_id</code>.</p></p>

<p><strong>Scope: </strong> <code>block_rfq:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fcancel_block_rfq" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-106'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>block_rfq_id</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>ID of the Block RFQ</td>
</tr>
</tbody></table>
<h3 id='response-106'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that created the Block RFQ on behalf of the user (optional, visible only to taker).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;asks</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;execution_instruction</td>
<td>string</td>
<td><p>Execution instruction of the quote. Default - <code>any_part_of</code></p> <ul> <li><code>&quot;all_or_none (AON)&quot;</code> - The quote can only be filled entirely or not at all, ensuring that its amount matches the amount specified in the Block RFQ. Additionally, &#39;all_or_none&#39; quotes have priority over &#39;any_part_of&#39; quotes at the same price level.</li> <li><code>&quot;any_part_of (APO)&quot;</code> - The quote can be filled either partially or fully, with the filled amount potentially being less than the Block RFQ amount. </li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;expires_at</td>
<td>integer</td>
<td>The timestamp when the quote expires (milliseconds since the Unix epoch), equal to the earliest expiry of placed quotes</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>Timestamp of the last update of the quote (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;makers</td>
<td>array of string</td>
<td>Maker of the quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price of a quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;bids</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;execution_instruction</td>
<td>string</td>
<td><p>Execution instruction of the quote. Default - <code>any_part_of</code></p> <ul> <li><code>&quot;all_or_none (AON)&quot;</code> - The quote can only be filled entirely or not at all, ensuring that its amount matches the amount specified in the Block RFQ. Additionally, &#39;all_or_none&#39; quotes have priority over &#39;any_part_of&#39; quotes at the same price level.</li> <li><code>&quot;any_part_of (APO)&quot;</code> - The quote can be filled either partially or fully, with the filled amount potentially being less than the Block RFQ amount. </li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;expires_at</td>
<td>integer</td>
<td>The timestamp when the quote expires (milliseconds since the Unix epoch), equal to the earliest expiry of placed quotes</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>Timestamp of the last update of the quote (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;makers</td>
<td>array of string</td>
<td>Maker of the quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price of a quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Unique combo identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp when Block RFQ was created (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;disclosed</td>
<td>boolean</td>
<td>Indicates whether the RFQ was created as non-anonymous, meaning taker and maker aliases are visible to counterparties.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;expiration_timestamp</td>
<td>integer</td>
<td>The timestamp when the Block RFQ will expire (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;hedge</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>integer</td>
<td>It represents the requested hedge leg size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price for a hedge leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;included_in_taker_rating</td>
<td>boolean</td>
<td>Indicates whether the RFQ is included in the taker&#39;s rating calculation. Present only for closed RFQs created by the requesting taker.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_prices</td>
<td>array of number</td>
<td>A list of index prices for the underlying instrument(s) at the time of trade execution.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label for the Block RFQ (maximum 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ratio</td>
<td>integer</td>
<td>Ratio of amount between legs</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;makers</td>
<td>array of string</td>
<td>List of targeted Block RFQ makers</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>The mark price for the instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;min_trade_amount</td>
<td>number</td>
<td>Minimum amount for trading</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;role</td>
<td>string</td>
<td>Role of the user in Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>State of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;taker_rating</td>
<td>string</td>
<td>Rating of the taker</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For options, linear futures, linear perpetuals and spots the amount is denominated in the underlying base currency coin. The inverse perpetuals and inverse futures are denominated in USD units.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;hedge_amount</td>
<td>number</td>
<td>Amount of the hedge leg. For linear futures, linear perpetuals and spots the amount is denominated in the underlying base currency coin. The inverse perpetuals and inverse futures are denominated in USD units.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maker</td>
<td>string</td>
<td>Alias of the maker (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
</tbody></table>
<h2 id='private-cancel_block_rfq_quote'>/private/cancel_block_rfq_quote</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/cancel_block_rfq_quote?block_rfq_id=3&amp;label=example_quote"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/cancel_block_rfq_quote</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">label</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">example_quote</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">block_rfq_id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/cancel_block_rfq_quote"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"label"</span> <span class="p">:</span> <span class="s">"example_quote"</span><span class="p">,</span>
    <span class="s">"block_rfq_id"</span> <span class="p">:</span> <span class="mi">3</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example_quote"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">20000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">74600</span><span class="p">,</span><span class="w">
    </span><span class="nl">"legs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">74600</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-15NOV24"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ratio"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1731076586371</span><span class="p">,</span><span class="w">
    </span><span class="nl">"block_rfq_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"replaced"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"filled_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1731076655746</span><span class="p">,</span><span class="w">
    </span><span class="nl">"hedge"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">70000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"block_rfq_quote_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quote_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelled"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p><b>Maker method</b> <p>This method cancels a Block RFQ quote using the specified <code>block_rfq_quote_id</code>. Alternatively, user can use a combination of <code>block_rfq_id</code> and <code>label</code> to cancel the quote.</p></p>

<p><strong>Scope: </strong> <code>block_rfq:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fcancel_block_rfq_quote" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-107'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>block_rfq_quote_id</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>ID of the Block RFQ quote</td>
</tr>
<tr>
<td>label</td>
<td>false</td>
<td>string</td>
<td></td>
<td>User defined label for the Block RFQ quote (maximum 64 characters). Used to identify quotes of a selected Block RFQ</td>
</tr>
<tr>
<td>block_rfq_id</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>ID of the Block RFQ</td>
</tr>
</tbody></table>
<h3 id='response-107'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the quote on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp when quote was created (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction of trade from the maker perspective</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;execution_instruction</td>
<td>string</td>
<td><p>Execution instruction of the quote. Default - <code>any_part_of</code></p> <ul> <li><code>&quot;all_or_none (AON)&quot;</code> - The quote can only be filled entirely or not at all, ensuring that its amount matches the amount specified in the Block RFQ. Additionally, &#39;all_or_none&#39; quotes have priority over &#39;any_part_of&#39; quotes at the same price level.</li> <li><code>&quot;any_part_of (APO)&quot;</code> - The quote can be filled either partially or fully, with the filled amount potentially being less than the Block RFQ amount. </li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the quote. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;hedge</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>integer</td>
<td>It represents the requested hedge leg size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price for a hedge leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label for the quote (maximum 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>Timestamp of the last update of the quote (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price for a leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ratio</td>
<td>integer</td>
<td>Ratio of amount between legs</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price of a quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_state</td>
<td>string</td>
<td>State of the quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_state_reason</td>
<td>string</td>
<td>Reason of quote cancellation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the quote was edited, otherwise <code>false</code>.</td>
</tr>
</tbody></table>
<h2 id='private-create_block_rfq'>/private/create_block_rfq</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/create_block_rfq?hedge=%7B%22price%22%3A70000%2C%22instrument_name%22%3A%22BTC-PERPETUAL%22%2C%22direction%22%3A%22buy%22%2C%22amount%22%3A10%7D&amp;label=example&amp;legs=%5B%7B%22instrument_name%22%3A%22BTC-15NOV24%22%2C%22direction%22%3A%22sell%22%2C%22amount%22%3A20000%7D%5D&amp;makers=%5B%22MAKER1%22%5D"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/create_block_rfq</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">legs</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-15NOV24</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">20000</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">sell</span><span class="dl">"</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="dl">"</span><span class="s2">hedge</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">70000</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span>
    <span class="p">},</span>
    <span class="dl">"</span><span class="s2">label</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">example</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">makers</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="dl">"</span><span class="s2">MAKER1</span><span class="dl">"</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/create_block_rfq"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"legs"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-15NOV24"</span><span class="p">,</span>
        <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">20000</span><span class="p">,</span>
        <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"sell"</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="s">"hedge"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"buy"</span><span class="p">,</span>
      <span class="s">"price"</span> <span class="p">:</span> <span class="mi">70000</span><span class="p">,</span>
      <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span>
    <span class="p">},</span>
    <span class="s">"label"</span> <span class="p">:</span> <span class="s">"example"</span><span class="p">,</span>
    <span class="s">"makers"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="s">"MAKER1"</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">20000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"taker"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"bids"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"asks"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"combo_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-15NOV24"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"legs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-15NOV24"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ratio"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1731062187555</span><span class="p">,</span><span class="w">
    </span><span class="nl">"block_rfq_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">507</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expiration_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1731062487555</span><span class="p">,</span><span class="w">
    </span><span class="nl">"hedge"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">70000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"makers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"MAKER1"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><b>Taker method</b> <p>This method creates a new Block RFQ.</p></p>

<p><strong>Scope: </strong> <code>block_rfq:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fcreate_block_rfq" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-108'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>legs</td>
<td>true</td>
<td>array of objects</td>
<td></td>
<td>List of legs used to create Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>true</td>
<td>number</td>
<td></td>
<td>It represents the requested trade size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>true</td>
<td>string</td>
<td><code>buy</code><br><code>sell</code></td>
<td>Direction of selected leg</td>
</tr>
<tr>
<td>hedge</td>
<td>false</td>
<td>object</td>
<td></td>
<td>Hedge leg of the Block RFQ. There is only one hedge leg allowed per Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>true</td>
<td>string</td>
<td><code>buy</code><br><code>sell</code></td>
<td>Direction of selected leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>true</td>
<td>number</td>
<td></td>
<td>Hedge leg price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>true</td>
<td>number</td>
<td></td>
<td>It represents the requested trade size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>label</td>
<td>false</td>
<td>string</td>
<td></td>
<td>User defined label for the Block RFQ (maximum 64 characters)</td>
</tr>
<tr>
<td>makers</td>
<td>false</td>
<td>array</td>
<td></td>
<td>List of targeted Block RFQ makers. Only those makers will be notified about created Block RFQ. If the list is empty, all available makers will be targeted.</td>
</tr>
<tr>
<td>disclosed</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Determines whether the RFQ is non-anonymous, revealing both taker and maker aliases. It can be set to <code>false</code> (anonymous mode) only when at least 5 makers are targeted. Default value is <code>true</code>.</td>
</tr>
</tbody></table>
<h3 id='response-108'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that created the Block RFQ on behalf of the user (optional, visible only to taker).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;asks</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;execution_instruction</td>
<td>string</td>
<td><p>Execution instruction of the quote. Default - <code>any_part_of</code></p> <ul> <li><code>&quot;all_or_none (AON)&quot;</code> - The quote can only be filled entirely or not at all, ensuring that its amount matches the amount specified in the Block RFQ. Additionally, &#39;all_or_none&#39; quotes have priority over &#39;any_part_of&#39; quotes at the same price level.</li> <li><code>&quot;any_part_of (APO)&quot;</code> - The quote can be filled either partially or fully, with the filled amount potentially being less than the Block RFQ amount. </li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;expires_at</td>
<td>integer</td>
<td>The timestamp when the quote expires (milliseconds since the Unix epoch), equal to the earliest expiry of placed quotes</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>Timestamp of the last update of the quote (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;makers</td>
<td>array of string</td>
<td>Maker of the quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price of a quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;bids</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;execution_instruction</td>
<td>string</td>
<td><p>Execution instruction of the quote. Default - <code>any_part_of</code></p> <ul> <li><code>&quot;all_or_none (AON)&quot;</code> - The quote can only be filled entirely or not at all, ensuring that its amount matches the amount specified in the Block RFQ. Additionally, &#39;all_or_none&#39; quotes have priority over &#39;any_part_of&#39; quotes at the same price level.</li> <li><code>&quot;any_part_of (APO)&quot;</code> - The quote can be filled either partially or fully, with the filled amount potentially being less than the Block RFQ amount. </li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;expires_at</td>
<td>integer</td>
<td>The timestamp when the quote expires (milliseconds since the Unix epoch), equal to the earliest expiry of placed quotes</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>Timestamp of the last update of the quote (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;makers</td>
<td>array of string</td>
<td>Maker of the quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price of a quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Unique combo identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp when Block RFQ was created (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;disclosed</td>
<td>boolean</td>
<td>Indicates whether the RFQ was created as non-anonymous, meaning taker and maker aliases are visible to counterparties.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;expiration_timestamp</td>
<td>integer</td>
<td>The timestamp when the Block RFQ will expire (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;hedge</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>integer</td>
<td>It represents the requested hedge leg size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price for a hedge leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;included_in_taker_rating</td>
<td>boolean</td>
<td>Indicates whether the RFQ is included in the taker&#39;s rating calculation. Present only for closed RFQs created by the requesting taker.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_prices</td>
<td>array of number</td>
<td>A list of index prices for the underlying instrument(s) at the time of trade execution.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label for the Block RFQ (maximum 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ratio</td>
<td>integer</td>
<td>Ratio of amount between legs</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;makers</td>
<td>array of string</td>
<td>List of targeted Block RFQ makers</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>The mark price for the instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;min_trade_amount</td>
<td>number</td>
<td>Minimum amount for trading</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;role</td>
<td>string</td>
<td>Role of the user in Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>State of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;taker_rating</td>
<td>string</td>
<td>Rating of the taker</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For options, linear futures, linear perpetuals and spots the amount is denominated in the underlying base currency coin. The inverse perpetuals and inverse futures are denominated in USD units.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;hedge_amount</td>
<td>number</td>
<td>Amount of the hedge leg. For linear futures, linear perpetuals and spots the amount is denominated in the underlying base currency coin. The inverse perpetuals and inverse futures are denominated in USD units.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maker</td>
<td>string</td>
<td>Alias of the maker (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
</tbody></table>
<h2 id='private-edit_block_rfq_quote'>/private/edit_block_rfq_quote</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/edit_block_rfq_quote?amount=20000&amp;block_rfq_id=3&amp;direction=buy&amp;execution_instruction=any_part_of&amp;hedge=%7B%22price%22%3A70000%2C%22instrument_name%22%3A%22BTC-PERPETUAL%22%2C%22direction%22%3A%22buy%22%2C%22amount%22%3A10%7D&amp;label=example_quote&amp;legs=%5B%7B%22ratio%22%3A%221%22%2C%22price%22%3A74600%2C%22instrument_name%22%3A%22BTC-15NOV24%22%2C%22direction%22%3A%22buy%22%7D%5D"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/edit_block_rfq_quote</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">label</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">example_quote</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">block_rfq_id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">20000</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">legs</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-15NOV24</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">74600</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">ratio</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">1</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="dl">"</span><span class="s2">hedge</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">70000</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span>
    <span class="p">},</span>
    <span class="dl">"</span><span class="s2">execution_instruction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">any_part_of</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/edit_block_rfq_quote"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"label"</span> <span class="p">:</span> <span class="s">"example_quote"</span><span class="p">,</span>
    <span class="s">"block_rfq_id"</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">20000</span><span class="p">,</span>
    <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"buy"</span><span class="p">,</span>
    <span class="s">"legs"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-15NOV24"</span><span class="p">,</span>
        <span class="s">"price"</span> <span class="p">:</span> <span class="mi">74600</span><span class="p">,</span>
        <span class="s">"ratio"</span> <span class="p">:</span> <span class="s">"1"</span><span class="p">,</span>
        <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"buy"</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="s">"hedge"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
      <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"buy"</span><span class="p">,</span>
      <span class="s">"price"</span> <span class="p">:</span> <span class="mi">70000</span><span class="p">,</span>
      <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span>
    <span class="p">},</span>
    <span class="s">"execution_instruction"</span> <span class="p">:</span> <span class="s">"any_part_of"</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example_quote"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">20000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">74600</span><span class="p">,</span><span class="w">
    </span><span class="nl">"legs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">74600</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-15NOV24"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ratio"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1731076586371</span><span class="p">,</span><span class="w">
    </span><span class="nl">"block_rfq_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"replaced"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"filled_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1731076638591</span><span class="p">,</span><span class="w">
    </span><span class="nl">"hedge"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">70000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"block_rfq_quote_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quote_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p><b>Maker method</b> <p>This method edits a Block RFQ quote using the specified <code>block_rfq_quote_id</code>. Alternatively, user can use a combination of <code>block_rfq_id</code> and <code>label</code> to edit the quote.</p></p>

<p><strong>Scope: </strong> <code>block_rfq:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fedit_block_rfq_quote" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-109'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>legs</td>
<td>true</td>
<td>array of objects</td>
<td></td>
<td>List of legs used for Block RFQ quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>true</td>
<td>number</td>
<td></td>
<td>Price for trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ratio</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Ratio of amount between legs</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>true</td>
<td>string</td>
<td><code>buy</code><br><code>sell</code></td>
<td>Direction of selected leg. Must match the direction of the corresponding leg in the Block RFQ</td>
</tr>
<tr>
<td>amount</td>
<td>true</td>
<td>number</td>
<td></td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>block_rfq_quote_id</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>ID of the Block RFQ quote</td>
</tr>
<tr>
<td>label</td>
<td>false</td>
<td>string</td>
<td></td>
<td>User defined label for the Block RFQ quote (maximum 64 characters). Used to identify quotes of a selected Block RFQ</td>
</tr>
<tr>
<td>hedge</td>
<td>false</td>
<td>object</td>
<td></td>
<td>Hedge leg of the Block RFQ. There is only one hedge leg allowed per Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>true</td>
<td>string</td>
<td><code>buy</code><br><code>sell</code></td>
<td>Direction of selected leg. Must match the direction of the corresponding leg in the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>true</td>
<td>number</td>
<td></td>
<td>Hedge leg price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>true</td>
<td>number</td>
<td></td>
<td>It represents the requested trade size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>block_rfq_id</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>ID of the Block RFQ</td>
</tr>
<tr>
<td>price</td>
<td>false</td>
<td>number</td>
<td></td>
<td>Aggregated price used for quoting future spreads.</td>
</tr>
</tbody></table>
<h3 id='response-109'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the quote on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp when quote was created (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction of trade from the maker perspective</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;execution_instruction</td>
<td>string</td>
<td><p>Execution instruction of the quote. Default - <code>any_part_of</code></p> <ul> <li><code>&quot;all_or_none (AON)&quot;</code> - The quote can only be filled entirely or not at all, ensuring that its amount matches the amount specified in the Block RFQ. Additionally, &#39;all_or_none&#39; quotes have priority over &#39;any_part_of&#39; quotes at the same price level.</li> <li><code>&quot;any_part_of (APO)&quot;</code> - The quote can be filled either partially or fully, with the filled amount potentially being less than the Block RFQ amount. </li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the quote. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;hedge</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>integer</td>
<td>It represents the requested hedge leg size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price for a hedge leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label for the quote (maximum 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>Timestamp of the last update of the quote (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price for a leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ratio</td>
<td>integer</td>
<td>Ratio of amount between legs</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price of a quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_state</td>
<td>string</td>
<td>State of the quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_state_reason</td>
<td>string</td>
<td>Reason of quote cancellation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the quote was edited, otherwise <code>false</code>.</td>
</tr>
</tbody></table>
<h2 id='private-get_block_rfq_makers'>/private/get_block_rfq_makers</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_block_rfq_makers?"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_block_rfq_makers</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_block_rfq_makers"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="s2">"MAKER1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"MAKER2"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"MAKER3"</span><span class="w">
  </span><span class="p">]</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This method returns a list of all available Block RFQ makers.</p>

<p><strong>Scope: </strong> <code>block_rfq:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_block_rfq_makers" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-110'>Parameters</h3>
<p><em>This method takes no parameters</em></p>
<h3 id='response-110'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array</td>
<td>A list of available makers.</td>
</tr>
</tbody></table>
<h2 id='private-get_block_rfq_quotes'>/private/get_block_rfq_quotes</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_block_rfq_quotes?block_rfq_id=1"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_block_rfq_quotes</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">block_rfq_id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_block_rfq_quotes"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"block_rfq_id"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example_quote"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">20000</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">74600</span><span class="p">,</span><span class="w">
    </span><span class="nl">"legs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">74600</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-15NOV24"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ratio"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1731076586371</span><span class="p">,</span><span class="w">
    </span><span class="nl">"block_rfq_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"replaced"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"filled_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"last_update_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1731076638591</span><span class="p">,</span><span class="w">
    </span><span class="nl">"hedge"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">70000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"block_rfq_quote_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
    </span><span class="nl">"quote_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"execution_instruction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"all_or_none"</span><span class="w">
  </span><span class="p">}</span><span class="w">
 </span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p><b>Maker method</b> <p>This method retrieves all open quotes for Block RFQs. When a <code>block_rfq_id</code> is specified, only the open quotes for that particular Block RFQ will be returned. When a <code>label</code> is specified, all quotes with this label are returned. <code>block_rfq_quote_id</code> returns one specific quote.</p></p>

<p><strong>Scope: </strong> <code>block_rfq:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_block_rfq_quotes" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-111'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>block_rfq_id</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>ID of the Block RFQ</td>
</tr>
<tr>
<td>label</td>
<td>false</td>
<td>string</td>
<td></td>
<td>User defined label for the Block RFQ quote (maximum 64 characters). Used to identify quotes of a selected Block RFQ</td>
</tr>
<tr>
<td>block_rfq_quote_id</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>ID of the Block RFQ quote</td>
</tr>
</tbody></table>
<h3 id='response-111'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the quote on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp when quote was created (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction of trade from the maker perspective</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;execution_instruction</td>
<td>string</td>
<td><p>Execution instruction of the quote. Default - <code>any_part_of</code></p> <ul> <li><code>&quot;all_or_none (AON)&quot;</code> - The quote can only be filled entirely or not at all, ensuring that its amount matches the amount specified in the Block RFQ. Additionally, &#39;all_or_none&#39; quotes have priority over &#39;any_part_of&#39; quotes at the same price level.</li> <li><code>&quot;any_part_of (APO)&quot;</code> - The quote can be filled either partially or fully, with the filled amount potentially being less than the Block RFQ amount. </li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the quote. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;hedge</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>integer</td>
<td>It represents the requested hedge leg size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price for a hedge leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label for the quote (maximum 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>Timestamp of the last update of the quote (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price for a leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ratio</td>
<td>integer</td>
<td>Ratio of amount between legs</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price of a quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_state</td>
<td>string</td>
<td>State of the quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_state_reason</td>
<td>string</td>
<td>Reason of quote cancellation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the quote was edited, otherwise <code>false</code>.</td>
</tr>
</tbody></table>
<h2 id='private-get_block_rfq_user_info'>/private/get_block_rfq_user_info</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_block_rfq_user_info?"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_block_rfq_user_info</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_block_rfq_user_info"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"parent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"identity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MAKER1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_maker"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"taker_rating"</span><span class="p">:</span><span class="w"> </span><span class="mf">98.5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"identity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TAKER1"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"is_maker"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"taker_rating"</span><span class="p">:</span><span class="w"> </span><span class="mf">97.0</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Returns identity and rating information for the requesting account and its subaccounts. Includes both group-level and individual user-level alias data, if available.</p>

<p><strong>Scope: </strong> <code>block_rfq:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_block_rfq_user_info" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-112'>Parameters</h3>
<p><em>This method takes no parameters</em></p>
<h3 id='response-112'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;parent</td>
<td><em>object</em></td>
<td>Parent Identity (group alias), representing the overall account group (main + subaccounts).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;identity</td>
<td>string</td>
<td>Group-level alias identifying the account group as a whole.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_maker</td>
<td>boolean</td>
<td>Indicates whether the Parent Identity has maker scope.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;users</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;identity</td>
<td>string</td>
<td>Specific alias identifying this account individually.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_maker</td>
<td>boolean</td>
<td>Indicates whether this account has maker scope.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;taker_rating</td>
<td>number</td>
<td>Taker rating associated with this account, if available.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;user_id</td>
<td>integer</td>
<td>Unique user identifier</td>
</tr>
</tbody></table>
<h2 id='private-get_block_rfqs'>/private/get_block_rfqs</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_block_rfqs?count=20&amp;role=maker&amp;state=open"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_block_rfqs</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">state</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">open</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">role</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">maker</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_block_rfqs"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="s">"state"</span> <span class="p">:</span> <span class="s">"open"</span><span class="p">,</span>
    <span class="s">"role"</span> <span class="p">:</span> <span class="s">"maker"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"continuation"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"block_rfqs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">40000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"maker"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"combo_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-15NOV24"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"legs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-15NOV24"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"ratio"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1731062457741</span><span class="p">,</span><span class="w">
        </span><span class="nl">"block_rfq_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">508</span><span class="p">,</span><span class="w">
        </span><span class="nl">"expiration_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1731062757741</span><span class="p">,</span><span class="w">
        </span><span class="nl">"hedge"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">70000</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"taker_rating"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1-2"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This method returns a list of Block RFQs that were either created by the user or assigned to them as a maker, sorted in descending order. <code>trades</code> and <code>mark_price</code> are only visible for the filled Block RFQ. When a <code>block_rfq_id</code> is specified, only that particular Block RFQ will be returned. If called by a <code>taker</code>, response will additionally include <code>makers</code> list and <code>label</code> if previously provided. If called by the <code>maker</code>, the <code>trades</code>  will include the maker&#39;s alias, but only for trades in which this maker participated. Can be optionally filtered by currency.</p>

<p><strong>Scope: </strong> <code>block_rfq:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_block_rfqs" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-113'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Count of Block RFQs returned</td>
</tr>
<tr>
<td>state</td>
<td>false</td>
<td>string</td>
<td><code>open</code><br><code>filled</code><br><code>traded</code><br><code>cancelled</code><br><code>expired</code><br><code>closed</code></td>
<td>State of Block RFQ</td>
</tr>
<tr>
<td>role</td>
<td>false</td>
<td>string</td>
<td><code>any</code><br><code>taker</code><br><code>maker</code></td>
<td>Role of the user in Block RFQ. When the <code>any</code> role is selected, the method returns all Block RFQs in which the user has participated, either as the <code>taker</code> or as a <code>maker</code></td>
</tr>
<tr>
<td>continuation</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The continuation parameter specifies the starting point for fetching historical Block RFQs. When provided, the endpoint returns Block RFQs, starting from the specified ID and continuing backward (e.g., if <code>continuation</code> is 50, results will include Block RFQs of ID 49, 48, etc.)</td>
</tr>
<tr>
<td>block_rfq_id</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>ID of the Block RFQ</td>
</tr>
<tr>
<td>currency</td>
<td>false</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>any</code></td>
<td>The currency symbol</td>
</tr>
</tbody></table>
<h3 id='response-113'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfqs</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that created the Block RFQ on behalf of the user (optional, visible only to taker).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;asks</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;execution_instruction</td>
<td>string</td>
<td><p>Execution instruction of the quote. Default - <code>any_part_of</code></p> <ul> <li><code>&quot;all_or_none (AON)&quot;</code> - The quote can only be filled entirely or not at all, ensuring that its amount matches the amount specified in the Block RFQ. Additionally, &#39;all_or_none&#39; quotes have priority over &#39;any_part_of&#39; quotes at the same price level.</li> <li><code>&quot;any_part_of (APO)&quot;</code> - The quote can be filled either partially or fully, with the filled amount potentially being less than the Block RFQ amount. </li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;expires_at</td>
<td>integer</td>
<td>The timestamp when the quote expires (milliseconds since the Unix epoch), equal to the earliest expiry of placed quotes</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>Timestamp of the last update of the quote (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;makers</td>
<td>array of string</td>
<td>Maker of the quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price of a quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;bids</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;execution_instruction</td>
<td>string</td>
<td><p>Execution instruction of the quote. Default - <code>any_part_of</code></p> <ul> <li><code>&quot;all_or_none (AON)&quot;</code> - The quote can only be filled entirely or not at all, ensuring that its amount matches the amount specified in the Block RFQ. Additionally, &#39;all_or_none&#39; quotes have priority over &#39;any_part_of&#39; quotes at the same price level.</li> <li><code>&quot;any_part_of (APO)&quot;</code> - The quote can be filled either partially or fully, with the filled amount potentially being less than the Block RFQ amount. </li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;expires_at</td>
<td>integer</td>
<td>The timestamp when the quote expires (milliseconds since the Unix epoch), equal to the earliest expiry of placed quotes</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>Timestamp of the last update of the quote (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;makers</td>
<td>array of string</td>
<td>Maker of the quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price of a quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Unique combo identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp when Block RFQ was created (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;disclosed</td>
<td>boolean</td>
<td>Indicates whether the RFQ was created as non-anonymous, meaning taker and maker aliases are visible to counterparties.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;expiration_timestamp</td>
<td>integer</td>
<td>The timestamp when the Block RFQ will expire (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;hedge</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>integer</td>
<td>It represents the requested hedge leg size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price for a hedge leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;included_in_taker_rating</td>
<td>boolean</td>
<td>Indicates whether the RFQ is included in the taker&#39;s rating calculation. Present only for closed RFQs created by the requesting taker.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_prices</td>
<td>array of number</td>
<td>A list of index prices for the underlying instrument(s) at the time of trade execution.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label for the Block RFQ (maximum 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ratio</td>
<td>integer</td>
<td>Ratio of amount between legs</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;makers</td>
<td>array of string</td>
<td>List of targeted Block RFQ makers</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>The mark price for the instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;min_trade_amount</td>
<td>number</td>
<td>Minimum amount for trading</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;role</td>
<td>string</td>
<td>Role of the user in Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>State of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;taker_rating</td>
<td>string</td>
<td>Rating of the taker</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For options, linear futures, linear perpetuals and spots the amount is denominated in the underlying base currency coin. The inverse perpetuals and inverse futures are denominated in USD units.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;hedge_amount</td>
<td>number</td>
<td>Amount of the hedge leg. For linear futures, linear perpetuals and spots the amount is denominated in the underlying base currency coin. The inverse perpetuals and inverse futures are denominated in USD units.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maker</td>
<td>string</td>
<td>Alias of the maker (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;continuation</td>
<td>string</td>
<td>Continuation token for pagination.</td>
</tr>
</tbody></table>
<h2 id='private-trade_block_rfq'>/private/trade_block_rfq</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/trade_block_rfq?amount=100&amp;block_rfq_id=1&amp;direction=buy&amp;legs=%5B%7B%22ratio%22%3A1%2C%22instrument_name%22%3A%22BTC-8NOV24-70000-C%22%2C%22direction%22%3A%22buy%22%7D%2C%7B%22ratio%22%3A1%2C%22instrument_name%22%3A%22BTC-8NOV24-72000-C%22%2C%22direction%22%3A%22sell%22%7D%5D&amp;price=1.00000000000000002082e-02"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/trade_block_rfq</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">block_rfq_id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">legs</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-8NOV24-70000-C</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">ratio</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-8NOV24-72000-C</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">ratio</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">sell</span><span class="dl">"</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">direction</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">100</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/trade_block_rfq"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"block_rfq_id"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s">"legs"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-8NOV24-70000-C"</span><span class="p">,</span>
        <span class="s">"ratio"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"buy"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-8NOV24-72000-C"</span><span class="p">,</span>
        <span class="s">"ratio"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"sell"</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="s">"price"</span> <span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
    <span class="s">"direction"</span> <span class="p">:</span> <span class="s">"buy"</span><span class="p">,</span>
    <span class="s">"amount"</span> <span class="p">:</span> <span class="mi">100</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BLOCK-423"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1730798381504</span><span class="p">,</span><span class="w">
      </span><span class="nl">"trades"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1730798381502</span><span class="p">,</span><span class="w">
          </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5e-7</span><span class="p">,</span><span class="w">
          </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">69696.8</span><span class="p">,</span><span class="w">
          </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">70000</span><span class="p">,</span><span class="w">
          </span><span class="nl">"profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-8NOV24-70000-C"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">113</span><span class="p">,</span><span class="w">
          </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03</span><span class="p">,</span><span class="w">
          </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2899"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"matching_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="nl">"combo_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-CS-8NOV24-70000_72000"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"block_rfq_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"contracts"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
          </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"block_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BLOCK-423"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"771"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"mmp"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"risk_reducing"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"block_trade_leg_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="nl">"self_trade"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fee_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"liquidity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="w">
        </span><span class="p">},</span><span class="w">
       </span><span class="p">{</span><span class="w">
          </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1730798381502</span><span class="p">,</span><span class="w">
          </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5e-7</span><span class="p">,</span><span class="w">
          </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">69677.4</span><span class="p">,</span><span class="w">
          </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">70000</span><span class="p">,</span><span class="w">
          </span><span class="nl">"profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-8NOV24-72000-C"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"trade_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">113</span><span class="p">,</span><span class="w">
          </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.02</span><span class="p">,</span><span class="w">
          </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2900"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"matching_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"tick_direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="nl">"combo_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-CS-8NOV24-70000_72000"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"block_rfq_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">548</span><span class="p">,</span><span class="w">
          </span><span class="nl">"api"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"contracts"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
          </span><span class="nl">"post_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"block_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BLOCK-423"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"772"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"order_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"mmp"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"risk_reducing"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"reduce_only"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"block_trade_leg_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="nl">"self_trade"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fee_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"liquidity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p><b>Taker method</b> <p>This method allows Block RFQ taker to trade with the response by sending a single crossing price. Please note that after Block RFQ creation, a grace period of 5 seconds begins, during which the taker cannot see quotes or trade the Block RFQ.</p></p>

<p><strong>Scope: </strong> <code>block_rfq:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Ftrade_block_rfq" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-114'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>block_rfq_id</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>ID of the Block RFQ</td>
</tr>
<tr>
<td>price</td>
<td>true</td>
<td>number</td>
<td></td>
<td>Maximum acceptable price for execution</td>
</tr>
<tr>
<td>amount</td>
<td>true</td>
<td>number</td>
<td></td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>direction</td>
<td>true</td>
<td>string</td>
<td><code>buy</code><br><code>sell</code></td>
<td>Direction of the trade from the taker perspective</td>
</tr>
<tr>
<td>hedge</td>
<td>false</td>
<td>object</td>
<td></td>
<td>Hedge leg of the Block RFQ. There is only one hedge leg allowed per Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>true</td>
<td>string</td>
<td><code>buy</code><br><code>sell</code></td>
<td>Direction of selected leg. Must match the direction of the corresponding leg in the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>true</td>
<td>number</td>
<td></td>
<td>Hedge leg price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>true</td>
<td>number</td>
<td></td>
<td>It represents the requested trade size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>legs</td>
<td>true</td>
<td>array of objects</td>
<td></td>
<td>List of legs used to trade Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>true</td>
<td>string</td>
<td><code>buy</code><br><code>sell</code></td>
<td>Direction of selected leg. Must match the direction of the corresponding leg in the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ratio</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Ratio of amount between legs</td>
</tr>
</tbody></table>
<h3 id='response-114'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that executed the block trade on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>string</td>
<td>Block trade id</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h1 id='wallet'>Wallet</h1><h2 id='private-add_to_address_book'>/private/add_to_address_book</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/add_to_address_book?address=bc1qar0srrr7xfkvy5l643lydnw9re59gtzzwf0uyj&amp;agreed=true&amp;beneficiary_address=NL%2C+Amsterdam%2C+Street%2C+1&amp;beneficiary_first_name=John&amp;beneficiary_last_name=Doe&amp;beneficiary_vasp_did=did%3Aexample%3A123456789abcdefghi&amp;beneficiary_vasp_name=Money%60s+Gone&amp;currency=BTC&amp;label=Main+address&amp;personal=false&amp;type=withdrawal"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/add_to_address_book</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">withdrawal</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">address</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">bc1qar0srrr7xfkvy5l643lydnw9re59gtzzwf0uyj</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">label</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Main address</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">beneficiary_vasp_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Money`s Gone</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">beneficiary_vasp_did</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">did:example:123456789abcdefghi</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">beneficiary_first_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">John</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">beneficiary_last_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Doe</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">beneficiary_address</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">NL, Amsterdam, Street, 1</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">agreed</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">personal</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">false</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/add_to_address_book"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"type"</span> <span class="p">:</span> <span class="s">"withdrawal"</span><span class="p">,</span>
    <span class="s">"address"</span> <span class="p">:</span> <span class="s">"bc1qar0srrr7xfkvy5l643lydnw9re59gtzzwf0uyj"</span><span class="p">,</span>
    <span class="s">"label"</span> <span class="p">:</span> <span class="s">"Main address"</span><span class="p">,</span>
    <span class="s">"beneficiary_vasp_name"</span> <span class="p">:</span> <span class="s">"Money`s Gone"</span><span class="p">,</span>
    <span class="s">"beneficiary_vasp_did"</span> <span class="p">:</span> <span class="s">"did:example:123456789abcdefghi"</span><span class="p">,</span>
    <span class="s">"beneficiary_first_name"</span> <span class="p">:</span> <span class="s">"John"</span><span class="p">,</span>
    <span class="s">"beneficiary_last_name"</span> <span class="p">:</span> <span class="s">"Doe"</span><span class="p">,</span>
    <span class="s">"beneficiary_address"</span> <span class="p">:</span> <span class="s">"NL, Amsterdam, Street, 1"</span><span class="p">,</span>
    <span class="s">"agreed"</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="s">"personal"</span> <span class="p">:</span> <span class="bp">False</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bc1qar0srrr7xfkvy5l643lydnw9re59gtzzwf0uyj"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1536569522277</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"withdrawal"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Main address"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"beneficiary_vasp_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Money`s Gone"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"beneficiary_vasp_did"</span><span class="p">:</span><span class="w"> </span><span class="s2">"did:example:123456789abcdefghi"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"beneficiary_first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"beneficiary_last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"beneficiary_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NL, Amsterdam, Street, 1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"agreed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"personal"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"info_required"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Adds new entry to address book of given type</p>

<p><strong>Scope: </strong> <code>wallet:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fadd_to_address_book" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-115'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>STETH</code><br><code>ETHW</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>MATIC</code><br><code>SOL</code><br><code>XRP</code><br><code>USYC</code><br><code>PAXG</code><br><code>BNB</code><br><code>USDE</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>type</td>
<td>true</td>
<td>string</td>
<td><code>transfer</code><br><code>withdrawal</code><br><code>deposit_source</code></td>
<td>Address book type</td>
</tr>
<tr>
<td>address</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Address in currency format</td>
</tr>
<tr>
<td>label</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Label of the address book entry</td>
</tr>
<tr>
<td>beneficiary_vasp_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Name of beneficiary VASP</td>
</tr>
<tr>
<td>beneficiary_vasp_did</td>
<td>true</td>
<td>string</td>
<td></td>
<td>DID of beneficiary VASP</td>
</tr>
<tr>
<td>beneficiary_vasp_website</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Website of the beneficiary VASP. Required if the address book entry is associated with a VASP that is not included in the list of known VASPs</td>
</tr>
<tr>
<td>beneficiary_first_name</td>
<td>false</td>
<td>string</td>
<td></td>
<td>First name of beneficiary (if beneficiary is a person)</td>
</tr>
<tr>
<td>beneficiary_last_name</td>
<td>false</td>
<td>string</td>
<td></td>
<td>First name of beneficiary (if beneficiary is a person)</td>
</tr>
<tr>
<td>beneficiary_company_name</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Beneficiary company name (if beneficiary is a company)</td>
</tr>
<tr>
<td>beneficiary_address</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
</tr>
<tr>
<td>agreed</td>
<td>true</td>
<td>boolean</td>
<td></td>
<td>Indicates that the user agreed to shared provided information with 3rd parties</td>
</tr>
<tr>
<td>personal</td>
<td>true</td>
<td>boolean</td>
<td></td>
<td>The user confirms that he provided address belongs to him and he has access to it via an un-hosted wallet software</td>
</tr>
<tr>
<td>extra_currencies</td>
<td>false</td>
<td>array</td>
<td></td>
<td>The user can pass a list of currencies to add the address for. It is currently available ONLY for ERC20 currencies. Without passing this paramater for an ERC20 currency, the address will be added to ALL of the ERC20 currencies.</td>
</tr>
</tbody></table>
<h3 id='response-115'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;address</td>
<td>string</td>
<td>Address in proper format for currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;agreed</td>
<td>boolean</td>
<td>Indicates that the user agreed to shared provided information with 3rd parties</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;beneficiary_address</td>
<td>string</td>
<td>Geographical address of the beneficiary</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;beneficiary_company_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;beneficiary_first_name</td>
<td>string</td>
<td>First name of the beneficiary (if beneficiary is a person)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;beneficiary_last_name</td>
<td>string</td>
<td>Last name of the beneficiary (if beneficiary is a person)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;beneficiary_vasp_did</td>
<td>string</td>
<td>DID of beneficiary VASP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;beneficiary_vasp_name</td>
<td>string</td>
<td>Name of beneficiary VASP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;beneficiary_vasp_website</td>
<td>string</td>
<td>Website of the beneficiary VASP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;info_required</td>
<td>boolean</td>
<td>Signalises that addition information regarding the beneficiary of the address is required</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>Label of the address book entry</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;personal</td>
<td>boolean</td>
<td>The user confirms that he provided address belongs to him and he has access to it via an un-hosted wallet software</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;requires_confirmation</td>
<td>boolean</td>
<td>If address requires email confirmation for withdrawals</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;requires_confirmation_change</td>
<td>boolean</td>
<td>If email confirmation change is in progress</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;status</td>
<td>string</td>
<td>Wallet address status, values: [<code>admin_locked</code>, <code>waiting</code>, <code>confirmed</code>, <code>ready</code>]</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>Address book type</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;waiting_timestamp</td>
<td>boolean</td>
<td>Timestamp when the address will be ready</td>
</tr>
</tbody></table>
<h2 id='private-cancel_transfer_by_id'>/private/cancel_transfer_by_id</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/cancel_transfer_by_id?currency=BTC&amp;id=2"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">9187</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/cancel_transfer_by_id</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">9187</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/cancel_transfer_by_id"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">9187</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"created_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550579457727</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payment"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"other_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2MzyQc5Tkik61kJbEpJV5D5H9VfWHZK9Sgy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updated_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550579457727</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Cancel transfer</p>

<p><strong>Scope: </strong> <code>wallet:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fcancel_transfer_by_id" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-116'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>id</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Id of transfer</td>
</tr>
</tbody></table>
<h3 id='response-116'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Amount of funds in given currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;created_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Transfer direction</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>Id of transfer</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;other_side</td>
<td>string</td>
<td>For transfer from/to subaccount returns this subaccount name, for transfer to other account returns address, for transfer from other account returns that accounts username.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Transfer state, allowed values : <code>prepared</code>, <code>confirmed</code>, <code>cancelled</code>, <code>waiting_for_admin</code>, <code>insufficient_funds</code>,  <code>withdrawal_limit</code> otherwise rejection reason</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>Type of transfer: <code>user</code> - sent to user, <code>subaccount</code> - sent to subaccount</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;updated_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='private-cancel_withdrawal'>/private/cancel_withdrawal</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/cancel_withdrawal?currency=BTC&amp;id=1"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7420</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/cancel_withdrawal</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">7420</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/cancel_withdrawal"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7420</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NBqqD5GRJ8wHy1PYyCXTe9ke5226FhavBz"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"confirmed_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"created_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550571443070</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.15</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancelled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updated_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550571443070</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Cancels withdrawal request</p>

<p><strong>Scope: </strong> <code>wallet:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fcancel_withdrawal" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-117'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>id</td>
<td>true</td>
<td>number</td>
<td></td>
<td>The withdrawal id</td>
</tr>
</tbody></table>
<h3 id='response-117'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;address</td>
<td>string</td>
<td>Address in proper format for currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Amount of funds in given currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;confirmed_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch) of withdrawal confirmation, <code>null</code> when not confirmed</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;created_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>Fee in currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>Withdrawal id in Deribit system</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;priority</td>
<td>number</td>
<td>Id of priority level</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Withdrawal state, allowed values : <code>unconfirmed</code>, <code>confirmed</code>, <code>cancelled</code>, <code>completed</code>, <code>interrupted</code>, <code>rejected</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;transaction_id</td>
<td>string</td>
<td>Transaction id in proper format for currency, <code>null</code> if id is not available</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;updated_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='private-create_deposit_address'>/private/create_deposit_address</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/create_deposit_address?currency=BTC"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7538</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/create_deposit_address</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">7538</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/create_deposit_address"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7538</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N8udZGBc1hLRCFsU9kGwMPpmYUwMFTuCwB"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550575165170</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deposit"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Creates deposit address in currency</p>

<p><strong>Scope: </strong> <code>wallet:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fcreate_deposit_address" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-118'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
</tbody></table>
<h3 id='response-118'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td>Object if address is created, null otherwise</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;address</td>
<td>string</td>
<td>Address in proper format for currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>Address type/purpose, allowed values : <code>deposit</code>, <code>withdrawal</code>, <code>transfer</code></td>
</tr>
</tbody></table>
<h2 id='private-get_address_book'>/private/get_address_book</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_address_book?currency=BTC&amp;type=withdrawal"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">31</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_address_book</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">withdrawal</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">31</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_address_book"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"type"</span> <span class="p">:</span> <span class="s">"withdrawal"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">31</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"waiting_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1720252232860</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1719993033041</span><span class="p">,</span><span class="w">
      </span><span class="nl">"requires_confirmation_change"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"personal"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"info_required"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"beneficiary_first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"beneficiary_last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"beneficiary_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NL, Amsterdam, Street, 1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"requires_confirmation"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"agreed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NBqqD5GRJ8wHy1PYyCXTe9ke5226FhavBz"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"withdrawal"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"waiting"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Main Address"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"waiting_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1720252232760</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1719993032041</span><span class="p">,</span><span class="w">
      </span><span class="nl">"requires_confirmation_change"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"personal"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"info_required"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"beneficiary_company_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyCompany"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"beneficiary_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NL, Haarlem, Street, 5"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"requires_confirmation"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"agreed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bc1qar0srrr7xfkvy5l643lydnw9re59gtzzwf0uyj"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"withdrawal"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"waiting"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"One More Address"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves address book of given type</p>

<p><strong>Scope: </strong> <code>wallet:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_address_book" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-119'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>STETH</code><br><code>ETHW</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>MATIC</code><br><code>SOL</code><br><code>XRP</code><br><code>USYC</code><br><code>PAXG</code><br><code>BNB</code><br><code>USDE</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>type</td>
<td>true</td>
<td>string</td>
<td><code>transfer</code><br><code>withdrawal</code><br><code>deposit_source</code></td>
<td>Address book type</td>
</tr>
</tbody></table>
<h3 id='response-119'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;address</td>
<td>string</td>
<td>Address in proper format for currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;agreed</td>
<td>boolean</td>
<td>Indicates that the user agreed to shared provided information with 3rd parties</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;beneficiary_address</td>
<td>string</td>
<td>Geographical address of the beneficiary</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;beneficiary_company_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;beneficiary_first_name</td>
<td>string</td>
<td>First name of the beneficiary (if beneficiary is a person)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;beneficiary_last_name</td>
<td>string</td>
<td>Last name of the beneficiary (if beneficiary is a person)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;beneficiary_vasp_did</td>
<td>string</td>
<td>DID of beneficiary VASP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;beneficiary_vasp_name</td>
<td>string</td>
<td>Name of beneficiary VASP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;beneficiary_vasp_website</td>
<td>string</td>
<td>Website of the beneficiary VASP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;info_required</td>
<td>boolean</td>
<td>Signalises that addition information regarding the beneficiary of the address is required</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>Label of the address book entry</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;personal</td>
<td>boolean</td>
<td>The user confirms that he provided address belongs to him and he has access to it via an un-hosted wallet software</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;requires_confirmation</td>
<td>boolean</td>
<td>If address requires email confirmation for withdrawals</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;requires_confirmation_change</td>
<td>boolean</td>
<td>If email confirmation change is in progress</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;status</td>
<td>string</td>
<td>Wallet address status, values: [<code>admin_locked</code>, <code>waiting</code>, <code>confirmed</code>, <code>ready</code>]</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>Address book type</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;waiting_timestamp</td>
<td>boolean</td>
<td>Timestamp when the address will be ready</td>
</tr>
</tbody></table>
<h2 id='private-get_current_deposit_address'>/private/get_current_deposit_address</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_current_deposit_address?currency=BTC"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3461</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_current_deposit_address</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">3461</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_current_deposit_address"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3461</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N8udZGBc1hLRCFsU9kGwMPpmYUwMFTuCwB"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550575165170</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deposit"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<p>Retrieve deposit address for currency</p>

<p><strong>Scope: </strong> <code>wallet:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_current_deposit_address" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-120'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
</tbody></table>
<h3 id='response-120'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td>Object if address is created, null otherwise</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;address</td>
<td>string</td>
<td>Address in proper format for currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>Address type/purpose, allowed values : <code>deposit</code>, <code>withdrawal</code>, <code>transfer</code></td>
</tr>
</tbody></table>
<h2 id='private-get_deposits'>/private/get_deposits</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_deposits?count=10&amp;currency=BTC&amp;offset=0"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">5611</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_deposits</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">offset</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">0</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">5611</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_deposits"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s">"offset"</span> <span class="p">:</span> <span class="mi">0</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5611</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
              </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N35qDKDY22zmJq9eSyiAerMD4enJ1xx6ax"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
              </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"received_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1549295017670</span><span class="p">,</span><span class="w">
              </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"230669110fdaf0a0dbcdc079b6b8b43d5af29cc73683835b9bc6b3406c065fda"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"updated_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1549295130159</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve the latest users deposits</p>

<p><strong>Scope: </strong> <code>wallet:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_deposits" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-121'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>10</code></td>
</tr>
<tr>
<td>offset</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The offset for pagination, default - <code>0</code></td>
</tr>
</tbody></table>
<h3 id='response-121'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;count</td>
<td>integer</td>
<td>Total number of results available</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;data</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;address</td>
<td>string</td>
<td>Address in proper format for currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Amount of funds in given currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;clearance_state</td>
<td>string</td>
<td>Clearance state, allowed values : <code>in_progress</code>, <code>pending_admin_decision</code>, <code>pending_user_input</code>, <code>success</code>, <code>failed</code>, <code>cancelled</code>, <code>refund_initiated</code>, <code>refunded</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;note</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;received_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refund_transaction_id</td>
<td>string</td>
<td>Transaction id in proper format for currency, <code>null</code> if id is not available</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;source_address</td>
<td>string</td>
<td>Address in proper format for currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Deposit state, allowed values : <code>pending</code>, <code>completed</code>, <code>rejected</code>, <code>replaced</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;transaction_id</td>
<td>string</td>
<td>Transaction id in proper format for currency, <code>null</code> if id is not available</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;updated_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='private-get_transfers'>/private/get_transfers</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_transfers?count=10&amp;currency=BTC"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7606</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_transfers</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">10</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">7606</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_transfers"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">10</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7606</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"created_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550579457727</span><span class="p">,</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payment"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="nl">"other_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2MzyQc5Tkik61kJbEpJV5D5H9VfWHZK9Sgy"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prepared"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"updated_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550579457727</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w">
                </span><span class="nl">"created_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550579255800</span><span class="p">,</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payment"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="nl">"other_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new_user_1_1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"confirmed"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subaccount"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"updated_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550579255800</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve the user&#39;s transfers list</p>

<p><strong>Scope: </strong> <code>wallet:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_transfers" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-122'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>10</code></td>
</tr>
<tr>
<td>offset</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The offset for pagination, default - <code>0</code></td>
</tr>
</tbody></table>
<h3 id='response-122'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;count</td>
<td>integer</td>
<td>Total number of results available</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;data</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Amount of funds in given currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;created_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Transfer direction</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>Id of transfer</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;other_side</td>
<td>string</td>
<td>For transfer from/to subaccount returns this subaccount name, for transfer to other account returns address, for transfer from other account returns that accounts username.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Transfer state, allowed values : <code>prepared</code>, <code>confirmed</code>, <code>cancelled</code>, <code>waiting_for_admin</code>, <code>insufficient_funds</code>,  <code>withdrawal_limit</code> otherwise rejection reason</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>Type of transfer: <code>user</code> - sent to user, <code>subaccount</code> - sent to subaccount</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;updated_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='private-get_withdrawals'>/private/get_withdrawals</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_withdrawals?count=10&amp;currency=BTC&amp;offset=0"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2745</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_withdrawals</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">offset</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">0</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2745</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_withdrawals"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s">"offset"</span> <span class="p">:</span> <span class="mi">0</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2745</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
              </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NBqqD5GRJ8wHy1PYyCXTe9ke5226FhavBz"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w">
              </span><span class="nl">"confirmed_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
              </span><span class="nl">"created_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550571443070</span><span class="p">,</span><span class="w">
              </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
              </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
              </span><span class="nl">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.15</span><span class="p">,</span><span class="w">
              </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unconfirmed"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
              </span><span class="nl">"updated_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550571443070</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve the latest users withdrawals</p>

<p><strong>Scope: </strong> <code>wallet:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_withdrawals" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-123'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>10</code></td>
</tr>
<tr>
<td>offset</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The offset for pagination, default - <code>0</code></td>
</tr>
</tbody></table>
<h3 id='response-123'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;count</td>
<td>integer</td>
<td>Total number of results available</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;data</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;address</td>
<td>string</td>
<td>Address in proper format for currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Amount of funds in given currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;confirmed_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch) of withdrawal confirmation, <code>null</code> when not confirmed</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;created_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>Fee in currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>Withdrawal id in Deribit system</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;priority</td>
<td>number</td>
<td>Id of priority level</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Withdrawal state, allowed values : <code>unconfirmed</code>, <code>confirmed</code>, <code>cancelled</code>, <code>completed</code>, <code>interrupted</code>, <code>rejected</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;transaction_id</td>
<td>string</td>
<td>Transaction id in proper format for currency, <code>null</code> if id is not available</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;updated_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='private-remove_from_address_book'>/private/remove_from_address_book</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/remove_from_address_book?address=bc1qar0srrr7xfkvy5l643lydnw9re59gtzzwf0uyj&amp;currency=BTC&amp;type=transfer"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/remove_from_address_book</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">transfer</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">address</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">bc1qar0srrr7xfkvy5l643lydnw9re59gtzzwf0uyj</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/remove_from_address_book"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"type"</span> <span class="p">:</span> <span class="s">"transfer"</span><span class="p">,</span>
    <span class="s">"address"</span> <span class="p">:</span> <span class="s">"bc1qar0srrr7xfkvy5l643lydnw9re59gtzzwf0uyj"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Removes address book entry</p>

<p><strong>Scope: </strong> <code>wallet:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fremove_from_address_book" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-124'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>STETH</code><br><code>ETHW</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>MATIC</code><br><code>SOL</code><br><code>XRP</code><br><code>USYC</code><br><code>PAXG</code><br><code>BNB</code><br><code>USDE</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>type</td>
<td>true</td>
<td>string</td>
<td><code>transfer</code><br><code>withdrawal</code><br><code>deposit_source</code></td>
<td>Address book type</td>
</tr>
<tr>
<td>address</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Address in currency format, it must be in address book</td>
</tr>
</tbody></table>
<h3 id='response-124'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>ok</td>
</tr>
</tbody></table>
<h2 id='private-set_clearance_originator'>/private/set_clearance_originator</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/set_clearance_originator?deposit_id=%7B%22user_id%22%3A123%2C%22tx_hash%22%3A%22230669110fdaf0a0dbcdc079b6b8b43d5af29cc73683835b9bc6b3406c065fda%22%2C%22currency%22%3A%22BTC%22%2C%22address%22%3A%222NBqqD5GRJ8wHy1PYyCXTe9ke5226FhavBz%22%7D&amp;originator=%7B%22last_name%22%3A%22Last%22%2C%22is_personal%22%3Afalse%2C%22first_name%22%3A%22First%22%2C%22company_name%22%3A%22Company+Name%22%2C%22address%22%3A%22NL%2C+Amsterdam%2C+Street%2C+1%22%7D"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/set_clearance_originator</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">deposit_id</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">user_id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">address</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2NBqqD5GRJ8wHy1PYyCXTe9ke5226FhavBz</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">tx_hash</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">230669110fdaf0a0dbcdc079b6b8b43d5af29cc73683835b9bc6b3406c065fda</span><span class="dl">"</span>
    <span class="p">},</span>
    <span class="dl">"</span><span class="s2">originator</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">is_personal</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">first_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">First</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">last_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Last</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">company_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Company Name</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">address</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">NL, Amsterdam, Street, 1</span><span class="dl">"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/set_clearance_originator"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"deposit_id"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
      <span class="s">"user_id"</span> <span class="p">:</span> <span class="mi">123</span><span class="p">,</span>
      <span class="s">"address"</span> <span class="p">:</span> <span class="s">"2NBqqD5GRJ8wHy1PYyCXTe9ke5226FhavBz"</span><span class="p">,</span>
      <span class="s">"tx_hash"</span> <span class="p">:</span> <span class="s">"230669110fdaf0a0dbcdc079b6b8b43d5af29cc73683835b9bc6b3406c065fda"</span>
    <span class="p">},</span>
    <span class="s">"originator"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="s">"is_personal"</span> <span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
      <span class="s">"first_name"</span> <span class="p">:</span> <span class="s">"First"</span><span class="p">,</span>
      <span class="s">"last_name"</span> <span class="p">:</span> <span class="s">"Last"</span><span class="p">,</span>
      <span class="s">"company_name"</span> <span class="p">:</span> <span class="s">"Company Name"</span><span class="p">,</span>
      <span class="s">"address"</span> <span class="p">:</span> <span class="s">"NL, Amsterdam, Street, 1"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
    </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NBqqD5GRJ8wHy1PYyCXTe9ke5226FhavBz"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"230669110fdaf0a0dbcdc079b6b8b43d5af29cc73683835b9bc6b3406c065fda"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"source_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A3BqqD5GRJ8wHy1PYyCXTe9ke5226Fha123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"received_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550574558607</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550574558807</span><span class="p">,</span><span class="w">
    </span><span class="nl">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Note"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clearance_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"in_progress"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Sets originator of the deposit</p>

<p><strong>Scope: </strong> <code>wallet:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fset_clearance_originator" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-125'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>deposit_id</td>
<td>true</td>
<td>object</td>
<td></td>
<td>Id of the deposit</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;user_id</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Id of a (sub)account</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;address</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Address in currency format</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tx_hash</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Transaction id in a proper format for the currency</td>
</tr>
<tr>
<td>originator</td>
<td>true</td>
<td>object</td>
<td></td>
<td>Information about the originator of the deposit</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_personal</td>
<td>true</td>
<td>boolean</td>
<td></td>
<td>If the user is the originator of the deposit</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;company_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Company name of the originator if the originator is a legal entity</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;first_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>If the user is the originator of the deposit</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Last name of the originator if the originator is a person</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;address</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Geographical address of the originator</td>
</tr>
</tbody></table>
<h3 id='response-125'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>address</td>
<td>string</td>
<td>Address in proper format for currency</td>
</tr>
<tr>
<td>amount</td>
<td>number</td>
<td>Amount of funds in given currency</td>
</tr>
<tr>
<td>clearance_state</td>
<td>string</td>
<td>Clearance state, allowed values : <code>in_progress</code>, <code>pending_admin_decision</code>, <code>pending_user_input</code>, <code>success</code>, <code>failed</code>, <code>cancelled</code>, <code>refund_initiated</code>, <code>refunded</code></td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>note</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>received_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>refund_transaction_id</td>
<td>string</td>
<td>Transaction id in proper format for currency, <code>null</code> if id is not available</td>
</tr>
<tr>
<td>source_address</td>
<td>string</td>
<td>Address in proper format for currency</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>Deposit state, allowed values : <code>pending</code>, <code>completed</code>, <code>rejected</code>, <code>replaced</code></td>
</tr>
<tr>
<td>transaction_id</td>
<td>string</td>
<td>Transaction id in proper format for currency, <code>null</code> if id is not available</td>
</tr>
<tr>
<td>updated_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='private-submit_transfer_between_subaccounts'>/private/submit_transfer_between_subaccounts</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/submit_transfer_between_subaccounts?amount=1.21234000000000001762e%2B01&amp;currency=ETH&amp;destination=20&amp;source=10"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">210</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/submit_transfer_between_subaccounts</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">ETH</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">12.1234</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">destination</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">source</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">10</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">210</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/submit_transfer_between_subaccounts"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"ETH"</span><span class="p">,</span>
    <span class="s">"amount"</span> <span class="p">:</span> <span class="mf">12.1234</span><span class="p">,</span>
    <span class="s">"destination"</span> <span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
    <span class="s">"source"</span> <span class="p">:</span> <span class="mi">10</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">210</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"updated_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550226218504</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subaccount"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"confirmed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"other_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MySubAccount"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payment"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550226218504</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.1234</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Transfer funds between two (sub)accounts.</p>

<p><strong>Scope: </strong> <code>wallets:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubmit_transfer_between_subaccounts" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-126'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>amount</td>
<td>true</td>
<td>number</td>
<td></td>
<td>Amount of funds to be transferred</td>
</tr>
<tr>
<td>destination</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Id of destination subaccount. Can be found in <code>My Account &gt;&gt; Subaccounts</code> tab</td>
</tr>
<tr>
<td>source</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Id of the source (sub)account. Can be found in <code>My Account &gt;&gt; Subaccounts</code> tab. By default, it is the Id of the account which made the request. However, if a different &quot;source&quot; is specified, the user must possess the mainaccount scope, and only other subaccounts can be designated as the source.</td>
</tr>
</tbody></table>
<h3 id='response-126'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Amount of funds in given currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;created_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Transfer direction</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>Id of transfer</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;other_side</td>
<td>string</td>
<td>For transfer from/to subaccount returns this subaccount name, for transfer to other account returns address, for transfer from other account returns that accounts username.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Transfer state, allowed values : <code>prepared</code>, <code>confirmed</code>, <code>cancelled</code>, <code>waiting_for_admin</code>, <code>insufficient_funds</code>,  <code>withdrawal_limit</code> otherwise rejection reason</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>Type of transfer: <code>user</code> - sent to user, <code>subaccount</code> - sent to subaccount</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;updated_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='private-submit_transfer_to_subaccount'>/private/submit_transfer_to_subaccount</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/submit_transfer_to_subaccount?amount=1.21234000000000001762e%2B01&amp;currency=ETH&amp;destination=20"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">210</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/submit_transfer_to_subaccount</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">ETH</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">12.1234</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">destination</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">20</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">210</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/submit_transfer_to_subaccount"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"ETH"</span><span class="p">,</span>
    <span class="s">"amount"</span> <span class="p">:</span> <span class="mf">12.1234</span><span class="p">,</span>
    <span class="s">"destination"</span> <span class="p">:</span> <span class="mi">20</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">210</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"updated_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550226218504</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subaccount"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"confirmed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"other_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MySubAccount"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payment"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550226218504</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.1234</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Transfer funds to subaccount.</p>

<p><strong>Scope: </strong> <code>wallets:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubmit_transfer_to_subaccount" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-127'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>amount</td>
<td>true</td>
<td>number</td>
<td></td>
<td>Amount of funds to be transferred</td>
</tr>
<tr>
<td>destination</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Id of destination subaccount. Can be found in <code>My Account &gt;&gt; Subaccounts</code> tab</td>
</tr>
</tbody></table>
<h3 id='response-127'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Amount of funds in given currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;created_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Transfer direction</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>Id of transfer</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;other_side</td>
<td>string</td>
<td>For transfer from/to subaccount returns this subaccount name, for transfer to other account returns address, for transfer from other account returns that accounts username.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Transfer state, allowed values : <code>prepared</code>, <code>confirmed</code>, <code>cancelled</code>, <code>waiting_for_admin</code>, <code>insufficient_funds</code>,  <code>withdrawal_limit</code> otherwise rejection reason</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>Type of transfer: <code>user</code> - sent to user, <code>subaccount</code> - sent to subaccount</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;updated_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='private-submit_transfer_to_user'>/private/submit_transfer_to_user</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/submit_transfer_to_user?amount=1.34559999999999995168e%2B01&amp;currency=ETH&amp;destination=0x4aa0753d798d668056920094d65321a8e8913e26"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">9421</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/submit_transfer_to_user</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">ETH</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">13.456</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">destination</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">0x4aa0753d798d668056920094d65321a8e8913e26</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">9421</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/submit_transfer_to_user"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"ETH"</span><span class="p">,</span>
    <span class="s">"amount"</span> <span class="p">:</span> <span class="mf">13.456</span><span class="p">,</span>
    <span class="s">"destination"</span> <span class="p">:</span> <span class="s">"0x4aa0753d798d668056920094d65321a8e8913e26"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">9421</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"updated_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550232862350</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prepared"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"other_side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0x4aa0753d798d668056920094d65321a8e8913e26"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payment"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550232862350</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">13.456</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Transfer funds to another user.</p>

<p><strong>Scope: </strong> <code>wallet:read_write</code> and mainaccount</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubmit_transfer_to_user" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-128'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>amount</td>
<td>true</td>
<td>number</td>
<td></td>
<td>Amount of funds to be transferred</td>
</tr>
<tr>
<td>destination</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Destination wallet&#39;s address taken from address book</td>
</tr>
</tbody></table>
<h3 id='response-128'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Amount of funds in given currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;created_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Transfer direction</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>Id of transfer</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;other_side</td>
<td>string</td>
<td>For transfer from/to subaccount returns this subaccount name, for transfer to other account returns address, for transfer from other account returns that accounts username.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Transfer state, allowed values : <code>prepared</code>, <code>confirmed</code>, <code>cancelled</code>, <code>waiting_for_admin</code>, <code>insufficient_funds</code>,  <code>withdrawal_limit</code> otherwise rejection reason</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>Type of transfer: <code>user</code> - sent to user, <code>subaccount</code> - sent to subaccount</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;updated_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='private-update_in_address_book'>/private/update_in_address_book</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/update_in_address_book?address=bc1qar0srrr7xfkvy5l643lydnw9re59gtzzwf0uyj&amp;agreed=true&amp;beneficiary_address=NL%2C+Amsterdam%2C+Street%2C+1&amp;beneficiary_first_name=John&amp;beneficiary_last_name=Doe&amp;beneficiary_vasp_did=did%3Aexample%3A123456789abcdefghi&amp;beneficiary_vasp_name=Money%60s+Gone&amp;currency=BTC&amp;label=Main+address&amp;personal=false&amp;type=withdrawal"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/update_in_address_book</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">withdrawal</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">address</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">bc1qar0srrr7xfkvy5l643lydnw9re59gtzzwf0uyj</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">label</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Main address</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">beneficiary_vasp_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Money`s Gone</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">beneficiary_vasp_did</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">did:example:123456789abcdefghi</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">beneficiary_first_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">John</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">beneficiary_last_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Doe</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">beneficiary_address</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">NL, Amsterdam, Street, 1</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">agreed</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">personal</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">false</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/update_in_address_book"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"type"</span> <span class="p">:</span> <span class="s">"withdrawal"</span><span class="p">,</span>
    <span class="s">"address"</span> <span class="p">:</span> <span class="s">"bc1qar0srrr7xfkvy5l643lydnw9re59gtzzwf0uyj"</span><span class="p">,</span>
    <span class="s">"label"</span> <span class="p">:</span> <span class="s">"Main address"</span><span class="p">,</span>
    <span class="s">"beneficiary_vasp_name"</span> <span class="p">:</span> <span class="s">"Money`s Gone"</span><span class="p">,</span>
    <span class="s">"beneficiary_vasp_did"</span> <span class="p">:</span> <span class="s">"did:example:123456789abcdefghi"</span><span class="p">,</span>
    <span class="s">"beneficiary_first_name"</span> <span class="p">:</span> <span class="s">"John"</span><span class="p">,</span>
    <span class="s">"beneficiary_last_name"</span> <span class="p">:</span> <span class="s">"Doe"</span><span class="p">,</span>
    <span class="s">"beneficiary_address"</span> <span class="p">:</span> <span class="s">"NL, Amsterdam, Street, 1"</span><span class="p">,</span>
    <span class="s">"agreed"</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="s">"personal"</span> <span class="p">:</span> <span class="bp">False</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Allows to provide beneficiary information for the address</p>

<p><strong>Scope: </strong> <code>wallet:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fupdate_in_address_book" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-129'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>STETH</code><br><code>ETHW</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>MATIC</code><br><code>SOL</code><br><code>XRP</code><br><code>USYC</code><br><code>PAXG</code><br><code>BNB</code><br><code>USDE</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>type</td>
<td>true</td>
<td>string</td>
<td><code>transfer</code><br><code>withdrawal</code><br><code>deposit_source</code></td>
<td>Address book type</td>
</tr>
<tr>
<td>address</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Address in currency format, it must be in address book</td>
</tr>
<tr>
<td>beneficiary_vasp_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Name of beneficiary VASP</td>
</tr>
<tr>
<td>beneficiary_vasp_did</td>
<td>true</td>
<td>string</td>
<td></td>
<td>DID of beneficiary VASP</td>
</tr>
<tr>
<td>beneficiary_vasp_website</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Website of the beneficiary VASP. Required if the address book entry is associated with a VASP that is not included in the list of known VASPs</td>
</tr>
<tr>
<td>beneficiary_first_name</td>
<td>false</td>
<td>string</td>
<td></td>
<td>First name of beneficiary (if beneficiary is a person)</td>
</tr>
<tr>
<td>beneficiary_last_name</td>
<td>false</td>
<td>string</td>
<td></td>
<td>First name of beneficiary (if beneficiary is a person)</td>
</tr>
<tr>
<td>beneficiary_company_name</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Beneficiary company name (if beneficiary is a company)</td>
</tr>
<tr>
<td>beneficiary_address</td>
<td>true</td>
<td>string</td>
<td></td>
<td></td>
</tr>
<tr>
<td>agreed</td>
<td>true</td>
<td>boolean</td>
<td></td>
<td>Indicates that the user agreed to shared provided information with 3rd parties</td>
</tr>
<tr>
<td>personal</td>
<td>true</td>
<td>boolean</td>
<td></td>
<td>The user confirms that he provided address belongs to him and he has access to it via an un-hosted wallet software</td>
</tr>
<tr>
<td>label</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Label of the address book entry</td>
</tr>
</tbody></table>
<h3 id='response-129'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>ok</td>
</tr>
</tbody></table>
<h2 id='private-withdraw'>/private/withdraw</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/withdraw?address=2NBqqD5GRJ8wHy1PYyCXTe9ke5226FhavBz&amp;amount=4.00000000000000022204e-01&amp;currency=BTC&amp;priority=mid"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">6931</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/withdraw</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">address</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2NBqqD5GRJ8wHy1PYyCXTe9ke5226FhavBz</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">0.4</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">priority</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">mid</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">6931</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/withdraw"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"address"</span> <span class="p">:</span> <span class="s">"2NBqqD5GRJ8wHy1PYyCXTe9ke5226FhavBz"</span><span class="p">,</span>
    <span class="s">"amount"</span> <span class="p">:</span> <span class="mf">0.4</span><span class="p">,</span>
    <span class="s">"priority"</span> <span class="p">:</span> <span class="s">"mid"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6931</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2NBqqD5GRJ8wHy1PYyCXTe9ke5226FhavBz"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w">
        </span><span class="nl">"confirmed_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"created_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550574558607</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0001</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
        </span><span class="nl">"priority"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unconfirmed"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"transaction_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"updated_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550574558607</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Creates a new withdrawal request</p>

<p><strong>Scope: </strong> <code>wallet:read_write</code> and mainaccount</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fwithdraw" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-130'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>address</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Address in currency format, it must be in address book</td>
</tr>
<tr>
<td>amount</td>
<td>true</td>
<td>number</td>
<td></td>
<td>Amount of funds to be withdrawn</td>
</tr>
<tr>
<td>priority</td>
<td>false</td>
<td>string</td>
<td><code>insane</code><br><code>extreme_high</code><br><code>very_high</code><br><code>high</code><br><code>mid</code><br><code>low</code><br><code>very_low</code></td>
<td>Withdrawal priority, optional for BTC, default: <code>high</code></td>
</tr>
</tbody></table>
<h3 id='response-130'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;address</td>
<td>string</td>
<td>Address in proper format for currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Amount of funds in given currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;confirmed_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch) of withdrawal confirmation, <code>null</code> when not confirmed</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;created_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>Fee in currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>Withdrawal id in Deribit system</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;priority</td>
<td>number</td>
<td>Id of priority level</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Withdrawal state, allowed values : <code>unconfirmed</code>, <code>confirmed</code>, <code>cancelled</code>, <code>completed</code>, <code>interrupted</code>, <code>rejected</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;transaction_id</td>
<td>string</td>
<td>Transaction id in proper format for currency, <code>null</code> if id is not available</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;updated_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h1 id='account-management'>Account management</h1><h2 id='public-get_announcements'>/public/get_announcements</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/public/get_announcements?"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7661</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">public/get_announcements</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">7661</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"public/get_announcements"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7661</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example announcement"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"publication_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550058362418</span><span class="p">,</span><span class="w">
      </span><span class="nl">"important"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550058362418</span><span class="p">,</span><span class="w">
      </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lorem ipsum dolor sit amet, consectetur adipiscing elit."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves announcements. Default &quot;start_timestamp&quot; parameter value is current timestamp, &quot;count&quot; parameter value must be between 1 and 50, default is 5.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fpublic%2Fget_announcements" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='parameters-131'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start_timestamp</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The most recent timestamp to return the results for (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Maximum count of returned announcements</td>
</tr>
</tbody></table>
<h3 id='response-131'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;body</td>
<td>string</td>
<td>The HTML body of the announcement</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;confirmation</td>
<td>boolean</td>
<td>Whether the user confirmation is required for this announcement</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>number</td>
<td>A unique identifier for the announcement</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;important</td>
<td>boolean</td>
<td>Whether the announcement is marked as important</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;publication_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch) of announcement publication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;title</td>
<td>string</td>
<td>The title of the announcement</td>
</tr>
</tbody></table>
<h2 id='private-change_api_key_name'>/private/change_api_key_name</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/change_api_key_name?id=3&amp;name=KeyName3"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2453</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/change_api_key_name</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">KeyName3</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2453</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/change_api_key_name"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"name"</span> <span class="p">:</span> <span class="s">"KeyName3"</span><span class="p">,</span>
    <span class="s">"id"</span> <span class="p">:</span> <span class="mi">3</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2453</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1560242482758</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max_scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account:read_write block_trade:read trade:read_write wallet:read_write"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"B6RsF9rrLY5ezEGBQkyLlV-UC7whyPJ34BMA-kKYpes"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1sXMQBhM"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KeyName3"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Changes name for key with given id. <a href="#creating-editing-removing-api-keys">Important notes</a>.</p>

<p><strong>Scope: </strong> <code>account:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fchange_api_key_name" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-132'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Id of key</td>
</tr>
<tr>
<td>name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Name of key (only letters, numbers and underscores allowed; maximum length - 16 characters)</td>
</tr>
</tbody></table>
<h3 id='response-132'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;client_id</td>
<td>string</td>
<td>Client identifier used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;client_secret</td>
<td>string</td>
<td>Client secret or MD5 fingerprint of public key used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;default</td>
<td>boolean</td>
<td>Informs whether this api key is default (field is deprecated and will be removed in the future)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;enabled</td>
<td>boolean</td>
<td>Informs whether api key is enabled and can be used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;enabled_features</td>
<td>array of string</td>
<td>List of enabled advanced on-key features. Available options:<br> - <code>restricted_block_trades</code>: Limit the block_trade read the scope of the API key to block trades that have been made using this specific API key<br> - <code>block_trade_approval</code>: Block trades created using this API key require additional user approval.  Methods that use <code>block_rfq</code> scope are not affected by Block Trade approval feature<br></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>key identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ip_whitelist</td>
<td>array</td>
<td>List of IP addresses whitelisted for a selected key</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;max_scope</td>
<td>string</td>
<td>Describes maximal access for tokens generated with given key, possible values: <code>trade:[read, read_write, none]</code>, <code>wallet:[read, read_write, none]</code>, <code>account:[read, read_write, none]</code>, <code>block_trade:[read, read_write, none]</code>, <code>block_rfq:[read, read_write, none]</code>. If scope is not provided, its value is set as none. </BR></BR> Please check details described in <a href="#access-scope">Access scope</a></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;name</td>
<td>string</td>
<td>Api key name that can be displayed in transaction log</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;public_key</td>
<td>string</td>
<td>PEM encoded public key (Ed25519/RSA) used for asymmetric signatures (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='private-change_margin_model'>/private/change_margin_model</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/change_margin_model?margin_model=cross_pm&amp;user_id=3"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/change_margin_model</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">user_id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">margin_model</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">cross_pm</span><span class="dl">"</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/change_margin_model"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"user_id"</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="s">"margin_model"</span> <span class="p">:</span> <span class="s">"cross_pm"</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"old_state"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"maintenance_margin_rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"initial_margin_rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"available_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"new_state"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"maintenance_margin_rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"initial_margin_rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"available_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eth"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"old_state"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"maintenance_margin_rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.02862727</span><span class="p">,</span><span class="w">
        </span><span class="nl">"initial_margin_rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.45407615</span><span class="p">,</span><span class="w">
        </span><span class="nl">"available_balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.553590509</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"new_state"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"maintenance_margin_rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.02710204</span><span class="p">,</span><span class="w">
        </span><span class="nl">"initial_margin_rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.03252245</span><span class="p">,</span><span class="w">
        </span><span class="nl">"available_balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.98106428</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Change margin model</p>

<p><strong>Scope: </strong> <code>account:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fchange_margin_model" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-133'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_id</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Id of a (sub)account - by default current user id is used</td>
</tr>
<tr>
<td>margin_model</td>
<td>true</td>
<td>string</td>
<td><code>cross_pm</code><br><code>cross_sm</code><br><code>segregated_pm</code><br><code>segregated_sm</code></td>
<td>Margin model</td>
</tr>
<tr>
<td>dry_run</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>If <code>true</code> request returns the result without switching the margining model. Default: <code>false</code></td>
</tr>
</tbody></table>
<h3 id='response-133'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;new_state</td>
<td><em>object</em></td>
<td>Represents portfolio state after change</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;available_balance</td>
<td>number</td>
<td>Available balance after change</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;initial_margin_rate</td>
<td>number</td>
<td>Initial margin rate after change</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maintenance_margin_rate</td>
<td>number</td>
<td>Maintenance margin rate after change</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;old_state</td>
<td><em>object</em></td>
<td>Represents portfolio state before change</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;available_balance</td>
<td>number</td>
<td>Available balance before change</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;initial_margin_rate</td>
<td>number</td>
<td>Initial margin rate before change</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maintenance_margin_rate</td>
<td>number</td>
<td>Maintenance margin rate before change</td>
</tr>
</tbody></table>
<h2 id='private-change_scope_in_api_key'>/private/change_scope_in_api_key</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/change_scope_in_api_key?id=3&amp;max_scope=account%3Aread_write+wallet%3Aread_write+block_trade%3Aread+trade%3Aread_write"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2453</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/change_scope_in_api_key</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">max_scope</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">account:read_write wallet:read_write block_trade:read trade:read_write</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2453</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/change_scope_in_api_key"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"max_scope"</span> <span class="p">:</span> <span class="s">"account:read_write wallet:read_write block_trade:read trade:read_write"</span><span class="p">,</span>
    <span class="s">"id"</span> <span class="p">:</span> <span class="mi">3</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2453</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1560242482758</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max_scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account:read_write block_trade:read trade:read_write wallet:read_write"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"B6RsF9rrLY5ezEGBQkyLlV-UC7whyPJ34BMA-kKYpes"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1sXMQBhM"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Changes scope for key with given id. <a href="#creating-editing-removing-api-keys">Important notes</a>.</p>

<p><strong>Scope: </strong> <code>account:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fchange_scope_in_api_key" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-134'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>max_scope</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Describes maximal access for tokens generated with given key, possible values: <code>trade:[read, read_write, none]</code>, <code>wallet:[read, read_write, none]</code>, <code>account:[read, read_write, none]</code>, <code>block_trade:[read, read_write, none]</code>. If scope is not provided, its value is set as none. </BR></BR> Please check details described in <a href="#access-scope">Access scope</a></td>
</tr>
<tr>
<td>id</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Id of key</td>
</tr>
</tbody></table>
<h3 id='response-134'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;client_id</td>
<td>string</td>
<td>Client identifier used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;client_secret</td>
<td>string</td>
<td>Client secret or MD5 fingerprint of public key used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;default</td>
<td>boolean</td>
<td>Informs whether this api key is default (field is deprecated and will be removed in the future)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;enabled</td>
<td>boolean</td>
<td>Informs whether api key is enabled and can be used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;enabled_features</td>
<td>array of string</td>
<td>List of enabled advanced on-key features. Available options:<br> - <code>restricted_block_trades</code>: Limit the block_trade read the scope of the API key to block trades that have been made using this specific API key<br> - <code>block_trade_approval</code>: Block trades created using this API key require additional user approval.  Methods that use <code>block_rfq</code> scope are not affected by Block Trade approval feature<br></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>key identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ip_whitelist</td>
<td>array</td>
<td>List of IP addresses whitelisted for a selected key</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;max_scope</td>
<td>string</td>
<td>Describes maximal access for tokens generated with given key, possible values: <code>trade:[read, read_write, none]</code>, <code>wallet:[read, read_write, none]</code>, <code>account:[read, read_write, none]</code>, <code>block_trade:[read, read_write, none]</code>, <code>block_rfq:[read, read_write, none]</code>. If scope is not provided, its value is set as none. </BR></BR> Please check details described in <a href="#access-scope">Access scope</a></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;name</td>
<td>string</td>
<td>Api key name that can be displayed in transaction log</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;public_key</td>
<td>string</td>
<td>PEM encoded public key (Ed25519/RSA) used for asymmetric signatures (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='private-change_subaccount_name'>/private/change_subaccount_name</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/change_subaccount_name?name=new_user_1_1&amp;sid=7"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3964</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/change_subaccount_name</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">sid</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">new_user_1_1</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">3964</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/change_subaccount_name"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"sid"</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
    <span class="s">"name"</span> <span class="p">:</span> <span class="s">"new_user_1_1"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3964</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Change the user name for a subaccount</p>

<p><strong>Scope: </strong> <code>account:read_write</code> and mainaccount</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fchange_subaccount_name" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-135'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>sid</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The user id for the subaccount</td>
</tr>
<tr>
<td>name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>The new user name</td>
</tr>
</tbody></table>
<h3 id='response-135'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h2 id='private-create_api_key'>/private/create_api_key</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/create_api_key?max_scope=account%3Aread+trade%3Aread+block_trade%3Aread_write+wallet%3Anone&amp;name=Public+key+1&amp;public_key=-----BEGIN+PUBLIC+KEY-----%0AMCowBQYDK2VwAyEAM7FWhKquNqLmTOV4hfYT5r3AjrYiORTT6Tn5HIfFNV8%3D%0A-----END+PUBLIC+KEY-----"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">8974</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/create_api_key</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Public key 1</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">max_scope</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">account:read trade:read block_trade:read_write wallet:none</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">public_key</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">-----BEGIN PUBLIC KEY-----</span><span class="se">\n</span><span class="s2">MCowBQYDK2VwAyEAM7FWhKquNqLmTOV4hfYT5r3AjrYiORTT6Tn5HIfFNV8=</span><span class="se">\n</span><span class="s2">-----END PUBLIC KEY-----</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">8974</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/create_api_key"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"name"</span> <span class="p">:</span> <span class="s">"Public key 1"</span><span class="p">,</span>
    <span class="s">"max_scope"</span> <span class="p">:</span> <span class="s">"account:read trade:read block_trade:read_write wallet:none"</span><span class="p">,</span>
    <span class="s">"public_key"</span> <span class="p">:</span> <span class="s">"-----BEGIN PUBLIC KEY-----</span><span class="se">\n</span><span class="s">MCowBQYDK2VwAyEAM7FWhKquNqLmTOV4hfYT5r3AjrYiORTT6Tn5HIfFNV8=</span><span class="se">\n</span><span class="s">-----END PUBLIC KEY-----"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8974</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1560238048714</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max_scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account:read block_trade:read_write trade:read wallet:none"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"enabled_features"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"public_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN PUBLIC KEY-----</span><span class="se">\n</span><span class="s2">MCowBQYDK2VwAyEAM7FWhKquNqLmTOV4hfYT5r3AjrYiORTT6Tn5HIfFNV8=</span><span class="se">\n</span><span class="s2">-----END PUBLIC KEY-----"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9c:6d:c9:02:fd:9f:75:6e:14:bb:71:c5:74:95:86:c8"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wcVoQGam"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Creates a new api key with a given scope. <a href="#creating-editing-removing-api-keys">Important notes</a></p>

<p><strong>Scope: </strong> <code>account:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fcreate_api_key" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-136'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>max_scope</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Describes maximal access for tokens generated with given key, possible values: <code>trade:[read, read_write, none]</code>, <code>wallet:[read, read_write, none]</code>, <code>account:[read, read_write, none]</code>, <code>block_trade:[read, read_write, none]</code>. If scope is not provided, its value is set as none. </BR></BR> Please check details described in <a href="#access-scope">Access scope</a></td>
</tr>
<tr>
<td>name</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Name of key (only letters, numbers and underscores allowed; maximum length - 16 characters)</td>
</tr>
<tr>
<td>public_key</td>
<td>false</td>
<td>string</td>
<td></td>
<td>ED25519 or RSA PEM Encoded public key that should be used to create asymmetric API Key for signing requests/authentication requests with user&#39;s private key.</td>
</tr>
<tr>
<td>enabled_features</td>
<td>false</td>
<td>array</td>
<td></td>
<td>List of enabled advanced on-key features. Available options:<br> - <code>restricted_block_trades</code>: Limit the block_trade read the scope of the API key to block trades that have been made using this specific API key<br> - <code>block_trade_approval</code>: Block trades created using this API key require additional user approval. Methods that use <code>block_rfq</code> scope are not affected by Block Trade approval feature<br></td>
</tr>
</tbody></table>
<h3 id='response-136'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;client_id</td>
<td>string</td>
<td>Client identifier used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;client_secret</td>
<td>string</td>
<td>Client secret or MD5 fingerprint of public key used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;default</td>
<td>boolean</td>
<td>Informs whether this api key is default (field is deprecated and will be removed in the future)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;enabled</td>
<td>boolean</td>
<td>Informs whether api key is enabled and can be used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;enabled_features</td>
<td>array of string</td>
<td>List of enabled advanced on-key features. Available options:<br> - <code>restricted_block_trades</code>: Limit the block_trade read the scope of the API key to block trades that have been made using this specific API key<br> - <code>block_trade_approval</code>: Block trades created using this API key require additional user approval.  Methods that use <code>block_rfq</code> scope are not affected by Block Trade approval feature<br></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>key identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ip_whitelist</td>
<td>array</td>
<td>List of IP addresses whitelisted for a selected key</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;max_scope</td>
<td>string</td>
<td>Describes maximal access for tokens generated with given key, possible values: <code>trade:[read, read_write, none]</code>, <code>wallet:[read, read_write, none]</code>, <code>account:[read, read_write, none]</code>, <code>block_trade:[read, read_write, none]</code>, <code>block_rfq:[read, read_write, none]</code>. If scope is not provided, its value is set as none. </BR></BR> Please check details described in <a href="#access-scope">Access scope</a></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;name</td>
<td>string</td>
<td>Api key name that can be displayed in transaction log</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;public_key</td>
<td>string</td>
<td>PEM encoded public key (Ed25519/RSA) used for asymmetric signatures (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='private-create_subaccount'>/private/create_subaccount</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/create_subaccount?"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">5414</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/create_subaccount</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">5414</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/create_subaccount"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5414</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5c292f392e031d1d1d1c39313d3530723f3331">[email&#160;protected]</a>"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w">
        </span><span class="nl">"is_password"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"login_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"portfolio"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"eth"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"available_funds"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"available_withdrawal_funds"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eth"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"equity"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"maintenance_margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"margin_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"btc"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"available_funds"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"available_withdrawal_funds"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"equity"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"maintenance_margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="nl">"margin_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"receive_notifications"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"system_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_1_4"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"security_keys_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subaccount"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_1_4"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Create a new subaccount</p>

<p><strong>Scope: </strong> <code>account:read_write</code> and mainaccount</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fcreate_subaccount" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-137'>Parameters</h3>
<p><em>This method takes no parameters</em></p>
<h3 id='response-137'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;email</td>
<td>string</td>
<td>User email</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>Subaccount identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_password</td>
<td>boolean</td>
<td><code>true</code> when password for the subaccount has been configured</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;login_enabled</td>
<td>boolean</td>
<td>Informs whether login to the subaccount is enabled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;portfolio</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;btc</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;additional_reserve</td>
<td>number</td>
<td>The account&#39;s balance reserved in other orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;available_funds</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;available_withdrawal_funds</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;balance</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;equity</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;initial_margin</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maintenance_margin</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;margin_balance</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;spot_reserve</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;eth</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;additional_reserve</td>
<td>number</td>
<td>The account&#39;s balance reserved in other orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;available_funds</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;available_withdrawal_funds</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;balance</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;equity</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;initial_margin</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maintenance_margin</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;margin_balance</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;spot_reserve</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;receive_notifications</td>
<td>boolean</td>
<td>When <code>true</code> - receive all notification emails on the main email</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;security_keys_enabled</td>
<td>boolean</td>
<td>Whether the Security Keys authentication is enabled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;system_name</td>
<td>string</td>
<td>System generated user nickname</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>Account type</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;username</td>
<td>string</td>
<td>Account name (given by user)</td>
</tr>
</tbody></table>
<h2 id='private-disable_api_key'>/private/disable_api_key</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/disable_api_key?id=3"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2861</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/disable_api_key</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2861</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/disable_api_key"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"id"</span> <span class="p">:</span> <span class="mi">3</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2861</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1560242676023</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max_scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account:read_write block_trade:read trade:read_write wallet:read_write"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"B6RsF9rrLY5ezEGBQkyLlV-UC7whyPJ34BMA-kKYpes"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1sXMQBhM"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Disables api key with given id. <a href="#creating-editing-removing-api-keys">Important notes</a>.</p>

<p><strong>Scope: </strong> <code>account:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fdisable_api_key" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-138'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Id of key</td>
</tr>
</tbody></table>
<h3 id='response-138'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;client_id</td>
<td>string</td>
<td>Client identifier used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;client_secret</td>
<td>string</td>
<td>Client secret or MD5 fingerprint of public key used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;default</td>
<td>boolean</td>
<td>Informs whether this api key is default (field is deprecated and will be removed in the future)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;enabled</td>
<td>boolean</td>
<td>Informs whether api key is enabled and can be used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;enabled_features</td>
<td>array of string</td>
<td>List of enabled advanced on-key features. Available options:<br> - <code>restricted_block_trades</code>: Limit the block_trade read the scope of the API key to block trades that have been made using this specific API key<br> - <code>block_trade_approval</code>: Block trades created using this API key require additional user approval.  Methods that use <code>block_rfq</code> scope are not affected by Block Trade approval feature<br></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>key identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ip_whitelist</td>
<td>array</td>
<td>List of IP addresses whitelisted for a selected key</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;max_scope</td>
<td>string</td>
<td>Describes maximal access for tokens generated with given key, possible values: <code>trade:[read, read_write, none]</code>, <code>wallet:[read, read_write, none]</code>, <code>account:[read, read_write, none]</code>, <code>block_trade:[read, read_write, none]</code>, <code>block_rfq:[read, read_write, none]</code>. If scope is not provided, its value is set as none. </BR></BR> Please check details described in <a href="#access-scope">Access scope</a></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;name</td>
<td>string</td>
<td>Api key name that can be displayed in transaction log</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;public_key</td>
<td>string</td>
<td>PEM encoded public key (Ed25519/RSA) used for asymmetric signatures (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='private-edit_api_key'>/private/edit_api_key</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/edit_api_key?id=3&amp;max_scope=account%3Aread_write+wallet%3Aread_write+block_trade%3Aread+trade%3Aread_write&amp;name=NewKeyName"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2453</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/edit_api_key</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">NewKeyName</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">max_scope</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">account:read_write wallet:read_write block_trade:read trade:read_write</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2453</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/edit_api_key"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"name"</span> <span class="p">:</span> <span class="s">"NewKeyName"</span><span class="p">,</span>
    <span class="s">"max_scope"</span> <span class="p">:</span> <span class="s">"account:read_write wallet:read_write block_trade:read trade:read_write"</span><span class="p">,</span>
    <span class="s">"id"</span> <span class="p">:</span> <span class="mi">3</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2453</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1560242482758</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max_scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account:read_write block_trade:read trade:read_write wallet:read_write"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"B6RsF9rrLY5ezEGBQkyLlV-UC7whyPJ34BMA-kKYpes"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1sXMQBhM"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NewKeyName"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Edits existing API key. At least one parameter is required. <a href="#creating-editing-removing-api-keys">Important notes</a></p>

<p><strong>Scope: </strong> <code>account:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fedit_api_key" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-139'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Id of key</td>
</tr>
<tr>
<td>max_scope</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Describes maximal access for tokens generated with given key, possible values: <code>trade:[read, read_write, none]</code>, <code>wallet:[read, read_write, none]</code>, <code>account:[read, read_write, none]</code>, <code>block_trade:[read, read_write, none]</code>. If scope is not provided, its value is set as none. </BR></BR> Please check details described in <a href="#access-scope">Access scope</a></td>
</tr>
<tr>
<td>name</td>
<td>false</td>
<td>string</td>
<td></td>
<td>Name of key (only letters, numbers and underscores allowed; maximum length - 16 characters)</td>
</tr>
<tr>
<td>enabled</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Enables/disables the API key. <code>true</code> to enable, <code>false</code> to disable</td>
</tr>
<tr>
<td>enabled_features</td>
<td>false</td>
<td>array</td>
<td></td>
<td>List of enabled advanced on-key features. Available options:<br> - <code>restricted_block_trades</code>: Limit the block_trade read the scope of the API key to block trades that have been made using this specific API key<br> - <code>block_trade_approval</code>: Block trades created using this API key require additional user approval. Methods that use <code>block_rfq</code> scope are not affected by Block Trade approval feature<br></td>
</tr>
<tr>
<td>ip_whitelist</td>
<td>false</td>
<td>array</td>
<td></td>
<td>Whitelist provided IP address on a selected key</td>
</tr>
</tbody></table>
<h3 id='response-139'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;client_id</td>
<td>string</td>
<td>Client identifier used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;client_secret</td>
<td>string</td>
<td>Client secret or MD5 fingerprint of public key used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;default</td>
<td>boolean</td>
<td>Informs whether this api key is default (field is deprecated and will be removed in the future)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;enabled</td>
<td>boolean</td>
<td>Informs whether api key is enabled and can be used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;enabled_features</td>
<td>array of string</td>
<td>List of enabled advanced on-key features. Available options:<br> - <code>restricted_block_trades</code>: Limit the block_trade read the scope of the API key to block trades that have been made using this specific API key<br> - <code>block_trade_approval</code>: Block trades created using this API key require additional user approval.  Methods that use <code>block_rfq</code> scope are not affected by Block Trade approval feature<br></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>key identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ip_whitelist</td>
<td>array</td>
<td>List of IP addresses whitelisted for a selected key</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;max_scope</td>
<td>string</td>
<td>Describes maximal access for tokens generated with given key, possible values: <code>trade:[read, read_write, none]</code>, <code>wallet:[read, read_write, none]</code>, <code>account:[read, read_write, none]</code>, <code>block_trade:[read, read_write, none]</code>, <code>block_rfq:[read, read_write, none]</code>. If scope is not provided, its value is set as none. </BR></BR> Please check details described in <a href="#access-scope">Access scope</a></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;name</td>
<td>string</td>
<td>Api key name that can be displayed in transaction log</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;public_key</td>
<td>string</td>
<td>PEM encoded public key (Ed25519/RSA) used for asymmetric signatures (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='private-enable_affiliate_program'>/private/enable_affiliate_program</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/enable_affiliate_program?"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">24</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/enable_affiliate_program</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">24</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/enable_affiliate_program"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">24</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Enables affiliate program for user</p>

<p><strong>Scope: </strong> <code>account:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fenable_affiliate_program" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-140'>Parameters</h3>
<p><em>This method takes no parameters</em></p>
<h3 id='response-140'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h2 id='private-enable_api_key'>/private/enable_api_key</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/enable_api_key?id=3"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">8580</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/enable_api_key</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">8580</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/enable_api_key"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"id"</span> <span class="p">:</span> <span class="mi">3</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8580</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1560242634599</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max_scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account:read_write block_trade:read trade:read_write wallet:read_write"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"B6RsF9rrLY5ezEGBQkyLlV-UC7whyPJ34BMA-kKYpes"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1sXMQBhM"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Enables api key with given id. <a href="#creating-editing-removing-api-keys">Important notes</a>.</p>

<p><strong>Scope: </strong> <code>account:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fenable_api_key" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-141'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Id of key</td>
</tr>
</tbody></table>
<h3 id='response-141'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;client_id</td>
<td>string</td>
<td>Client identifier used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;client_secret</td>
<td>string</td>
<td>Client secret or MD5 fingerprint of public key used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;default</td>
<td>boolean</td>
<td>Informs whether this api key is default (field is deprecated and will be removed in the future)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;enabled</td>
<td>boolean</td>
<td>Informs whether api key is enabled and can be used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;enabled_features</td>
<td>array of string</td>
<td>List of enabled advanced on-key features. Available options:<br> - <code>restricted_block_trades</code>: Limit the block_trade read the scope of the API key to block trades that have been made using this specific API key<br> - <code>block_trade_approval</code>: Block trades created using this API key require additional user approval.  Methods that use <code>block_rfq</code> scope are not affected by Block Trade approval feature<br></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>key identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ip_whitelist</td>
<td>array</td>
<td>List of IP addresses whitelisted for a selected key</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;max_scope</td>
<td>string</td>
<td>Describes maximal access for tokens generated with given key, possible values: <code>trade:[read, read_write, none]</code>, <code>wallet:[read, read_write, none]</code>, <code>account:[read, read_write, none]</code>, <code>block_trade:[read, read_write, none]</code>, <code>block_rfq:[read, read_write, none]</code>. If scope is not provided, its value is set as none. </BR></BR> Please check details described in <a href="#access-scope">Access scope</a></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;name</td>
<td>string</td>
<td>Api key name that can be displayed in transaction log</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;public_key</td>
<td>string</td>
<td>PEM encoded public key (Ed25519/RSA) used for asymmetric signatures (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='private-get_access_log'>/private/get_access_log</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_access_log?count=3&amp;offset=0"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_access_log</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">offset</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_access_log"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"offset"</span> <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">3</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"records_total"</span><span class="p">:</span><span class="w"> </span><span class="mi">34</span><span class="p">,</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1575876682576</span><span class="p">,</span><span class="w">
          </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="p">,</span><span class="w">
          </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Local Country"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Local Town"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1575876459309</span><span class="p">,</span><span class="w">
          </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">44</span><span class="p">,</span><span class="w">
          </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Local Country"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Local Town"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1575546252774</span><span class="p">,</span><span class="w">
          </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"disabled_tfa"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">43</span><span class="p">,</span><span class="w">
          </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Local Country"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Local Town"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"usIn"</span><span class="p">:</span><span class="w"> </span><span class="mi">1575903572350348</span><span class="p">,</span><span class="w">
    </span><span class="nl">"usOut"</span><span class="p">:</span><span class="w"> </span><span class="mi">1575903572351765</span><span class="p">,</span><span class="w">
    </span><span class="nl">"usDiff"</span><span class="p">:</span><span class="w"> </span><span class="mi">1417</span><span class="p">,</span><span class="w">
    </span><span class="nl">"testnet"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Lists access logs for the user</p>

<p><strong>Scope: </strong> <code>account:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_access_log" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-142'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offset</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The offset for pagination, default - <code>0</code></td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>10</code></td>
</tr>
</tbody></table>
<h3 id='response-142'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;city</td>
<td>string</td>
<td>City where the IP address is registered (estimated)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;country</td>
<td>string</td>
<td>Country where the IP address is registered (estimated)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;data</td>
<td>object or string</td>
<td>Optional, additional information about action, type depends on <code>log</code> value</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>Unique identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ip</td>
<td>string</td>
<td>IP address of source that generated action</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;log</td>
<td>string</td>
<td>Action description, values: <code>changed_email</code> - email was changed; <code>changed_password</code> - password was changed; <code>disabled_tfa</code> - TFA was disabled; <code>enabled_tfa</code> - TFA was enabled, <code>success</code> - successful login; <code>failure</code> - login failure; <code>enabled_subaccount_login</code> - login was enabled for subaccount (in <code>data</code> - subaccount uid); <code>disabled_subaccount_login</code> - login was disabled for subbaccount (in <code>data</code> - subbacount uid);<code>new_api_key</code> - API key was created (in <code>data</code> key client id); <code>removed_api_key</code> - API key was removed (in <code>data</code> key client id); <code>changed_scope</code> - scope of API key was changed (in <code>data</code> key client id); <code>changed_whitelist</code> - whitelist of API key was edited (in <code>data</code> key client id); <code>disabled_api_key</code> - API key was disabled (in <code>data</code> key client id); <code>enabled_api_key</code> - API key was enabled (in <code>data</code> key client id); <code>reset_api_key</code> - API key was reset (in <code>data</code> key client id)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='private-get_account_summaries'>/private/get_account_summaries</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_account_summaries?extended=true"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2515</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_account_summaries</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">extended</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2515</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_account_summaries"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"extended"</span> <span class="p">:</span> <span class="bp">True</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2515</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="b6c3c5d3c4f6d3ced7dbc6dad398d5d9db">[email&#160;protected]</a>"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"system_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"block_rfq_self_match_prevention"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1687352432143</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"referrer_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"login_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"security_keys_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mmp_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"interuser_transfers_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"self_trading_reject_mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancel_maker"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"self_trading_extended_to_subaccounts"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"summaries"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"delta_total_map"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"btc_usd"</span><span class="p">:</span><span class="w"> </span><span class="mf">31.594357699</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"margin_balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">302.62729214</span><span class="p">,</span><span class="w">
        </span><span class="nl">"futures_session_rpl"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.03258105</span><span class="p">,</span><span class="w">
        </span><span class="nl">"options_session_rpl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"estimated_liquidation_ratio_map"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"btc_usd"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1009872222854525</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"session_upl"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05271555</span><span class="p">,</span><span class="w">
        </span><span class="nl">"estimated_liquidation_ratio"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10098722</span><span class="p">,</span><span class="w">
        </span><span class="nl">"options_gamma_map"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"btc_usd"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00001</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"options_vega"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0858</span><span class="p">,</span><span class="w">
        </span><span class="nl">"options_value"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0086</span><span class="p">,</span><span class="w">
        </span><span class="nl">"available_withdrawal_funds"</span><span class="p">:</span><span class="w"> </span><span class="mf">301.35396172</span><span class="p">,</span><span class="w">
        </span><span class="nl">"projected_delta_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">32.613978</span><span class="p">,</span><span class="w">
        </span><span class="nl">"maintenance_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.8857841</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_pl"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.33084225</span><span class="p">,</span><span class="w">
        </span><span class="nl">"limits"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"limits_per_currency"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"non_matching_engine"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">1500</span><span class="p">,</span><span class="w">
            </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"matching_engine"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"trading"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">250</span><span class="p">,</span><span class="w"> </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span><span class="w">
            </span><span class="nl">"spot"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">250</span><span class="p">,</span><span class="w"> </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="p">},</span><span class="w">
            </span><span class="nl">"quotes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="p">},</span><span class="w">
            </span><span class="nl">"max_quotes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="p">},</span><span class="w">
            </span><span class="nl">"guaranteed_quotes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">},</span><span class="w">
            </span><span class="nl">"cancel_all"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">250</span><span class="p">,</span><span class="w"> </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"projected_maintenance_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7543841</span><span class="p">,</span><span class="w">
        </span><span class="nl">"available_funds"</span><span class="p">:</span><span class="w"> </span><span class="mf">301.38059622</span><span class="p">,</span><span class="w">
        </span><span class="nl">"options_delta"</span><span class="p">:</span><span class="w"> </span><span class="mf">-1.01962</span><span class="p">,</span><span class="w">
        </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">302.60065765</span><span class="p">,</span><span class="w">
        </span><span class="nl">"equity"</span><span class="p">:</span><span class="w"> </span><span class="mf">302.61869214</span><span class="p">,</span><span class="w">
        </span><span class="nl">"futures_session_upl"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05921555</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"options_session_upl"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0065</span><span class="p">,</span><span class="w">
        </span><span class="nl">"projected_initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.01529592</span><span class="p">,</span><span class="w">
        </span><span class="nl">"options_theta"</span><span class="p">:</span><span class="w"> </span><span class="mf">15.97071</span><span class="p">,</span><span class="w">
        </span><span class="nl">"portfolio_margining_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"cross_collateral_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"margin_model"</span><span class="p">:</span><span class="w"> </span><span class="s2">"segregated_sm"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"options_vega_map"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"btc_usd"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0858</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"futures_pl"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.32434225</span><span class="p">,</span><span class="w">
        </span><span class="nl">"options_pl"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0065</span><span class="p">,</span><span class="w">
        </span><span class="nl">"initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.24669592</span><span class="p">,</span><span class="w">
        </span><span class="nl">"spot_reserve"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"delta_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">31.602958</span><span class="p">,</span><span class="w">
        </span><span class="nl">"options_gamma"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00001</span><span class="p">,</span><span class="w">
        </span><span class="nl">"session_rpl"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.03258105</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fees"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fixed"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"taker"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00035</span><span class="p">,</span><span class="w">
                </span><span class="nl">"maker"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0001</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="nl">"block_trade"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"perpetual"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"index_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc_usd"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"relative"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"taker"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.625</span><span class="p">,</span><span class="w">
                </span><span class="nl">"maker"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.625</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="nl">"block_trade"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.625</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"option"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"index_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc_usd"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fixed"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"taker"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00035</span><span class="p">,</span><span class="w">
                </span><span class="nl">"maker"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0001</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="nl">"block_trade"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"future"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"index_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc_usd"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">},</span><span class="w">

      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"futures_session_upl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"portfolio_margining_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"available_funds"</span><span class="p">:</span><span class="w"> </span><span class="mf">99.999598</span><span class="p">,</span><span class="w">
        </span><span class="nl">"initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.000402</span><span class="p">,</span><span class="w">
        </span><span class="nl">"futures_session_rpl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"options_gamma"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
        </span><span class="nl">"options_vega_map"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"session_upl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"delta_total_map"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"eth_usd"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"projected_maintenance_margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"options_gamma_map"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"projected_delta_total"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"margin_model"</span><span class="p">:</span><span class="w"> </span><span class="s2">"segregated_sm"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"futures_pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"options_theta"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"limits"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"limits_per_currency"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"non_matching_engine"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">1500</span><span class="p">,</span><span class="w">
            </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"matching_engine"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"trading"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">250</span><span class="p">,</span><span class="w"> </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span><span class="w">
            </span><span class="nl">"spot"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">250</span><span class="p">,</span><span class="w"> </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="p">},</span><span class="w">
            </span><span class="nl">"quotes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="p">},</span><span class="w">
            </span><span class="nl">"max_quotes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="p">},</span><span class="w">
            </span><span class="nl">"guaranteed_quotes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">},</span><span class="w">
            </span><span class="nl">"cancel_all"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">250</span><span class="p">,</span><span class="w"> </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"options_delta"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"equity"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
        </span><span class="nl">"projected_initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0002</span><span class="p">,</span><span class="w">
        </span><span class="nl">"estimated_liquidation_ratio_map"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"eth_usd"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"spot_reserve"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0002</span><span class="p">,</span><span class="w">
        </span><span class="nl">"cross_collateral_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"available_withdrawal_funds"</span><span class="p">:</span><span class="w"> </span><span class="mf">99.999597</span><span class="p">,</span><span class="w">
        </span><span class="nl">"delta_total"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"options_session_upl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"maintenance_margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"options_theta_map"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
        </span><span class="nl">"additional_reserve"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"estimated_liquidation_ratio"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"options_pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"options_session_rpl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"options_vega"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"session_rpl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"options_value"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"margin_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fees"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fixed"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"taker"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00025</span><span class="p">,</span><span class="w">
                </span><span class="nl">"maker"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.00005</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="nl">"block_trade"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"perpetual"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"index_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eth_usd"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"relative"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"taker"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w">
                </span><span class="nl">"maker"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="nl">"block_trade"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"option"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"index_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eth_usd"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fixed"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"taker"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00025</span><span class="p">,</span><span class="w">
                </span><span class="nl">"maker"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.00005</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="nl">"block_trade"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"future"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"index_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eth_usd"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves a per-currency list of user account summaries. To read subaccount summary use <code>subaccount_id</code> parameter.</p>

<p><strong>Scope: </strong> <code>account:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_account_summaries" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-143'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>subaccount_id</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The user id for the subaccount</td>
</tr>
<tr>
<td>extended</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Include additional fields</td>
</tr>
</tbody></table>
<h3 id='response-143'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_self_match_prevention</td>
<td>string</td>
<td>When Block RFQ Self Match Prevention is enabled, it ensures that RFQs cannot be executed between accounts that belong to the same legal entity. This setting is independent of the general self-match prevention settings and must be configured separately.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>Time at which the account was created (milliseconds since the Unix epoch; available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;email</td>
<td>string</td>
<td>User email (available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>Account id (available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interuser_transfers_enabled</td>
<td>boolean</td>
<td><code>true</code> when the inter-user transfers are enabled for user (available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;login_enabled</td>
<td>boolean</td>
<td>Whether account is loginable using email and password (available when parameter <code>extended</code> = <code>true</code> and account is a subaccount)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_enabled</td>
<td>boolean</td>
<td>Whether MMP is enabled (available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;referrer_id</td>
<td>string</td>
<td>Optional identifier of the referrer (of the affiliation program, and available when parameter <code>extended</code> = <code>true</code>), which link was used by this account at registration. It coincides with suffix of the affiliation link path after <code>/reg-</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;security_keys_enabled</td>
<td>boolean</td>
<td>Whether Security Key authentication is enabled (available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;self_trading_extended_to_subaccounts</td>
<td>string</td>
<td><code>true</code> if self trading rejection behavior is applied to trades between subaccounts (available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;self_trading_reject_mode</td>
<td>string</td>
<td>Self trading rejection behavior - <code>reject_taker</code> or <code>cancel_maker</code> (available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;summaries</td>
<td>array of <em>object</em></td>
<td>Aggregated list of per-currency account summaries</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_pl</td>
<td>number</td>
<td>Options profit and Loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;projected_delta_total</td>
<td>number</td>
<td>The sum of position deltas without positions that will expire during closest expiration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_theta_map</td>
<td>object</td>
<td>Map of options&#39; thetas per index</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;has_non_block_chain_equity</td>
<td>boolean</td>
<td>Optional field returned with value <code>true</code> when user has non block chain equity that is excluded from proof of reserve calculations</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_margin_balance_usd</td>
<td>number</td>
<td>Optional (only for users using cross margin). The account&#39;s total margin balance in all cross collateral currencies, expressed in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;limits</td>
<td>object</td>
<td>Returned object is described in <a href="https://support.deribit.com/hc/en-us/articles/25944617523357-Rate-Limits">separate document</a>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_delta_total_usd</td>
<td>number</td>
<td>Optional (only for users using cross margin). The account&#39;s total delta total in all cross collateral currencies, expressed in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;available_withdrawal_funds</td>
<td>number</td>
<td>The account&#39;s available to withdrawal funds</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_session_rpl</td>
<td>number</td>
<td>Options session realized profit and Loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;futures_session_rpl</td>
<td>number</td>
<td>Futures session realized profit and Loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_pl</td>
<td>number</td>
<td>Profit and loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;spot_reserve</td>
<td>number</td>
<td>The account&#39;s balance reserved in active spot orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fees</td>
<td>array of <em>object</em></td>
<td>List of fee objects for all currency pairs and instrument types related to the currency (available when parameter <code>extended</code> = <code>true</code> and user has any discounts)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_name</td>
<td>string</td>
<td>The currency pair this fee applies to</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;kind</td>
<td>string</td>
<td>Instrument type (e.g., future, perpetual, option)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;value</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>number</td>
<td>Block trade fee (if applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;default</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maker</td>
<td>number</td>
<td>Maker fee</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;taker</td>
<td>number</td>
<td>Taker fee</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>Fee calculation type (e.g., fixed, relative)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlement</td>
<td>number</td>
<td>Settlement fee</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;additional_reserve</td>
<td>number</td>
<td>The account&#39;s balance reserved in other orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_session_upl</td>
<td>number</td>
<td>Options session unrealized profit and Loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cross_collateral_enabled</td>
<td>boolean</td>
<td>When <code>true</code> cross collateral is enabled for user</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_value</td>
<td>number</td>
<td>Options value</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_vega_map</td>
<td>object</td>
<td>Map of options&#39; vegas per index</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maintenance_margin</td>
<td>number</td>
<td>The maintenance margin. When cross collateral is enabled, this aggregated value is calculated by converting the sum of each cross collateral currency&#39;s value to the given currency, using each cross collateral currency&#39;s index.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;futures_session_upl</td>
<td>number</td>
<td>Futures session unrealized profit and Loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;portfolio_margining_enabled</td>
<td>boolean</td>
<td><code>true</code> when portfolio margining is enabled for user</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;futures_pl</td>
<td>number</td>
<td>Futures profit and Loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_gamma_map</td>
<td>object</td>
<td>Map of options&#39; gammas per index</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency of the summary</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_delta</td>
<td>number</td>
<td>Options summary delta</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;initial_margin</td>
<td>number</td>
<td>The account&#39;s initial margin. When cross collateral is enabled, this aggregated value is calculated by converting the sum of each cross collateral currency&#39;s value to the given currency, using each cross collateral currency&#39;s index.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;projected_maintenance_margin</td>
<td>number</td>
<td>Projected maintenance margin. When cross collateral is enabled, this aggregated value is calculated by converting the sum of each cross collateral currency&#39;s value to the given currency, using each cross collateral currency&#39;s index.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;available_funds</td>
<td>number</td>
<td>The account&#39;s available funds. When cross collateral is enabled, this aggregated value is calculated by converting the sum of each cross collateral currency&#39;s value to the given currency, using each cross collateral currency&#39;s index.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;equity</td>
<td>number</td>
<td>The account&#39;s current equity</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;margin_model</td>
<td>string</td>
<td>Name of user&#39;s currently enabled margin model</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;balance</td>
<td>number</td>
<td>The account&#39;s balance</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_upl</td>
<td>number</td>
<td>Session unrealized profit and loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;margin_balance</td>
<td>number</td>
<td>The account&#39;s margin balance. When cross collateral is enabled, this aggregated value is calculated by converting the sum of each cross collateral currency&#39;s value to the given currency, using each cross collateral currency&#39;s index.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;deposit_address</td>
<td>string</td>
<td>The deposit address for the account (if available)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_theta</td>
<td>number</td>
<td>Options summary theta</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_initial_margin_usd</td>
<td>number</td>
<td>Optional (only for users using cross margin). The account&#39;s total initial margin in all cross collateral currencies, expressed in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;estimated_liquidation_ratio</td>
<td>number</td>
<td>Estimated Liquidation Ratio is returned only for users without portfolio margining enabled. Multiplying it by future position&#39;s market price returns its estimated liquidation price. When cross collateral is enabled, this aggregated value is calculated by converting the sum of each cross collateral currency&#39;s value to the given currency, using each cross collateral currency&#39;s index.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_rpl</td>
<td>number</td>
<td>Session realized profit and loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_balance</td>
<td>number</td>
<td>The account&#39;s fee balance (it can be used to pay for fees)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_maintenance_margin_usd</td>
<td>number</td>
<td>Optional (only for users using cross margin). The account&#39;s total maintenance margin in all cross collateral currencies, expressed in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_vega</td>
<td>number</td>
<td>Options summary vega</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;projected_initial_margin</td>
<td>number</td>
<td>Projected initial margin. When cross collateral is enabled, this aggregated value is calculated by converting the sum of each cross collateral currency&#39;s value to the given currency, using each cross collateral currency&#39;s index.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_gamma</td>
<td>number</td>
<td>Options summary gamma</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_equity_usd</td>
<td>number</td>
<td>Optional (only for users using cross margin). The account&#39;s total equity in all cross collateral currencies, expressed in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delta_total</td>
<td>number</td>
<td>The sum of position deltas</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;system_name</td>
<td>string</td>
<td>System generated user nickname (available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>Account type (available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;username</td>
<td>string</td>
<td>Account name (given by user) (available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
</tbody></table>
<h2 id='private-get_account_summary'>/private/get_account_summary</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_account_summary?currency=BTC&amp;extended=true"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2515</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_account_summary</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">extended</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2515</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_account_summary"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"extended"</span> <span class="p">:</span> <span class="bp">True</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2515</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"delta_total_map"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"btc_usd"</span><span class="p">:</span><span class="w"> </span><span class="mf">31.594357699</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"margin_balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">302.62729214</span><span class="p">,</span><span class="w">
    </span><span class="nl">"futures_session_rpl"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.03258105</span><span class="p">,</span><span class="w">
    </span><span class="nl">"options_session_rpl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"estimated_liquidation_ratio_map"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"btc_usd"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1009872222854525</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"session_upl"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05271555</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="b2c7c1d7c0f2d7cad3dfc2ded79cd1dddf">[email&#160;protected]</a>"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"system_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"interuser_transfers_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nl">"estimated_liquidation_ratio"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.10098722</span><span class="p">,</span><span class="w">
    </span><span class="nl">"options_gamma_map"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"btc_usd"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00001</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"options_vega"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0858</span><span class="p">,</span><span class="w">
    </span><span class="nl">"options_value"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0086</span><span class="p">,</span><span class="w">
    </span><span class="nl">"available_withdrawal_funds"</span><span class="p">:</span><span class="w"> </span><span class="mf">301.35396172</span><span class="p">,</span><span class="w">
    </span><span class="nl">"projected_delta_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">32.613978</span><span class="p">,</span><span class="w">
    </span><span class="nl">"maintenance_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.8857841</span><span class="p">,</span><span class="w">
    </span><span class="nl">"total_pl"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.33084225</span><span class="p">,</span><span class="w">
    </span><span class="nl">"limits"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"limits_per_currency"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"non_matching_engine"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">1500</span><span class="p">,</span><span class="w">
        </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"matching_engine"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trading"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">250</span><span class="p">,</span><span class="w"> </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span><span class="w">
        </span><span class="nl">"spot"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">250</span><span class="p">,</span><span class="w"> </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="p">},</span><span class="w">
        </span><span class="nl">"quotes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w"> </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="w"> </span><span class="p">},</span><span class="w">
        </span><span class="nl">"max_quotes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="p">},</span><span class="w">
        </span><span class="nl">"guaranteed_quotes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">},</span><span class="w">
        </span><span class="nl">"cancel_all"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"burst"</span><span class="p">:</span><span class="w"> </span><span class="mi">250</span><span class="p">,</span><span class="w"> </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"options_theta_map"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"btc_usd"</span><span class="p">:</span><span class="w"> </span><span class="mf">15.97071</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"projected_maintenance_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7543841</span><span class="p">,</span><span class="w">
    </span><span class="nl">"available_funds"</span><span class="p">:</span><span class="w"> </span><span class="mf">301.38059622</span><span class="p">,</span><span class="w">
    </span><span class="nl">"login_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"options_delta"</span><span class="p">:</span><span class="w"> </span><span class="mf">-1.01962</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">302.60065765</span><span class="p">,</span><span class="w">
    </span><span class="nl">"security_keys_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"referrer_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mmp_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"equity"</span><span class="p">:</span><span class="w"> </span><span class="mf">302.61869214</span><span class="p">,</span><span class="w">
    </span><span class="nl">"block_rfq_self_match_prevention"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"futures_session_upl"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05921555</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fee_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"options_session_upl"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0065</span><span class="p">,</span><span class="w">
    </span><span class="nl">"projected_initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.01529592</span><span class="p">,</span><span class="w">
    </span><span class="nl">"options_theta"</span><span class="p">:</span><span class="w"> </span><span class="mf">15.97071</span><span class="p">,</span><span class="w">
    </span><span class="nl">"creation_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1687352432143</span><span class="p">,</span><span class="w">
    </span><span class="nl">"self_trading_extended_to_subaccounts"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"portfolio_margining_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"cross_collateral_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"margin_model"</span><span class="p">:</span><span class="w"> </span><span class="s2">"segregated_sm"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"options_vega_map"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"btc_usd"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0858</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"futures_pl"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.32434225</span><span class="p">,</span><span class="w">
    </span><span class="nl">"options_pl"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0065</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"self_trading_reject_mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancel_maker"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.24669592</span><span class="p">,</span><span class="w">
    </span><span class="nl">"spot_reserve"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"delta_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">31.602958</span><span class="p">,</span><span class="w">
    </span><span class="nl">"options_gamma"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00001</span><span class="p">,</span><span class="w">
    </span><span class="nl">"session_rpl"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.03258105</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fees"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fixed"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"taker"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00035</span><span class="p">,</span><span class="w">
            </span><span class="nl">"maker"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0001</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"block_trade"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"perpetual"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc_usd"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"relative"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"taker"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.625</span><span class="p">,</span><span class="w">
            </span><span class="nl">"maker"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.625</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"block_trade"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.625</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"option"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc_usd"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fixed"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"taker"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00035</span><span class="p">,</span><span class="w">
            </span><span class="nl">"maker"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0001</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"block_trade"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"future"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc_usd"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves user account summary. To read subaccount summary use <code>subaccount_id</code> parameter.</p>

<p><strong>Scope: </strong> <code>account:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_account_summary" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-144'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>STETH</code><br><code>ETHW</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>MATIC</code><br><code>SOL</code><br><code>XRP</code><br><code>USYC</code><br><code>PAXG</code><br><code>BNB</code><br><code>USDE</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The user id for the subaccount</td>
</tr>
<tr>
<td>extended</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Include additional fields</td>
</tr>
</tbody></table>
<h3 id='response-144'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_pl</td>
<td>number</td>
<td>Options profit and Loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;projected_delta_total</td>
<td>number</td>
<td>The sum of position deltas without positions that will expire during closest expiration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_theta_map</td>
<td>object</td>
<td>Map of options&#39; thetas per index</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;has_non_block_chain_equity</td>
<td>boolean</td>
<td>Optional field returned with value <code>true</code> when user has non block chain equity that is excluded from proof of reserve calculations</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_margin_balance_usd</td>
<td>number</td>
<td>Optional (only for users using cross margin). The account&#39;s total margin balance in all cross collateral currencies, expressed in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;limits</td>
<td>object</td>
<td>Returned object is described in <a href="https://support.deribit.com/hc/en-us/articles/25944617523357-Rate-Limits">separate document</a>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>Account type (available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_delta_total_usd</td>
<td>number</td>
<td>Optional (only for users using cross margin). The account&#39;s total delta total in all cross collateral currencies, expressed in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;available_withdrawal_funds</td>
<td>number</td>
<td>The account&#39;s available to withdrawal funds</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_session_rpl</td>
<td>number</td>
<td>Options session realized profit and Loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;futures_session_rpl</td>
<td>number</td>
<td>Futures session realized profit and Loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_pl</td>
<td>number</td>
<td>Profit and loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;spot_reserve</td>
<td>number</td>
<td>The account&#39;s balance reserved in active spot orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fees</td>
<td>array of <em>object</em></td>
<td>List of fee objects for all currency pairs and instrument types related to the currency (available when parameter <code>extended</code> = <code>true</code> and user has any discounts)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_name</td>
<td>string</td>
<td>The currency pair this fee applies to</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;kind</td>
<td>string</td>
<td>Type of the instruments the fee applies to - <code>future</code> for future instruments (excluding perpetual), <code>perpetual</code> for future perpetual instruments, <code>option</code> for options</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;value</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>number</td>
<td>Block trade fee (if applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;default</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maker</td>
<td>number</td>
<td>Maker fee</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;taker</td>
<td>number</td>
<td>Taker fee</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>Fee type - <code>relative</code> if fee is calculated as a fraction of base instrument fee, <code>fixed</code> if fee is calculated solely using user fee</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlement</td>
<td>number</td>
<td>Settlement fee</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;additional_reserve</td>
<td>number</td>
<td>The account&#39;s balance reserved in other orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_session_upl</td>
<td>number</td>
<td>Options session unrealized profit and Loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cross_collateral_enabled</td>
<td>boolean</td>
<td>When <code>true</code> cross collateral is enabled for user</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>Account id (available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_value</td>
<td>number</td>
<td>Options value</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>Time at which the account was created (milliseconds since the Unix epoch; available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;email</td>
<td>string</td>
<td>User email (available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_vega_map</td>
<td>object</td>
<td>Map of options&#39; vegas per index</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maintenance_margin</td>
<td>number</td>
<td>The maintenance margin. When cross collateral is enabled, this aggregated value is calculated by converting the sum of each cross collateral currency&#39;s value to the given currency, using each cross collateral currency&#39;s index.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_enabled</td>
<td>boolean</td>
<td>Whether MMP is enabled (available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;futures_session_upl</td>
<td>number</td>
<td>Futures session unrealized profit and Loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;portfolio_margining_enabled</td>
<td>boolean</td>
<td><code>true</code> when portfolio margining is enabled for user</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;futures_pl</td>
<td>number</td>
<td>Futures profit and Loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_gamma_map</td>
<td>object</td>
<td>Map of options&#39; gammas per index</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>The selected currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_delta</td>
<td>number</td>
<td>Options summary delta</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;initial_margin</td>
<td>number</td>
<td>The account&#39;s initial margin. When cross collateral is enabled, this aggregated value is calculated by converting the sum of each cross collateral currency&#39;s value to the given currency, using each cross collateral currency&#39;s index.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;projected_maintenance_margin</td>
<td>number</td>
<td>Projected maintenance margin. When cross collateral is enabled, this aggregated value is calculated by converting the sum of each cross collateral currency&#39;s value to the given currency, using each cross collateral currency&#39;s index.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;available_funds</td>
<td>number</td>
<td>The account&#39;s available funds. When cross collateral is enabled, this aggregated value is calculated by converting the sum of each cross collateral currency&#39;s value to the given currency, using each cross collateral currency&#39;s index.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;referrer_id</td>
<td>string</td>
<td>Optional identifier of the referrer (of the affiliation program, and available when parameter <code>extended</code> = <code>true</code>), which link was used by this account at registration. It coincides with suffix of the affiliation link path after <code>/reg-</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;login_enabled</td>
<td>boolean</td>
<td>Whether account is loginable using email and password (available when parameter <code>extended</code> = <code>true</code> and account is a subaccount)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;equity</td>
<td>number</td>
<td>The account&#39;s current equity</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;margin_model</td>
<td>string</td>
<td>Name of user&#39;s currently enabled margin model</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;balance</td>
<td>number</td>
<td>The account&#39;s balance</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_upl</td>
<td>number</td>
<td>Session unrealized profit and loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;margin_balance</td>
<td>number</td>
<td>The account&#39;s margin balance. When cross collateral is enabled, this aggregated value is calculated by converting the sum of each cross collateral currency&#39;s value to the given currency, using each cross collateral currency&#39;s index.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;security_keys_enabled</td>
<td>boolean</td>
<td>Whether Security Key authentication is enabled (available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;deposit_address</td>
<td>string</td>
<td>The deposit address for the account (if available)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_theta</td>
<td>number</td>
<td>Options summary theta</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;self_trading_extended_to_subaccounts</td>
<td>string</td>
<td><code>true</code> if self trading rejection behavior is applied to trades between subaccounts (available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interuser_transfers_enabled</td>
<td>boolean</td>
<td><code>true</code> when the inter-user transfers are enabled for user (available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_initial_margin_usd</td>
<td>number</td>
<td>Optional (only for users using cross margin). The account&#39;s total initial margin in all cross collateral currencies, expressed in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;estimated_liquidation_ratio</td>
<td>number</td>
<td>Estimated Liquidation Ratio is returned only for users without portfolio margining enabled. Multiplying it by future position&#39;s market price returns its estimated liquidation price. When cross collateral is enabled, this aggregated value is calculated by converting the sum of each cross collateral currency&#39;s value to the given currency, using each cross collateral currency&#39;s index.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_rpl</td>
<td>number</td>
<td>Session realized profit and loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_balance</td>
<td>number</td>
<td>The account&#39;s fee balance (it can be used to pay for fees)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_maintenance_margin_usd</td>
<td>number</td>
<td>Optional (only for users using cross margin). The account&#39;s total maintenance margin in all cross collateral currencies, expressed in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_vega</td>
<td>number</td>
<td>Options summary vega</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;projected_initial_margin</td>
<td>number</td>
<td>Projected initial margin. When cross collateral is enabled, this aggregated value is calculated by converting the sum of each cross collateral currency&#39;s value to the given currency, using each cross collateral currency&#39;s index.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;self_trading_reject_mode</td>
<td>string</td>
<td>Self trading rejection behavior - <code>reject_taker</code> or <code>cancel_maker</code> (available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;system_name</td>
<td>string</td>
<td>System generated user nickname (available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_gamma</td>
<td>number</td>
<td>Options summary gamma</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;username</td>
<td>string</td>
<td>Account name (given by user) (available when parameter <code>extended</code> = <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_equity_usd</td>
<td>number</td>
<td>Optional (only for users using cross margin). The account&#39;s total equity in all cross collateral currencies, expressed in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delta_total</td>
<td>number</td>
<td>The sum of position deltas</td>
</tr>
</tbody></table>
<h2 id='private-get_affiliate_program_info'>/private/get_affiliate_program_info</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_affiliate_program_info?"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_affiliate_program_info</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_affiliate_program_info"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"received"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"eth"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00004</span><span class="p">,</span><span class="w">
      </span><span class="nl">"btc"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.000001</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"number_of_affiliates"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.deribit.com/reg-xxx.zxyq"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"is_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieves user`s affiliates count, payouts and link.</p>

<p><strong>Scope: </strong> <code>account:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_affiliate_program_info" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-145'>Parameters</h3>
<p><em>This method takes no parameters</em></p>
<h3 id='response-145'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_enabled</td>
<td>boolean</td>
<td>Status of affiliate program</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;link</td>
<td>string</td>
<td>Affiliate link</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;number_of_affiliates</td>
<td>number</td>
<td>Number of affiliates</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;received</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;btc</td>
<td>number</td>
<td>Total payout received in BTC</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;eth</td>
<td>number</td>
<td>Total payout received in ETH</td>
</tr>
</tbody></table>
<h2 id='private-get_email_language'>/private/get_email_language</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_email_language?"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">9265</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_email_language</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">9265</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_email_language"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">9265</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves the language to be used for emails.</p>

<p><strong>Scope: </strong> <code>account:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_email_language" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-146'>Parameters</h3>
<p><em>This method takes no parameters</em></p>
<h3 id='response-146'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>The abbreviation of the language</td>
</tr>
</tbody></table>
<h2 id='private-get_new_announcements'>/private/get_new_announcements</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_new_announcements?"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3022</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_new_announcements</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">3022</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_new_announcements"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3022</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example announcement"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"publication_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550058362418</span><span class="p">,</span><span class="w">
      </span><span class="nl">"important"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1550058362418</span><span class="p">,</span><span class="w">
      </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lorem ipsum dolor sit amet, consectetur adipiscing elit."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves announcements that have not been marked read by the user.</p>

<p><strong>Scope: </strong> <code>account:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_new_announcements" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-147'>Parameters</h3>
<p><em>This method takes no parameters</em></p>
<h3 id='response-147'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;body</td>
<td>string</td>
<td>The HTML body of the announcement</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;confirmation</td>
<td>boolean</td>
<td>Whether the user confirmation is required for this announcement</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>number</td>
<td>A unique identifier for the announcement</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;important</td>
<td>boolean</td>
<td>Whether the announcement is marked as important</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;publication_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch) of announcement publication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;title</td>
<td>string</td>
<td>The title of the announcement</td>
</tr>
</tbody></table>
<h2 id='private-get_position'>/private/get_position</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_position?instrument_name=BTC-PERPETUAL"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">404</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_position</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">instrument_name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">404</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_position"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"instrument_name"</span> <span class="p">:</span> <span class="s">"BTC-PERPETUAL"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"average_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"delta"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"estimated_liquidation_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"floating_profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">3555.86</span><span class="p">,</span><span class="w">
      </span><span class="nl">"initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"interest_value"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">1.7362511643080387</span><span class="p">,</span><span class="w">
      </span><span class="nl">"leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
      </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"future"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"maintenance_margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">3556.62</span><span class="p">,</span><span class="w">
      </span><span class="nl">"open_orders_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.000165889</span><span class="p">,</span><span class="w">
      </span><span class="nl">"realized_profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"settlement_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">3555.44</span><span class="p">,</span><span class="w">
      </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"size_currency"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve user position.</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_position" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-148'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
</tbody></table>
<h3 id='response-148'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average price of trades that built this position</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price_usd</td>
<td>number</td>
<td>Only for options, average price in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delta</td>
<td>number</td>
<td>Delta parameter</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, <code>sell</code> or <code>zero</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;estimated_liquidation_price</td>
<td>number</td>
<td>Estimated liquidation price, added only for futures, for users with <code>segregated_sm</code> margin model</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;floating_profit_loss</td>
<td>number</td>
<td>Floating profit or loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;floating_profit_loss_usd</td>
<td>number</td>
<td>Only for options, floating profit or loss in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;gamma</td>
<td>number</td>
<td>Only for options, Gamma parameter</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Current index price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;initial_margin</td>
<td>number</td>
<td>Initial margin</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interest_value</td>
<td>number</td>
<td>Value used to calculate <code>realized_funding</code> (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;kind</td>
<td>string</td>
<td>Instrument kind: <code>&quot;future&quot;</code>, <code>&quot;option&quot;</code>, <code>&quot;spot&quot;</code>, <code>&quot;future_combo&quot;</code>, <code>&quot;option_combo&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;leverage</td>
<td>integer</td>
<td>Current available leverage for future position</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maintenance_margin</td>
<td>number</td>
<td>Maintenance margin</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Current mark price for position&#39;s instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;open_orders_margin</td>
<td>number</td>
<td>Open orders margin</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;realized_funding</td>
<td>number</td>
<td>Realized Funding in current session included in session realized profit or loss, only for positions of perpetual instruments</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;realized_profit_loss</td>
<td>number</td>
<td>Realized profit or loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlement_price</td>
<td>number</td>
<td>Optional (not added for spot). Last settlement price for position&#39;s instrument 0 if instrument wasn&#39;t settled yet</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;size</td>
<td>number</td>
<td>Position size for futures size in quote currency (e.g. USD), for options size is in base currency (e.g. BTC)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;size_currency</td>
<td>number</td>
<td>Only for futures, position size in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;theta</td>
<td>number</td>
<td>Only for options, Theta parameter</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_profit_loss</td>
<td>number</td>
<td>Profit or loss from position</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;vega</td>
<td>number</td>
<td>Only for options, Vega parameter</td>
</tr>
</tbody></table>
<h2 id='private-get_positions'>/private/get_positions</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_positions?currency=BTC&amp;kind=future"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2236</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_positions</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">kind</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">future</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2236</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_positions"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"kind"</span> <span class="p">:</span> <span class="s">"future"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2236</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="nl">"average_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">7440.18</span><span class="p">,</span><span class="w">
          </span><span class="nl">"delta"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.006687487</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"estimated_liquidation_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.74</span><span class="p">,</span><span class="w">
          </span><span class="nl">"floating_profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">7466.79</span><span class="p">,</span><span class="w">
          </span><span class="nl">"initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.000197283</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"interest_value"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">1.7362511643080387</span><span class="p">,</span><span class="w">
          </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"future"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">34</span><span class="p">,</span><span class="w">
          </span><span class="nl">"maintenance_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.000143783</span><span class="p">,</span><span class="w">
          </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">7476.65</span><span class="p">,</span><span class="w">
          </span><span class="nl">"open_orders_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.000197288</span><span class="p">,</span><span class="w">
          </span><span class="nl">"realized_funding"</span><span class="p">:</span><span class="w"> </span><span class="mi">-1e-8</span><span class="p">,</span><span class="w">
          </span><span class="nl">"realized_profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mi">-9e-9</span><span class="p">,</span><span class="w">
          </span><span class="nl">"settlement_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">7476.65</span><span class="p">,</span><span class="w">
          </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
          </span><span class="nl">"size_currency"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.006687487</span><span class="p">,</span><span class="w">
          </span><span class="nl">"total_profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.000032781</span><span class="w">
      </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieve user positions. To retrieve subaccount positions, use <code>subaccount_id</code> parameter.</p>

<p><strong>Scope: </strong> <code>trade:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_positions" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-149'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>false</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>any</code></td>
<td></td>
</tr>
<tr>
<td>kind</td>
<td>false</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code></td>
<td>Kind filter on positions</td>
</tr>
<tr>
<td>subaccount_id</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>The user id for the subaccount</td>
</tr>
</tbody></table>
<h3 id='response-149'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average price of trades that built this position</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price_usd</td>
<td>number</td>
<td>Only for options, average price in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delta</td>
<td>number</td>
<td>Delta parameter</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, <code>sell</code> or <code>zero</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;estimated_liquidation_price</td>
<td>number</td>
<td>Estimated liquidation price, added only for futures, for users with <code>segregated_sm</code> margin model</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;floating_profit_loss</td>
<td>number</td>
<td>Floating profit or loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;floating_profit_loss_usd</td>
<td>number</td>
<td>Only for options, floating profit or loss in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;gamma</td>
<td>number</td>
<td>Only for options, Gamma parameter</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Current index price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;initial_margin</td>
<td>number</td>
<td>Initial margin</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interest_value</td>
<td>number</td>
<td>Value used to calculate <code>realized_funding</code> (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;kind</td>
<td>string</td>
<td>Instrument kind: <code>&quot;future&quot;</code>, <code>&quot;option&quot;</code>, <code>&quot;spot&quot;</code>, <code>&quot;future_combo&quot;</code>, <code>&quot;option_combo&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;leverage</td>
<td>integer</td>
<td>Current available leverage for future position</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maintenance_margin</td>
<td>number</td>
<td>Maintenance margin</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Current mark price for position&#39;s instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;open_orders_margin</td>
<td>number</td>
<td>Open orders margin</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;realized_funding</td>
<td>number</td>
<td>Realized Funding in current session included in session realized profit or loss, only for positions of perpetual instruments</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;realized_profit_loss</td>
<td>number</td>
<td>Realized profit or loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlement_price</td>
<td>number</td>
<td>Optional (not added for spot). Last settlement price for position&#39;s instrument 0 if instrument wasn&#39;t settled yet</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;size</td>
<td>number</td>
<td>Position size for futures size in quote currency (e.g. USD), for options size is in base currency (e.g. BTC)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;size_currency</td>
<td>number</td>
<td>Only for futures, position size in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;theta</td>
<td>number</td>
<td>Only for options, Theta parameter</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_profit_loss</td>
<td>number</td>
<td>Profit or loss from position</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;vega</td>
<td>number</td>
<td>Only for options, Vega parameter</td>
</tr>
</tbody></table>
<h2 id='private-get_subaccounts'>/private/get_subaccounts</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_subaccounts?with_portfolio=true"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">4947</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_subaccounts</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">with_portfolio</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">4947</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_subaccounts"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"with_portfolio"</span> <span class="p">:</span> <span class="bp">True</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4947</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="2b5e584e59746a6a6a6b4e464a424705484446">[email&#160;protected]</a>"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_password"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"margin_model"</span><span class="p">:</span><span class="w"> </span><span class="s2">"segregated_sm"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"login_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"portfolio"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"eth"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"additional_reserve"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"spot_reserve"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"available_funds"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"available_withdrawal_funds"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eth"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"equity"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"maintenance_margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"margin_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"btc"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"additional_reserve"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"spot_reserve"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"available_funds"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.000413075</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"available_withdrawal_funds"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.000413075</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.000593987</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"equity"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.000571846</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.000158771</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"maintenance_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.000115715</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"margin_balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.000571846</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"receive_notifications"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"system_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"security_keys_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"security_keys_assignments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_1"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f085839582afb1b1b1b0979d91999cde939f9d">[email&#160;protected]</a>"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
            </span><span class="nl">"is_password"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"margin_model"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cross_pm"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"login_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"portfolio"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"eth"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"additional_reserve"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"spot_reserve"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"available_funds"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"available_withdrawal_funds"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eth"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"equity"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"maintenance_margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"margin_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"btc"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"additional_reserve"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"spot_reserve"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"available_funds"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"available_withdrawal_funds"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"btc"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"equity"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"maintenance_margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"margin_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"receive_notifications"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"system_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_1_1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"security_keys_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"security_keys_assignments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subaccount"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_1_1"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">


</span></code></pre></div>
<p>Get information about subaccounts. When called from subaccount, the response will include limited details for the main account and details for the subaccount initiating the request. The portfolio information will be included in the response only if the <code>with_portfolio</code> parameter is set to <code>true</code>.</p>

<p><strong>Scope: </strong> <code>account:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_subaccounts" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-150'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>with_portfolio</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Portfolio flag: <code>true</code> for portfolio information, <code>false</code> for subaccount information only. <code>false</code> by default</td>
</tr>
</tbody></table>
<h3 id='response-150'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;email</td>
<td>string</td>
<td>User email</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>Account/Subaccount identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_password</td>
<td>boolean</td>
<td><code>true</code> when password for the subaccount has been configured</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;login_enabled</td>
<td>boolean</td>
<td>Informs whether login to the subaccount is enabled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;margin_model</td>
<td>string</td>
<td>Margin model</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;not_confirmed_email</td>
<td>string</td>
<td>New email address that has not yet been confirmed. This field is only included if <code>with_portfolio</code> == <code>true</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;portfolio</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;btc</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;additional_reserve</td>
<td>number</td>
<td>The account&#39;s balance reserved in other orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;available_funds</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;available_withdrawal_funds</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;balance</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;equity</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;initial_margin</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maintenance_margin</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;margin_balance</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;spot_reserve</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;eth</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;additional_reserve</td>
<td>number</td>
<td>The account&#39;s balance reserved in other orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;available_funds</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;available_withdrawal_funds</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;balance</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;equity</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;initial_margin</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maintenance_margin</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;margin_balance</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;spot_reserve</td>
<td>number</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;proof_id</td>
<td>string</td>
<td>hashed identifier used in the Proof Of Liability for the subaccount. This identifier allows you to find your entries in the Deribit Proof-Of-Reserves files. IMPORTANT: Keep it secret to not disclose your entries in the Proof-Of-Reserves.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;proof_id_signature</td>
<td>string</td>
<td>signature used as a base string for proof_id hash. IMPORTANT: Keep it secret to not disclose your entries in the Proof-Of-Reserves.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;receive_notifications</td>
<td>boolean</td>
<td>When <code>true</code> - receive all notification emails on the main email</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;security_keys_assignments</td>
<td>array</td>
<td>Names of assignments with Security Keys assigned</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;security_keys_enabled</td>
<td>boolean</td>
<td>Whether the Security Keys authentication is enabled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;system_name</td>
<td>string</td>
<td>System generated user nickname</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;username</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h2 id='private-get_subaccounts_details'>/private/get_subaccounts_details</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_subaccounts_details?currency=BTC"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_subaccounts_details</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_subaccounts_details"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"uid"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"positions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"total_profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.000118183</span><span class="p">,</span><span class="w">
          </span><span class="nl">"size_currency"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.004152776</span><span class="p">,</span><span class="w">
          </span><span class="nl">"size"</span><span class="p">:</span><span class="w"> </span><span class="mf">200.0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"settlement_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">48150.36</span><span class="p">,</span><span class="w">
          </span><span class="nl">"realized_profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mf">-8.79e-7</span><span class="p">,</span><span class="w">
          </span><span class="nl">"realized_funding"</span><span class="p">:</span><span class="w"> </span><span class="mf">-8.8e-7</span><span class="p">,</span><span class="w">
          </span><span class="nl">"open_orders_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">48160.55</span><span class="p">,</span><span class="w">
          </span><span class="nl">"maintenance_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.000089286</span><span class="p">,</span><span class="w">
          </span><span class="nl">"leverage"</span><span class="p">:</span><span class="w"> </span><span class="mi">34</span><span class="p">,</span><span class="w">
          </span><span class="nl">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"future"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.000122508</span><span class="p">,</span><span class="w">
          </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">47897.12</span><span class="p">,</span><span class="w">
          </span><span class="nl">"floating_profit_loss"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.00003451</span><span class="p">,</span><span class="w">
          </span><span class="nl">"estimated_liquidation_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.33</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"delta"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.004152776</span><span class="p">,</span><span class="w">
          </span><span class="nl">"average_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">49571.3</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"uid"</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"positions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"total_profit_loss"</span><span class="p">:</span><span class="mf">0.000037333</span><span class="p">,</span><span class="w">
          </span><span class="nl">"size_currency"</span><span class="p">:</span><span class="mf">-0.001308984</span><span class="p">,</span><span class="w">
          </span><span class="nl">"size"</span><span class="p">:</span><span class="mf">-60.0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"settlement_price"</span><span class="p">:</span><span class="mf">47886.98</span><span class="p">,</span><span class="w">
          </span><span class="nl">"realized_profit_loss"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"open_orders_margin"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="mf">45837.07</span><span class="p">,</span><span class="w">
          </span><span class="nl">"maintenance_margin"</span><span class="p">:</span><span class="mf">0.000028143</span><span class="p">,</span><span class="w">
          </span><span class="nl">"leverage"</span><span class="p">:</span><span class="mi">34</span><span class="p">,</span><span class="w">
          </span><span class="nl">"kind"</span><span class="p">:</span><span class="s2">"future"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="s2">"BTC-3SEP21"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"initial_margin"</span><span class="p">:</span><span class="mf">0.000038615</span><span class="p">,</span><span class="w">
          </span><span class="nl">"index_price"</span><span class="p">:</span><span class="mf">47897.12</span><span class="p">,</span><span class="w">
          </span><span class="nl">"floating_profit_loss"</span><span class="p">:</span><span class="mf">0.000037333</span><span class="p">,</span><span class="w">
          </span><span class="nl">"estimated_liquidation_price"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="p">:</span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"delta"</span><span class="p">:</span><span class="mf">-0.001308984</span><span class="p">,</span><span class="w">
          </span><span class="nl">"average_price"</span><span class="p">:</span><span class="mf">47182.76</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Get subaccounts positions</p>

<p><strong>Scope: </strong> <code>account:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_subaccounts_details" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-151'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>with_open_orders</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>Optional parameter to ask for open orders list, default: <code>false</code></td>
</tr>
</tbody></table>
<h3 id='response-151'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;open_orders</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;positions</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average price of trades that built this position</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price_usd</td>
<td>number</td>
<td>Only for options, average price in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delta</td>
<td>number</td>
<td>Delta parameter</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, <code>sell</code> or <code>zero</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;floating_profit_loss</td>
<td>number</td>
<td>Floating profit or loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;floating_profit_loss_usd</td>
<td>number</td>
<td>Only for options, floating profit or loss in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;gamma</td>
<td>number</td>
<td>Only for options, Gamma parameter</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Current index price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;initial_margin</td>
<td>number</td>
<td>Initial margin</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interest_value</td>
<td>number</td>
<td>Value used to calculate <code>realized_funding</code> (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;kind</td>
<td>string</td>
<td>Instrument kind: <code>&quot;future&quot;</code>, <code>&quot;option&quot;</code>, <code>&quot;spot&quot;</code>, <code>&quot;future_combo&quot;</code>, <code>&quot;option_combo&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;leverage</td>
<td>integer</td>
<td>Current available leverage for future position</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maintenance_margin</td>
<td>number</td>
<td>Maintenance margin</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Current mark price for position&#39;s instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;realized_funding</td>
<td>number</td>
<td>Realized Funding in current session included in session realized profit or loss, only for positions of perpetual instruments</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;realized_profit_loss</td>
<td>number</td>
<td>Realized profit or loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlement_price</td>
<td>number</td>
<td>Optional (not added for spot). Last settlement price for position&#39;s instrument 0 if instrument wasn&#39;t settled yet</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;size</td>
<td>number</td>
<td>Position size for futures size in quote currency (e.g. USD), for options size is in base currency (e.g. BTC)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;size_currency</td>
<td>number</td>
<td>Only for futures, position size in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;theta</td>
<td>number</td>
<td>Only for options, Theta parameter</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_profit_loss</td>
<td>number</td>
<td>Profit or loss from position</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;vega</td>
<td>number</td>
<td>Only for options, Vega parameter</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;uid</td>
<td>integer</td>
<td>Account/Subaccount identifier</td>
</tr>
</tbody></table>
<h2 id='private-get_transaction_log'>/private/get_transaction_log</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_transaction_log?count=5&amp;currency=BTC&amp;end_timestamp=1613660407000&amp;start_timestamp=1613657734000"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_transaction_log</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">start_timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">1613657734000</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">end_timestamp</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">1613660407000</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">5</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">4</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_transaction_log"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"start_timestamp"</span> <span class="p">:</span> <span class="s">"1613657734000"</span><span class="p">,</span>
    <span class="s">"end_timestamp"</span> <span class="p">:</span> <span class="s">"1613660407000"</span><span class="p">,</span>
    <span class="s">"count"</span> <span class="p">:</span> <span class="mi">5</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">4</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"logs"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TestUser"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"user_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">6009</span><span class="p">,</span><span class="w">
        </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"transfer"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1613659830333</span><span class="p">,</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"interest_pl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"transfer_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subaccount"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"other_user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span><span class="w">
          </span><span class="nl">"other_user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Subaccount"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">61312</span><span class="p">,</span><span class="w">
        </span><span class="nl">"equity"</span><span class="p">:</span><span class="w"> </span><span class="mf">3000.9275869</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"commission"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"change"</span><span class="p">:</span><span class="w"> </span><span class="mf">-2.5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"cashflow"</span><span class="p">:</span><span class="w"> </span><span class="mf">-2.5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">3001.22270418</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TestUser"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"user_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">6008</span><span class="p">,</span><span class="w">
        </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"settlement"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total_interest_pl"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00001243</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1613659544153</span><span class="p">,</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"long"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"session_upl"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00220172</span><span class="p">,</span><span class="w">
        </span><span class="nl">"session_rpl"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.00004467</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">51807.07</span><span class="p">,</span><span class="w">
        </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">1520</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"interest_pl"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00000993</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"settlement_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">51807</span><span class="p">,</span><span class="w">
          </span><span class="nl">"floating_pl"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00220172</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">61311</span><span class="p">,</span><span class="w">
        </span><span class="nl">"equity"</span><span class="p">:</span><span class="w"> </span><span class="mf">3003.42821428</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"commission"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"change"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00215706</span><span class="p">,</span><span class="w">
        </span><span class="nl">"cashflow"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00215706</span><span class="p">,</span><span class="w">
        </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">3003.72270418</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1520</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TestUser"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"user_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">6007</span><span class="p">,</span><span class="w">
        </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deposit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1613657828414</span><span class="p">,</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"interest_pl"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"transaction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"de6eba075855f32c9510f338d3ca0900376cedcb9f7b142caccfbdc292d3237e"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"deposit_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wallet"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"addr"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2N8prMvpZHr8aYqodX3S4yhz5wMxjY8La3p"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">61291</span><span class="p">,</span><span class="w">
        </span><span class="nl">"equity"</span><span class="p">:</span><span class="w"> </span><span class="mf">3003.4876111</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"commission"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"change"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.65</span><span class="p">,</span><span class="w">
        </span><span class="nl">"cashflow"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.65</span><span class="p">,</span><span class="w">
        </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">3003.72054712</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TestUser"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"user_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">6006</span><span class="p">,</span><span class="w">
        </span><span class="nl">"user_role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"maker"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"trade"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11.222.33.44"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"28349"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1613657734620</span><span class="p">,</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open buy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"profit_as_cashflow"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1537</span><span class="p">,</span><span class="w">
        </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"67546"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.04884653215049635</span><span class="p">,</span><span class="w">
        </span><span class="nl">"interest_pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-19FEB21-49200-C"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Source: api"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">61289</span><span class="p">,</span><span class="w">
        </span><span class="nl">"equity"</span><span class="p">:</span><span class="w"> </span><span class="mf">3002.83270455</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"commission"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"change"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.10759</span><span class="p">,</span><span class="w">
        </span><span class="nl">"cashflow"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.10759</span><span class="p">,</span><span class="w">
        </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">3003.07054712</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.7</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TestUser"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"user_seq"</span><span class="p">:</span><span class="w"> </span><span class="mi">6005</span><span class="p">,</span><span class="w">
        </span><span class="nl">"user_role"</span><span class="p">:</span><span class="w"> </span><span class="s2">"maker"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"trade"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"28349"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1613657734620</span><span class="p">,</span><span class="w">
        </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"close buy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"profit_as_cashflow"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price_currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1537</span><span class="p">,</span><span class="w">
        </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"67546"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.04884653215049635</span><span class="p">,</span><span class="w">
        </span><span class="nl">"interest_pl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-19FEB21-49200-C"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Source: api"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">61288</span><span class="p">,</span><span class="w">
        </span><span class="nl">"equity"</span><span class="p">:</span><span class="w"> </span><span class="mf">3002.83270455</span><span class="p">,</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"commission"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"change"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.04611</span><span class="p">,</span><span class="w">
        </span><span class="nl">"cashflow"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.04611</span><span class="p">,</span><span class="w">
        </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">3003.17813712</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"continuation"</span><span class="p">:</span><span class="w"> </span><span class="mi">61282</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieve the latest user trades that have occurred for a specific instrument and within a given time range.</p>

<p><strong>Scope: </strong> <code>account:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_transaction_log" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-152'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>STETH</code><br><code>ETHW</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>MATIC</code><br><code>SOL</code><br><code>XRP</code><br><code>USYC</code><br><code>PAXG</code><br><code>BNB</code><br><code>USDE</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>start_timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The earliest timestamp to return result from (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>end_timestamp</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The most recent timestamp to return result from (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>query</td>
<td>false</td>
<td>string</td>
<td></td>
<td>The following keywords can be used to filter the results: <code>trade</code>, <code>maker</code>, <code>taker</code>, <code>open</code>, <code>close</code>, <code>liquidation</code>, <code>buy</code>, <code>sell</code>, <code>withdrawal</code>, <code>delivery</code>, <code>settlement</code>, <code>deposit</code>, <code>transfer</code>, <code>option</code>, <code>future</code>, <code>correction</code>, <code>block_trade</code>, <code>swap</code>. Plus withdrawal or transfer addresses</td>
</tr>
<tr>
<td>count</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Number of requested items, default - <code>100</code></td>
</tr>
<tr>
<td>subaccount_id</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Id of a subaccount</td>
</tr>
<tr>
<td>continuation</td>
<td>false</td>
<td>integer</td>
<td></td>
<td>Continuation token for pagination</td>
</tr>
</tbody></table>
<h3 id='response-152'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;continuation</td>
<td>integer</td>
<td>Continuation token for pagination. <code>NULL</code> when no continuation.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;logs</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;change</td>
<td>number</td>
<td>Change in cash balance. For trades: fees and options premium paid/received. For settlement: Futures session PNL and perpetual session funding.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cashflow</td>
<td>number</td>
<td>For futures and perpetual contracts: Realized session PNL (since last settlement). For options: the amount paid or received for the options traded.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;user_id</td>
<td>integer</td>
<td>Unique user identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>Transaction category/type. The most common are: <code>trade</code>, <code>deposit</code>, <code>withdrawal</code>, <code>settlement</code>, <code>delivery</code>, <code>transfer</code>, <code>swap</code>, <code>correction</code>. New types can be added any time in the future</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;position</td>
<td>number</td>
<td>Updated position size after the transaction</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;side</td>
<td>string</td>
<td>One of: <code>short</code> or <code>long</code> in case of settlements, <code>close sell</code> or <code>close buy</code> in case of deliveries, <code>open sell</code>, <code>open buy</code>, <code>close sell</code>, <code>close buy</code> in case of trades</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interest_pl</td>
<td>number</td>
<td>Actual funding rate of trades and settlements on perpetual instruments</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;user_role</td>
<td>string</td>
<td>Trade role of the user: <code>maker</code> or <code>taker</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>Unique identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>The index price for the instrument during the delivery</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;info</td>
<td>object</td>
<td>Additional information regarding transaction. Strongly dependent on the log entry type</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Settlement/delivery price or the price level of the traded contracts</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;user_seq</td>
<td>integer</td>
<td>Sequential identifier of user transaction</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlement_price</td>
<td>number</td>
<td>The settlement price for the instrument during the delivery</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price_currency</td>
<td>string</td>
<td>Currency symbol associated with the <code>price</code> field value</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;equity</td>
<td>number</td>
<td>Updated equity value after the transaction</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_interest_pl</td>
<td>number</td>
<td>Total session funding rate</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;balance</td>
<td>number</td>
<td>Cash balance after the transaction</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_upl</td>
<td>number</td>
<td>Session unrealized profit and loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_as_cashflow</td>
<td>boolean</td>
<td>Indicator informing whether the cashflow is waiting for settlement or not</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;commission</td>
<td>number</td>
<td>Commission paid so far (in base currency)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_rpl</td>
<td>number</td>
<td>Session realized profit and loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Market price during the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ip</td>
<td>string</td>
<td>The IP address from which the trade was initiated</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;username</td>
<td>string</td>
<td>System name or user defined subaccount alias</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
</tbody></table>
<h2 id='private-get_user_locks'>/private/get_user_locks</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/get_user_locks?"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">74</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/get_user_locks</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">74</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/get_user_locks"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>

  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="mi">74</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"message"</span><span class="p">:</span><span class="s2">"locked in one currency"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"locked"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"BTC"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"locked"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"ETH"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"locked"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"USDC"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"locked"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="s2">"SOL"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves information about locks on user account</p>

<p><strong>Scope: </strong> <code>account:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fget_user_locks" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-153'>Parameters</h3>
<p><em>This method takes no parameters</em></p>
<h3 id='response-153'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;enabled</td>
<td>boolean</td>
<td>Value is set to &#39;true&#39; when user account is locked in currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;message</td>
<td>text</td>
<td>Optional information for user why his account is locked</td>
</tr>
</tbody></table>
<h2 id='private-list_api_keys'>/private/list_api_keys</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/list_api_keys?"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2553</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/list_api_keys</span><span class="dl">"</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2553</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/list_api_keys"</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2553</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1560236001108</span><span class="p">,</span><span class="w">
      </span><span class="nl">"max_scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account:read block_trade:read trade:read_write wallet:read"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SjM57m1T2CfXZ4vZ76X1APjqRlJdtzHI8IwVXoQnfoM"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TiA4AyLPq3"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"enabled_features"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1560236287708</span><span class="p">,</span><span class="w">
      </span><span class="nl">"max_scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account:read_write block_trade:read_write trade:read_write wallet:read_write"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mwNOvbUVyQczytQ5IVM8CbzmgqNJ81WvLKfu6MXcJPs"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aD-KFx-H"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"enabled_features"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves list of api keys. <a href="#creating-editing-removing-api-keys">Important notes</a>.</p>

<p><strong>Scope: </strong> <code>account:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Flist_api_keys" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-154'>Parameters</h3>
<p><em>This method takes no parameters</em></p>
<h3 id='response-154'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;client_id</td>
<td>string</td>
<td>Client identifier used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;client_secret</td>
<td>string</td>
<td>Client secret or MD5 fingerprint of public key used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;default</td>
<td>boolean</td>
<td>Informs whether this api key is default (field is deprecated and will be removed in the future)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;enabled</td>
<td>boolean</td>
<td>Informs whether api key is enabled and can be used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;enabled_features</td>
<td>array of string</td>
<td>List of enabled advanced on-key features. Available options:<br> - <code>restricted_block_trades</code>: Limit the block_trade read the scope of the API key to block trades that have been made using this specific API key<br> - <code>block_trade_approval</code>: Block trades created using this API key require additional user approval.  Methods that use <code>block_rfq</code> scope are not affected by Block Trade approval feature<br></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>key identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ip_whitelist</td>
<td>array</td>
<td>List of IP addresses whitelisted for a selected key</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;max_scope</td>
<td>string</td>
<td>Describes maximal access for tokens generated with given key, possible values: <code>trade:[read, read_write, none]</code>, <code>wallet:[read, read_write, none]</code>, <code>account:[read, read_write, none]</code>, <code>block_trade:[read, read_write, none]</code>, <code>block_rfq:[read, read_write, none]</code>. If scope is not provided, its value is set as none. </BR></BR> Please check details described in <a href="#access-scope">Access scope</a></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;name</td>
<td>string</td>
<td>Api key name that can be displayed in transaction log</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;public_key</td>
<td>string</td>
<td>PEM encoded public key (Ed25519/RSA) used for asymmetric signatures (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='private-list_custody_accounts'>/private/list_custody_accounts</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/list_custody_accounts?currency=BTC"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2515</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/list_custody_accounts</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2515</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/list_custody_accounts"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2515</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"copper"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4KVcFrrzmXBR"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24f97d44-1d72-4641-8527-811268a0bdd3"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w">
    </span><span class="nl">"withdrawals_require_security_key"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pending_withdrawal_balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"auto_deposit"</span><span class="p">:</span><span class="kc">false</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Retrieves user custody accounts list.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Flist_custody_accounts" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-155'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
</tbody></table>
<h3 id='response-155'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>array of <em>object</em></td>
<td>Custody account</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_deposit</td>
<td>boolean</td>
<td>When set to &#39;true&#39; all new funds added to custody balance will be automatically transferred to trading balance</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;balance</td>
<td>number</td>
<td>Amount of funds in given currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;client_id</td>
<td>string</td>
<td>API key &#39;client id&#39; used to reserve/release funds in custody platform, requires scope &#39;custody:read_write&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;deposit_address</td>
<td>string</td>
<td>Address that can be used for deposits</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;external_id</td>
<td>string</td>
<td>User ID in external systems</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;name</td>
<td>string</td>
<td>Custody name</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;pending_withdrawal_addres</td>
<td>string</td>
<td>New withdrawal address that will be used after &#39;withdrawal_address_change&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;pending_withdrawal_balance</td>
<td>number</td>
<td>Amount of funds in given currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;withdrawal_address</td>
<td>string</td>
<td>Address that is used for withdrawals</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;withdrawal_address_change</td>
<td>number</td>
<td>UNIX timestamp after when new withdrawal address will be used for withdrawals</td>
</tr>
</tbody></table>
<h2 id='private-pme-simulate'>/private/pme/simulate</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/pme/simulate?currency=BTC"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2255</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/pme/simulate</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2255</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/pme/simulate"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2255</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"model_params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"currency_pair"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"btc_usd"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"extended_table_factor"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"m_inc"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00005</span><span class="p">,</span><span class="w">
          </span><span class="nl">"min_volatility_for_shock_up"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w">
          </span><span class="nl">"max_delta_shock"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"delta_total_liq_shock_threshold"</span><span class="p">:</span><span class="w"> </span><span class="mi">20000000</span><span class="p">,</span><span class="w">
          </span><span class="nl">"volatility_range_down"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w">
          </span><span class="nl">"volatility_range_up"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w">
          </span><span class="nl">"long_term_vega_power"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.13</span><span class="p">,</span><span class="w">
          </span><span class="nl">"short_term_vega_power"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w">
          </span><span class="nl">"price_range"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.16</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"usd"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"max_offsetable_pnl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"annualised_move_risk"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"extended_dampener"</span><span class="p">:</span><span class="w"> </span><span class="mi">25000</span><span class="p">,</span><span class="w">
          </span><span class="nl">"min_annualised_move"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="p">,</span><span class="w">
          </span><span class="nl">"haircut"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"equity_side_impact"</span><span class="p">:</span><span class="w"> </span><span class="s2">"none"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"pnl_offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"correlation_set"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"btc"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"max_offsetable_pnl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"annualised_move_risk"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.075</span><span class="p">,</span><span class="w">
          </span><span class="nl">"extended_dampener"</span><span class="p">:</span><span class="w"> </span><span class="mi">100000</span><span class="p">,</span><span class="w">
          </span><span class="nl">"min_annualised_move"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.01</span><span class="p">,</span><span class="w">
          </span><span class="nl">"haircut"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"equity_side_impact"</span><span class="p">:</span><span class="w"> </span><span class="s2">"both"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"pnl_offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"correlation_set"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"general"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"mm_factor"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.8</span><span class="p">,</span><span class="w">
        </span><span class="nl">"buckets_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
        </span><span class="nl">"vol_scenarios_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1718619740501</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"aggregated_risk_vectors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"btc_btc"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"standard"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="mf">-0.05968587238095239</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.05968587238095239</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.05968587238095239</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.04272965863636364</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.04272965863636364</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.04272965863636364</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.02724789826086957</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.02724789826086957</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.02724789826086957</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.013056284583333334</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.013056284583333334</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.013056284583333334</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"extended"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"initial_risk_vectors"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"BTC-PERPETUAL"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"standard"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="mf">-0.05991206933333334</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.05991206933333334</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.05991206933333334</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.04289159509090909</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.04289159509090909</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.04289159509090909</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.027351162086956524</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.027351162086956524</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.027351162086956524</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.013105765166666668</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.013105765166666668</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.013105765166666668</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.012097629384615385</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.012097629384615385</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.012097629384615385</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.023299138074074074</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.023299138074074074</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.023299138074074074</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.033700538999999995</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.033700538999999995</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.033700538999999995</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.043384601931034494</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.043384601931034494</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.043384601931034494</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"extended"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="mf">-0.05991206933333334</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.05991206933333334</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.04338460193103449</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.04338460193103449</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.04338460193103449</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.04338460193103449</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.04338460193103449</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.04338460193103449</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"BTC-28JUN24"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"standard"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="mf">0.0002261969523809524</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.0002261969523809524</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.0002261969523809524</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.00016193645454545456</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.00016193645454545456</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.00016193645454545456</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.00010326382608695652</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.00010326382608695652</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.00010326382608695652</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.00004948058333333334</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.00004948058333333334</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.00004948058333333334</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.00004567438461538462</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.00004567438461538462</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.00004567438461538462</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.00008796548148148148</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.00008796548148148148</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.00008796548148148148</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.0001272357857142857</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.0001272357857142857</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.0001272357857142857</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.00016379779310344832</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.00016379779310344832</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.00016379779310344832</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"extended"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="mf">0.0002261969523809524</span><span class="p">,</span><span class="w">
          </span><span class="mf">0.0002261969523809524</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.0001637977931034483</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.0001637977931034483</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.0001637977931034483</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.0001637977931034483</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.0001637977931034483</span><span class="p">,</span><span class="w">
          </span><span class="mf">-0.0001637977931034483</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"margins"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"btc"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"initial_margin_details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"risk_matrix_margin_details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"delta_shock"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"roll_shock"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.00315725898</span><span class="p">,</span><span class="w">
            </span><span class="nl">"worst_case_bucket"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"bucket"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
              </span><span class="nl">"side"</span><span class="p">:</span><span class="w"> </span><span class="s2">"left"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"standard"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"index"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"worst_case"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.05968587238095239</span><span class="p">,</span><span class="w">
            </span><span class="nl">"correlation_contingency"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"risk_matrix_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.06284313098</span><span class="p">,</span><span class="w">
          </span><span class="nl">"spot_margin"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="nl">"mmp_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.06</span><span class="p">,</span><span class="w">
          </span><span class="nl">"open_orders_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.000018212</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.122861343</span><span class="p">,</span><span class="w">
        </span><span class="nl">"maintenance_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.050274504784</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"portfolio"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
      </span><span class="nl">"position"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"BTC-PERPETUAL"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.314538364</span><span class="p">,</span><span class="w">
        </span><span class="nl">"BTC-28JUN24"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.001187534</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"btc_usd"</span><span class="p">:</span><span class="w"> </span><span class="mf">65666.19</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"ticker"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"BTC-PERPETUAL"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">65910.57</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">65666.19</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"BTC-28JUN24"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">67371.75</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">65666.19</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Calculates the Extended Risk Matrix and margin information for the selected currency or against the entire Cross-Collateral portfolio.</p>

<p><strong>Scope: </strong> <code>account:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fpme%2Fsimulate" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-156'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>CROSS</code></td>
<td>The currency for which the Extended Risk Matrix will be calculated. Use <code>CROSS</code> for Cross Collateral simulation.</td>
</tr>
<tr>
<td>add_positions</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>If <code>true</code>, adds simulated positions to current positions, otherwise uses only simulated positions. By default <code>true</code></td>
</tr>
<tr>
<td>simulated_positions</td>
<td>false</td>
<td>object</td>
<td></td>
<td>Object with positions in following form: <code>{InstrumentName1: Position1, InstrumentName2: Position2...}</code>, for example <code>{&quot;BTC-PERPETUAL&quot;: -1.0}</code> (or corresponding URI-encoding for GET). Size in base currency.</td>
</tr>
</tbody></table>
<h3 id='response-156'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>object</td>
<td>Simulation details</td>
</tr>
</tbody></table>
<h2 id='private-remove_api_key'>/private/remove_api_key</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/remove_api_key?id=2"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">8190</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/remove_api_key</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">2</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">8190</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/remove_api_key"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"id"</span> <span class="p">:</span> <span class="mi">2</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">8190</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Removes api key. <a href="#creating-editing-removing-api-keys">Important notes</a>.</p>

<p><strong>Scope: </strong> <code>account:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fremove_api_key" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-157'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Id of key</td>
</tr>
</tbody></table>
<h3 id='response-157'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h2 id='private-remove_subaccount'>/private/remove_subaccount</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/remove_subaccount?subaccount_id=120"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/remove_subaccount</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">subaccount_id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">120</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">6</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/remove_subaccount"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"subaccount_id"</span> <span class="p">:</span> <span class="mi">120</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">6</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Remove empty subaccount.</p>

<p><strong>Scope: </strong> <code>account:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fremove_subaccount" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-158'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>subaccount_id</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The user id for the subaccount</td>
</tr>
</tbody></table>
<h3 id='response-158'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h2 id='private-reset_api_key'>/private/reset_api_key</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/reset_api_key?id=3"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">6524</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/reset_api_key</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">6524</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/reset_api_key"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"id"</span> <span class="p">:</span> <span class="mi">3</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">6524</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1560238942222</span><span class="p">,</span><span class="w">
    </span><span class="nl">"max_scope"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account:read block_trade:read trade:read wallet:read"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"P9Z_c73KaBPwpoTVfsXzehAhjhdJn5kM7Zlz_hhDhE8"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IY2D68DS"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Resets secret in api key. <a href="#creating-editing-removing-api-keys">Important notes</a>.</p>

<p><strong>Scope: </strong> <code>account:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Freset_api_key" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-159'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Id of key</td>
</tr>
</tbody></table>
<h3 id='response-159'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;client_id</td>
<td>string</td>
<td>Client identifier used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;client_secret</td>
<td>string</td>
<td>Client secret or MD5 fingerprint of public key used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;default</td>
<td>boolean</td>
<td>Informs whether this api key is default (field is deprecated and will be removed in the future)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;enabled</td>
<td>boolean</td>
<td>Informs whether api key is enabled and can be used for authentication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;enabled_features</td>
<td>array of string</td>
<td>List of enabled advanced on-key features. Available options:<br> - <code>restricted_block_trades</code>: Limit the block_trade read the scope of the API key to block trades that have been made using this specific API key<br> - <code>block_trade_approval</code>: Block trades created using this API key require additional user approval.  Methods that use <code>block_rfq</code> scope are not affected by Block Trade approval feature<br></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>key identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ip_whitelist</td>
<td>array</td>
<td>List of IP addresses whitelisted for a selected key</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;max_scope</td>
<td>string</td>
<td>Describes maximal access for tokens generated with given key, possible values: <code>trade:[read, read_write, none]</code>, <code>wallet:[read, read_write, none]</code>, <code>account:[read, read_write, none]</code>, <code>block_trade:[read, read_write, none]</code>, <code>block_rfq:[read, read_write, none]</code>. If scope is not provided, its value is set as none. </BR></BR> Please check details described in <a href="#access-scope">Access scope</a></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;name</td>
<td>string</td>
<td>Api key name that can be displayed in transaction log</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;public_key</td>
<td>string</td>
<td>PEM encoded public key (Ed25519/RSA) used for asymmetric signatures (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='private-set_announcement_as_read'>/private/set_announcement_as_read</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/set_announcement_as_read?announcement_id=1550058362418"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">5147</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/set_announcement_as_read</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">announcement_id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1550058362418</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">5147</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/set_announcement_as_read"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"announcement_id"</span> <span class="p">:</span> <span class="mi">1550058362418</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">5147</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Marks an announcement as read, so it will not be shown in <code>get_new_announcements</code>.</p>

<p><strong>Scope: </strong> <code>account:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fset_announcement_as_read" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-160'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>announcement_id</td>
<td>true</td>
<td>number</td>
<td></td>
<td>the ID of the announcement</td>
</tr>
</tbody></table>
<h3 id='response-160'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h2 id='private-set_disabled_trading_products'>/private/set_disabled_trading_products</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/set_disabled_trading_products?trading_products=%5B%22future_combos%22%2C%22option_combos%22%2C%22spots%22%5D&amp;user_id=1"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/set_disabled_trading_products</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">trading_products</span><span class="dl">"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="dl">"</span><span class="s2">future_combos</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">option_combos</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">spots</span><span class="dl">"</span>
    <span class="p">],</span>
    <span class="dl">"</span><span class="s2">user_id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/set_disabled_trading_products"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"trading_products"</span> <span class="p">:</span> <span class="p">[</span>
      <span class="s">"future_combos"</span><span class="p">,</span>
      <span class="s">"option_combos"</span><span class="p">,</span>
      <span class="s">"spots"</span>
    <span class="p">],</span>
    <span class="s">"user_id"</span> <span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Configure disabled trading products for subaccounts. Only main accounts can modify this for subaccounts.</p>

<p><strong>Scope: </strong> <code>account:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fset_disabled_trading_products" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-161'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_id</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>Id of a (sub)account</td>
</tr>
<tr>
<td>trading_products</td>
<td>true</td>
<td>array</td>
<td></td>
<td>List of available trading products. Available products: perpetual, futures, options, future_combos, option_combos, spots</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id='response-161'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h2 id='private-set_email_for_subaccount'>/private/set_email_for_subaccount</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/set_email_for_subaccount?email=user_1_1%40email.com&amp;sid=7"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1667</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/set_email_for_subaccount</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">sid</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">email</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="285d5b4d5a77197719684d45494144064b4745">[email&#160;protected]</a></span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1667</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/set_email_for_subaccount"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"sid"</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
    <span class="s">"email"</span> <span class="p">:</span> <span class="s">"<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="c4b1b7a1b69bf59bf584a1a9a5ada8eaa7aba9">[email&#160;protected]</a>"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1667</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Assign an email address to a subaccount. User will receive an email with a confirmation link.</p>

<p><strong>Scope: </strong> <code>account:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fset_email_for_subaccount" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-162'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>sid</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The user id for the subaccount</td>
</tr>
<tr>
<td>email</td>
<td>true</td>
<td>string</td>
<td></td>
<td>The email address for the subaccount</td>
</tr>
</tbody></table>
<h3 id='response-162'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h2 id='private-set_email_language'>/private/set_email_language</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/set_email_language?language=en"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">3269</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/set_email_language</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">language</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">en</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">3269</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/set_email_language"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"language"</span> <span class="p">:</span> <span class="s">"en"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3269</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Changes the language to be used for emails.</p>

<p><strong>Scope: </strong> <code>account:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fset_email_language" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-163'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>language</td>
<td>true</td>
<td>string</td>
<td></td>
<td>The abbreviated language name. Valid values include <code>&quot;en&quot;</code>, <code>&quot;ko&quot;</code>, <code>&quot;zh&quot;</code>,  <code>&quot;ja&quot;</code>, <code>&quot;ru&quot;</code></td>
</tr>
</tbody></table>
<h3 id='response-163'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h2 id='private-set_self_trading_config'>/private/set_self_trading_config</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/set_self_trading_config?block_rfq_self_match_prevention=true&amp;extended_to_subaccounts=true&amp;mode=cancel_maker"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/set_self_trading_config</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">mode</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">cancel_maker</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">extended_to_subaccounts</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">block_rfq_self_match_prevention</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">true</span>
  <span class="p">},</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/set_self_trading_config"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"mode"</span> <span class="p">:</span> <span class="s">"cancel_maker"</span><span class="p">,</span>
    <span class="s">"extended_to_subaccounts"</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="s">"block_rfq_self_match_prevention"</span> <span class="p">:</span> <span class="n">true</span>
  <span class="p">},</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Configure self trading behavior</p>

<p><strong>Scope: </strong> <code>account:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fset_self_trading_config" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-164'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>mode</td>
<td>true</td>
<td>string</td>
<td><code>reject_taker</code><br><code>cancel_maker</code></td>
<td>Self trading prevention behavior: <code>reject_taker</code> (reject the incoming order), <code>cancel_maker</code> (cancel the matched order in the book)</td>
</tr>
<tr>
<td>extended_to_subaccounts</td>
<td>true</td>
<td>boolean</td>
<td></td>
<td>If value is <code>true</code> trading is prevented between subaccounts of given account, otherwise they are treated separately</td>
</tr>
<tr>
<td>block_rfq_self_match_prevention</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>When Block RFQ Self Match Prevention is enabled, it ensures that RFQs cannot be executed between accounts that belong to the same legal entity. This setting is independent of the general self-match prevention settings and must be configured separately.</td>
</tr>
</tbody></table>
<h3 id='response-164'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h2 id='private-simulate_portfolio'>/private/simulate_portfolio</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/simulate_portfolio?add_positions=true&amp;currency=BTC&amp;simulated_positions=%7B%22BTC-PERPETUAL%22%3A1.0%7D"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">22222</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/simulate_portfolio</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">add_positions</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">simulated_positions</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">BTC-PERPETUAL</span><span class="dl">"</span> <span class="p">:</span> <span class="mf">1.0</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">22222</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/simulate_portfolio"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"currency"</span> <span class="p">:</span> <span class="s">"BTC"</span><span class="p">,</span>
    <span class="s">"add_positions"</span> <span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="s">"simulated_positions"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="s">"BTC-PERPETUAL"</span> <span class="p">:</span> <span class="mf">1.0</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"projected_initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">37662472.03416069</span><span class="p">,</span><span class="w">
      </span><span class="nl">"initial_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">37662472.03416069</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_pl"</span><span class="p">:</span><span class="w"> </span><span class="mf">40419.10179263</span><span class="p">,</span><span class="w">
      </span><span class="nl">"additional_reserve"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"available_withdrawal_funds"</span><span class="p">:</span><span class="w"> </span><span class="mf">115871741.76065847</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options_pl"</span><span class="p">:</span><span class="w"> </span><span class="mf">921.55562578</span><span class="p">,</span><span class="w">
      </span><span class="nl">"delta_total_map"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"btc_usd"</span><span class="p">:</span><span class="w"> </span><span class="mf">68024.519462366</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"available_subaccount_transfer_funds"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"projected_delta_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">69080.932029</span><span class="p">,</span><span class="w">
      </span><span class="nl">"projected_maintenance_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">30129215.84817124</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_equity_usd"</span><span class="p">:</span><span class="w"> </span><span class="mf">13075634611389.318</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options_gamma"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.03907</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options_theta"</span><span class="p">:</span><span class="w"> </span><span class="mf">142583.29246</span><span class="p">,</span><span class="w">
      </span><span class="nl">"spot_reserve"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_initial_margin_usd"</span><span class="p">:</span><span class="w"> </span><span class="mf">3139528603778.822</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options_vega"</span><span class="p">:</span><span class="w"> </span><span class="mf">-39322.23046</span><span class="p">,</span><span class="w">
      </span><span class="nl">"margin_balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">153534213.79481918</span><span class="p">,</span><span class="w">
      </span><span class="nl">"futures_session_rpl"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.309136</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options_gamma_map"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"btc_usd"</span><span class="p">:</span><span class="w"> </span><span class="mf">-0.03907</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"available_funds"</span><span class="p">:</span><span class="w"> </span><span class="mf">115871741.76065847</span><span class="p">,</span><span class="w">
      </span><span class="nl">"futures_pl"</span><span class="p">:</span><span class="w"> </span><span class="mf">39497.54616685</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cross_collateral_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"delta_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">69080.932029</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options_session_rpl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_margin_balance_usd"</span><span class="p">:</span><span class="w"> </span><span class="mf">12798550648250.61</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options_value"</span><span class="p">:</span><span class="w"> </span><span class="mf">-1056.41256672</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options_session_upl"</span><span class="p">:</span><span class="w"> </span><span class="mf">-174.67960675</span><span class="p">,</span><span class="w">
      </span><span class="nl">"maintenance_margin"</span><span class="p">:</span><span class="w"> </span><span class="mf">30129215.84817124</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_maintenance_margin_usd"</span><span class="p">:</span><span class="w"> </span><span class="mf">2511559381417.215</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options_vega_map"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"btc_usd"</span><span class="p">:</span><span class="w"> </span><span class="mf">-39322.23046</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"session_rpl"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.309136</span><span class="p">,</span><span class="w">
      </span><span class="nl">"locked_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"session_upl"</span><span class="p">:</span><span class="w"> </span><span class="mf">-339.16214185</span><span class="p">,</span><span class="w">
      </span><span class="nl">"margin_model"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cross_pm"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"portfolio_margining_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"equity"</span><span class="p">:</span><span class="w"> </span><span class="mf">150075253.91354558</span><span class="p">,</span><span class="w">
      </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">150076473.4995114</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_delta_total_usd"</span><span class="p">:</span><span class="w"> </span><span class="mf">6157454218.3753195</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fee_balance"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options_delta"</span><span class="p">:</span><span class="w"> </span><span class="mf">2883.38481</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options_theta_map"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"btc_usd"</span><span class="p">:</span><span class="w"> </span><span class="mf">142583.29246</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"futures_session_upl"</span><span class="p">:</span><span class="w"> </span><span class="mf">-164.48253509</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"usIn"</span><span class="p">:</span><span class="w"> </span><span class="mi">1742210019774525</span><span class="p">,</span><span class="w">
    </span><span class="nl">"usOut"</span><span class="p">:</span><span class="w"> </span><span class="mi">1742210019788175</span><span class="p">,</span><span class="w">
    </span><span class="nl">"usDiff"</span><span class="p">:</span><span class="w"> </span><span class="mi">13650</span><span class="p">,</span><span class="w">
    </span><span class="nl">"testnet"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Calculates portfolio margin info for simulated position or current position of the user. This request has a special restricted rate limit (not more than once per a second).</p>

<p><strong>Scope: </strong> <code>account:read</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsimulate_portfolio" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-165'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code></td>
<td>The currency symbol</td>
</tr>
<tr>
<td>add_positions</td>
<td>false</td>
<td>boolean</td>
<td></td>
<td>If <code>true</code>, adds simulated positions to current positions, otherwise uses only simulated positions. By default <code>true</code></td>
</tr>
<tr>
<td>simulated_positions</td>
<td>false</td>
<td>object</td>
<td></td>
<td>Object with positions in following form: <code>{InstrumentName1: Position1, InstrumentName2: Position2...}</code>, for example <code>{&quot;BTC-PERPETUAL&quot;: -1000.0}</code> (or corresponding URI-encoding for GET). For futures in USD, for options in base currency.</td>
</tr>
</tbody></table>
<h3 id='response-165'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>object</td>
<td>Portfolio details</td>
</tr>
</tbody></table>
<h2 id='private-toggle_notifications_from_subaccount'>/private/toggle_notifications_from_subaccount</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/toggle_notifications_from_subaccount?sid=7&amp;state=true"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">9995</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/toggle_notifications_from_subaccount</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">sid</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">state</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">9995</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/toggle_notifications_from_subaccount"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"sid"</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
    <span class="s">"state"</span> <span class="p">:</span> <span class="bp">True</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">9995</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Enable or disable sending of notifications for the subaccount.</p>

<p><strong>Scope: </strong> <code>account:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Ftoggle_notifications_from_subaccount" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-166'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>sid</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The user id for the subaccount</td>
</tr>
<tr>
<td>state</td>
<td>true</td>
<td>boolean</td>
<td></td>
<td>enable (<code>true</code>) or disable (<code>false</code>) notifications</td>
</tr>
</tbody></table>
<h3 id='response-166'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h2 id='private-toggle_subaccount_login'>/private/toggle_subaccount_login</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-X</span> GET <span class="s2">"https://test.deribit.com/api/v2/private/toggle_subaccount_login?sid=7&amp;state=enable"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Authorization: Bearer 1529453804065.h2QrBgvn.oS36pCOmuK9EX7954lzCSkUioEtTMg7F5ShToM0ZfYlqU05OquXkQIe2_DDEkPhzmoPp1fBp0ycXShR_0jf-SMSXEdVqxLRWuOw-_StG5BMjToiAl27CbHY4P92MPhlMblTOtTImE81-5dFdyDVydpBwmlfKM3OSQ39kulP9bbfw-2jhyegOL0AgqJTY_tj554oHCQFTbq0A0ZWukukmxL2yu6iy34XdzaJB26Igy-3UxGBMwFu53EhjKBweh7xyP2nDm57-wybndJMtSyTGDXH3vjBVclo1iup5yRP"</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
<span class="p">{</span>
  <span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">938</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">private/toggle_subaccount_login</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="dl">"</span><span class="s2">sid</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">state</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">enable</span><span class="dl">"</span>
  <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the response...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="c1">// ------------------- </span>
    <span class="c1">// Before sending message, make sure that your connection</span>
    <span class="c1">// is authenticated (use public/auth call before) </span>
    <span class="c1">// ------------------- </span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="n">msg</span> <span class="o">=</span> \
<span class="p">{</span>
  <span class="s">"jsonrpc"</span> <span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
  <span class="s">"id"</span> <span class="p">:</span> <span class="mi">938</span><span class="p">,</span>
  <span class="s">"method"</span> <span class="p">:</span> <span class="s">"private/toggle_subaccount_login"</span><span class="p">,</span>
  <span class="s">"params"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="s">"sid"</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
    <span class="s">"state"</span> <span class="p">:</span> <span class="s">"enable"</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="c1">###############
</span>       <span class="c1"># Before sending message, make sure that your connection
</span>       <span class="c1"># is authenticated (use public/auth call before) 
</span>       <span class="c1">###############
</span>       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the response...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this (real example):</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">938</span><span class="p">,</span><span class="w">
    </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ok"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<p>Enable or disable login for a subaccount. If login is disabled and a session for the subaccount exists, this session will be terminated.</p>

<p><strong>Scope: </strong> <code>account:read_write</code></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Ftoggle_subaccount_login" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private method; it can only be used after authentication.</div></aside>
<h3 id='parameters-167'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>sid</td>
<td>true</td>
<td>integer</td>
<td></td>
<td>The user id for the subaccount</td>
</tr>
<tr>
<td>state</td>
<td>true</td>
<td>string</td>
<td><code>enable</code><br><code>disable</code></td>
<td>enable or disable login.</td>
</tr>
</tbody></table>
<h3 id='response-167'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>The id that was sent in the request</td>
</tr>
<tr>
<td>jsonrpc</td>
<td>string</td>
<td>The JSON-RPC version (2.0)</td>
</tr>
<tr>
<td>result</td>
<td>string</td>
<td>Result of method execution. <code>ok</code> in case of success</td>
</tr>
</tbody></table>
<h1 id='subscriptions'>Subscriptions</h1>
<p>The <a href="#private-subscribe">subscribe</a> method can be used to subscribe to one
or more <em>channels</em>. This section provides an overview of the channels and
the notifications that the subscriber will receive for each of those channels.</p>

<p>In most cases the channel name is constructed from a couple
of elements. This makes it possible to specify exactly which
information is required, and/or the frequency or aggregation level.
These elements are considered parameters for the subscription.</p>

<p>For example, when subscribing to the channel
<code>book.BTC-27JUL18.10.20.100ms</code>, the element
<code>BTC-27JUL18</code> specifies that the name of the instrument
(see <a href="#naming">naming</a>), <code>10</code> means that the results
should be grouped to that precision, etc.</p>

<p>As described in <a href="#notifications">notifications</a>, response data includes fields
required by JSON-RPC and part dedicated for subscription data.</p>

<p>
  <table>
      <thead>
          <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
          </tr>
      </thead>
      <tbody>
          <tr>
              <td>jsonrpc</td>
              <td>string</td>
              <td>The JSON-RPC version (2.0)</td>
          </tr>
          <tr>
              <td>method</td>
              <td>string</td>
              <td>Here it's always <code>subscription</code></td>
          </tr>
          <tr>
              <td>params</td>
              <td><em>object</em></td>
              <td></td>
          </tr>
          <tr>
              <td>&nbsp;&nbsp;›&nbsp;&nbsp;channel</td>
              <td>string</td>
              <td>The same channel as given when subscribing to notifications</td>
          </tr>
          <tr>
              <td>&nbsp;&nbsp;›&nbsp;&nbsp;label</td>
              <td>string</td>
              <td>The same label as given when subscribing to notifications (present only when provided in <code>private/subscribe</code>; only for private channels)</td>
          </tr>
          <tr>
              <td>&nbsp;&nbsp;›&nbsp;&nbsp;data</td>
              <td><em>object</em></td>
              <td>Data specific for the channel</td>
          </tr>
      </tbody>
  </table>
</p>

<p>For all the following channel types only specific <code>data</code> part will be described.</p>
<h2 id='announcements'>announcements</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">announcements</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"announcements"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"announcements"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Lorem ipsum dolor sit amet, consectetur adipiscing elit."</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1532593832021</span><span class="p">,</span><span class="w">
            </span><span class="nl">"important"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"publication_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1532593832021</span><span class="p">,</span><span class="w">
            </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example announcement"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>General announcements concerning the Deribit platform.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=announcements" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters'>Channel Parameters</h3>
<p><em>This channel takes no parameters</em></p>
<h3 id='response-168'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;action</td>
<td>string</td>
<td>Action taken by the platform administrators. Published a <code>new</code> announcement, or <code>delete</code>d the old one</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;body</td>
<td>string</td>
<td>HTML-formatted announcement body</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;confirmation</td>
<td>boolean</td>
<td>Whether the user confirmation is required for this announcement</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>Announcement&#39;s identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;important</td>
<td>boolean</td>
<td>Whether the announcement is marked as important</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;publication_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch) of announcement publication</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;title</td>
<td>string</td>
<td>Announcement&#39;s title</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;unread</td>
<td>integer</td>
<td>The number of previous unread announcements (optional, only for authorized users).</td>
</tr>
</tbody></table>
<h2 id='block_rfq-maker-quotes-currency'>block_rfq.maker.quotes.{currency}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">private/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">block_rfq.maker.quotes.any</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"private/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"block_rfq.maker.quotes.any"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"replaced"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"quote_state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="nl">"legs"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"ratio"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-16NOV24-82000-C"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"last_update_timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1731665928291</span><span class="p">,</span><span class="w">
        </span><span class="nl">"label"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"example_quote"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"filled_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"creation_timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1731665928291</span><span class="p">,</span><span class="w">
        </span><span class="nl">"block_rfq_quote_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1301</span><span class="p">,</span><span class="w">
        </span><span class="nl">"block_rfq_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">724</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"block_rfq.maker.quotes.any"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get notification about state of your Block RFQ quotes</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=block_rfq.maker.quotes.%7Bcurrency%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private subscription; subscribing is only possible when authenticated.</div></aside>
<h3 id='channel-parameters-2'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>any</code></td>
<td>The currency symbol or <code>&quot;any&quot;</code> for all</td>
</tr>
</tbody></table>
<h3 id='response-169'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the quote on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp when quote was created (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction of trade from the maker perspective</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;execution_instruction</td>
<td>string</td>
<td><p>Execution instruction of the quote. Default - <code>any_part_of</code></p> <ul> <li><code>&quot;all_or_none (AON)&quot;</code> - The quote can only be filled entirely or not at all, ensuring that its amount matches the amount specified in the Block RFQ. Additionally, &#39;all_or_none&#39; quotes have priority over &#39;any_part_of&#39; quotes at the same price level.</li> <li><code>&quot;any_part_of (APO)&quot;</code> - The quote can be filled either partially or fully, with the filled amount potentially being less than the Block RFQ amount. </li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the quote. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;hedge</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>integer</td>
<td>It represents the requested hedge leg size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price for a hedge leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label for the quote (maximum 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>Timestamp of the last update of the quote (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price for a leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ratio</td>
<td>integer</td>
<td>Ratio of amount between legs</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price of a quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_state</td>
<td>string</td>
<td>State of the quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_state_reason</td>
<td>string</td>
<td>Reason of quote cancellation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the quote was edited, otherwise <code>false</code>.</td>
</tr>
</tbody></table>
<h2 id='block_rfq-maker-currency'>block_rfq.maker.{currency}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">private/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">block_rfq.maker.btc</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"private/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"block_rfq.maker.btc"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"taker_rating"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1-2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"role"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"maker"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"legs"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"ratio"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-18NOV24-82000-C"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"expiration_timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1731664976443</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1731664676443</span><span class="p">,</span><span class="w">
      </span><span class="nl">"combo_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-18NOV24-82000-C"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"block_rfq_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">722</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"block_rfq.maker.btc"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get notification when new Block RFQ is created</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=block_rfq.maker.%7Bcurrency%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private subscription; subscribing is only possible when authenticated.</div></aside>
<h3 id='channel-parameters-3'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>any</code></td>
<td>The currency symbol or <code>&quot;any&quot;</code> for all</td>
</tr>
</tbody></table>
<h3 id='response-170'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that created the Block RFQ on behalf of the user (optional, visible only to taker).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;asks</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;execution_instruction</td>
<td>string</td>
<td><p>Execution instruction of the quote. Default - <code>any_part_of</code></p> <ul> <li><code>&quot;all_or_none (AON)&quot;</code> - The quote can only be filled entirely or not at all, ensuring that its amount matches the amount specified in the Block RFQ. Additionally, &#39;all_or_none&#39; quotes have priority over &#39;any_part_of&#39; quotes at the same price level.</li> <li><code>&quot;any_part_of (APO)&quot;</code> - The quote can be filled either partially or fully, with the filled amount potentially being less than the Block RFQ amount. </li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;expires_at</td>
<td>integer</td>
<td>The timestamp when the quote expires (milliseconds since the Unix epoch), equal to the earliest expiry of placed quotes</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>Timestamp of the last update of the quote (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;makers</td>
<td>array of string</td>
<td>Maker of the quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price of a quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;bids</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;execution_instruction</td>
<td>string</td>
<td><p>Execution instruction of the quote. Default - <code>any_part_of</code></p> <ul> <li><code>&quot;all_or_none (AON)&quot;</code> - The quote can only be filled entirely or not at all, ensuring that its amount matches the amount specified in the Block RFQ. Additionally, &#39;all_or_none&#39; quotes have priority over &#39;any_part_of&#39; quotes at the same price level.</li> <li><code>&quot;any_part_of (APO)&quot;</code> - The quote can be filled either partially or fully, with the filled amount potentially being less than the Block RFQ amount. </li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;expires_at</td>
<td>integer</td>
<td>The timestamp when the quote expires (milliseconds since the Unix epoch), equal to the earliest expiry of placed quotes</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>Timestamp of the last update of the quote (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;makers</td>
<td>array of string</td>
<td>Maker of the quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price of a quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Unique combo identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp when Block RFQ was created (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;disclosed</td>
<td>boolean</td>
<td>Indicates whether the RFQ was created as non-anonymous, meaning taker and maker aliases are visible to counterparties.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;expiration_timestamp</td>
<td>integer</td>
<td>The timestamp when the Block RFQ will expire (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;hedge</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>integer</td>
<td>It represents the requested hedge leg size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price for a hedge leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;included_in_taker_rating</td>
<td>boolean</td>
<td>Indicates whether the RFQ is included in the taker&#39;s rating calculation. Present only for closed RFQs created by the requesting taker.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_prices</td>
<td>array of number</td>
<td>A list of index prices for the underlying instrument(s) at the time of trade execution.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label for the Block RFQ (maximum 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ratio</td>
<td>integer</td>
<td>Ratio of amount between legs</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;makers</td>
<td>array of string</td>
<td>List of targeted Block RFQ makers</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>The mark price for the instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;min_trade_amount</td>
<td>number</td>
<td>Minimum amount for trading</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;role</td>
<td>string</td>
<td>Role of the user in Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>State of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;taker_rating</td>
<td>string</td>
<td>Rating of the taker</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For options, linear futures, linear perpetuals and spots the amount is denominated in the underlying base currency coin. The inverse perpetuals and inverse futures are denominated in USD units.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;hedge_amount</td>
<td>number</td>
<td>Amount of the hedge leg. For linear futures, linear perpetuals and spots the amount is denominated in the underlying base currency coin. The inverse perpetuals and inverse futures are denominated in USD units.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maker</td>
<td>string</td>
<td>Alias of the maker (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
</tbody></table>
<h2 id='block_rfq-taker-currency'>block_rfq.taker.{currency}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">private/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">block_rfq.taker.btc</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"private/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"block_rfq.taker.btc"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"taker_rating"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1-2"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"role"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"taker"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"min_trade_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
      </span><span class="nl">"makers"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"MAKER1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"MAKER2"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"legs"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"ratio"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-21FEB25"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"ratio"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-28FEB25"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"ratio"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"label"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"example"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"expiration_timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1740048210438</span><span class="p">,</span><span class="w">
      </span><span class="nl">"disclosed"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1740047910438</span><span class="p">,</span><span class="w">
      </span><span class="nl">"combo_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"block_rfq_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">321</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bids"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">291664.14</span><span class="p">,</span><span class="w">
          </span><span class="nl">"makers"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"ANONYMOUS"</span><span class="w">
          </span><span class="p">],</span><span class="w">
          </span><span class="nl">"last_update_timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1740047910507</span><span class="p">,</span><span class="w">
          </span><span class="nl">"execution_instruction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"any_part_of"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"asks"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">

      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10000</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"block_rfq.taker.btc"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get notification about state of your Block RFQ. <code>trades</code> are only visible if the Block RFQ was filled. Please note that after Block RFQ creation, a grace period of 5 seconds begins, during which the taker cannot see quotes or trade the Block RFQ.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=block_rfq.taker.%7Bcurrency%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private subscription; subscribing is only possible when authenticated.</div></aside>
<h3 id='channel-parameters-4'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>any</code></td>
<td>The currency symbol or <code>&quot;any&quot;</code> for all</td>
</tr>
</tbody></table>
<h3 id='response-171'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that created the Block RFQ on behalf of the user (optional, visible only to taker).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;asks</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;execution_instruction</td>
<td>string</td>
<td><p>Execution instruction of the quote. Default - <code>any_part_of</code></p> <ul> <li><code>&quot;all_or_none (AON)&quot;</code> - The quote can only be filled entirely or not at all, ensuring that its amount matches the amount specified in the Block RFQ. Additionally, &#39;all_or_none&#39; quotes have priority over &#39;any_part_of&#39; quotes at the same price level.</li> <li><code>&quot;any_part_of (APO)&quot;</code> - The quote can be filled either partially or fully, with the filled amount potentially being less than the Block RFQ amount. </li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;expires_at</td>
<td>integer</td>
<td>The timestamp when the quote expires (milliseconds since the Unix epoch), equal to the earliest expiry of placed quotes</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>Timestamp of the last update of the quote (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;makers</td>
<td>array of string</td>
<td>Maker of the quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price of a quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;bids</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;execution_instruction</td>
<td>string</td>
<td><p>Execution instruction of the quote. Default - <code>any_part_of</code></p> <ul> <li><code>&quot;all_or_none (AON)&quot;</code> - The quote can only be filled entirely or not at all, ensuring that its amount matches the amount specified in the Block RFQ. Additionally, &#39;all_or_none&#39; quotes have priority over &#39;any_part_of&#39; quotes at the same price level.</li> <li><code>&quot;any_part_of (APO)&quot;</code> - The quote can be filled either partially or fully, with the filled amount potentially being less than the Block RFQ amount. </li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;expires_at</td>
<td>integer</td>
<td>The timestamp when the quote expires (milliseconds since the Unix epoch), equal to the earliest expiry of placed quotes</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>Timestamp of the last update of the quote (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;makers</td>
<td>array of string</td>
<td>Maker of the quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price of a quote</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Unique combo identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp when Block RFQ was created (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;disclosed</td>
<td>boolean</td>
<td>Indicates whether the RFQ was created as non-anonymous, meaning taker and maker aliases are visible to counterparties.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;expiration_timestamp</td>
<td>integer</td>
<td>The timestamp when the Block RFQ will expire (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;hedge</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>integer</td>
<td>It represents the requested hedge leg size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price for a hedge leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;included_in_taker_rating</td>
<td>boolean</td>
<td>Indicates whether the RFQ is included in the taker&#39;s rating calculation. Present only for closed RFQs created by the requesting taker.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_prices</td>
<td>array of number</td>
<td>A list of index prices for the underlying instrument(s) at the time of trade execution.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label for the Block RFQ (maximum 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ratio</td>
<td>integer</td>
<td>Ratio of amount between legs</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;makers</td>
<td>array of string</td>
<td>List of targeted Block RFQ makers</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>The mark price for the instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;min_trade_amount</td>
<td>number</td>
<td>Minimum amount for trading</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;role</td>
<td>string</td>
<td>Role of the user in Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>State of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;taker_rating</td>
<td>string</td>
<td>Rating of the taker</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For options, linear futures, linear perpetuals and spots the amount is denominated in the underlying base currency coin. The inverse perpetuals and inverse futures are denominated in USD units.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;hedge_amount</td>
<td>number</td>
<td>Amount of the hedge leg. For linear futures, linear perpetuals and spots the amount is denominated in the underlying base currency coin. The inverse perpetuals and inverse futures are denominated in USD units.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maker</td>
<td>string</td>
<td>Alias of the maker (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
</tbody></table>
<h2 id='block_rfq-trades-currency'>block_rfq.trades.{currency}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">block_rfq.trades.any</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"block_rfq.trades.any"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"trades"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">95318.72</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1739869829823</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">95318.72</span><span class="p">,</span><span class="w">
      </span><span class="nl">"legs"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"ratio"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">95318.72</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">939</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"combo_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"block_rfq.trades.any"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get notification about recent Block RFQ trades</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=block_rfq.trades.%7Bcurrency%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-5'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>any</code></td>
<td>The currency symbol or <code>&quot;any&quot;</code> for all</td>
</tr>
</tbody></table>
<h3 id='response-172'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>This value multiplied by the ratio of a leg gives trade size on that leg.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Unique combo identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;hedge</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>integer</td>
<td>It represents the requested hedge leg size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price for a hedge leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>ID of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price for a leg</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ratio</td>
<td>integer</td>
<td>Ratio of amount between legs</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For options, linear futures, linear perpetuals and spots the amount is denominated in the underlying base currency coin. The inverse perpetuals and inverse futures are denominated in USD units.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;hedge_amount</td>
<td>number</td>
<td>Amount of the hedge leg. For linear futures, linear perpetuals and spots the amount is denominated in the underlying base currency coin. The inverse perpetuals and inverse futures are denominated in USD units.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
</tbody></table>
<h2 id='block_trade_confirmations'>block_trade_confirmations</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">block_trade_confirmations</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"block_trade_confirmations"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"user_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
      </span><span class="nl">"trades"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">70246.66</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1711468468131</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"value"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"rejected"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1711468632693</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"role"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"maker"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"nonce"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"bt-jdqv98"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"block_trade_confirmations"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Provides notifications regarding block trade approval</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=block_trade_confirmations" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-6'>Channel Parameters</h3>
<p><em>This channel takes no parameters</em></p>
<h3 id='response-173'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that executed the block trade on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;counterparty_state</td>
<td><em>object</em></td>
<td>State of the pending block trade for the other party (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>State timestamp.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;value</td>
<td>string</td>
<td>State value.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;nonce</td>
<td>string</td>
<td>Nonce that can be used to approve or reject pending block trade.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;role</td>
<td>string</td>
<td>Trade role of the user: <code>maker</code> or <code>taker</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td><em>object</em></td>
<td>State of the pending block trade for current user.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>State timestamp.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;value</td>
<td>string</td>
<td>State value.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>Timestamp that can be used to approve or reject pending block trade.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;user_id</td>
<td>integer</td>
<td>Unique user identifier</td>
</tr>
</tbody></table>
<h2 id='block_trade_confirmations-currency'>block_trade_confirmations.{currency}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">block_trade_confirmations.btc</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"block_trade_confirmations.btc"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"user_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
      </span><span class="nl">"trades"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">70246.66</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1711468468131</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"value"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"rejected"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1711468632693</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"role"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"maker"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"nonce"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"bt-jdqv98"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"block_trade_confirmations.btc"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Provides notifications regarding block trade approval. Supports filtering by currency.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=block_trade_confirmations.%7Bcurrency%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-7'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>any</code></td>
<td>The currency symbol or <code>&quot;any&quot;</code> for all</td>
</tr>
</tbody></table>
<h3 id='response-174'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that executed the block trade on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;counterparty_state</td>
<td><em>object</em></td>
<td>State of the pending block trade for the other party (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>State timestamp.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;value</td>
<td>string</td>
<td>State value.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;nonce</td>
<td>string</td>
<td>Nonce that can be used to approve or reject pending block trade.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;role</td>
<td>string</td>
<td>Trade role of the user: <code>maker</code> or <code>taker</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td><em>object</em></td>
<td>State of the pending block trade for current user.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>State timestamp.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;value</td>
<td>string</td>
<td>State value.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>Timestamp that can be used to approve or reject pending block trade.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;user_id</td>
<td>integer</td>
<td>Unique user identifier</td>
</tr>
</tbody></table>
<h2 id='book-instrument_name-group-depth-interval'>book.{instrument_name}.{group}.{depth}.{interval}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">book.ETH-PERPETUAL.100.1.100ms</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"book.ETH-PERPETUAL.100.1.100ms"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1554375447971</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ETH-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"change_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">109615</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bids"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">[</span><span class="w">
          </span><span class="mi">160</span><span class="p">,</span><span class="w">
          </span><span class="mi">40</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"asks"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">[</span><span class="w">
          </span><span class="mi">161</span><span class="p">,</span><span class="w">
          </span><span class="mi">20</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"book.ETH-PERPETUAL.100.1.100ms"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Notifies about changes to the order book for a certain instrument.</p>

<p>Notifications are sent once per specified interval, with prices grouped by (rounded to) the specified group, showing the complete order book to the specified depth (number of price levels).</p>
<p>The &#39;asks&#39; and the &#39;bids&#39; elements in the response are both a &#39;list of lists&#39;. Each element in the outer list is a list of exactly two elements: price and amount.</p>
<p><em>price</em> is a price level (USD per BTC, rounded as specified by the &#39;group&#39; parameter for the subscription).</p>
<p><em>amount</em> indicates the amount of all orders at price level. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</p></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=book.%7Binstrument_name%7D.%7Bgroup%7D.%7Bdepth%7D.%7Binterval%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-8'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>group</td>
<td>true</td>
<td>string</td>
<td><code>none</code><br><code>1</code><br><code>2</code><br><code>5</code><br><code>10</code><br><code>25</code><br><code>100</code><br><code>250</code></td>
<td>Group prices (by rounding). Use <code>none</code> for no grouping.<br> For ETH cryptocurrency, real <code>group</code> is divided by 100.0, e.g. given value <code>5</code> means using <code>0.05</code><br><br> Allowed values for BTC - <code>none</code>, <code>1</code>, <code>2</code>, <code>5</code>, <code>10</code><br> Allowed values for ETH - <code>none</code>, <code>5</code>, <code>10</code>, <code>25</code>, <code>100</code>, <code>250</code></td>
</tr>
<tr>
<td>depth</td>
<td>true</td>
<td>integer</td>
<td><code>1</code><br><code>10</code><br><code>20</code></td>
<td>Number of price levels to be included.</td>
</tr>
<tr>
<td>interval</td>
<td>true</td>
<td>string</td>
<td><code>100ms</code><br><code>agg2</code></td>
<td>Frequency of notifications. Events will be aggregated over this interval.</td>
</tr>
</tbody></table>
<h3 id='response-175'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;asks</td>
<td>array of [price, amount]</td>
<td>List of asks</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;bids</td>
<td>array of [price, amount]</td>
<td>List of bids</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;change_id</td>
<td>integer</td>
<td>id of the notification</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of last change (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='book-instrument_name-interval'>book.{instrument_name}.{interval}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">book.BTC-PERPETUAL.100ms</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"book.BTC-PERPETUAL.100ms"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send first notification like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"snapshot"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1554373962454</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"change_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">297217</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bids"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">[</span><span class="w">
          </span><span class="s2">"new"</span><span class="p">,</span><span class="w">
          </span><span class="mf">5042.34</span><span class="p">,</span><span class="w">
          </span><span class="mi">30</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="p">[</span><span class="w">
          </span><span class="s2">"new"</span><span class="p">,</span><span class="w">
          </span><span class="mf">5041.94</span><span class="p">,</span><span class="w">
          </span><span class="mi">20</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"asks"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">[</span><span class="w">
          </span><span class="s2">"new"</span><span class="p">,</span><span class="w">
          </span><span class="mf">5042.64</span><span class="p">,</span><span class="w">
          </span><span class="mi">40</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="p">[</span><span class="w">
          </span><span class="s2">"new"</span><span class="p">,</span><span class="w">
          </span><span class="mf">5043.3</span><span class="p">,</span><span class="w">
          </span><span class="mi">40</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"book.BTC-PERPETUAL.100ms"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"change"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1554373911330</span><span class="p">,</span><span class="w">
      </span><span class="nl">"prev_change_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">297217</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"change_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">297218</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bids"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">[</span><span class="w">
          </span><span class="s2">"delete"</span><span class="p">,</span><span class="w">
          </span><span class="mf">5041.94</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="p">[</span><span class="w">
          </span><span class="s2">"delete"</span><span class="p">,</span><span class="w">
          </span><span class="mf">5042.34</span><span class="p">,</span><span class="w">
          </span><span class="mi">0</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"asks"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">

      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"book.BTC-PERPETUAL.100ms"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Notifies about changes to the order book for a certain instrument.</p>

<p>The first notification will contain the whole book (bid and ask amounts for all prices). After that there will only be information about changes to individual price levels.</p>

<p>The first notification will contain the amounts for all price levels (list of <code>['new', price, amount]</code> tuples). All following notifications will contain a list of tuples with action, price level and new amount (<code>[action, price, amount]</code>). Action can be either <code>new</code>, <code>change</code> or <code>delete</code>.
<p>Each notification will contain a <code>change_id</code> field, and each message except for the first one will contain a field <code>prev_change_id</code>. If <code>prev_change_id</code> is equal to the <code>change_id</code> of the previous message, this means that no messages have been missed.</p>

<p>The amount for perpetual and futures is in USD units, for options it is in corresponding cryptocurrency contracts, e.g., BTC or ETH.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=book.%7Binstrument_name%7D.%7Binterval%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-9'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>interval</td>
<td>true</td>
<td>string</td>
<td><code>raw</code><br><code>100ms</code><br><code>agg2</code></td>
<td>Frequency of notifications. Events will be aggregated over this interval.</td>
</tr>
</tbody></table>
<h3 id='response-176'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;asks</td>
<td>array of [action, price, amount]</td>
<td>The first notification will contain the amounts for all price levels (a list of [&quot;new&quot;, price, amount] tuples). All following notifications will contain a list of tuples with action, price level and new amount ([action, price, amount]). Action can be <code>new</code>, <code>change</code> or <code>delete</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;bids</td>
<td>array of [action, price, amount]</td>
<td>(See &#39;asks&#39; above.)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;change_id</td>
<td>integer</td>
<td>Identifier of the notification</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;prev_change_id</td>
<td>integer</td>
<td>Identifier of the previous notification (it&#39;s <strong>not</strong> included for the first notification)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of last change (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>Type of notification: <code>snapshot</code> for initial, <code>change</code> for others</td>
</tr>
</tbody></table>
<h2 id='chart-trades-instrument_name-resolution'>chart.trades.{instrument_name}.{resolution}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">chart.trades.BTC-PERPETUAL.1</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"chart.trades.BTC-PERPETUAL.1"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"volume"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.05219351</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tick"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1573645080000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"open"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">8869.79</span><span class="p">,</span><span class="w">
      </span><span class="nl">"low"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">8788.25</span><span class="p">,</span><span class="w">
      </span><span class="nl">"high"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">8870.31</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cost"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">460</span><span class="p">,</span><span class="w">
      </span><span class="nl">"close"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">8791.25</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"chart.trades.BTC-PERPETUAL.1"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Publicly available market data used to generate a TradingView candle chart. During a single resolution period, many events can be sent, each with updated values for the recent period.<br/><br/> <strong>NOTICE</strong> When there is no trade during the requested resolution period (e.g. 1 minute), then a filling sample is generated which uses data from the last available trade candle (open and close values).</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=chart.trades.%7Binstrument_name%7D.%7Bresolution%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-10'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>resolution</td>
<td>true</td>
<td>string</td>
<td><code>1</code><br><code>3</code><br><code>5</code><br><code>10</code><br><code>15</code><br><code>30</code><br><code>60</code><br><code>120</code><br><code>180</code><br><code>360</code><br><code>720</code><br><code>1D</code></td>
<td>Chart bars resolution given in full minutes or keyword <code>1D</code> (only some specific resolutions are supported)</td>
</tr>
</tbody></table>
<h3 id='response-177'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;close</td>
<td>number</td>
<td>The close price for the candle</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cost</td>
<td>number</td>
<td>Cost data for the candle</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;high</td>
<td>number</td>
<td>The highest price level for the candle</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;low</td>
<td>number</td>
<td>The lowest price level for the candle</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;open</td>
<td>number</td>
<td>The open price for the candle&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;volume</td>
<td>number</td>
<td>Volume data for the candle</td>
</tr>
</tbody></table>
<h2 id='deribit_price_index-index_name'>deribit_price_index.{index_name}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">deribit_price_index.btc_usd</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"deribit_price_index.btc_usd"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1550588002899</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">3937.89</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"btc_usd"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"deribit_price_index.btc_usd"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Provides information about current value (price) for Deribit Index</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=deribit_price_index.%7Bindex_name%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-11'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>index_name</td>
<td>true</td>
<td>string</td>
<td><code>btc_usd</code><br><code>eth_usd</code><br><code>ada_usdc</code><br><code>algo_usdc</code><br><code>avax_usdc</code><br><code>bch_usdc</code><br><code>bnb_usdc</code><br><code>btc_usdc</code><br><code>btcdvol_usdc</code><br><code>buidl_usdc</code><br><code>doge_usdc</code><br><code>dot_usdc</code><br><code>eurr_usdc</code><br><code>eth_usdc</code><br><code>ethdvol_usdc</code><br><code>link_usdc</code><br><code>ltc_usdc</code><br><code>near_usdc</code><br><code>paxg_usdc</code><br><code>shib_usdc</code><br><code>sol_usdc</code><br><code>steth_usdc</code><br><code>trump_usdc</code><br><code>trx_usdc</code><br><code>uni_usdc</code><br><code>usde_usdc</code><br><code>usyc_usdc</code><br><code>xrp_usdc</code><br><code>btc_usdt</code><br><code>eth_usdt</code><br><code>eurr_usdt</code><br><code>sol_usdt</code><br><code>steth_usdt</code><br><code>usdc_usdt</code><br><code>usde_usdt</code><br><code>btc_eurr</code><br><code>btc_usde</code><br><code>btc_usyc</code><br><code>eth_btc</code><br><code>eth_eurr</code><br><code>eth_usde</code><br><code>eth_usyc</code><br><code>steth_eth</code><br><code>paxg_btc</code></td>
<td>Index identifier, matches (base) cryptocurrency with quote currency</td>
</tr>
</tbody></table>
<h3 id='response-178'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_name</td>
<td>string</td>
<td>Index identifier, matches (base) cryptocurrency with quote currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Current index price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='deribit_price_ranking-index_name'>deribit_price_ranking.{index_name}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">deribit_price_ranking.btc_usd</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"deribit_price_ranking.btc_usd"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"weight"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">14.285714</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1702465142997</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">41160.5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"original_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">41160.5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"identifier"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"bitfinex"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"enabled"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"weight"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">14.285714</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1702465143045</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">41119</span><span class="p">,</span><span class="w">
        </span><span class="nl">"original_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">41119</span><span class="p">,</span><span class="w">
        </span><span class="nl">"identifier"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"bitstamp"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"enabled"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"weight"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">14.285714</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1702465139000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">41115.53</span><span class="p">,</span><span class="w">
        </span><span class="nl">"original_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">41115.53</span><span class="p">,</span><span class="w">
        </span><span class="nl">"identifier"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"coinbase"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"enabled"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"weight"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">14.285714</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1702465142921</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">41116.42</span><span class="p">,</span><span class="w">
        </span><span class="nl">"original_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">41116.42</span><span class="p">,</span><span class="w">
        </span><span class="nl">"identifier"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"gemini"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"enabled"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"weight"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">14.285714</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1702465141954</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">41108.88</span><span class="p">,</span><span class="w">
        </span><span class="nl">"original_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">41108.88</span><span class="p">,</span><span class="w">
        </span><span class="nl">"identifier"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"itbit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"enabled"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"weight"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">14.285714</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1702465142906</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">41108.35</span><span class="p">,</span><span class="w">
        </span><span class="nl">"original_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">41108.35</span><span class="p">,</span><span class="w">
        </span><span class="nl">"identifier"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"kraken"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"enabled"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"weight"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">14.285714</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1702465138000</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">41139.82</span><span class="p">,</span><span class="w">
        </span><span class="nl">"original_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">41139.82</span><span class="p">,</span><span class="w">
        </span><span class="nl">"identifier"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"okcoin"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"enabled"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"deribit_price_ranking.btc_usd"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Provides information about current value (price) for stock exchanges used to calculate Deribit Index</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=deribit_price_ranking.%7Bindex_name%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-12'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>index_name</td>
<td>true</td>
<td>string</td>
<td><code>btc_usd</code><br><code>eth_usd</code><br><code>ada_usdc</code><br><code>algo_usdc</code><br><code>avax_usdc</code><br><code>bch_usdc</code><br><code>bnb_usdc</code><br><code>btc_usdc</code><br><code>btcdvol_usdc</code><br><code>buidl_usdc</code><br><code>doge_usdc</code><br><code>dot_usdc</code><br><code>eurr_usdc</code><br><code>eth_usdc</code><br><code>ethdvol_usdc</code><br><code>link_usdc</code><br><code>ltc_usdc</code><br><code>near_usdc</code><br><code>paxg_usdc</code><br><code>shib_usdc</code><br><code>sol_usdc</code><br><code>steth_usdc</code><br><code>trump_usdc</code><br><code>trx_usdc</code><br><code>uni_usdc</code><br><code>usde_usdc</code><br><code>usyc_usdc</code><br><code>xrp_usdc</code><br><code>btc_usdt</code><br><code>eth_usdt</code><br><code>eurr_usdt</code><br><code>sol_usdt</code><br><code>steth_usdt</code><br><code>usdc_usdt</code><br><code>usde_usdt</code><br><code>btc_eurr</code><br><code>btc_usde</code><br><code>btc_usyc</code><br><code>eth_btc</code><br><code>eth_eurr</code><br><code>eth_usde</code><br><code>eth_usyc</code><br><code>steth_eth</code><br><code>paxg_btc</code></td>
<td>Index identifier, matches (base) cryptocurrency with quote currency</td>
</tr>
</tbody></table>
<h3 id='response-179'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;enabled</td>
<td>boolean</td>
<td>Stock exchange status</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;identifier</td>
<td>string</td>
<td>Stock exchange identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_price</td>
<td>number</td>
<td>Index price retrieved from stock&#39;s data</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Adjusted stock exchange index price, used for Deribit price index calculations</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the last update from stock exchange (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;weight</td>
<td>number</td>
<td>The weight of the ranking given in percent</td>
</tr>
</tbody></table>
<h2 id='deribit_price_statistics-index_name'>deribit_price_statistics.{index_name}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">deribit_price_statistics.btc_usd</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"deribit_price_statistics.btc_usd"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"low24h"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">58012.08</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"btc_usd"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"high_volatility"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"high24h"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">59311.42</span><span class="p">,</span><span class="w">
      </span><span class="nl">"change24h"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">1009.61</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"deribit_price_statistics.btc_usd"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This subscription provides basic statistics about Deribit Index</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=deribit_price_statistics.%7Bindex_name%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-13'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>index_name</td>
<td>true</td>
<td>string</td>
<td><code>btc_usd</code><br><code>eth_usd</code><br><code>ada_usdc</code><br><code>algo_usdc</code><br><code>avax_usdc</code><br><code>bch_usdc</code><br><code>bnb_usdc</code><br><code>btc_usdc</code><br><code>btcdvol_usdc</code><br><code>buidl_usdc</code><br><code>doge_usdc</code><br><code>dot_usdc</code><br><code>eurr_usdc</code><br><code>eth_usdc</code><br><code>ethdvol_usdc</code><br><code>link_usdc</code><br><code>ltc_usdc</code><br><code>near_usdc</code><br><code>paxg_usdc</code><br><code>shib_usdc</code><br><code>sol_usdc</code><br><code>steth_usdc</code><br><code>trump_usdc</code><br><code>trx_usdc</code><br><code>uni_usdc</code><br><code>usde_usdc</code><br><code>usyc_usdc</code><br><code>xrp_usdc</code><br><code>btc_usdt</code><br><code>eth_usdt</code><br><code>eurr_usdt</code><br><code>sol_usdt</code><br><code>steth_usdt</code><br><code>usdc_usdt</code><br><code>usde_usdt</code><br><code>btc_eurr</code><br><code>btc_usde</code><br><code>btc_usyc</code><br><code>eth_btc</code><br><code>eth_eurr</code><br><code>eth_usde</code><br><code>eth_usyc</code><br><code>steth_eth</code><br><code>paxg_btc</code></td>
<td>Index identifier, matches (base) cryptocurrency with quote currency</td>
</tr>
</tbody></table>
<h3 id='response-180'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;change24h</td>
<td>number</td>
<td>The price index change calculated between the first and last point within most recent 24 hours window</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;high24h</td>
<td>number</td>
<td>The highest recorded price within the last 24 hours</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;high_volatility</td>
<td>boolean</td>
<td>Indicates the high volatility periods on the market. The value <code>true</code> is set when the price index value drastically changed within the last 5 minutes</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_name</td>
<td>string</td>
<td>Index identifier, matches (base) cryptocurrency with quote currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;low24h</td>
<td>number</td>
<td>The lowest recorded price within the last 24 hours</td>
</tr>
</tbody></table>
<h2 id='deribit_volatility_index-index_name'>deribit_volatility_index.{index_name}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">deribit_volatility_index.btc_usd</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"deribit_volatility_index.btc_usd"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"volatility"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">129.36</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1619777946007</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"btc_usd"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"deribit_volatility_index.btc_usd"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Provides volatility index subscription</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=deribit_volatility_index.%7Bindex_name%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-14'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>index_name</td>
<td>true</td>
<td>string</td>
<td><code>btc_usd</code><br><code>eth_usd</code></td>
<td>Index identifier supported for DVOL</td>
</tr>
</tbody></table>
<h3 id='response-181'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_name</td>
<td>string</td>
<td>Index identifier supported for DVOL</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;volatility</td>
<td>number</td>
<td>Value of the corresponding volatility</td>
</tr>
</tbody></table>
<h2 id='estimated_expiration_price-index_name'>estimated_expiration_price.{index_name}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">estimated_expiration_price.btc_usd</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"estimated_expiration_price.btc_usd"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"seconds"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">180929</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">3939.73</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_estimated"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"estimated_expiration_price.btc_usd"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Returns calculated (estimated) ending price for given index.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=estimated_expiration_price.%7Bindex_name%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-15'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>index_name</td>
<td>true</td>
<td>string</td>
<td><code>btc_usd</code><br><code>eth_usd</code><br><code>ada_usdc</code><br><code>algo_usdc</code><br><code>avax_usdc</code><br><code>bch_usdc</code><br><code>bnb_usdc</code><br><code>btc_usdc</code><br><code>btcdvol_usdc</code><br><code>buidl_usdc</code><br><code>doge_usdc</code><br><code>dot_usdc</code><br><code>eurr_usdc</code><br><code>eth_usdc</code><br><code>ethdvol_usdc</code><br><code>link_usdc</code><br><code>ltc_usdc</code><br><code>near_usdc</code><br><code>paxg_usdc</code><br><code>shib_usdc</code><br><code>sol_usdc</code><br><code>steth_usdc</code><br><code>trump_usdc</code><br><code>trx_usdc</code><br><code>uni_usdc</code><br><code>usde_usdc</code><br><code>usyc_usdc</code><br><code>xrp_usdc</code><br><code>btc_usdt</code><br><code>eth_usdt</code><br><code>eurr_usdt</code><br><code>sol_usdt</code><br><code>steth_usdt</code><br><code>usdc_usdt</code><br><code>usde_usdt</code><br><code>btc_eurr</code><br><code>btc_usde</code><br><code>btc_usyc</code><br><code>eth_btc</code><br><code>eth_eurr</code><br><code>eth_usde</code><br><code>eth_usyc</code><br><code>steth_eth</code><br><code>paxg_btc</code></td>
<td>Index identifier, matches (base) cryptocurrency with quote currency</td>
</tr>
</tbody></table>
<h3 id='response-182'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_estimated</td>
<td>boolean</td>
<td>When <code>true</code> then price is given as an estimated value, otherwise it&#39;s current index price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;left_ticks</td>
<td>number</td>
<td>number of time ticks that are left until expiration (field added when price is estimated)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Index current or estimated price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;seconds</td>
<td>integer</td>
<td>Number of seconds till finalizing the nearest instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_ticks</td>
<td>number</td>
<td>number of total time ticks (field added when price is estimated)</td>
</tr>
</tbody></table>
<h2 id='incremental_ticker-instrument_name'>incremental_ticker.{instrument_name}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">incremental_ticker.BTC-PERPETUAL</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"incremental_ticker.BTC-PERPETUAL"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send first notification like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"snapshot"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1623060194301</span><span class="p">,</span><span class="w">
      </span><span class="nl">"stats"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"volume_usd"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">284061480</span><span class="p">,</span><span class="w">
        </span><span class="nl">"volume"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">7871.02139035</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price_change"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.7229</span><span class="p">,</span><span class="w">
        </span><span class="nl">"low"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">35213.5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"high"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">36824.5</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"settlement_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">36169.49</span><span class="p">,</span><span class="w">
      </span><span class="nl">"open_interest"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">502097590</span><span class="p">,</span><span class="w">
      </span><span class="nl">"min_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">35898.37</span><span class="p">,</span><span class="w">
      </span><span class="nl">"max_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">36991.72</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">36446.51</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">36457.5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">36441.64</span><span class="p">,</span><span class="w">
      </span><span class="nl">"funding_8h"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.0000211</span><span class="p">,</span><span class="w">
      </span><span class="nl">"estimated_delivery_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">36441.64</span><span class="p">,</span><span class="w">
      </span><span class="nl">"current_funding"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"best_bid_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">36442.5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"best_bid_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"best_ask_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">36443</span><span class="p">,</span><span class="w">
      </span><span class="nl">"best_ask_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"incremental_ticker.BTC-PERPETUAL"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"change"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1623060199024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"stats"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"volume_usd"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">284073480</span><span class="p">,</span><span class="w">
        </span><span class="nl">"volume"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">7872.02139035</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">36448.61</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">36442.64</span><span class="p">,</span><span class="w">
      </span><span class="nl">"funding_8h"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.0000311</span><span class="p">,</span><span class="w">
      </span><span class="nl">"best_bid_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">36452.5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"best_bid_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
      </span><span class="nl">"best_ask_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"incremental_ticker.BTC-PERPETUAL"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Notifies about changes in instrument ticker (key information about the instrument).</p> <p>The first notification will contain the whole ticker. After that there will only be information about changes in the ticker.</p> <p>This event is sent at most once per second.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=incremental_ticker.%7Binstrument_name%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-16'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
</tbody></table>
<h3 id='response-183'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ask_iv</td>
<td>number</td>
<td>(Only for option) implied volatility for best ask</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_ask_amount</td>
<td>number</td>
<td>It represents the requested order size of all best asks</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_ask_price</td>
<td>number</td>
<td>The current best ask price, <code>null</code> if there aren&#39;t any asks</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_bid_amount</td>
<td>number</td>
<td>It represents the requested order size of all best bids</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_bid_price</td>
<td>number</td>
<td>The current best bid price, <code>null</code> if there aren&#39;t any bids</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;bid_iv</td>
<td>number</td>
<td>(Only for option) implied volatility for best bid</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;current_funding</td>
<td>number</td>
<td>Current funding (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delivery_price</td>
<td>number</td>
<td>The settlement price for the instrument. Only when <code>state = closed</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;estimated_delivery_price</td>
<td>number</td>
<td>Estimated delivery price for the market. For more details, see Contract Specification &gt; General Documentation &gt; Expiration Price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;funding_8h</td>
<td>number</td>
<td>Funding 8h (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;greeks</td>
<td><em>object</em></td>
<td>Only for options</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delta</td>
<td>number</td>
<td>(Only for option) The delta value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;gamma</td>
<td>number</td>
<td>(Only for option) The gamma value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;rho</td>
<td>number</td>
<td>(Only for option) The rho value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;theta</td>
<td>number</td>
<td>(Only for option) The theta value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;vega</td>
<td>number</td>
<td>(Only for option) The vega value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Current index price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interest_rate</td>
<td>number</td>
<td>Interest rate used in implied volatility calculations (options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_price</td>
<td>number</td>
<td>The price for the last trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_iv</td>
<td>number</td>
<td>(Only for option) implied volatility for mark price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>The mark price for the instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;max_price</td>
<td>number</td>
<td>The maximum price for the future. Any buy orders you submit higher than this price, will be clamped to this maximum.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;min_price</td>
<td>number</td>
<td>The minimum price for the future. Any sell orders you submit lower than this price will be clamped to this minimum.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;open_interest</td>
<td>number</td>
<td>The total amount of outstanding contracts in the corresponding amount units. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlement_price</td>
<td>number</td>
<td>Optional (not added for spot). The settlement price for the instrument. Only when <code>state = open</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>The state of the order book. Possible values are <code>open</code> and <code>closed</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;stats</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;high</td>
<td>number</td>
<td>Highest price during 24h</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;low</td>
<td>number</td>
<td>Lowest price during 24h</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price_change</td>
<td>number</td>
<td>24-hour price change expressed as a percentage, <code>null</code> if there weren&#39;t any trades</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;volume</td>
<td>number</td>
<td>Volume during last 24h in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;volume_usd</td>
<td>number</td>
<td>Volume in usd (futures only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;type</td>
<td>string</td>
<td>Type of notification: <code>snapshot</code> for initial, <code>change</code> for others.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_index</td>
<td>number</td>
<td>Name of the underlying future, or <code>index_price</code> (options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (options only)</td>
</tr>
</tbody></table>
<h2 id='instrument-state-kind-currency'>instrument.state.{kind}.{currency}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">instrument.state.any.any</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"instrument.state.any.any"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1553080940000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-22MAR19"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"instrument.state.any.any"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get notifications about new or terminated instruments of given kind in given currency. <strong>(Please note that our system does not send notifications when currencies are locked. Users are advised to subscribe to the <a href="https://docs.deribit.com/#platform_state">platform_state</a> channel to monitor the state of currencies actively.)</strong></p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=instrument.state.%7Bkind%7D.%7Bcurrency%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-17'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>kind</td>
<td>true</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code><br><code>any</code></td>
<td>Instrument kind or <code>&quot;any&quot;</code> for all</td>
</tr>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>any</code></td>
<td>The currency symbol or <code>&quot;any&quot;</code> for all</td>
</tr>
</tbody></table>
<h3 id='response-184'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>State of instrument - possible values: <code>created</code>, <code>started</code>, <code>settled</code>, <code>closed</code>, <code>deactivated</code>, <code>terminated</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='markprice-options-index_name'>markprice.options.{index_name}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">markprice.options.btc_usd</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"markprice.options.btc_usd"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1622470378005</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.0333</span><span class="p">,</span><span class="w">
        </span><span class="nl">"iv"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-2JUN21-37000-P"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1622470378005</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.117</span><span class="p">,</span><span class="w">
        </span><span class="nl">"iv"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-4JUN21-40500-P"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1622470378005</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.0177</span><span class="p">,</span><span class="w">
        </span><span class="nl">"iv"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-4JUN21-38250-C"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1622470378005</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.0098</span><span class="p">,</span><span class="w">
        </span><span class="nl">"iv"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-1JUN21-37000-C"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1622470378005</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.0371</span><span class="p">,</span><span class="w">
        </span><span class="nl">"iv"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-4JUN21-36500-P"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"markprice.options.btc_usd"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Provides information about options markprices.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=markprice.options.%7Bindex_name%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-18'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>index_name</td>
<td>true</td>
<td>string</td>
<td><code>btc_usd</code><br><code>eth_usd</code><br><code>ada_usdc</code><br><code>algo_usdc</code><br><code>avax_usdc</code><br><code>bch_usdc</code><br><code>bnb_usdc</code><br><code>btc_usdc</code><br><code>btcdvol_usdc</code><br><code>buidl_usdc</code><br><code>doge_usdc</code><br><code>dot_usdc</code><br><code>eurr_usdc</code><br><code>eth_usdc</code><br><code>ethdvol_usdc</code><br><code>link_usdc</code><br><code>ltc_usdc</code><br><code>near_usdc</code><br><code>paxg_usdc</code><br><code>shib_usdc</code><br><code>sol_usdc</code><br><code>steth_usdc</code><br><code>trump_usdc</code><br><code>trx_usdc</code><br><code>uni_usdc</code><br><code>usde_usdc</code><br><code>usyc_usdc</code><br><code>xrp_usdc</code><br><code>btc_usdt</code><br><code>eth_usdt</code><br><code>eurr_usdt</code><br><code>sol_usdt</code><br><code>steth_usdt</code><br><code>usdc_usdt</code><br><code>usde_usdt</code><br><code>btc_eurr</code><br><code>btc_usde</code><br><code>btc_usyc</code><br><code>eth_btc</code><br><code>eth_eurr</code><br><code>eth_usde</code><br><code>eth_usyc</code><br><code>steth_eth</code><br><code>paxg_btc</code></td>
<td>Index identifier, matches (base) cryptocurrency with quote currency</td>
</tr>
</tbody></table>
<h3 id='response-185'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Value of the volatility of the underlying instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>The mark price for the instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='perpetual-instrument_name-interval'>perpetual.{instrument_name}.{interval}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">perpetual.BTC-PERPETUAL.raw</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"perpetual.BTC-PERPETUAL.raw"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1571386349530</span><span class="p">,</span><span class="w">
      </span><span class="nl">"interest"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.004999511380756577</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">7872.88</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"perpetual.BTC-PERPETUAL.raw"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Provide current interest rate - but only for <strong>perpetual</strong> instruments. Other types won&#39;t generate any notification.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=perpetual.%7Binstrument_name%7D.%7Binterval%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-19'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>interval</td>
<td>true</td>
<td>string</td>
<td><code>agg2</code><br><code>100ms</code><br><code>raw</code></td>
<td>Frequency of notifications. Events will be aggregated over this interval. The value <code>raw</code> means no aggregation will be applied <strong>(Please note that <code>raw</code> interval is only available to authorized users)</strong></td>
</tr>
</tbody></table>
<h3 id='response-186'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Current index price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interest</td>
<td>number</td>
<td>Current interest</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='platform_state'>platform_state</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">platform_state</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"platform_state"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"price_index"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sol_usdc"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"locked"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"platform_state"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Information about platform state.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=platform_state" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-20'>Channel Parameters</h3>
<p><em>This channel takes no parameters</em></p>
<h3 id='response-187'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;locked</td>
<td>boolean</td>
<td>Value is set to &#39;true&#39; when index is locked on platform, sent only with <code>price_index</code> field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maintenance</td>
<td>boolean</td>
<td>Value is set to <code>true</code> when the maintenance break begins</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price_index</td>
<td>string</td>
<td>Name of index that is locked or unlocked, sent only with <code>locked</code> field</td>
</tr>
</tbody></table>
<h2 id='platform_state-public_methods_state'>platform_state.public_methods_state</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">platform_state.public_methods_state</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"platform_state.public_methods_state"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"allow_unauthenticated_public_requests"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"platform_state.public_methods_state"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Information whether unauthorized public requests are allowed</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=platform_state.public_methods_state" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-21'>Channel Parameters</h3>
<p><em>This channel takes no parameters</em></p>
<h3 id='response-188'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;allow_unauthenticated_public_requests</td>
<td>boolean</td>
<td>Value is set to &#39;true&#39; when unauthorized public requests are allowed</td>
</tr>
</tbody></table>
<h2 id='quote-instrument_name'>quote.{instrument_name}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">quote.BTC-PERPETUAL</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"quote.BTC-PERPETUAL"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1550658624149</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"best_bid_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">3914.97</span><span class="p">,</span><span class="w">
      </span><span class="nl">"best_bid_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w">
      </span><span class="nl">"best_ask_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">3996.61</span><span class="p">,</span><span class="w">
      </span><span class="nl">"best_ask_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"quote.BTC-PERPETUAL"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Best bid/ask price and size.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=quote.%7Binstrument_name%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-22'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
</tbody></table>
<h3 id='response-189'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_ask_amount</td>
<td>number</td>
<td>It represents the requested order size of all best asks</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_ask_price</td>
<td>number</td>
<td>The current best ask price, <code>null</code> if there aren&#39;t any asks</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_bid_amount</td>
<td>number</td>
<td>It represents the requested order size of all best bids</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_bid_price</td>
<td>number</td>
<td>The current best bid price, <code>null</code> if there aren&#39;t any bids</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='rfq-currency'>rfq.{currency}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">rfq.btc</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"rfq.btc"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"side"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_rfq_tstamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1634816143836</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"rfq.btc"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get notifications about RFQs for instruments in given currency.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=rfq.%7Bcurrency%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-23'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>any</code></td>
<td>The currency symbol or <code>&quot;any&quot;</code> for all</td>
</tr>
</tbody></table>
<h3 id='response-190'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_new_instrument</td>
<td>boolean</td>
<td><code>true</code> for newly created instruments (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_rfq_timestamp</td>
<td>integer</td>
<td>The timestamp of last RFQ (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;side</td>
<td>string</td>
<td>Side - <code>buy</code> or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>boolean</td>
<td><code>true</code> when RFQ is active, <code>false</code> when inactive</td>
</tr>
</tbody></table>
<h2 id='ticker-instrument_name-interval'>ticker.{instrument_name}.{interval}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">ticker.BTC-PERPETUAL.raw</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"ticker.BTC-PERPETUAL.raw"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1623060194301</span><span class="p">,</span><span class="w">
      </span><span class="nl">"stats"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"volume_usd"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">284061480</span><span class="p">,</span><span class="w">
        </span><span class="nl">"volume"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">7871.02139035</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price_change"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.7229</span><span class="p">,</span><span class="w">
        </span><span class="nl">"low"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">35213.5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"high"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">36824.5</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"settlement_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">36169.49</span><span class="p">,</span><span class="w">
      </span><span class="nl">"open_interest"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">502097590</span><span class="p">,</span><span class="w">
      </span><span class="nl">"min_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">35898.37</span><span class="p">,</span><span class="w">
      </span><span class="nl">"max_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">36991.72</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">36446.51</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">36457.5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"interest_value"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">1.7362511643080387</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">36441.64</span><span class="p">,</span><span class="w">
      </span><span class="nl">"funding_8h"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.0000211</span><span class="p">,</span><span class="w">
      </span><span class="nl">"estimated_delivery_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">36441.64</span><span class="p">,</span><span class="w">
      </span><span class="nl">"current_funding"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"best_bid_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">36442.5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"best_bid_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">5000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"best_ask_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">36443</span><span class="p">,</span><span class="w">
      </span><span class="nl">"best_ask_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ticker.BTC-PERPETUAL.raw"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Key information about the instrument</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=ticker.%7Binstrument_name%7D.%7Binterval%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-24'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>interval</td>
<td>true</td>
<td>string</td>
<td><code>agg2</code><br><code>100ms</code><br><code>raw</code></td>
<td>Frequency of notifications. Events will be aggregated over this interval. The value <code>raw</code> means no aggregation will be applied <strong>(Please note that <code>raw</code> interval is only available to authorized users)</strong></td>
</tr>
</tbody></table>
<h3 id='response-191'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ask_iv</td>
<td>number</td>
<td>(Only for option) implied volatility for best ask</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_ask_amount</td>
<td>number</td>
<td>It represents the requested order size of all best asks</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_ask_price</td>
<td>number</td>
<td>The current best ask price, <code>null</code> if there aren&#39;t any asks</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_bid_amount</td>
<td>number</td>
<td>It represents the requested order size of all best bids</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;best_bid_price</td>
<td>number</td>
<td>The current best bid price, <code>null</code> if there aren&#39;t any bids</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;bid_iv</td>
<td>number</td>
<td>(Only for option) implied volatility for best bid</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;current_funding</td>
<td>number</td>
<td>Current funding (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delivery_price</td>
<td>number</td>
<td>The settlement price for the instrument. Only when <code>state = closed</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;estimated_delivery_price</td>
<td>number</td>
<td>Estimated delivery price for the market. For more details, see Contract Specification &gt; General Documentation &gt; Expiration Price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;funding_8h</td>
<td>number</td>
<td>Funding 8h (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;greeks</td>
<td><em>object</em></td>
<td>Only for options</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delta</td>
<td>number</td>
<td>(Only for option) The delta value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;gamma</td>
<td>number</td>
<td>(Only for option) The gamma value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;rho</td>
<td>number</td>
<td>(Only for option) The rho value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;theta</td>
<td>number</td>
<td>(Only for option) The theta value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;vega</td>
<td>number</td>
<td>(Only for option) The vega value for the option</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Current index price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interest_rate</td>
<td>number</td>
<td>Interest rate used in implied volatility calculations (options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interest_value</td>
<td>number</td>
<td>Value used to calculate <code>realized_funding</code> in positions (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_price</td>
<td>number</td>
<td>The price for the last trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_iv</td>
<td>number</td>
<td>(Only for option) implied volatility for mark price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>The mark price for the instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;max_price</td>
<td>number</td>
<td>The maximum price for the future. Any buy orders you submit higher than this price, will be clamped to this maximum.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;min_price</td>
<td>number</td>
<td>The minimum price for the future. Any sell orders you submit lower than this price will be clamped to this minimum.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;open_interest</td>
<td>number</td>
<td>The total amount of outstanding contracts in the corresponding amount units. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlement_price</td>
<td>number</td>
<td>Optional (not added for spot). The settlement price for the instrument. Only when <code>state = open</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>The state of the order book. Possible values are <code>open</code> and <code>closed</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;stats</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;high</td>
<td>number</td>
<td>Highest price during 24h</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;low</td>
<td>number</td>
<td>Lowest price during 24h</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price_change</td>
<td>number</td>
<td>24-hour price change expressed as a percentage, <code>null</code> if there weren&#39;t any trades</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;volume</td>
<td>number</td>
<td>Volume during last 24h in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;volume_usd</td>
<td>number</td>
<td>Volume in usd (futures only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_index</td>
<td>number</td>
<td>Name of the underlying future, or <code>index_price</code> (options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (options only)</td>
</tr>
</tbody></table>
<h2 id='trades-instrument_name-interval'>trades.{instrument_name}.{interval}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">trades.BTC-PERPETUAL.raw</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"trades.BTC-PERPETUAL.raw"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">30289442</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"48079269"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1590484512188</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">8950</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">8948.9</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">8955.88</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"trades.BTC-PERPETUAL.raw"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get notifications about trades for an instrument.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=trades.%7Binstrument_name%7D.%7Binterval%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-25'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>interval</td>
<td>true</td>
<td>string</td>
<td><code>agg2</code><br><code>100ms</code><br><code>raw</code></td>
<td>Frequency of notifications. Events will be aggregated over this interval. The value <code>raw</code> means no aggregation will be applied <strong>(Please note that <code>raw</code> interval is only available to authorized users)</strong></td>
</tr>
</tbody></table>
<h3 id='response-192'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_leg_count</td>
<td>integer</td>
<td>Block trade leg count - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
</tbody></table>
<h2 id='trades-kind-currency-interval'>trades.{kind}.{currency}.{interval}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">public/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">trades.option.BTC.raw</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"public/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"trades.option.BTC.raw"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"48079289"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1590484589306</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.0075</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.01062686</span><span class="p">,</span><span class="w">
        </span><span class="nl">"iv"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">47.58</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-27MAY20-9000-C"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">8956.17</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"trades.option.BTC.raw"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get notifications about trades in any instrument of a given kind and given currency.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=trades.%7Bkind%7D.%7Bcurrency%7D.%7Binterval%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>
<h3 id='channel-parameters-26'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>kind</td>
<td>true</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code></td>
<td>Instrument kind, <code>&quot;future&quot;</code> or <code>&quot;option&quot;</code></td>
</tr>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>any</code></td>
<td>The currency symbol or <code>&quot;any&quot;</code> for all</td>
</tr>
<tr>
<td>interval</td>
<td>true</td>
<td>string</td>
<td><code>agg2</code><br><code>100ms</code><br><code>raw</code></td>
<td>Frequency of notifications. Events will be aggregated over this interval. The value <code>raw</code> means no aggregation will be applied <strong>(Please note that <code>raw</code> interval is only available to authorized users)</strong></td>
</tr>
</tbody></table>
<h3 id='response-193'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_leg_count</td>
<td>integer</td>
<td>Block trade leg count - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
</tbody></table>
<h2 id='user-access_log'>user.access_log</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">private/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">user.access_log</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"private/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"user.access_log"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1632488963633</span><span class="p">,</span><span class="w">
      </span><span class="nl">"log"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ip"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"8.9.10.11"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">243343</span><span class="p">,</span><span class="w">
      </span><span class="nl">"country"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"China"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"city"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Pekin"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"user.access_log"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get notifications about security events related to the account</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=user.access_log" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private subscription; subscribing is only possible when authenticated.</div></aside>
<h3 id='channel-parameters-27'>Channel Parameters</h3>
<p><em>This method takes no parameters</em></p>
<h3 id='response-194'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;city</td>
<td>string</td>
<td>City where the IP address is registered (estimated)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;country</td>
<td>string</td>
<td>Country where the IP address is registered (estimated)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;data</td>
<td>object or string</td>
<td>Optional, additional information about action, type depends on <code>log</code> value</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;id</td>
<td>integer</td>
<td>Unique identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;ip</td>
<td>string</td>
<td>IP address of source that generated action</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;log</td>
<td>string</td>
<td>Action description, values: <code>changed_email</code> - email was changed; <code>changed_password</code> - password was changed; <code>disabled_tfa</code> - TFA was disabled; <code>enabled_tfa</code> - TFA was enabled, <code>success</code> - successful login; <code>failure</code> - login failure; <code>enabled_subaccount_login</code> - login was enabled for subaccount (in <code>data</code> - subaccount uid); <code>disabled_subaccount_login</code> - login was disabled for subbaccount (in <code>data</code> - subbacount uid);<code>new_api_key</code> - API key was created (in <code>data</code> key client id); <code>removed_api_key</code> - API key was removed (in <code>data</code> key client id); <code>changed_scope</code> - scope of API key was changed (in <code>data</code> key client id); <code>changed_whitelist</code> - whitelist of API key was edited (in <code>data</code> key client id); <code>disabled_api_key</code> - API key was disabled (in <code>data</code> key client id); <code>enabled_api_key</code> - API key was enabled (in <code>data</code> key client id); <code>reset_api_key</code> - API key was reset (in <code>data</code> key client id)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
</tbody></table>
<h2 id='user-changes-instrument_name-interval'>user.changes.{instrument_name}.{interval}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">private/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">user.changes.BTC-PERPETUAL.raw</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"private/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"user.changes.BTC-PERPETUAL.raw"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"trades"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"trade_seq"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">866638</span><span class="p">,</span><span class="w">
          </span><span class="nl">"trade_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1430914"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1605780344032</span><span class="p">,</span><span class="w">
          </span><span class="nl">"tick_direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"reduce_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"profit_loss"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.00004898</span><span class="p">,</span><span class="w">
          </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">17391</span><span class="p">,</span><span class="w">
          </span><span class="nl">"post_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"order_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"3398016"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"matching_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">17391</span><span class="p">,</span><span class="w">
          </span><span class="nl">"liquidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"index_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">17501.88</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fee_currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fee"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">1.6e-7</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"positions"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"total_profit_loss"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">1.69711368</span><span class="p">,</span><span class="w">
          </span><span class="nl">"size_currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">10.646886321</span><span class="p">,</span><span class="w">
          </span><span class="nl">"size"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">185160</span><span class="p">,</span><span class="w">
          </span><span class="nl">"settlement_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">16025.83</span><span class="p">,</span><span class="w">
          </span><span class="nl">"realized_profit_loss"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.012454598</span><span class="p">,</span><span class="w">
          </span><span class="nl">"realized_funding"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.01235663</span><span class="p">,</span><span class="w">
          </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">17391</span><span class="p">,</span><span class="w">
          </span><span class="nl">"maintenance_margin"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.234575865</span><span class="p">,</span><span class="w">
          </span><span class="nl">"leverage"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">33</span><span class="p">,</span><span class="w">
          </span><span class="nl">"kind"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"future"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"interest_value"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">1.7362511643080387</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"initial_margin"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.319750953</span><span class="p">,</span><span class="w">
          </span><span class="nl">"index_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">17501.88</span><span class="p">,</span><span class="w">
          </span><span class="nl">"floating_profit_loss"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.906961435</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"delta"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">10.646886321</span><span class="p">,</span><span class="w">
          </span><span class="nl">"average_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">15000</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"orders"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"web"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"time_in_force"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"replaced"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"reduce_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">15665.5</span><span class="p">,</span><span class="w">
          </span><span class="nl">"post_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"order_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"order_state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"3398016"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"max_show"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
          </span><span class="nl">"last_update_timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1605780344032</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="nl">"is_rebalance"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"is_liquidation"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"filled_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"creation_timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1605780344032</span><span class="p">,</span><span class="w">
          </span><span class="nl">"average_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">17391</span><span class="p">,</span><span class="w">
          </span><span class="nl">"api"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"user.changes.BTC-PERPETUAL.raw"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get notifications about the user&#39;s updates related to order, trades, etc. in an instrument.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=user.changes.%7Binstrument_name%7D.%7Binterval%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private subscription; subscribing is only possible when authenticated.</div></aside>
<h3 id='channel-parameters-28'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>interval</td>
<td>true</td>
<td>string</td>
<td><code>agg2</code><br><code>100ms</code><br><code>raw</code></td>
<td>Frequency of notifications. Events will be aggregated over this interval. The value <code>raw</code> means no aggregation will be applied <strong>(Please note that <code>raw</code> interval is only available to authorized users)</strong></td>
</tr>
</tbody></table>
<h3 id='response-195'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;orders</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;position</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average price of trades that built this position</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price_usd</td>
<td>number</td>
<td>Only for options, average price in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delta</td>
<td>number</td>
<td>Delta parameter</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, <code>sell</code> or <code>zero</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;floating_profit_loss</td>
<td>number</td>
<td>Floating profit or loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;floating_profit_loss_usd</td>
<td>number</td>
<td>Only for options, floating profit or loss in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;gamma</td>
<td>number</td>
<td>Only for options, Gamma parameter</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Current index price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;initial_margin</td>
<td>number</td>
<td>Initial margin</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interest_value</td>
<td>number</td>
<td>Value used to calculate <code>realized_funding</code> (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;kind</td>
<td>string</td>
<td>Instrument kind: <code>&quot;future&quot;</code>, <code>&quot;option&quot;</code>, <code>&quot;spot&quot;</code>, <code>&quot;future_combo&quot;</code>, <code>&quot;option_combo&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;leverage</td>
<td>integer</td>
<td>Current available leverage for future position</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maintenance_margin</td>
<td>number</td>
<td>Maintenance margin</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Current mark price for position&#39;s instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;realized_funding</td>
<td>number</td>
<td>Realized Funding in current session included in session realized profit or loss, only for positions of perpetual instruments</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;realized_profit_loss</td>
<td>number</td>
<td>Realized profit or loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlement_price</td>
<td>number</td>
<td>Optional (not added for spot). Last settlement price for position&#39;s instrument 0 if instrument wasn&#39;t settled yet</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;size</td>
<td>number</td>
<td>Position size for futures size in quote currency (e.g. USD), for options size is in base currency (e.g. BTC)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;size_currency</td>
<td>number</td>
<td>Only for futures, position size in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;theta</td>
<td>number</td>
<td>Only for options, Theta parameter</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_profit_loss</td>
<td>number</td>
<td>Profit or loss from position</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;vega</td>
<td>number</td>
<td>Only for options, Vega parameter</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h2 id='user-changes-kind-currency-interval'>user.changes.{kind}.{currency}.{interval}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">private/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">user.changes.future.BTC.raw</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"private/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"user.changes.future.BTC.raw"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"trades"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"trade_seq"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">866638</span><span class="p">,</span><span class="w">
          </span><span class="nl">"trade_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1430914"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1605780344032</span><span class="p">,</span><span class="w">
          </span><span class="nl">"tick_direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nl">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"reduce_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"profit_loss"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.00004898</span><span class="p">,</span><span class="w">
          </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">17391</span><span class="p">,</span><span class="w">
          </span><span class="nl">"post_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"order_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"3398016"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"matching_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
          </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">17391</span><span class="p">,</span><span class="w">
          </span><span class="nl">"liquidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"index_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">17501.88</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fee_currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"fee"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">1.6e-7</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"positions"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"total_profit_loss"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">1.69711368</span><span class="p">,</span><span class="w">
          </span><span class="nl">"size_currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">10.646886321</span><span class="p">,</span><span class="w">
          </span><span class="nl">"size"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">185160</span><span class="p">,</span><span class="w">
          </span><span class="nl">"settlement_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">16025.83</span><span class="p">,</span><span class="w">
          </span><span class="nl">"realized_profit_loss"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.012454598</span><span class="p">,</span><span class="w">
          </span><span class="nl">"realized_funding"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.01235663</span><span class="p">,</span><span class="w">
          </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">17391</span><span class="p">,</span><span class="w">
          </span><span class="nl">"maintenance_margin"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.234575865</span><span class="p">,</span><span class="w">
          </span><span class="nl">"leverage"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">33</span><span class="p">,</span><span class="w">
          </span><span class="nl">"kind"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"future"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"interest_value"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">1.7362511643080387</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"initial_margin"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.319750953</span><span class="p">,</span><span class="w">
          </span><span class="nl">"index_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">17501.88</span><span class="p">,</span><span class="w">
          </span><span class="nl">"floating_profit_loss"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.906961435</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"delta"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">10.646886321</span><span class="p">,</span><span class="w">
          </span><span class="nl">"average_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">15000</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"orders"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"web"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"time_in_force"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"replaced"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"reduce_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">15665.5</span><span class="p">,</span><span class="w">
          </span><span class="nl">"post_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"order_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"order_state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"3398016"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"max_show"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
          </span><span class="nl">"last_update_timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1605780344032</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="nl">"is_rebalance"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"is_liquidation"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"filled_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
          </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"creation_timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1605780344032</span><span class="p">,</span><span class="w">
          </span><span class="nl">"average_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">17391</span><span class="p">,</span><span class="w">
          </span><span class="nl">"api"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"user.changes.future.BTC.raw"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get notifications about changes in user&#39;s updates related to order, trades, etc. in instruments of a given kind and currency.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=user.changes.%7Bkind%7D.%7Bcurrency%7D.%7Binterval%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private subscription; subscribing is only possible when authenticated.</div></aside>
<h3 id='channel-parameters-29'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>kind</td>
<td>true</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code><br><code>combo</code><br><code>any</code></td>
<td>Instrument kind, <code>&quot;combo&quot;</code> for any combo or <code>&quot;any&quot;</code> for all</td>
</tr>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>any</code></td>
<td>The currency symbol or <code>&quot;any&quot;</code> for all</td>
</tr>
<tr>
<td>interval</td>
<td>true</td>
<td>string</td>
<td><code>agg2</code><br><code>100ms</code><br><code>raw</code></td>
<td>Frequency of notifications. Events will be aggregated over this interval. The value <code>raw</code> means no aggregation will be applied <strong>(Please note that <code>raw</code> interval is only available to authorized users)</strong></td>
</tr>
</tbody></table>
<h3 id='response-196'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;orders</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;position</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average price of trades that built this position</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price_usd</td>
<td>number</td>
<td>Only for options, average price in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delta</td>
<td>number</td>
<td>Delta parameter</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, <code>sell</code> or <code>zero</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;floating_profit_loss</td>
<td>number</td>
<td>Floating profit or loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;floating_profit_loss_usd</td>
<td>number</td>
<td>Only for options, floating profit or loss in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;gamma</td>
<td>number</td>
<td>Only for options, Gamma parameter</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Current index price</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;initial_margin</td>
<td>number</td>
<td>Initial margin</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;interest_value</td>
<td>number</td>
<td>Value used to calculate <code>realized_funding</code> (perpetual only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;kind</td>
<td>string</td>
<td>Instrument kind: <code>&quot;future&quot;</code>, <code>&quot;option&quot;</code>, <code>&quot;spot&quot;</code>, <code>&quot;future_combo&quot;</code>, <code>&quot;option_combo&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;leverage</td>
<td>integer</td>
<td>Current available leverage for future position</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maintenance_margin</td>
<td>number</td>
<td>Maintenance margin</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Current mark price for position&#39;s instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;realized_funding</td>
<td>number</td>
<td>Realized Funding in current session included in session realized profit or loss, only for positions of perpetual instruments</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;realized_profit_loss</td>
<td>number</td>
<td>Realized profit or loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;settlement_price</td>
<td>number</td>
<td>Optional (not added for spot). Last settlement price for position&#39;s instrument 0 if instrument wasn&#39;t settled yet</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;size</td>
<td>number</td>
<td>Position size for futures size in quote currency (e.g. USD), for options size is in base currency (e.g. BTC)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;size_currency</td>
<td>number</td>
<td>Only for futures, position size in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;theta</td>
<td>number</td>
<td>Only for options, Theta parameter</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_profit_loss</td>
<td>number</td>
<td>Profit or loss from position</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;vega</td>
<td>number</td>
<td>Only for options, Vega parameter</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trades</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h2 id='user-combo_trades-instrument_name-interval'>user.combo_trades.{instrument_name}.{interval}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">private/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">user.combo_trades.BTC-FS-2SEP22_PERP.raw</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"private/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"user.combo_trades.BTC-FS-2SEP22_PERP.raw"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">39</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1154"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1661867454334</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"risk_reducing"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"profit_loss"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">1191.82</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"720074"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mmp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"matching_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">767.6</span><span class="p">,</span><span class="w">
        </span><span class="nl">"liquidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"legs"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"trade_seq"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">179</span><span class="p">,</span><span class="w">
            </span><span class="nl">"trade_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1156"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1661867454335</span><span class="p">,</span><span class="w">
            </span><span class="nl">"tick_direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"risk_reducing"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"reduce_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"profit_loss"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">20008.5</span><span class="p">,</span><span class="w">
            </span><span class="nl">"post_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"720078"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mmp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"matching_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">20220.61</span><span class="p">,</span><span class="w">
            </span><span class="nl">"liquidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"index_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">20332.44</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fee_currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fee"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">5e-8</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"combo_trade_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1154"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"combo_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-FS-2SEP22_PERP"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"api"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"trade_seq"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">159</span><span class="p">,</span><span class="w">
            </span><span class="nl">"trade_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1155"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1661867454335</span><span class="p">,</span><span class="w">
            </span><span class="nl">"tick_direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"risk_reducing"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"reduce_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"profit_loss"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">21200.32</span><span class="p">,</span><span class="w">
            </span><span class="nl">"post_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"720077"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mmp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"matching_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">20988.21</span><span class="p">,</span><span class="w">
            </span><span class="nl">"liquidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-2SEP22"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"index_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">20332.44</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fee_currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fee"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">5e-8</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"combo_trade_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1154"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"combo_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-FS-2SEP22_PERP"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"api"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-FS-2SEP22_PERP"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">20332.44</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"api"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"user.combo_trades.BTC-FS-2SEP22_PERP.raw"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get notifications about the user&#39;s trades in an instrument (trades contain <code>legs</code> field).</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=user.combo_trades.%7Binstrument_name%7D.%7Binterval%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private subscription; subscribing is only possible when authenticated.</div></aside>
<h3 id='channel-parameters-30'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>interval</td>
<td>true</td>
<td>string</td>
<td><code>agg2</code><br><code>100ms</code><br><code>raw</code></td>
<td>Frequency of notifications. Events will be aggregated over this interval. The value <code>raw</code> means no aggregation will be applied <strong>(Please note that <code>raw</code> interval is only available to authorized users)</strong></td>
</tr>
</tbody></table>
<h3 id='response-197'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h2 id='user-combo_trades-kind-currency-interval'>user.combo_trades.{kind}.{currency}.{interval}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">private/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">user.combo_trades.future_combo.BTC.raw</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"private/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"user.combo_trades.future_combo.BTC.raw"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">39</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1154"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1661867454334</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"risk_reducing"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"profit_loss"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">1191.82</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"720074"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mmp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"matching_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">767.6</span><span class="p">,</span><span class="w">
        </span><span class="nl">"liquidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"legs"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"trade_seq"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">179</span><span class="p">,</span><span class="w">
            </span><span class="nl">"trade_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1156"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1661867454335</span><span class="p">,</span><span class="w">
            </span><span class="nl">"tick_direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nl">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"risk_reducing"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"reduce_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"profit_loss"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">20008.5</span><span class="p">,</span><span class="w">
            </span><span class="nl">"post_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"720078"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mmp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"matching_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">20220.61</span><span class="p">,</span><span class="w">
            </span><span class="nl">"liquidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"index_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">20332.44</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fee_currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fee"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">5e-8</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"combo_trade_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1154"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"combo_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-FS-2SEP22_PERP"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"api"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"trade_seq"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">159</span><span class="p">,</span><span class="w">
            </span><span class="nl">"trade_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1155"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1661867454335</span><span class="p">,</span><span class="w">
            </span><span class="nl">"tick_direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"risk_reducing"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"reduce_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"profit_loss"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">21200.32</span><span class="p">,</span><span class="w">
            </span><span class="nl">"post_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"720077"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mmp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"matching_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">20988.21</span><span class="p">,</span><span class="w">
            </span><span class="nl">"liquidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-2SEP22"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"index_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">20332.44</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fee_currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"fee"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">5e-8</span><span class="p">,</span><span class="w">
            </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"combo_trade_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1154"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"combo_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-FS-2SEP22_PERP"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"api"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-FS-2SEP22_PERP"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">20332.44</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"api"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"user.combo_trades.future_combo.BTC.raw"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get notifications about the user&#39;s trades in any instrument of a given kind and given currency (trades contain <code>legs</code> field).</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=user.combo_trades.%7Bkind%7D.%7Bcurrency%7D.%7Binterval%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private subscription; subscribing is only possible when authenticated.</div></aside>
<h3 id='channel-parameters-31'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>kind</td>
<td>true</td>
<td>string</td>
<td><code>future_combo</code><br><code>option_combo</code><br><code>combo</code></td>
<td>Combo instrument kind, <code>&quot;combo&quot;</code> for any combo</td>
</tr>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>any</code></td>
<td>The currency symbol or <code>&quot;any&quot;</code> for all</td>
</tr>
<tr>
<td>interval</td>
<td>true</td>
<td>string</td>
<td><code>agg2</code><br><code>100ms</code><br><code>raw</code></td>
<td>Frequency of notifications. Events will be aggregated over this interval. The value <code>raw</code> means no aggregation will be applied <strong>(Please note that <code>raw</code> interval is only available to authorized users)</strong></td>
</tr>
</tbody></table>
<h3 id='response-198'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h2 id='user-lock'>user.lock</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">private/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">user.lock</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"private/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"user.lock"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"locked"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ALL"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"user.lock"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get notification when account is locked/unlocked</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=user.lock" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private subscription; subscribing is only possible when authenticated.</div></aside>
<h3 id='channel-parameters-32'>Channel Parameters</h3>
<p><em>This method takes no parameters</em></p>
<h3 id='response-199'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>Currency on which account lock has changed, <code>ALL</code> if changed for all currencies</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;locked</td>
<td>boolean</td>
<td>Value is set to &#39;true&#39; when user account is locked in currency</td>
</tr>
</tbody></table>
<h2 id='user-mmp_trigger-index_name'>user.mmp_trigger.{index_name}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">private/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">user.mmp_trigger.any</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"private/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"user.mmp_trigger.any"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"mmp_group"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"MassQuoteBot7"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"index_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"btc_usdc"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"frozen_until"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"user.mmp_trigger.any"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Triggered when one of mmp limits is crossed</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=user.mmp_trigger.%7Bindex_name%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private subscription; subscribing is only possible when authenticated.</div></aside>
<h3 id='channel-parameters-33'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>index_name</td>
<td>true</td>
<td>string</td>
<td><code>btc_usd</code><br><code>eth_usd</code><br><code>btc_usdc</code><br><code>eth_usdc</code><br><code>ada_usdc</code><br><code>algo_usdc</code><br><code>avax_usdc</code><br><code>bch_usdc</code><br><code>bnb_usdc</code><br><code>doge_usdc</code><br><code>dot_usdc</code><br><code>link_usdc</code><br><code>ltc_usdc</code><br><code>near_usdc</code><br><code>paxg_usdc</code><br><code>shib_usdc</code><br><code>sol_usdc</code><br><code>trx_usdc</code><br><code>trump_usdc</code><br><code>uni_usdc</code><br><code>xrp_usdc</code><br><code>usde_usdc</code><br><code>buidl_usdc</code><br><code>btcdvol_usdc</code><br><code>ethdvol_usdc</code><br><code>btc_usdt</code><br><code>eth_usdt</code><br><code>all</code></td>
<td>Index identifier of derivative instrument on the platform</td>
</tr>
</tbody></table>
<h3 id='response-200'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq</td>
<td>boolean</td>
<td>If true, indicates that the MMP trigger is for Block RFQ. Block RFQ MMP triggers are completely separate from normal order/quote MMP triggers.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;frozen_until</td>
<td>integer</td>
<td>Timestamp (milliseconds since the UNIX epoch) until the user will be frozen - 0 means that the user is frozen until manual reset.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_name</td>
<td>string</td>
<td>Index identifier of derivative instrument on the platform. For Block RFQ MMP, this will be &quot;all&quot; when triggered by trade count limit.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Triggered mmp group, this parameter is optional (appears only for Mass Quote orders trigger)</td>
</tr>
</tbody></table>
<h2 id='user-orders-instrument_name-raw'>user.orders.{instrument_name}.raw</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">private/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">user.orders.BTC-PERPETUAL.raw</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"private/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"user.orders.BTC-PERPETUAL.raw"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"time_in_force"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"replaced"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reduce_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">10502.52</span><span class="p">,</span><span class="w">
      </span><span class="nl">"post_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"original_order_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"max_show"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_update_timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1581507423789</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_rebalance"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_liquidation"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"filled_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1581507423789</span><span class="p">,</span><span class="w">
      </span><span class="nl">"average_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"api"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"user.orders.BTC-PERPETUAL.raw"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get notifications about changes in user&#39;s orders for given instrument.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=user.orders.%7Binstrument_name%7D.raw" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private subscription; subscribing is only possible when authenticated.</div></aside>
<h3 id='channel-parameters-34'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
</tbody></table>
<h3 id='response-201'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
</tbody></table>
<h2 id='user-orders-instrument_name-interval'>user.orders.{instrument_name}.{interval}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">private/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">user.orders.BTC-PERPETUAL.100ms</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"private/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"user.orders.BTC-PERPETUAL.100ms"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"time_in_force"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"replaced"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">10460.43</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"original_order_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"max_show"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_update_timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1581507159533</span><span class="p">,</span><span class="w">
        </span><span class="nl">"label"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"is_rebalance"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"is_liquidation"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"filled_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"creation_timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1581507159533</span><span class="p">,</span><span class="w">
        </span><span class="nl">"average_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"api"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"user.orders.BTC-PERPETUAL.100ms"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get notifications about changes in user&#39;s orders for given instrument.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=user.orders.%7Binstrument_name%7D.%7Binterval%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private subscription; subscribing is only possible when authenticated.</div></aside>
<h3 id='channel-parameters-35'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>interval</td>
<td>true</td>
<td>string</td>
<td><code>100ms</code><br><code>agg2</code></td>
<td>Frequency of notifications. Events will be aggregated over this interval.</td>
</tr>
</tbody></table>
<h3 id='response-202'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
</tbody></table>
<h2 id='user-orders-kind-currency-raw'>user.orders.{kind}.{currency}.raw</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">private/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">user.orders.any.any.raw</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"private/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"user.orders.any.any.raw"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"time_in_force"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"replaced"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"reduce_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">10542.68</span><span class="p">,</span><span class="w">
      </span><span class="nl">"post_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"original_order_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"6"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"max_show"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
      </span><span class="nl">"last_update_timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1581507583024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_rebalance"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"is_liquidation"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"filled_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"creation_timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1581507583024</span><span class="p">,</span><span class="w">
      </span><span class="nl">"average_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"api"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"user.orders.any.any.raw"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get notifications about changes in user&#39;s orders in instruments of a given kind and currency.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=user.orders.%7Bkind%7D.%7Bcurrency%7D.raw" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private subscription; subscribing is only possible when authenticated.</div></aside>
<h3 id='channel-parameters-36'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>kind</td>
<td>true</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code><br><code>combo</code><br><code>any</code></td>
<td>Instrument kind, <code>&quot;combo&quot;</code> for any combo or <code>&quot;any&quot;</code> for all</td>
</tr>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>any</code></td>
<td>The currency symbol or <code>&quot;any&quot;</code> for all</td>
</tr>
</tbody></table>
<h3 id='response-203'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
</tbody></table>
<h2 id='user-orders-kind-currency-interval'>user.orders.{kind}.{currency}.{interval}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">private/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">user.orders.future.BTC.100ms</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"private/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"user.orders.future.BTC.100ms"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"time_in_force"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"good_til_cancelled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">3928.5</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"476137"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"max_show"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
        </span><span class="nl">"last_update_timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1550826337209</span><span class="p">,</span><span class="w">
        </span><span class="nl">"label"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="nl">"is_rebalance"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"is_liquidation"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"filled_amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"buy"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"creation_timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1550826337209</span><span class="p">,</span><span class="w">
        </span><span class="nl">"average_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"api"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"user.orders.future.BTC.100ms"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get notifications about changes in user&#39;s orders in instruments of a given kind and currency.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=user.orders.%7Bkind%7D.%7Bcurrency%7D.%7Binterval%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private subscription; subscribing is only possible when authenticated.</div></aside>
<h3 id='channel-parameters-37'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>kind</td>
<td>true</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code><br><code>combo</code><br><code>any</code></td>
<td>Instrument kind, <code>&quot;combo&quot;</code> for any combo or <code>&quot;any&quot;</code> for all</td>
</tr>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>any</code></td>
<td>The currency symbol or <code>&quot;any&quot;</code> for all</td>
</tr>
<tr>
<td>interval</td>
<td>true</td>
<td>string</td>
<td><code>100ms</code><br><code>agg2</code></td>
<td>Frequency of notifications. Events will be aggregated over this interval.</td>
</tr>
</tbody></table>
<h3 id='response-204'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote</td>
<td>boolean</td>
<td>If order is a quote. Present only if true.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;triggered</td>
<td>boolean</td>
<td>Whether the trigger order has been triggered</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mobile</td>
<td>boolean</td>
<td>optional field with value <code>true</code> added only when created with Mobile Application</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;app_name</td>
<td>string</td>
<td>The name of the application that placed the order on behalf of the user (optional).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;implv</td>
<td>number</td>
<td>Implied volatility in percent. (Only if <code>advanced=&quot;implv&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;refresh_amount</td>
<td>number</td>
<td>The initial display amount of iceberg order. Iceberg order display amount will be refreshed to that value after match consuming actual display amount. Absent for other types of orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;usd</td>
<td>number</td>
<td>Option price in USD (Only if <code>advanced=&quot;usd&quot;</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oto_order_ids</td>
<td>array of string</td>
<td>The Ids of the orders that will be triggered if the order is filled</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;average_price</td>
<td>number</td>
<td>Average fill price of the order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>advanced type: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (Only for options; field is omitted if not applicable).</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>boolean</td>
<td><code>true</code> for post-only orders only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;filled_amount</td>
<td>number</td>
<td>Filled amount of the order. For perpetual and futures the filled_amount is in USD units, for options - in units or corresponding cryptocurrency contracts, e.g., BTC or ETH.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger</td>
<td>string</td>
<td>Trigger type (only for trigger orders). Allowed values: <code>&quot;index_price&quot;</code>, <code>&quot;mark_price&quot;</code>, <code>&quot;last_price&quot;</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_order_id</td>
<td>string</td>
<td>Id of the trigger order that created the order (Only for orders that were created by triggered orders).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>It represents the order size in contract units. (Optional, may be absent in historical data).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_secondary_oto</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can be triggered by another order, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;replaced</td>
<td>boolean</td>
<td><code>true</code> if the order was edited (by user or - in case of advanced options orders - by pricing engine), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_group</td>
<td>string</td>
<td>Name of the MMP group supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if the order is a MMP order, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;last_update_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;creation_timestamp</td>
<td>integer</td>
<td>The timestamp (milliseconds since the Unix epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cancel_reason</td>
<td>string</td>
<td>Enumerated reason behind cancel <code>&quot;user_request&quot;</code>, <code>&quot;autoliquidation&quot;</code>, <code>&quot;cancel_on_disconnect&quot;</code>, <code>&quot;risk_mitigation&quot;</code>, <code>&quot;pme_risk_reduction&quot;</code> (portfolio margining risk reduction), <code>&quot;pme_account_locked&quot;</code> (portfolio margining account locked per currency), <code>&quot;position_locked&quot;</code>, <code>&quot;mmp_trigger&quot;</code> (market maker protection), <code>&quot;mmp_config_curtailment&quot;</code> (market maker configured quantity decreased), <code>&quot;edit_post_only_reject&quot;</code> (cancelled on edit because of <code>reject_post_only</code> setting), <code>&quot;oco_other_closed&quot;</code> (the oco order linked to this order was closed), <code>&quot;oto_primary_closed&quot;</code> (the oto primary order that was going to trigger this order was cancelled), <code>&quot;settlement&quot;</code> (closed because of a settlement)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp_cancelled</td>
<td>boolean</td>
<td><code>true</code> if order was cancelled by mmp trigger (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>The same QuoteID as supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_rebalance</td>
<td>boolean</td>
<td>Optional (only for spot). <code>true</code> if order was automatically created during cross-collateral balance restoration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reject_post_only</td>
<td>boolean</td>
<td><code>true</code> if order has <code>reject_post_only</code> flag (field is present only when <code>post_only</code> is <code>true</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (up to 64 characters)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_liquidation</td>
<td>boolean</td>
<td>Optional (not added for spot). <code>true</code> if order was automatically created during liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number or string</td>
<td>Price in base currency or &quot;market_price&quot; in case of open trigger market orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;web</td>
<td>boolean</td>
<td><code>true</code> if created via Deribit frontend (optional)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;time_in_force</td>
<td>string</td>
<td>Order time in force: <code>&quot;good_til_cancelled&quot;</code>, <code>&quot;good_til_day&quot;</code>, <code>&quot;fill_or_kill&quot;</code> or <code>&quot;immediate_or_cancel&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_reference_price</td>
<td>number</td>
<td>The price of the given trigger at the time when the order was placed (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;display_amount</td>
<td>number</td>
<td>The actual display amount of iceberg order. Absent for other types of orders.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit&quot;</code>, <code>&quot;market&quot;</code>, <code>&quot;stop_limit&quot;</code>, <code>&quot;stop_market&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;is_primary_otoco</td>
<td>boolean</td>
<td><code>true</code> if the order is an order that can trigger an OCO pair, otherwise not present.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;original_order_type</td>
<td>string</td>
<td>Original order type. Optional field</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade</td>
<td>boolean</td>
<td><code>true</code> if order made from block_trade trade, added only in that case.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_price</td>
<td>number</td>
<td>Trigger price (Only for future trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;oco_ref</td>
<td>string</td>
<td>Unique reference that identifies a one_cancels_others (OCO) pair.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_offset</td>
<td>number</td>
<td>The maximum deviation from the price peak beyond which the order will be triggered (Only for trailing trigger orders)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>Identifier of the QuoteSet supplied in the <code>private/mass_quote</code> request.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;auto_replaced</td>
<td>boolean</td>
<td>Options, advanced orders only - <code>true</code> if last modification of the order was performed by the pricing engine, otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>boolean</td>
<td>Optional (not added for spot). &#39;<code>true</code> for reduce-only orders only&#39;</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>It represents the requested order size. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users), otherwise <code>false</code>.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trigger_fill_condition</td>
<td>string</td>
<td><p>The fill condition of the linked order (Only for linked order types), default: <code>first_hit</code>.</p> <ul> <li><code>&quot;first_hit&quot;</code> - any execution of the primary order will fully cancel/place all secondary orders.</li> <li><code>&quot;complete_fill&quot;</code> - a complete execution (meaning the primary order no longer exists) will cancel/place the secondary orders.</li> <li><code>&quot;incremental&quot;</code> - any fill of the primary order will cause proportional partial cancellation/placement of the secondary order. The amount that will be subtracted/added to the secondary order will be rounded down to the contract size.</li> </ul></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;primary_order_id</td>
<td>string</td>
<td>Unique order identifier</td>
</tr>
</tbody></table>
<h2 id='user-portfolio-currency'>user.portfolio.{currency}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">private/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">user.portfolio.btc</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"private/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"user.portfolio.btc"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"options_pl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0058</span><span class="p">,</span><span class="w">
      </span><span class="nl">"projected_delta_total"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">32.613978</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options_theta_map"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"btc_usd"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">16.13825</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"available_withdrawal_funds"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">301.35426172</span><span class="p">,</span><span class="w">
      </span><span class="nl">"estimated_liquidation_ratio_map"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"btc_usd"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.10098729140701267</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"options_session_rpl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"futures_session_rpl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">-0.03311399</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_pl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">-0.33014225</span><span class="p">,</span><span class="w">
      </span><span class="nl">"spot_reserve"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"additional_reserve"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options_session_upl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0058</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cross_collateral_enabled"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"delta_total_map"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"btc_usd"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">31.594397699</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"options_value"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">-0.0079</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options_vega_map"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"btc_usd"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.07976</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"maintenance_margin"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.8854841</span><span class="p">,</span><span class="w">
      </span><span class="nl">"futures_session_upl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.05921555</span><span class="p">,</span><span class="w">
      </span><span class="nl">"portfolio_margining_enabled"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"futures_pl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">-0.32434225</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options_gamma_map"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"btc_usd"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.00001</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options_delta"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">-1.01958</span><span class="p">,</span><span class="w">
      </span><span class="nl">"initial_margin"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">1.24639592</span><span class="p">,</span><span class="w">
      </span><span class="nl">"projected_maintenance_margin"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.7543841</span><span class="p">,</span><span class="w">
      </span><span class="nl">"available_funds"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">301.38036328</span><span class="p">,</span><span class="w">
      </span><span class="nl">"equity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">302.6188592</span><span class="p">,</span><span class="w">
      </span><span class="nl">"margin_model"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"segregated_sm"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"balance"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">302.60065765</span><span class="p">,</span><span class="w">
      </span><span class="nl">"session_upl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.05341555</span><span class="p">,</span><span class="w">
      </span><span class="nl">"margin_balance"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">302.62675921</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options_theta"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">16.13825</span><span class="p">,</span><span class="w">
      </span><span class="nl">"estimated_liquidation_ratio"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.10098729</span><span class="p">,</span><span class="w">
      </span><span class="nl">"session_rpl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">-0.03311399</span><span class="p">,</span><span class="w">
      </span><span class="nl">"fee_balance"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options_vega"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.07976</span><span class="p">,</span><span class="w">
      </span><span class="nl">"projected_initial_margin"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">1.01529592</span><span class="p">,</span><span class="w">
      </span><span class="nl">"options_gamma"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.00001</span><span class="p">,</span><span class="w">
      </span><span class="nl">"delta_total"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">31.602298</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"user.portfolio.btc"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Provides information about current user portfolio</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=user.portfolio.%7Bcurrency%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private subscription; subscribing is only possible when authenticated.</div></aside>
<h3 id='channel-parameters-38'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>any</code></td>
<td>The currency symbol or <code>&quot;any&quot;</code> for all</td>
</tr>
</tbody></table>
<h3 id='response-205'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td><em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_pl</td>
<td>number</td>
<td>Options profit and Loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;projected_delta_total</td>
<td>number</td>
<td>The sum of position deltas without positions that will expire during closest expiration</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_theta_map</td>
<td>object</td>
<td>Map of options&#39; thetas per index</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_margin_balance_usd</td>
<td>number</td>
<td>Optional (only for users using cross margin). The account&#39;s total margin balance in all cross collateral currencies, expressed in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_delta_total_usd</td>
<td>number</td>
<td>Optional (only for users using cross margin). The account&#39;s total delta total in all cross collateral currencies, expressed in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;available_withdrawal_funds</td>
<td>number</td>
<td>The account&#39;s available to withdrawal funds</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;estimated_liquidation_ratio_map</td>
<td>object</td>
<td>Map of Estimated Liquidation Ratio per index, it is returned only for users with <code>segregated_sm</code> margin model. Multiplying it by future position&#39;s market price returns its estimated liquidation price.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_session_rpl</td>
<td>number</td>
<td>Options session realized profit and Loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;futures_session_rpl</td>
<td>number</td>
<td>Futures session realized profit and Loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_pl</td>
<td>number</td>
<td>Profit and loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;additional_reserve</td>
<td>number</td>
<td>The account&#39;s balance reserved in other orders</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_session_upl</td>
<td>number</td>
<td>Options session unrealized profit and Loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;cross_collateral_enabled</td>
<td>boolean</td>
<td>When <code>true</code> cross collateral is enabled for user</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delta_total_map</td>
<td>object</td>
<td>Map of position sum&#39;s per index</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_value</td>
<td>number</td>
<td>Options value</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_vega_map</td>
<td>object</td>
<td>Map of options&#39; vegas per index</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;maintenance_margin</td>
<td>number</td>
<td>The maintenance margin. When cross collateral is enabled, this aggregated value is calculated by converting the sum of each cross collateral currency&#39;s value to the given currency, using each cross collateral currency&#39;s index.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;futures_session_upl</td>
<td>number</td>
<td>Futures session unrealized profit and Loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;portfolio_margining_enabled</td>
<td>boolean</td>
<td>When <code>true</code> portfolio margining is enabled for user</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;futures_pl</td>
<td>number</td>
<td>Futures profit and Loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_gamma_map</td>
<td>object</td>
<td>Map of options&#39; gammas per index</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;currency</td>
<td>string</td>
<td>The selected currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_delta</td>
<td>number</td>
<td>Options summary delta</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;initial_margin</td>
<td>number</td>
<td>The account&#39;s initial margin. When cross collateral is enabled, this aggregated value is calculated by converting the sum of each cross collateral currency&#39;s value to the given currency, using each cross collateral currency&#39;s index.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;projected_maintenance_margin</td>
<td>number</td>
<td>Projected maintenance margin. When cross collateral is enabled, this aggregated value is calculated by converting the sum of each cross collateral currency&#39;s value to the given currency, using each cross collateral currency&#39;s index.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;available_funds</td>
<td>number</td>
<td>The account&#39;s available funds. When cross collateral is enabled, this aggregated value is calculated by converting the sum of each cross collateral currency&#39;s value to the given currency, using each cross collateral currency&#39;s index.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;equity</td>
<td>number</td>
<td>The account&#39;s current equity</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;margin_model</td>
<td>string</td>
<td>Name of user&#39;s currently enabled margin model</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;balance</td>
<td>number</td>
<td>The account&#39;s balance</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_upl</td>
<td>number</td>
<td>Session unrealized profit and loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;margin_balance</td>
<td>number</td>
<td>The account&#39;s margin balance. When cross collateral is enabled, this aggregated value is calculated by converting the sum of each cross collateral currency&#39;s value to the given currency, using each cross collateral currency&#39;s index.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_theta</td>
<td>number</td>
<td>Options summary theta</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_initial_margin_usd</td>
<td>number</td>
<td>Optional (only for users using cross margin). The account&#39;s total initial margin in all cross collateral currencies, expressed in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;estimated_liquidation_ratio</td>
<td>number</td>
<td>[DEPRECATED] Estimated Liquidation Ratio is returned only for users with <code>segregated_sm</code> margin model. Multiplying it by future position&#39;s market price returns its estimated liquidation price. Use estimated_liquidation_ratio_map instead.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;session_rpl</td>
<td>number</td>
<td>Session realized profit and loss</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_balance</td>
<td>number</td>
<td>The account&#39;s fee balance (it can be used to pay for fees)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_maintenance_margin_usd</td>
<td>number</td>
<td>Optional (only for users using cross margin). The account&#39;s total maintenance margin in all cross collateral currencies, expressed in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_vega</td>
<td>number</td>
<td>Options summary vega</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;projected_initial_margin</td>
<td>number</td>
<td>Projected initial margin. When cross collateral is enabled, this aggregated value is calculated by converting the sum of each cross collateral currency&#39;s value to the given currency, using each cross collateral currency&#39;s index.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;options_gamma</td>
<td>number</td>
<td>Options summary gamma</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;total_equity_usd</td>
<td>number</td>
<td>Optional (only for users using cross margin). The account&#39;s total equity in all cross collateral currencies, expressed in USD</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;delta_total</td>
<td>number</td>
<td>The sum of position deltas</td>
</tr>
</tbody></table>
<h2 id='user-trades-instrument_name-interval'>user.trades.{instrument_name}.{interval}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">private/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">user.trades.BTC-PERPETUAL.raw</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"private/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"user.trades.BTC-PERPETUAL.raw"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">30289432</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"48079254"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1590484156350</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">8954</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"4008965646"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"matching_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">8952.86</span><span class="p">,</span><span class="w">
        </span><span class="nl">"liquidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">8956.73</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.00000168</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">30289433</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"48079255"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1590484156350</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">8954</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"market"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"4008965646"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"matching_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">8952.86</span><span class="p">,</span><span class="w">
        </span><span class="nl">"liquidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-PERPETUAL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">8956.73</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.00000168</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"user.trades.BTC-PERPETUAL.raw"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get notifications about the user&#39;s trades in an instrument.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=user.trades.%7Binstrument_name%7D.%7Binterval%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private subscription; subscribing is only possible when authenticated.</div></aside>
<h3 id='channel-parameters-39'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>instrument_name</td>
<td>true</td>
<td>string</td>
<td></td>
<td>Instrument name</td>
</tr>
<tr>
<td>interval</td>
<td>true</td>
<td>string</td>
<td><code>agg2</code><br><code>100ms</code><br><code>raw</code></td>
<td>Frequency of notifications. Events will be aggregated over this interval. The value <code>raw</code> means no aggregation will be applied <strong>(Please note that <code>raw</code> interval is only available to authorized users)</strong></td>
</tr>
</tbody></table>
<h3 id='response-206'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h2 id='user-trades-kind-currency-interval'>user.trades.{kind}.{currency}.{interval}</h2>
<blockquote>
<p><em>Subscriptions are only available via websockets.</em></p>
</blockquote>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="c1">// To subscribe to this channel:</span>
<span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> 
    <span class="p">{</span><span class="dl">"</span><span class="s2">jsonrpc</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">2.0</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">method</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">private/subscribe</span><span class="dl">"</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
        <span class="dl">"</span><span class="s2">channels</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span><span class="dl">"</span><span class="s2">user.trades.future.BTC.100ms</span><span class="dl">"</span><span class="p">]}</span>
    <span class="p">};</span>
<span class="kd">var</span> <span class="nx">ws</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WebSocket</span><span class="p">(</span><span class="dl">'</span><span class="s1">wss://test.deribit.com/ws/api/v2</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onmessage</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the notifications...</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">received from server : </span><span class="dl">'</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">ws</span><span class="p">.</span><span class="nx">onopen</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">ws</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">msg</span><span class="p">));</span>
<span class="p">};</span>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">websockets</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># To subscribe to this channel:
</span><span class="n">msg</span> <span class="o">=</span> \
    <span class="p">{</span><span class="s">"jsonrpc"</span><span class="p">:</span> <span class="s">"2.0"</span><span class="p">,</span>
     <span class="s">"method"</span><span class="p">:</span> <span class="s">"private/subscribe"</span><span class="p">,</span>
     <span class="s">"id"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
     <span class="s">"params"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"channels"</span><span class="p">:</span> <span class="p">[</span><span class="s">"user.trades.future.BTC.100ms"</span><span class="p">]}</span>
    <span class="p">}</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">call_api</span><span class="p">(</span><span class="n">msg</span><span class="p">):</span>
   <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'wss://test.deribit.com/ws/api/v2'</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
       <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
       <span class="k">while</span> <span class="n">websocket</span><span class="p">.</span><span class="nb">open</span><span class="p">:</span>
           <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="p">.</span><span class="n">recv</span><span class="p">()</span>
           <span class="c1"># do something with the notifications...
</span>           <span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

<span class="n">asyncio</span><span class="p">.</span><span class="n">get_event_loop</span><span class="p">().</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">call_api</span><span class="p">(</span><span class="n">json</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">msg</span><span class="p">)))</span>
</code></pre></div>
<blockquote>
<p>This subscription will send next notifications like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"params"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"trade_seq"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">74405</span><span class="p">,</span><span class="w">
        </span><span class="nl">"trade_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"48079262"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1590484255886</span><span class="p">,</span><span class="w">
        </span><span class="nl">"tick_direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"filled"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"reduce_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">8947</span><span class="p">,</span><span class="w">
        </span><span class="nl">"post_only"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"limit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"order_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"4008978075"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"matching_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="nl">"mark_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">8970.03</span><span class="p">,</span><span class="w">
        </span><span class="nl">"liquidity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"T"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"instrument_name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC-25SEP20"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"index_price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">8953.53</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee_currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"BTC"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"fee"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.00049961</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sell"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">8940</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"channel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"user.trades.future.BTC.100ms"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"method"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"subscription"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"jsonrpc"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Get notifications about the user&#39;s trades in any instrument of a given kind and given currency.</p>

<p><a href="https://test.deribit.com/api_console?method=%2Fprivate%2Fsubscribe&channels=user.trades.%7Bkind%7D.%7Bcurrency%7D.%7Binterval%7D" target="_blank" rel="noopener noreferrer">Try in API console</a></p>

<aside class='multi-notice'><div>  This is a private subscription; subscribing is only possible when authenticated.</div></aside>
<h3 id='channel-parameters-40'>Channel Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Enum</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>kind</td>
<td>true</td>
<td>string</td>
<td><code>future</code><br><code>option</code><br><code>spot</code><br><code>future_combo</code><br><code>option_combo</code><br><code>combo</code><br><code>any</code></td>
<td>Instrument kind, <code>&quot;combo&quot;</code> for any combo or <code>&quot;any&quot;</code> for all</td>
</tr>
<tr>
<td>currency</td>
<td>true</td>
<td>string</td>
<td><code>BTC</code><br><code>ETH</code><br><code>USDC</code><br><code>USDT</code><br><code>EURR</code><br><code>any</code></td>
<td>The currency symbol or <code>&quot;any&quot;</code> for all</td>
</tr>
<tr>
<td>interval</td>
<td>true</td>
<td>string</td>
<td><code>agg2</code><br><code>100ms</code><br><code>raw</code></td>
<td>Frequency of notifications. Events will be aggregated over this interval. The value <code>raw</code> means no aggregation will be applied <strong>(Please note that <code>raw</code> interval is only available to authorized users)</strong></td>
</tr>
</tbody></table>
<h3 id='response-207'>Response</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>array of <em>object</em></td>
<td></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_id</td>
<td>string</td>
<td>Unique (per currency) trade identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;tick_direction</td>
<td>integer</td>
<td>Direction of the &quot;tick&quot; (<code>0</code> = Plus Tick, <code>1</code> = Zero-Plus Tick, <code>2</code> = Minus Tick, <code>3</code> = Zero-Minus Tick).</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee_currency</td>
<td>string</td>
<td>Currency, i.e <code>&quot;BTC&quot;</code>, <code>&quot;ETH&quot;</code>, <code>&quot;USDC&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;api</td>
<td>boolean</td>
<td><code>true</code> if user order was created with API</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;advanced</td>
<td>string</td>
<td>Advanced type of user order: <code>&quot;usd&quot;</code> or <code>&quot;implv&quot;</code> (only for options; omitted if not applicable)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_id</td>
<td>string</td>
<td>Id of the user order (maker or taker), i.e. subscriber&#39;s order id that took part in the trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidity</td>
<td>string</td>
<td>Describes what was role of users order: <code>&quot;M&quot;</code> when it was maker order, <code>&quot;T&quot;</code> when it was taker order</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;post_only</td>
<td>string</td>
<td><code>true</code> if user order is post-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;direction</td>
<td>string</td>
<td>Direction: <code>buy</code>, or <code>sell</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;contracts</td>
<td>number</td>
<td>Trade size in contract units (optional, may be absent in historical trades)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mmp</td>
<td>boolean</td>
<td><code>true</code> if user order is MMP</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;fee</td>
<td>number</td>
<td>User&#39;s fee in units of the specified <code>fee_currency</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_id</td>
<td>string</td>
<td>QuoteID of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;index_price</td>
<td>number</td>
<td>Index Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;label</td>
<td>string</td>
<td>User defined label (presented only when previously set for order by user)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_trade_id</td>
<td>string</td>
<td>Block trade id - when trade was part of a block trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;price</td>
<td>number</td>
<td>Price in base currency</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_id</td>
<td>string</td>
<td>Optional field containing combo instrument name if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;matching_id</td>
<td>string</td>
<td>Always <code>null</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;order_type</td>
<td>string</td>
<td>Order type: <code>&quot;limit</code>, <code>&quot;market&quot;</code>, or <code>&quot;liquidation&quot;</code></td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;profit_loss</td>
<td>number</td>
<td>Profit and loss in base currency.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;timestamp</td>
<td>integer</td>
<td>The timestamp of the trade (milliseconds since the UNIX epoch)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;iv</td>
<td>number</td>
<td>Option implied volatility for the price (Option only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;state</td>
<td>string</td>
<td>Order state: <code>&quot;open&quot;</code>, <code>&quot;filled&quot;</code>, <code>&quot;rejected&quot;</code>, <code>&quot;cancelled&quot;</code>, <code>&quot;untriggered&quot;</code> or <code>&quot;archive&quot;</code> (if order was archived)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;underlying_price</td>
<td>number</td>
<td>Underlying price for implied volatility calculations (Options only)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_quote_id</td>
<td>integer</td>
<td>ID of the Block RFQ quote - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;quote_set_id</td>
<td>string</td>
<td>QuoteSet of the user order (optional, present only for orders placed with <code>private/mass_quote</code>)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;mark_price</td>
<td>number</td>
<td>Mark Price at the moment of trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;block_rfq_id</td>
<td>integer</td>
<td>ID of the Block RFQ - when trade was part of the Block RFQ</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;combo_trade_id</td>
<td>number</td>
<td>Optional field containing combo trade identifier if the trade is a combo trade</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;reduce_only</td>
<td>string</td>
<td><code>true</code> if user order is reduce-only</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;amount</td>
<td>number</td>
<td>Trade amount. For perpetual and inverse futures the amount is in USD units. For options and linear futures and it is the underlying base currency coin.</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;liquidation</td>
<td>string</td>
<td>Optional field (only for trades caused by liquidation): <code>&quot;M&quot;</code> when maker side of trade was under liquidation, <code>&quot;T&quot;</code> when taker side was under liquidation, <code>&quot;MT&quot;</code> when both sides of trade were under liquidation</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;trade_seq</td>
<td>integer</td>
<td>The sequence number of the trade within instrument</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;risk_reducing</td>
<td>boolean</td>
<td><code>true</code> if user order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users)</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;instrument_name</td>
<td>string</td>
<td>Unique instrument identifier</td>
</tr>
<tr>
<td>&nbsp;&nbsp;&rsaquo;&nbsp;&nbsp;legs</td>
<td>array</td>
<td>Optional field containing leg trades if trade is a combo trade (present when querying for <strong>only</strong> combo trades and in <code>combo_trades</code> events)</td>
</tr>
</tbody></table>
<h1 id='rpc-error-codes'>RPC Error Codes</h1>
<table><thead>
<tr>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Short message</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">0 or absent</td>
<td style="text-align: left"></td>
<td style="text-align: left">Success, No error.</td>
</tr>
<tr>
<td style="text-align: left">10000</td>
<td style="text-align: left"><code>&quot;authorization_required&quot;</code></td>
<td style="text-align: left">Authorization issue, invalid or absent signature etc.</td>
</tr>
<tr>
<td style="text-align: left">10001</td>
<td style="text-align: left"><code>&quot;error&quot;</code></td>
<td style="text-align: left">Some general failure, no public information available.</td>
</tr>
<tr>
<td style="text-align: left">10002</td>
<td style="text-align: left"><code>&quot;qty_too_low&quot;</code></td>
<td style="text-align: left">Order quantity is too low.</td>
</tr>
<tr>
<td style="text-align: left">10003</td>
<td style="text-align: left"><code>&quot;order_overlap&quot;</code></td>
<td style="text-align: left">Rejection, order overlap is found and self-trading is not enabled.</td>
</tr>
<tr>
<td style="text-align: left">10004</td>
<td style="text-align: left"><code>&quot;order_not_found&quot;</code></td>
<td style="text-align: left">Attempt to operate with order that can&#39;t be found by specified id or label.</td>
</tr>
<tr>
<td style="text-align: left">10005</td>
<td style="text-align: left"><code>&quot;price_too_low &lt;Limit&gt;&quot;</code></td>
<td style="text-align: left">Price is too low, <code>&lt;Limit&gt;</code> defines current limit for the operation.</td>
</tr>
<tr>
<td style="text-align: left">10006</td>
<td style="text-align: left"><code>&quot;price_too_low4idx &lt;Limit&gt;&quot;</code></td>
<td style="text-align: left">Price is too low for current index, <code>&lt;Limit&gt;</code> defines current bottom limit for the operation.</td>
</tr>
<tr>
<td style="text-align: left">10007</td>
<td style="text-align: left"><code>&quot;price_too_high &lt;Limit&gt;&quot;</code></td>
<td style="text-align: left">Price is too high, <code>&lt;Limit&gt;</code> defines current up limit for the operation.</td>
</tr>
<tr>
<td style="text-align: left">10009</td>
<td style="text-align: left"><code>&quot;not_enough_funds&quot;</code></td>
<td style="text-align: left">Account has not enough funds for the operation.</td>
</tr>
<tr>
<td style="text-align: left">10010</td>
<td style="text-align: left"><code>&quot;already_closed&quot;</code></td>
<td style="text-align: left">Attempt of doing something with closed order.</td>
</tr>
<tr>
<td style="text-align: left">10011</td>
<td style="text-align: left"><code>&quot;price_not_allowed&quot;</code></td>
<td style="text-align: left">This price is not allowed for some reason.</td>
</tr>
<tr>
<td style="text-align: left">10012</td>
<td style="text-align: left"><code>&quot;book_closed&quot;</code></td>
<td style="text-align: left">Operation for an instrument which order book had been closed.</td>
</tr>
<tr>
<td style="text-align: left">10013</td>
<td style="text-align: left"><code>&quot;pme_max_total_open_orders &lt;Limit&gt;&quot;</code></td>
<td style="text-align: left">Total limit of open orders has been exceeded, it is applicable for PME users.</td>
</tr>
<tr>
<td style="text-align: left">10014</td>
<td style="text-align: left"><code>&quot;pme_max_future_open_orders &lt;Limit&gt;&quot;</code></td>
<td style="text-align: left">Limit of count of futures&#39; open orders has been exceeded, it is applicable for PME users.</td>
</tr>
<tr>
<td style="text-align: left">10015</td>
<td style="text-align: left"><code>&quot;pme_max_option_open_orders &lt;Limit&gt;&quot;</code></td>
<td style="text-align: left">Limit of count of options&#39; open orders has been exceeded, it is applicable for PME users.</td>
</tr>
<tr>
<td style="text-align: left">10016</td>
<td style="text-align: left"><code>&quot;pme_max_future_open_orders_size &lt;Limit&gt;&quot;</code></td>
<td style="text-align: left">Limit of size for futures has been exceeded, it is applicable for PME users.</td>
</tr>
<tr>
<td style="text-align: left">10017</td>
<td style="text-align: left"><code>&quot;pme_max_option_open_orders_size &lt;Limit&gt;&quot;</code></td>
<td style="text-align: left">Limit of size for options has been exceeded, it is applicable for PME users.</td>
</tr>
<tr>
<td style="text-align: left">10018</td>
<td style="text-align: left"><code>&quot;non_pme_max_future_position_size &lt;Limit&gt;&quot;</code></td>
<td style="text-align: left">Limit of size for futures has been exceeded, it is applicable for non-PME users.</td>
</tr>
<tr>
<td style="text-align: left">10019</td>
<td style="text-align: left"><code>&quot;locked_by_admin&quot;</code></td>
<td style="text-align: left">Trading is temporary locked by the admin.</td>
</tr>
<tr>
<td style="text-align: left">10020</td>
<td style="text-align: left"><code>&quot;invalid_or_unsupported_instrument&quot;</code></td>
<td style="text-align: left">Instrument name is not valid.</td>
</tr>
<tr>
<td style="text-align: left">10021</td>
<td style="text-align: left"><code>&quot;invalid_amount&quot;</code></td>
<td style="text-align: left">Amount is not valid.</td>
</tr>
<tr>
<td style="text-align: left">10022</td>
<td style="text-align: left"><code>&quot;invalid_quantity&quot;</code></td>
<td style="text-align: left">quantity was not recognized as a valid number (for API v1).</td>
</tr>
<tr>
<td style="text-align: left">10023</td>
<td style="text-align: left"><code>&quot;invalid_price&quot;</code></td>
<td style="text-align: left">price was not recognized as a valid number.</td>
</tr>
<tr>
<td style="text-align: left">10024</td>
<td style="text-align: left"><code>&quot;invalid_max_show&quot;</code></td>
<td style="text-align: left"><code>max_show</code> parameter was not recognized as a valid number.</td>
</tr>
<tr>
<td style="text-align: left">10025</td>
<td style="text-align: left"><code>&quot;invalid_order_id&quot;</code></td>
<td style="text-align: left">Order id is missing or its format was not recognized as valid.</td>
</tr>
<tr>
<td style="text-align: left">10026</td>
<td style="text-align: left"><code>&quot;price_precision_exceeded&quot;</code></td>
<td style="text-align: left">Extra precision of the price is not supported.</td>
</tr>
<tr>
<td style="text-align: left">10027</td>
<td style="text-align: left"><code>&quot;non_integer_contract_amount&quot;</code></td>
<td style="text-align: left">Futures contract amount was not recognized as integer.</td>
</tr>
<tr>
<td style="text-align: left">10028</td>
<td style="text-align: left"><code>&quot;too_many_requests&quot;</code></td>
<td style="text-align: left">Allowed request rate has been exceeded.</td>
</tr>
<tr>
<td style="text-align: left">10029</td>
<td style="text-align: left"><code>&quot;not_owner_of_order&quot;</code></td>
<td style="text-align: left">Attempt to operate with not own order.</td>
</tr>
<tr>
<td style="text-align: left">10030</td>
<td style="text-align: left"><code>&quot;must_be_websocket_request&quot;</code></td>
<td style="text-align: left">REST request where Websocket is expected.</td>
</tr>
<tr>
<td style="text-align: left">10031</td>
<td style="text-align: left"><code>&quot;invalid_args_for_instrument&quot;</code></td>
<td style="text-align: left">Some of the arguments are not recognized as valid.</td>
</tr>
<tr>
<td style="text-align: left">10032</td>
<td style="text-align: left"><code>&quot;whole_cost_too_low&quot;</code></td>
<td style="text-align: left">Total cost is too low.</td>
</tr>
<tr>
<td style="text-align: left">10033</td>
<td style="text-align: left"><code>&quot;not_implemented&quot;</code></td>
<td style="text-align: left">Method is not implemented yet.</td>
</tr>
<tr>
<td style="text-align: left">10034</td>
<td style="text-align: left"><code>&quot;trigger_price_too_high&quot;</code></td>
<td style="text-align: left">Trigger price is too high.</td>
</tr>
<tr>
<td style="text-align: left">10035</td>
<td style="text-align: left"><code>&quot;trigger_price_too_low&quot;</code></td>
<td style="text-align: left">Trigger price is too low.</td>
</tr>
<tr>
<td style="text-align: left">10036</td>
<td style="text-align: left"><code>&quot;invalid_max_show_amount&quot;</code></td>
<td style="text-align: left">Max Show Amount is not valid.</td>
</tr>
<tr>
<td style="text-align: left">10037</td>
<td style="text-align: left"><code>&quot;non_pme_total_short_options_positions_size &lt;Limit&gt;&quot;</code></td>
<td style="text-align: left">Limit of total size for short options positions has been exceeded, it is applicable for non-PME users.</td>
</tr>
<tr>
<td style="text-align: left">10038</td>
<td style="text-align: left"><code>&quot;pme_max_risk_reducing_orders &lt;Limit&gt;&quot;</code></td>
<td style="text-align: left">Limit of open risk reducing orders has been reached, it is applicable for PME users.</td>
</tr>
<tr>
<td style="text-align: left">10039</td>
<td style="text-align: left"><code>&quot;not_enough_funds_in_currency &lt;Currency&gt;&quot;</code></td>
<td style="text-align: left">Returned when the user does not have sufficient spot reserves to complete the spot trade or when an option order would negatively impact the non-cross portfolio margin balance of Cross SM user.</td>
</tr>
<tr>
<td style="text-align: left">10040</td>
<td style="text-align: left"><code>&quot;retry&quot;</code></td>
<td style="text-align: left">Request can&#39;t be processed right now and should be retried.</td>
</tr>
<tr>
<td style="text-align: left">10041</td>
<td style="text-align: left"><code>&quot;settlement_in_progress&quot;</code></td>
<td style="text-align: left">Settlement is in progress. Every day at settlement time for several seconds, the system calculates user profits and updates balances. That time trading is paused for several seconds till the calculation is completed.</td>
</tr>
<tr>
<td style="text-align: left">10043</td>
<td style="text-align: left"><code>&quot;price_wrong_tick&quot;</code></td>
<td style="text-align: left">Price has to be rounded to an instrument tick size.</td>
</tr>
<tr>
<td style="text-align: left">10044</td>
<td style="text-align: left"><code>&quot;trigger_price_wrong_tick&quot;</code></td>
<td style="text-align: left">Trigger Price has to be rounded to an instrument tick size.</td>
</tr>
<tr>
<td style="text-align: left">10045</td>
<td style="text-align: left"><code>&quot;can_not_cancel_liquidation_order&quot;</code></td>
<td style="text-align: left">Liquidation order can&#39;t be cancelled.</td>
</tr>
<tr>
<td style="text-align: left">10046</td>
<td style="text-align: left"><code>&quot;can_not_edit_liquidation_order&quot;</code></td>
<td style="text-align: left">Liquidation order can&#39;t be edited.</td>
</tr>
<tr>
<td style="text-align: left">10047</td>
<td style="text-align: left"><code>&quot;matching_engine_queue_full&quot;</code></td>
<td style="text-align: left">Reached limit of pending Matching Engine requests for user.</td>
</tr>
<tr>
<td style="text-align: left">10048</td>
<td style="text-align: left"><code>&quot;not_on_this_server&quot;</code></td>
<td style="text-align: left">The requested operation is not available on this server.</td>
</tr>
<tr>
<td style="text-align: left">10049</td>
<td style="text-align: left"><code>&quot;cancel_on_disconnect_failed&quot;</code></td>
<td style="text-align: left">Enabling Cancel On Disconnect for the connection failed.</td>
</tr>
<tr>
<td style="text-align: left">10066</td>
<td style="text-align: left"><code>&quot;too_many_concurrent_requests&quot;</code></td>
<td style="text-align: left">The client has sent too many public requests that have not yet been executed.</td>
</tr>
<tr>
<td style="text-align: left">10072</td>
<td style="text-align: left"><code>&quot;disabled_while_position_lock&quot;</code></td>
<td style="text-align: left">Spot trading is disabled for users in reduce only mode.</td>
</tr>
<tr>
<td style="text-align: left">11008</td>
<td style="text-align: left"><code>&quot;already_filled&quot;</code></td>
<td style="text-align: left">This request is not allowed in regards to the filled order.</td>
</tr>
<tr>
<td style="text-align: left">11013</td>
<td style="text-align: left"><code>&quot;max_spot_open_orders&quot;</code></td>
<td style="text-align: left">Total limit of open orders on spot instruments has been exceeded.</td>
</tr>
<tr>
<td style="text-align: left">11021</td>
<td style="text-align: left"><code>&quot;post_only_price_modification_not_possible&quot;</code></td>
<td style="text-align: left">Price modification for post only order is not possible.</td>
</tr>
<tr>
<td style="text-align: left">11022</td>
<td style="text-align: left"><code>&quot;max_spot_order_quantity&quot;</code></td>
<td style="text-align: left">Limit of quantity per currency for spot instruments has been exceeded.</td>
</tr>
<tr>
<td style="text-align: left">11029</td>
<td style="text-align: left"><code>&quot;invalid_arguments&quot;</code></td>
<td style="text-align: left">Some invalid input has been detected.</td>
</tr>
<tr>
<td style="text-align: left">11030</td>
<td style="text-align: left"><code>&quot;other_reject &lt;Reason&gt;&quot;</code></td>
<td style="text-align: left">Some rejects which are not considered as very often, more info may be specified in <code>&lt;Reason&gt;</code>.</td>
</tr>
<tr>
<td style="text-align: left">11031</td>
<td style="text-align: left"><code>&quot;other_error &lt;Error&gt;&quot;</code></td>
<td style="text-align: left">Some errors which are not considered as very often, more info may be specified in <code>&lt;Error&gt;</code>.</td>
</tr>
<tr>
<td style="text-align: left">11035</td>
<td style="text-align: left"><code>&quot;no_more_triggers &lt;Limit&gt;&quot;</code></td>
<td style="text-align: left">Allowed amount of trigger orders has been exceeded.</td>
</tr>
<tr>
<td style="text-align: left">11036</td>
<td style="text-align: left"><code>&quot;invalid_trigger_price&quot;</code></td>
<td style="text-align: left">Invalid trigger price (too high or too low) in relation to the last trade, index or market price.</td>
</tr>
<tr>
<td style="text-align: left">11037</td>
<td style="text-align: left"><code>&quot;outdated_instrument_for_IV_order&quot;</code></td>
<td style="text-align: left">Instrument already not available for trading.</td>
</tr>
<tr>
<td style="text-align: left">11038</td>
<td style="text-align: left"><code>&quot;no_adv_for_futures&quot;</code></td>
<td style="text-align: left">Advanced orders are not available for futures.</td>
</tr>
<tr>
<td style="text-align: left">11039</td>
<td style="text-align: left"><code>&quot;no_adv_postonly&quot;</code></td>
<td style="text-align: left">Advanced post-only orders are not supported yet.</td>
</tr>
<tr>
<td style="text-align: left">11041</td>
<td style="text-align: left"><code>&quot;not_adv_order&quot;</code></td>
<td style="text-align: left">Advanced order properties can&#39;t be set if the order is not advanced.</td>
</tr>
<tr>
<td style="text-align: left">11042</td>
<td style="text-align: left"><code>&quot;permission_denied&quot;</code></td>
<td style="text-align: left">Permission for the operation has been denied.</td>
</tr>
<tr>
<td style="text-align: left">11043</td>
<td style="text-align: left"><code>&quot;bad_argument&quot;</code></td>
<td style="text-align: left">Bad argument has been passed.</td>
</tr>
<tr>
<td style="text-align: left">11044</td>
<td style="text-align: left"><code>&quot;not_open_order&quot;</code></td>
<td style="text-align: left">Attempt to do open order operations with the not open order.</td>
</tr>
<tr>
<td style="text-align: left">11045</td>
<td style="text-align: left"><code>&quot;invalid_event&quot;</code></td>
<td style="text-align: left">Event name has not been recognized.</td>
</tr>
<tr>
<td style="text-align: left">11046</td>
<td style="text-align: left"><code>&quot;outdated_instrument&quot;</code></td>
<td style="text-align: left">At several minutes to instrument expiration, corresponding advanced implied volatility orders are not allowed.</td>
</tr>
<tr>
<td style="text-align: left">11047</td>
<td style="text-align: left"><code>&quot;unsupported_arg_combination&quot;</code></td>
<td style="text-align: left">The specified combination of arguments is not supported.</td>
</tr>
<tr>
<td style="text-align: left">11048</td>
<td style="text-align: left"><code>&quot;wrong_max_show_for_option&quot;</code></td>
<td style="text-align: left">Wrong Max Show for options.</td>
</tr>
<tr>
<td style="text-align: left">11049</td>
<td style="text-align: left"><code>&quot;bad_arguments&quot;</code></td>
<td style="text-align: left">Several bad arguments have been passed.</td>
</tr>
<tr>
<td style="text-align: left">11050</td>
<td style="text-align: left"><code>&quot;bad_request&quot;</code></td>
<td style="text-align: left">Request has not been parsed properly.</td>
</tr>
<tr>
<td style="text-align: left">11051</td>
<td style="text-align: left"><code>&quot;system_maintenance&quot;</code></td>
<td style="text-align: left">System is under maintenance.</td>
</tr>
<tr>
<td style="text-align: left">11052</td>
<td style="text-align: left"><code>&quot;subscribe_error_unsubscribed&quot;</code></td>
<td style="text-align: left">Subscription error. However, subscription may fail without this error, please check the list of subscribed channels returned, as some channels can be not subscribed due to wrong input or lack of permissions.</td>
</tr>
<tr>
<td style="text-align: left">11053</td>
<td style="text-align: left"><code>&quot;transfer_not_found&quot;</code></td>
<td style="text-align: left">Specified transfer is not found.</td>
</tr>
<tr>
<td style="text-align: left">11054</td>
<td style="text-align: left"><code>&quot;post_only_reject&quot;</code></td>
<td style="text-align: left">Request rejected due to <code>reject_post_only</code> flag.</td>
</tr>
<tr>
<td style="text-align: left">11055</td>
<td style="text-align: left"><code>&quot;post_only_not_allowed&quot;</code></td>
<td style="text-align: left">Post only flag not allowed for given order type.</td>
</tr>
<tr>
<td style="text-align: left">11056</td>
<td style="text-align: left"><code>&quot;unauthenticated_public_requests_temporarily_disabled&quot;</code></td>
<td style="text-align: left">Request rejected because of unauthenticated public requests were temporarily disabled.</td>
</tr>
<tr>
<td style="text-align: left">11090</td>
<td style="text-align: left"><code>&quot;invalid_addr&quot;</code></td>
<td style="text-align: left">Invalid address.</td>
</tr>
<tr>
<td style="text-align: left">11091</td>
<td style="text-align: left"><code>&quot;invalid_transfer_address&quot;</code></td>
<td style="text-align: left">Invalid address for the transfer.</td>
</tr>
<tr>
<td style="text-align: left">11092</td>
<td style="text-align: left"><code>&quot;address_already_exist&quot;</code></td>
<td style="text-align: left">The address already exists.</td>
</tr>
<tr>
<td style="text-align: left">11093</td>
<td style="text-align: left"><code>&quot;max_addr_count_exceeded&quot;</code></td>
<td style="text-align: left">Limit of allowed addresses has been reached.</td>
</tr>
<tr>
<td style="text-align: left">11094</td>
<td style="text-align: left"><code>&quot;internal_server_error&quot;</code></td>
<td style="text-align: left">Some unhandled error on server. Please report to admin. The details of the request will help to locate the problem.</td>
</tr>
<tr>
<td style="text-align: left">11095</td>
<td style="text-align: left"><code>&quot;disabled_deposit_address_creation&quot;</code></td>
<td style="text-align: left">Deposit address creation has been disabled by admin.</td>
</tr>
<tr>
<td style="text-align: left">11096</td>
<td style="text-align: left"><code>&quot;address_belongs_to_user&quot;</code></td>
<td style="text-align: left">Withdrawal instead of transfer.</td>
</tr>
<tr>
<td style="text-align: left">11097</td>
<td style="text-align: left"><code>&quot;no_deposit_address&quot;</code></td>
<td style="text-align: left">Deposit address not specified.</td>
</tr>
<tr>
<td style="text-align: left">11098</td>
<td style="text-align: left"><code>&quot;account_locked&quot;</code></td>
<td style="text-align: left">Account locked.</td>
</tr>
<tr>
<td style="text-align: left">12001</td>
<td style="text-align: left"><code>&quot;too_many_subaccounts&quot;</code></td>
<td style="text-align: left">Limit of subbacounts is reached.</td>
</tr>
<tr>
<td style="text-align: left">12002</td>
<td style="text-align: left"><code>&quot;wrong_subaccount_name&quot;</code></td>
<td style="text-align: left">The input is not allowed as the name of subaccount.</td>
</tr>
<tr>
<td style="text-align: left">12003</td>
<td style="text-align: left"><code>&quot;login_over_limit&quot;</code></td>
<td style="text-align: left">The number of failed login attempts is limited.</td>
</tr>
<tr>
<td style="text-align: left">12004</td>
<td style="text-align: left"><code>&quot;registration_over_limit&quot;</code></td>
<td style="text-align: left">The number of registration requests is limited.</td>
</tr>
<tr>
<td style="text-align: left">12005</td>
<td style="text-align: left"><code>&quot;country_is_banned&quot;</code></td>
<td style="text-align: left">The country is banned (possibly via IP check).</td>
</tr>
<tr>
<td style="text-align: left">12100</td>
<td style="text-align: left"><code>&quot;transfer_not_allowed&quot;</code></td>
<td style="text-align: left">Transfer is not allowed. Possible wrong direction or other mistake.</td>
</tr>
<tr>
<td style="text-align: left">12998</td>
<td style="text-align: left"><code>&quot;security_key_authorization_over_limit&quot;</code></td>
<td style="text-align: left">Too many failed security key authorizations. The client should wait for <code>wait</code> seconds to try again.</td>
</tr>
<tr>
<td style="text-align: left">13004</td>
<td style="text-align: left"><code>&quot;invalid_credentials&quot;</code></td>
<td style="text-align: left">Invalid credentials have been used.</td>
</tr>
<tr>
<td style="text-align: left">13005</td>
<td style="text-align: left"><code>&quot;pwd_match_error&quot;</code></td>
<td style="text-align: left">Password confirmation error.</td>
</tr>
<tr>
<td style="text-align: left">13006</td>
<td style="text-align: left"><code>&quot;security_error&quot;</code></td>
<td style="text-align: left">Invalid Security Code.</td>
</tr>
<tr>
<td style="text-align: left">13007</td>
<td style="text-align: left"><code>&quot;user_not_found&quot;</code></td>
<td style="text-align: left">User&#39;s security code has been changed or wrong.</td>
</tr>
<tr>
<td style="text-align: left">13008</td>
<td style="text-align: left"><code>&quot;request_failed&quot;</code></td>
<td style="text-align: left">Request failed because of invalid input or internal failure.</td>
</tr>
<tr>
<td style="text-align: left">13009</td>
<td style="text-align: left"><code>&quot;unauthorized&quot;</code></td>
<td style="text-align: left">Wrong or expired authorization token or bad signature. For example, please check the scope of the token, &quot;connection&quot; scope can&#39;t be reused for other connections.</td>
</tr>
<tr>
<td style="text-align: left">13010</td>
<td style="text-align: left"><code>&quot;value_required&quot;</code></td>
<td style="text-align: left">Invalid input, missing value.</td>
</tr>
<tr>
<td style="text-align: left">13011</td>
<td style="text-align: left"><code>&quot;value_too_short&quot;</code></td>
<td style="text-align: left">Input is too short.</td>
</tr>
<tr>
<td style="text-align: left">13012</td>
<td style="text-align: left"><code>&quot;unavailable_in_subaccount&quot;</code></td>
<td style="text-align: left">Subaccount restrictions.</td>
</tr>
<tr>
<td style="text-align: left">13013</td>
<td style="text-align: left"><code>&quot;invalid_phone_number&quot;</code></td>
<td style="text-align: left">Unsupported or invalid phone number.</td>
</tr>
<tr>
<td style="text-align: left">13014</td>
<td style="text-align: left"><code>&quot;cannot_send_sms&quot;</code></td>
<td style="text-align: left">SMS sending failed -- phone number is wrong.</td>
</tr>
<tr>
<td style="text-align: left">13015</td>
<td style="text-align: left"><code>&quot;invalid_sms_code&quot;</code></td>
<td style="text-align: left">Invalid SMS code.</td>
</tr>
<tr>
<td style="text-align: left">13016</td>
<td style="text-align: left"><code>&quot;invalid_input&quot;</code></td>
<td style="text-align: left">Invalid input.</td>
</tr>
<tr>
<td style="text-align: left">13018</td>
<td style="text-align: left"><code>&quot;invalid_content_type&quot;</code></td>
<td style="text-align: left">Invalid content type of the request.</td>
</tr>
<tr>
<td style="text-align: left">13019</td>
<td style="text-align: left"><code>&quot;orderbook_closed&quot;</code></td>
<td style="text-align: left">Closed, expired order book.</td>
</tr>
<tr>
<td style="text-align: left">13020</td>
<td style="text-align: left"><code>&quot;not_found&quot;</code></td>
<td style="text-align: left">Instrument is not found, invalid instrument name.</td>
</tr>
<tr>
<td style="text-align: left">13021</td>
<td style="text-align: left"><code>&quot;forbidden&quot;</code></td>
<td style="text-align: left">Not enough permissions to execute the request, forbidden.</td>
</tr>
<tr>
<td style="text-align: left">13025</td>
<td style="text-align: left"><code>&quot;method_switched_off_by_admin&quot;</code></td>
<td style="text-align: left">API method temporarily switched off by the administrator.</td>
</tr>
<tr>
<td style="text-align: left">13028</td>
<td style="text-align: left"><code>&quot;temporarily_unavailable&quot;</code></td>
<td style="text-align: left">The requested service is not responding or processing the response takes too long.</td>
</tr>
<tr>
<td style="text-align: left">13030</td>
<td style="text-align: left"><code>&quot;mmp_trigger&quot;</code></td>
<td style="text-align: left">Order has been rejected due to the MMP trigger.</td>
</tr>
<tr>
<td style="text-align: left">13031</td>
<td style="text-align: left"><code>&quot;verification_required&quot;</code></td>
<td style="text-align: left">API method allowed only for verified users.</td>
</tr>
<tr>
<td style="text-align: left">13032</td>
<td style="text-align: left"><code>&quot;non_unique_order_label&quot;</code></td>
<td style="text-align: left">Request allowed only for orders uniquely identified by given label, more than one match was foun.</td>
</tr>
<tr>
<td style="text-align: left">13034</td>
<td style="text-align: left"><code>&quot;no_more_security_keys_allowed&quot;</code></td>
<td style="text-align: left">Maximal number of tokens allowed reached.</td>
</tr>
<tr>
<td style="text-align: left">13035</td>
<td style="text-align: left"><code>&quot;active_combo_limit_reached&quot;</code></td>
<td style="text-align: left">Limit of active combo books was reached. The client should wait some time before retrying the request.</td>
</tr>
<tr>
<td style="text-align: left">13036</td>
<td style="text-align: left"><code>&quot;unavailable_for_combo_books&quot;</code></td>
<td style="text-align: left">Action is temporarily unavailable for combo books.</td>
</tr>
<tr>
<td style="text-align: left">13037</td>
<td style="text-align: left"><code>&quot;incomplete_KYC_data&quot;</code></td>
<td style="text-align: left">KYC verification data is insufficient for external service provider.</td>
</tr>
<tr>
<td style="text-align: left">13040</td>
<td style="text-align: left"><code>&quot;mmp_required&quot;</code></td>
<td style="text-align: left">User is not a MMP user.</td>
</tr>
<tr>
<td style="text-align: left">13042</td>
<td style="text-align: left"><code>&quot;cod_not_enabled&quot;</code></td>
<td style="text-align: left">Cancel-on-Disconnect is not enabled for the connection.</td>
</tr>
<tr>
<td style="text-align: left">13043</td>
<td style="text-align: left"><code>&quot;quotes_frozen&quot;</code></td>
<td style="text-align: left">Quotes are still frozen after previous cancel.</td>
</tr>
<tr>
<td style="text-align: left">13403</td>
<td style="text-align: left"><code>&quot;scope_exceeded&quot;</code></td>
<td style="text-align: left">Error returned after the user tried to edit / delete an API key using an authorized key connection with insufficient scope.</td>
</tr>
<tr>
<td style="text-align: left">13503</td>
<td style="text-align: left"><code>&quot;unavailable&quot;</code></td>
<td style="text-align: left">Method is currently not available.</td>
</tr>
<tr>
<td style="text-align: left">13666</td>
<td style="text-align: left"><code>&quot;request_cancelled_by_user&quot;</code></td>
<td style="text-align: left">Request was cancelled by the user with other api request.</td>
</tr>
<tr>
<td style="text-align: left">13777</td>
<td style="text-align: left"><code>&quot;replaced&quot;</code></td>
<td style="text-align: left">Edit request was replaced by other one.</td>
</tr>
<tr>
<td style="text-align: left">13778</td>
<td style="text-align: left"><code>&quot;raw_subscriptions_not_available_for_unauthorized&quot;</code></td>
<td style="text-align: left">Raw subscriptions are not available for unauthorized requests.</td>
</tr>
<tr>
<td style="text-align: left">13780</td>
<td style="text-align: left"><code>&quot;move_positions_over_limit&quot;</code></td>
<td style="text-align: left">The client cannot execute the request yet, and should wait for <code>wait</code> seconds to try again.</td>
</tr>
<tr>
<td style="text-align: left">13781</td>
<td style="text-align: left"><code>&quot;coupon_already_used&quot;</code></td>
<td style="text-align: left">The coupon has already been used by current account.</td>
</tr>
<tr>
<td style="text-align: left">13791</td>
<td style="text-align: left"><code>&quot;KYC_transfer_already_initiated&quot;</code></td>
<td style="text-align: left">Sharing of KYC data with a third party provider was already initiated.</td>
</tr>
<tr>
<td style="text-align: left">13792</td>
<td style="text-align: left"><code>&quot;incomplete_KYC_data&quot;</code></td>
<td style="text-align: left">User&#39;s KYC data stored on the platform is insufficient for sharing according to third party provider.</td>
</tr>
<tr>
<td style="text-align: left">13793</td>
<td style="text-align: left"><code>&quot;KYC_data_inaccessible&quot;</code></td>
<td style="text-align: left">User&#39;s KYC data is inaccessible at the moment. Client should try again later.</td>
</tr>
<tr>
<td style="text-align: left">13888</td>
<td style="text-align: left"><code>&quot;timed_out&quot;</code></td>
<td style="text-align: left">Server did not manage to process request when it was valid (<code>valid_until</code>).</td>
</tr>
<tr>
<td style="text-align: left">13901</td>
<td style="text-align: left"><code>&quot;no_more_oto_orders&quot;</code></td>
<td style="text-align: left">Total limit of open &quot;one triggers other&quot; orders has been exceeded.</td>
</tr>
<tr>
<td style="text-align: left">13902</td>
<td style="text-align: left"><code>&quot;mass_quotes_disabled&quot;</code></td>
<td style="text-align: left">Mass Quotes feature disabled for this user and currency.</td>
</tr>
<tr>
<td style="text-align: left">13903</td>
<td style="text-align: left"><code>&quot;too_many_quotes&quot;</code></td>
<td style="text-align: left">Number of quotes (in Mass Quotes requests) per second exceeded.</td>
</tr>
<tr>
<td style="text-align: left">13904</td>
<td style="text-align: left"><code>&quot;security_key_setup_required&quot;</code></td>
<td style="text-align: left">Not allowed without a full security key setup.</td>
</tr>
<tr>
<td style="text-align: left">13905</td>
<td style="text-align: left"><code>&quot;too_many_quotes_per_block_rfq&quot;</code></td>
<td style="text-align: left">Number of quotes for single block rfq exceeded.</td>
</tr>
<tr>
<td style="text-align: left">13906</td>
<td style="text-align: left"><code>&quot;too_many_quotes_per_block_rfq_side&quot;</code></td>
<td style="text-align: left">Number of quotes per single block rfq side exceeded.</td>
</tr>
<tr>
<td style="text-align: left">13907</td>
<td style="text-align: left"><code>&quot;not_fully_filled&quot;</code></td>
<td style="text-align: left">Block Rfq trade cannot be fully filled with matched quotes.</td>
</tr>
<tr>
<td style="text-align: left">13907</td>
<td style="text-align: left"><code>&quot;too_many_open_block_rfqs&quot;</code></td>
<td style="text-align: left">Number of open block rfq by taker exceeds configured max amount.</td>
</tr>
<tr>
<td style="text-align: left">13910</td>
<td style="text-align: left"><code>&quot;quote_crossed&quot;</code></td>
<td style="text-align: left">Quote placed by the maker crosses an already placed quote by the same maker.</td>
</tr>
<tr>
<td style="text-align: left">13911</td>
<td style="text-align: left"><code>&quot;max_broker_client_count&quot;</code></td>
<td style="text-align: left">Number of broker client&#39;s exceeds allowed max amount.</td>
</tr>
<tr>
<td style="text-align: left">13912</td>
<td style="text-align: left"><code>&quot;broker_cannot_be_client&quot;</code></td>
<td style="text-align: left">Broker accounts cannot be clients of other brokers.</td>
</tr>
<tr>
<td style="text-align: left">13913</td>
<td style="text-align: left"><code>&quot;broker_already_linked&quot;</code></td>
<td style="text-align: left">User has already been linked to this broker.</td>
</tr>
<tr>
<td style="text-align: left">13914</td>
<td style="text-align: left"><code>&quot;user_is_a_broker_client&quot;</code></td>
<td style="text-align: left">User is a client of a broker account.</td>
</tr>
<tr>
<td style="text-align: left">13915</td>
<td style="text-align: left"><code>&quot;user_is_not_a_broker&quot;</code></td>
<td style="text-align: left">User account is not configured as broker account.</td>
</tr>
<tr>
<td style="text-align: left">13916</td>
<td style="text-align: left"><code>&quot;app_registered_to_broker&quot;</code></td>
<td style="text-align: left">Application is registered to a broker.</td>
</tr>
<tr>
<td style="text-align: left">13917</td>
<td style="text-align: left"><code>&quot;account_quote_limit_crossed&quot;</code></td>
<td style="text-align: left">Block Rfq quote limits set for the account were crossed.</td>
</tr>
<tr>
<td style="text-align: left">13918</td>
<td style="text-align: left"><code>&quot;inverse_future_cross_trading&quot;</code></td>
<td style="text-align: left">Placed block rfq quote would cross trade inverse futures with block rfq quote limits set on the account.</td>
</tr>
<tr>
<td style="text-align: left">13919</td>
<td style="text-align: left"><code>&quot;client_of_main_account&quot;</code></td>
<td style="text-align: left">Subaccounts of brokers cannot be linked to their own broker account.</td>
</tr>
<tr>
<td style="text-align: left">-32602</td>
<td style="text-align: left"><code>&quot;Invalid params&quot;</code></td>
<td style="text-align: left">See JSON-RPC spec.</td>
</tr>
<tr>
<td style="text-align: left">-32600</td>
<td style="text-align: left"><code>&quot;request entity too large&quot;</code></td>
<td style="text-align: left">Error thrown when body size in POST request or single frame in websocket connection frame exceeds the limit (32 kB).</td>
</tr>
<tr>
<td style="text-align: left">-32601</td>
<td style="text-align: left"><code>&quot;Method not found&quot;</code></td>
<td style="text-align: left">See JSON-RPC spec.</td>
</tr>
<tr>
<td style="text-align: left">-32700</td>
<td style="text-align: left"><code>&quot;Parse error&quot;</code></td>
<td style="text-align: left">See JSON-RPC spec.</td>
</tr>
<tr>
<td style="text-align: left">-32000</td>
<td style="text-align: left"><code>&quot;Missing params&quot;</code></td>
<td style="text-align: left">See JSON-RPC spec.</td>
</tr>
</tbody></table>
<h1 id='fix-api'>FIX API</h1>
<p>Deribit FIX API is a subset of FIX version 4.4, but also includes some tags from
5.0 version and several custom tags. Deribit uses the standard header and
trailer structure for all messages. To enable the API, sign in and go to
<strong>Account &gt; Security &gt; API</strong> Tab and use the checkbox. &#39;Client Secret&#39; is the
user&#39;s secret key provided by Deribit. <strong>Important Note: Do not reveal to
anybody your &#39;Client Secret&#39;, as it can be used to gain full control over your
account.</strong></p>

<p>The FIX server can be reached at <code>www.deribit.com:9881</code> (raw tcp) or
<code>www.deribit.com:9883</code> (ssl). The FIX server for the test network can be reached
at <code>test.deribit.com:9881</code> (raw tcp) or <code>test.deribit.com:9883</code> (ssl).</p>

<p>Each request message can include:</p>

<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>8</td>
<td><code>BeginString</code></td>
<td>String</td>
<td>Yes</td>
<td>Identifies beginning of new message and protocol version. Must always be first in the message</td>
</tr>
<tr>
<td>9</td>
<td><code>BodyLength</code></td>
<td>Length</td>
<td>Yes</td>
<td>Message length in bytes, not including fields <code>BeginString</code>(<code>8</code>), <code>BodyLength</code>(<code>9</code>) and <code>CheckSum</code>(<code>10</code>). The length must be calculated by counting the number of octets in the message up to and including the end of field delimiter (Start of Heading) of the field immediately preceding the <code>CheckSum</code>(<code>10</code>) field. Must always be the second in the message.<p> Please refer to <a href="https://www.fixtrading.org/standards/tagvalue-online/#fix-tagvalue-message-syntax">FIX specification</a> for more details</p></td>
</tr>
<tr>
<td>35</td>
<td><code>MsgType</code></td>
<td>String</td>
<td>Yes</td>
<td>The type of the message. See below for available types</td>
</tr>
<tr>
<td>49</td>
<td><code>SenderCompID</code></td>
<td>String</td>
<td>Yes</td>
<td>A user defined client name</td>
</tr>
<tr>
<td>56</td>
<td><code>TargetCompID</code></td>
<td>String</td>
<td>Yes</td>
<td>Constant value: <code>DERIBITSERVER</code></td>
</tr>
<tr>
<td>34</td>
<td><code>MsgSeqNum</code></td>
<td>SeqNum</td>
<td>Yes</td>
<td>A sequence number for the message, starts with 1, and must be incremented by 1 for every message</td>
</tr>
<tr>
<td>52</td>
<td><code>SendingTime</code></td>
<td>UTCTimestamp</td>
<td>No</td>
<td>The time the request is sent. This field is ignored by the server</td>
</tr>
<tr>
<td>10</td>
<td><code>CheckSum</code></td>
<td>String</td>
<td>Yes</td>
<td>The checksum of all of all preceding messages. In order to calculate checksum, sum up the binary value of each octet up to and including the end of field delimiter (Start of Heading) of the field immediately preceding the <code>CheckSum</code>(<code>10</code>). <p> Afterwards calculate modulo 256 of that sum. The calculated modulo 256 checksum must then be encoded as an ISO 8859-1 three-octet representation of the decimal value.</p> <p>For example, if the message length sum of character values has been calculated to be 274 then the modulo 256 value is 18 (256 + 18 = 274). This value would be encoded in the CheckSum(10) field as “10=018”.</p> CheckSum must always be the last field in the message. <p> Please refer to <a href="https://www.fixtrading.org/standards/tagvalue-online/#fix-tagvalue-message-syntax">FIX specification</a> Annex A for more details</p></td>
</tr>
</tbody></table>

<p>Responses sent by the server will at least include:</p>

<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>8</td>
<td><code>BeginString</code></td>
<td>String</td>
<td>Identifies beginning of new message and protocol version. Must always be first in the message</td>
</tr>
<tr>
<td>9</td>
<td><code>BodyLength</code></td>
<td>Length</td>
<td>Message length in bytes, not including fields <code>BeginString</code>(<code>8</code>), <code>BodyLength</code>(<code>9</code>) and <code>CheckSum</code>(<code>10</code>).<p> Please refer to <a href="https://www.fixtrading.org/standards/tagvalue-online/#fix-tagvalue-message-syntax">FIX specification</a> for more details</p></td>
</tr>
<tr>
<td>35</td>
<td><code>MsgType</code></td>
<td>String</td>
<td>The type of the message. See below for available types</td>
</tr>
<tr>
<td>49</td>
<td><code>SenderCompID</code></td>
<td>String</td>
<td>Constant value: <code>DERIBITSERVER</code></td>
</tr>
<tr>
<td>56</td>
<td><code>TargetCompID</code></td>
<td>String</td>
<td>A user defined client name</td>
</tr>
<tr>
<td>34</td>
<td><code>MsgSeqNum</code></td>
<td>SeqNum</td>
<td>A server-chosen sequence number for the message</td>
</tr>
<tr>
<td>52</td>
<td><code>SendingTime</code></td>
<td>UTCTimestamp</td>
<td>The time the request is sent. This field is ignored by the server</td>
</tr>
<tr>
<td>10</td>
<td><code>CheckSum</code></td>
<td>String</td>
<td>The checksum of all of all preceding messages. Please refer to <a href="https://www.fixtrading.org/standards/tagvalue-online/#fix-tagvalue-message-syntax">FIX specification</a> Annex A for more details</td>
</tr>
</tbody></table>
<h2 id='logon-a'><code>Logon</code>(<code>A</code>)</h2>
<p><code>Logon</code>(<code>A</code>) must be the first message sent by the client to initiate a session. If
authentication succeeds, the exchange should echo the message back to the
client. If authentication fails, the exchange will respond with a
<a href="#logout-5"><code>LogOut</code>(<code>5</code>)</a> message with an appropriate reason.</p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>108</td>
<td><code>HeartBtInt</code></td>
<td>int</td>
<td>Yes</td>
<td>Used to declare the timeout interval in seconds for generating heartbeats</td>
</tr>
<tr>
<td>95</td>
<td><code>RawDataLength</code></td>
<td>Length</td>
<td>No</td>
<td>Number of bytes in raw data field. Not required, as the normal RawData is base64 text here</td>
</tr>
<tr>
<td>96</td>
<td><code>RawData</code></td>
<td>data</td>
<td>Yes</td>
<td>The timestamp and a Base64 encoded <em>nonce</em> (see below)</td>
</tr>
<tr>
<td>553</td>
<td><code>Username</code></td>
<td>String</td>
<td>Yes</td>
<td>API Client ID. This can be obtained from the API tab on your account settings</td>
</tr>
<tr>
<td>554</td>
<td><code>Password</code></td>
<td>String</td>
<td>Yes</td>
<td>See below</td>
</tr>
<tr>
<td>9002</td>
<td><code>UseWordsafeTags</code></td>
<td>Boolean</td>
<td>No</td>
<td>If present and set to <code>Y</code>, all of the tag numbers for our custom tags start at 5000 instead of 100000. For example, <code>Volume24h</code>(<code>100087</code>) would become <code>5078</code>. This tag can be used due to the fact, that legacy software which implements FIX protocol, doesn&#39;t support the extended range for tags, which was defined in later protocol&#39;s revisions. This setting stays applied for the remainder of the connection</td>
</tr>
<tr>
<td>9001</td>
<td><code>CancelOnDisconnect</code></td>
<td>Boolean</td>
<td>No</td>
<td>Boolean, to enable or disable session-level cancel on disconnect. Default - false(<code>N</code>)</td>
</tr>
<tr>
<td>9004</td>
<td><code>DeribitAppId</code></td>
<td>String</td>
<td>No</td>
<td>Registered application Client ID. It is necessary for registered applications only</td>
</tr>
<tr>
<td>9005</td>
<td><code>DeribitAppSig</code></td>
<td>String</td>
<td>No</td>
<td>Registered application Signature. It is necessary for registered applications only. It is calculated in a similar way to the Password(554) but with Application Secret instead of Client Secret: <code>base64(sha256(RawData ++ application_secret))</code>, see below</td>
</tr>
<tr>
<td>9007</td>
<td><code>DeribitSequential</code></td>
<td>Boolean</td>
<td>No</td>
<td>Custom tag to adapt Deribit internal messaging to sequential FIX messaging. If the tag is present and set to <code>Y</code>, all messages, including order changes and notifications, are sent through a single queue. This eliminates the distinction between &quot;request/response&quot; and &quot;notifications&quot; queues, which typically handle messages separately. As a result, messages are sent in a sequential order without direct responses. This configuration may cause slower call-return information delivery compared to configurations that use two separate queues</td>
</tr>
<tr>
<td>9009</td>
<td><code>UnsubscribeExecutionReports</code></td>
<td>Boolean</td>
<td>No</td>
<td>Custom tag. Default - false (<code>N</code>). If the tag is present and set to &#39;Y&#39; this connection is unsubscribed from notificational Execution Reports about order changes. Only responses to order operation requests in this connection will be sent as Execution Reports, but no notifications such as orders from other connection or trades initiated by counterparty</td>
</tr>
<tr>
<td>9010</td>
<td><code>ConnectionOnlyExecutionReports</code></td>
<td>Boolean</td>
<td>No</td>
<td>Custom tag. Default - false (<code>N</code>). If the tag is present and set to &#39;Y&#39; this connection will receive notificational Execution Reports only for order created in this connection, it won&#39;t receive notification for orders created in other connections even within the same subaccount. This tag can be used to split Execution Reports between several connections to the same subaccount</td>
</tr>
<tr>
<td>9018</td>
<td><code>DisplayIncrementSteps</code></td>
<td>Boolean</td>
<td>No</td>
<td><strong>Custom tag</strong>, default is false (<code>N</code>). If the tag is present and set to &#39;Y&#39;, then symbol entries will include the Price Increment steps of the Symbol (if applicable). See <code>NoTickRules</code>(<code>1205</code>) below</td>
</tr>
</tbody></table>

<p>The <code>RawData</code>(<code>96</code>) tag contains a timestamp and a <em>nonce</em>, separated by an
ASCII period (<code>.</code>). The <em>timestamp</em> needs to be a strictly increasing integer.
We recommend using a timestamp in milliseconds. The <em>nonce</em> is composed of
base64-encoded randomly chosen bytes. For safety reasons, it is important that
the <em>nonce</em> is sufficiently long and sourced from a cryptographically secure
random number generator. We recommend at least 32 bytes, but the <em>nonce</em> can be
up to 512 bytes.</p>

<p>The <code>Password</code>(<code>554</code>) tag contains a base64 encoded SHA256 hash of the
concatenation of the <code>RawData</code>(<code>96</code>) content and the cleint secret:
<code>base64(sha256(RawData ++ access_secret))</code>, here <code>++</code> denotes operation of the
concatenation.</p>

<p>Optional custom tag <code>DeribitAppSig</code>(<code>9005</code>) contains a base64 encoded SHA256
hash of the concatenation of the <code>RawData</code>(<code>96</code>) content and the Application
secret: <code>base64(sha256(RawData ++ application_secret))</code>, here <code>++</code> denotes
operation of the concatenation. This tag is used for registered applications
only.</p>

<p><code>CancelOnDisconnect</code>(<code>9001</code>) controls &quot;Close on Disconnect&quot;. If this tag is not
provided, the default setting from the account is used.</p>
<h3 id='response-208'>Response</h3>
<p>When the login is successful, the server will echo back the request.</p>

<p>If the login was not successful, the server will respond with a
<a href="#logout-5"><code>Logout</code>(<code>5</code>)</a> message, and close the connection.</p>
<h2 id='logout-5'><code>Logout</code>(<code>5</code>)</h2>
<p><code>Logout</code>(<code>5</code>) can be sent by either party in order to terminate a session. The
sending party should always wait for the echo of the logout request before they
close the socket. Closing connections in any other way is considered abnormal
behavior. Nonetheless, if <code>CancelOnDisconnect</code>(<code>9001</code>) was set at Logon, all
orders will be cancelled at Logout.</p>
<h3 id='arguments-2'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>58</td>
<td><code>text</code></td>
<td>String</td>
<td>No</td>
<td>Free format text string specifying the logout reason. This is ignored by the server</td>
</tr>
<tr>
<td>9003</td>
<td><code>DontCancelOnDisconnect</code></td>
<td>Boolean</td>
<td>No</td>
<td>If <code>Y</code> then it disables <code>CancelOnDisconnect</code> for this connection even if <code>CancelOnDisconnect</code> was enabled in <code>Logon</code>(<code>A</code>) or account settings. Default - false(<code>N</code>), no changes for <code>CancelOnDisconnect</code> flag</td>
</tr>
</tbody></table>
<h2 id='heartbeat-0'><code>Heartbeat</code>(<code>0</code>)</h2>
<p>When either end of a FIX connection has not sent or received any data for
<code>HeartBtInt</code> seconds (as specified in the <a href="#logon-a"><code>Logon</code>(<code>A</code>)</a> message), it
will transmit a <code>Heartbeat</code>(<code>0</code>) message. When either end of a FIX connection
has not received any data for <code>HeartBtInt</code> seconds, it will transmit a <a href="#test-request-1"><code>TestRequest</code>(<code>1</code>)</a> message. If there is still no response, the
session should be considered lost and corrective action should be initiated.</p>
<h3 id='arguments-3'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>112</td>
<td><code>TestReqId</code></td>
<td>String</td>
<td>Varies</td>
<td>The identifier when responding to the <a href="#test-request-1"><code>Test Request</code>(<code>1</code>)</a> message. When not responding to a <code>Test Request</code>(<code>1</code>) message, this tag can be left out</td>
</tr>
</tbody></table>
<h3 id='response-209'>Response</h3>
<p>When the heartbeat has been received successfully, the server will echo back the
request as confirmation.</p>
<h2 id='test-request-1'><code>Test Request</code>(<code>1</code>)</h2>
<p>The Test <code>Request</code>(<code>1</code>) message forces a heartbeat from the opposing
application. The opposing application responds with a
<a href="#heartbeat-0"><code>Heartbeat</code>(<code>0</code>)</a> containing the <code>TestReqID</code>(<code>112</code>).</p>
<h3 id='arguments-4'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>112</td>
<td><code>TestReqId</code></td>
<td>String</td>
<td>Yes</td>
<td>Mirrors the original request ID</td>
</tr>
</tbody></table>
<h2 id='resend-request-2'><code>Resend Request</code>(<code>2</code>)</h2>
<p>The <code>Resend Request</code>(<code>2</code>) message is used by the server to initiate the
retransmission of messages. This function is utilized if a sequence number gap
is detected, if the receiving application lost a message, or as a function of
the initialization process.</p>
<h3 id='arguments-5'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>7</td>
<td><code>BeginSeqNo</code></td>
<td>int</td>
<td>Yes</td>
<td>The first message to repeat</td>
</tr>
<tr>
<td>16</td>
<td><code>EndSeqNo</code></td>
<td>int</td>
<td>Yes</td>
<td>The last message to repeat</td>
</tr>
</tbody></table>
<h2 id='reject-3'><code>Reject</code>(<code>3</code>)</h2>
<p>The <code>Reject</code>(<code>3</code>) message should be issued when a message is received but cannot
be properly processed due to a session-level or data structure rule violation.
An example of when a reject may be appropriate would be the receipt of a message
with invalid basic data (e.g. missing tags) which successfully passes
decryption.</p>
<h3 id='arguments-6'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>45</td>
<td><code>RefSeqNum</code></td>
<td>SeqNum</td>
<td>Yes</td>
<td><code>MsgSeqNum</code>(<code>34</code>) of the rejected message</td>
</tr>
<tr>
<td>372</td>
<td><code>RefMsgType</code></td>
<td>String</td>
<td>No</td>
<td>The <code>MsgType</code>(<code>35</code>) of the FIX message being referenced</td>
</tr>
<tr>
<td>373</td>
<td><code>SessionRejectReason</code></td>
<td>int</td>
<td>No</td>
<td>Code to identity reason for rejection: <ul><li><code>6</code> = Incorrect data format for value</li><li><code>11</code> = Invalid <code>MsgType</code>(<code>35</code>)</li><li><code>99</code> = Other</li> </ul></td>
</tr>
<tr>
<td>58</td>
<td><code>Text</code></td>
<td>String</td>
<td>No</td>
<td>Text string explaining the reason for rejection</td>
</tr>
</tbody></table>
<h2 id='sequence-reset-4'><code>Sequence Reset</code>(<code>4</code>)</h2>
<p>The <code>Sequence Reset</code>(<code>4</code>) is to recover from an out-of-sequence condition, to
reestablish a FIX session after a sequence loss. The <code>MsgSeqNum</code>(<code>34</code>) in the
header is ignored.</p>
<h3 id='arguments-7'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>36</td>
<td><code>NewSeqNo</code></td>
<td>SeqNum</td>
<td>Yes</td>
<td>New Sequence Number</td>
</tr>
</tbody></table>
<h3 id='response-210'>Response</h3>
<p>In reply to <code>Sequence Reset</code>(<code>4</code>), the exchange replies with <code>Resend
Request</code>(<code>2</code>) with <code>BeginSeqNo</code>(<code>7</code>) and <code>EndSeqNo</code>(<code>16</code>) equal to the passed
<code>NewSeqNo</code>(<code>36</code>) in case of success. In case of wrong arguments, the server
replies with <code>Resend Request</code>(<code>2</code>) with <code>BeginSeqNo</code>(<code>7</code>) and <code>EndSeqNo</code>(<code>16</code>)
equal to the current incoming sequence on the server.</p>

<p>The <code>Sequence Reset</code> (<code>4</code>) can only increase the sequence number. If a <code>Sequence
Reset</code>(<code>4</code>) is received attempting to decrease the next expected sequence number
the reply is <code>Resend Request</code>(<code>2</code>) with <code>BeginSeqNo</code>(<code>7</code>) and <code>EndSeqNo</code>(<code>16</code>)
equal to the current incoming sequence on the server.</p>

<p>After sending the correct <code>Sequence Reset</code>(<code>4</code>), the client should start sending
messages starting from the sequence number equal to the <code>NewSeqNo</code>(<code>36</code>) passed.</p>
<h2 id='security-list-request-x'><code>Security List Request</code>(<code>x</code>)</h2>
<p>The <code>SecurityListRequest</code>(<code>x</code>) message is used to return a list of securities
(instruments) from the Deribit.</p>
<h3 id='arguments-8'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>320</td>
<td><code>SecurityReqId</code></td>
<td>String</td>
<td>Yes</td>
<td>A user-generated ID for this request. This can be used to match the request to the response</td>
</tr>
<tr>
<td>559</td>
<td><code>SecurityListRequestType</code></td>
<td>int</td>
<td>Yes</td>
<td>0 or 4 – in any case list of instruments is returned</td>
</tr>
<tr>
<td>263</td>
<td><code>SubscriptionRequestType</code></td>
<td>int</td>
<td>No</td>
<td>Subscription Request Type to get notifications about new or terminated instruments. Valid values: <ul><li> <code>0</code> = Snapshot,</li> <li><code>1</code> = Snapshot + Updates (Subscribe),</li> <li><code>2</code> = Disable previous Snapshot + Update Request (Unsubscribe)</li></ul></td>
</tr>
<tr>
<td>9013</td>
<td><code>DisplayMulticastInstrumentID</code></td>
<td>Boolean</td>
<td>No</td>
<td><strong>Custom tag</strong>, default is false (<code>N</code>). If the tag is present and set to &#39;Y&#39;, then symbol entries will include the Multicast identifier of the Symbol (if applicable). See <code>NoSecurityAltID</code>(<code>454</code>) below</td>
</tr>
<tr>
<td>9018</td>
<td><code>DisplayIncrementSteps</code></td>
<td>Boolean</td>
<td>No</td>
<td><strong>Custom tag</strong>, default is false (<code>N</code>). If the tag is present and set to &#39;Y&#39;, then symbol entries will include the Price Increment steps of the Symbol (if applicable). See <code>NoTickRules</code>(<code>1205</code>) below</td>
</tr>
<tr>
<td>15</td>
<td><code>Currency</code></td>
<td>String</td>
<td>No</td>
<td>First currency of the currency pair for limiting the resulted list. Required if <code>SecondaryCurrency</code>(<code>5544</code>) specified.</td>
</tr>
<tr>
<td>5544</td>
<td><code>SecondaryCurrency</code></td>
<td>String</td>
<td>No</td>
<td>Second currency of the currency pair for limiting the resulted list. Default is USD if <code>Currency</code>(<code>15</code>) is specified. Current API doesn&#39;t support queries by <code>SecondaryCurrency</code> only, so <code>Currency</code> (<code>15</code>) is mandatory if <code>SecondaryCurrency</code> is present. In current implementation <code>SecondaryCurrency</code> is ignored in subscription when <code>SubscriptionRequestType</code> (<code>263</code>) = 1</td>
</tr>
<tr>
<td>167</td>
<td><code>SecurityType</code></td>
<td>String</td>
<td>No</td>
<td>Optional parameter for limiting output by the <code>SecurityType</code>. Describes type of security.<p> Possible values: <ul><li><code>FXSPOT</code> for currency exchange spot</li><li><code>FUT</code> for futures,</li><li> <code>OPT</code> for options,</li> <li> <code>FUTCO</code> for future combo,</li> <li><code>OPTCO</code> for option combo</li><li><code>INDEX</code> for indexes</li></ul></td>
</tr>
</tbody></table>
<h3 id='response-211'>Response</h3>
<p>The server will respond with a <a href="#security-list-y"><code>Security List</code>(<code>y</code>)</a> message,
where the <code>SecurityReq</code>(<code>320</code>) is equal to that of the request.</p>
<h2 id='security-list-y'><code>Security List</code>(<code>y</code>)</h2>
<p>The <code>SecurityList</code>(<code>y</code>) message is used to return a list of securities that
matches the criteria specified in a <a href="#security-list-request-x"><code>Security List Request</code>(<code>x</code>)</a>.</p>
<h3 id='arguments-9'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>320</td>
<td><code>SecurityReqId</code></td>
<td>String</td>
<td>Yes</td>
<td>The <code>SecurityReqId</code>(<code>320</code>) of the request that this is a response for</td>
</tr>
<tr>
<td>322</td>
<td><code>SecurityResponseID</code></td>
<td>String</td>
<td>Yes</td>
<td>Identifier for the Security <code>List</code>(<code>x</code>) message</td>
</tr>
<tr>
<td>560</td>
<td><code>SecurityRequestResult</code></td>
<td>int</td>
<td>Yes</td>
<td><code>0</code> indicates a successful response. This is the only possible value in the Deribit FIX API</td>
</tr>
<tr>
<td></td>
<td>Group <code>SecListGrp</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>146</td>
<td><code>NoRelatedSym</code></td>
<td>NumInGroup</td>
<td>No</td>
<td>Specifies the number of repeating instruments specified</td>
</tr>
<tr>
<td>=&gt;55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>No</td>
<td>Common, &quot;human understood&quot; representation of the security, e.g., <b>BTC-28JUL17</b>, see instrument naming convention below for more details</td>
</tr>
<tr>
<td>=&gt;107</td>
<td><code>SecurityDesc</code></td>
<td>String</td>
<td>No</td>
<td>Free form security description: &#39;future&#39;, &#39;option&#39;, &#39;future_combo&#39;, &#39;option_combo&#39; and various indexes</td>
</tr>
<tr>
<td>=&gt;167</td>
<td><code>SecurityType</code></td>
<td>String</td>
<td>No</td>
<td>Describes type of security.<p> Possible values: <ul><li><code>FXSPOT</code> for currency exchange spot</li><li><code>FUT</code> for futures,</li><li> <code>OPT</code> for options,</li> <li> <code>FUTCO</code> for future combo,</li> <li><code>OPTCO</code> for option combo</li><li><code>INDEX</code> for indexes</li></ul></td>
</tr>
<tr>
<td>=&gt;201</td>
<td><code>PutOrCall</code></td>
<td>int</td>
<td>No</td>
<td>Indicates whether an Option is for a put or call. Only for Options.<p>Possible values:<ul><li> <code>0</code> = put,</li> <li> <code>1</code> = call </li></ul></p></td>
</tr>
<tr>
<td>=&gt;202</td>
<td><code>StrikePrice</code></td>
<td>Price</td>
<td>No</td>
<td>Strike price</td>
</tr>
<tr>
<td>=&gt;947</td>
<td><code>StrikeCurrency</code></td>
<td>String</td>
<td>No</td>
<td>Strike currency</td>
</tr>
<tr>
<td>=&gt;15</td>
<td><code>Currency</code></td>
<td>String</td>
<td>No</td>
<td>Currency</td>
</tr>
<tr>
<td>=&gt;1524</td>
<td><code>PriceQuoteCurrency</code></td>
<td>String</td>
<td>No</td>
<td>Quoting or counter currency</td>
</tr>
<tr>
<td>=&gt;2576</td>
<td><code>InstrumentPricePrecision</code></td>
<td>int</td>
<td>No</td>
<td>Number of decimal places for instrument prices (usually 4 for options, 2 for futures)</td>
</tr>
<tr>
<td>=&gt;969</td>
<td><code>MinPriceIncrement</code></td>
<td>float</td>
<td>No</td>
<td>Minimum price tick for a given Instrument</td>
</tr>
<tr>
<td>=&gt;311</td>
<td><code>UnderlyingSymbol</code></td>
<td>String</td>
<td>No</td>
<td>Underlying symbol for options</td>
</tr>
<tr>
<td>=&gt;225</td>
<td><code>IssueDate</code></td>
<td>UTCTimestamp</td>
<td>No</td>
<td>Date instrument was issued</td>
</tr>
<tr>
<td>=&gt;541</td>
<td><code>MaturityDate</code></td>
<td>UTCTimestamp</td>
<td>No</td>
<td>Expiration date, <code>YYYYMMDD</code></td>
</tr>
<tr>
<td>=&gt;1079</td>
<td><code>MaturityTime</code></td>
<td>UTCTimestamp</td>
<td>No</td>
<td>Time of instruments expiration expressed in local time with offset to UTC specified</td>
</tr>
<tr>
<td>=&gt;562</td>
<td><code>MinTradeVol</code></td>
<td>Qty</td>
<td>No</td>
<td>The minimum trading volume for a security</td>
</tr>
<tr>
<td>=&gt;63</td>
<td><code>SettlType</code></td>
<td>String</td>
<td>No</td>
<td>Indicates order settlement period. E.g., <code>M1</code> – month, <code>W1</code> – week, <code>W2</code> – 2 weeks etc</td>
</tr>
<tr>
<td>=&gt;120</td>
<td><code>SettlCurrency</code></td>
<td>Currency</td>
<td>No</td>
<td>Currency code of settlement denomination</td>
</tr>
<tr>
<td>=&gt;479</td>
<td><code>CommCurrency</code></td>
<td>Currency</td>
<td>No</td>
<td>Specifies currency to be used for Commission</td>
</tr>
<tr>
<td>=&gt;231</td>
<td><code>ContractMultiplier</code></td>
<td>float</td>
<td>No</td>
<td>Specifies the ratio or multiply factor to convert from contracts to total units</td>
</tr>
<tr>
<td>=&gt;454</td>
<td><code>NoSecurityAltID</code></td>
<td>NumInGroup</td>
<td>No</td>
<td>Number of alternate security identifier.<p> It is present only if <a href="#security-list-request-x"><code>Security List Request</code>(<code>x</code>)</a> has <code>DisplayMulticastInstrumentID</code> = <code>Y</code></td>
</tr>
<tr>
<td>=&gt;=&gt;455</td>
<td><code>SecurityAltID</code></td>
<td>String</td>
<td>No</td>
<td>The security identifier</td>
</tr>
<tr>
<td>=&gt;=&gt;456</td>
<td><code>SecurityAltIDSource</code></td>
<td>String</td>
<td>No</td>
<td>Identifies the class or source of the <code>SecurityAltID</code>(<code>455</code>) value. Required if SecurityAltID is specified.<p> Possible values:<ul><li><code>101</code> = Multicast identifier <li><code>102</code> = Combo instrument identifier</td>
</tr>
<tr>
<td>=&gt;1205</td>
<td><code>NoTickRules</code></td>
<td>NumInGroup</td>
<td>No</td>
<td>Number of price increment steps.<p> It is present only if <a href="#security-list-request-x"><code>Security List Request</code>(<code>x</code>)</a> has <code>DisplayIncrementSteps</code> = <code>Y</code></td>
</tr>
<tr>
<td>=&gt;=&gt;1206</td>
<td><code>StartTickPriceRange</code></td>
<td>Price</td>
<td>No</td>
<td>Above this price, the <code>TickIncrement</code> applies</td>
</tr>
<tr>
<td>=&gt;=&gt;1208</td>
<td><code>TickIncrement</code></td>
<td>Price</td>
<td>No</td>
<td>Valid price increment for prices above the <code>StartTickPriceRange</code></td>
</tr>
<tr>
<td>=&gt;965</td>
<td><code>SecurityStatus</code></td>
<td>String</td>
<td>No</td>
<td>(*) It is present in notifications about new or terminated instruments.<p> Possible values: <ul><li><code>1</code> = active/started,</li> <li><code>10</code> = published/created,</li> <li><code>4</code> = closed,</li> <li><code>2</code> = terminated/inactive, <li><code>12</code> = settled</li></ul></p></td>
</tr>
</tbody></table>
<h3 id='instrument-naming-convention'>Instrument Naming convention</h3>
<p>Based on the naming convention, instrument name consist of base currency, quote
currency(called together a currency pair), contract expiration date (if the
instrument isn&#39;t perpetual) and strike price(if the contract is an option).</p>

<p>For example:</p>

<p><b>ETH_USD-14SEP22-2000-P</b> resembles an <b>ETH-USD</b> options contract that
expires on 14 september 2022 with PUT strike price at 2000 USD. <b>BTC_USD</b>
trading pair is treated as a default trading pair and doesn&#39;t have qoute currency
provided in its name.</p>

<p>(*) SecurityStatus is present only in notification messages for subscription by
SecurityListRequest with SubscriptionRequestType=1. The notifications for
closed, settled or terminated status contain only the status and symbol name.</p>
<h2 id='market-data-request-v'><code>Market Data Request</code>(<code>V</code>)</h2>
<p><code>Market Data Request</code>(<code>V</code>) can be used to request market data in snapshot or the
incremental form. Deribit uses his message for order book requests and its
change notification.</p>
<h3 id='arguments-10'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>262</td>
<td><code>MdReqId</code></td>
<td>String</td>
<td>Yes</td>
<td>Unique ID assigned to this request</td>
</tr>
<tr>
<td>263</td>
<td><code>SubscriptionRequestType</code></td>
<td>int</td>
<td>Yes</td>
<td>Subscription Request Type. Valid values: <ul><li> <code>0</code> = Snapshot,</li> <li><code>1</code> = Snapshot + Updates (Subscribe),</li> <li><code>2</code> = Disable previous Snapshot + Update Request (Unsubscribe)</li></ul></td>
</tr>
<tr>
<td>264</td>
<td><code>MarketDepth</code></td>
<td>int</td>
<td>No</td>
<td>See remark about MDUpdateType below</td>
</tr>
<tr>
<td>265</td>
<td><code>MDUpdateType</code></td>
<td>int</td>
<td>when <code>SubscriptionRequestType=1</code></td>
<td>The type of update to subscribe to. <p>Valid values:</p> <ul><li><code>0</code>= full refresh,</li><li><code>1</code>= incremental refresh</li></td>
</tr>
<tr>
<td>9011</td>
<td><code>DeribitSkipBlockTrades</code></td>
<td>Boolean</td>
<td>No</td>
<td>To skip block trades. If <code>9011=Y</code> then block trades will not be reported. Default is <code>N</code></td>
</tr>
<tr>
<td>9012</td>
<td><code>DeribitShowBlockTradeId</code></td>
<td>Boolean</td>
<td>No</td>
<td>To show block trade id. If <code>9012=Y</code> and <code>9012=N</code> then block trades will include BlockTrade ID as TrdMatchID (880). Default is <code>N</code></td>
</tr>
<tr>
<td>100007</td>
<td><code>DeribitTradeAmount</code></td>
<td>int</td>
<td>No</td>
<td>Amount of trades returned in the snapshot response to request for snapshot of recent trades, default 20, maximum  1000</td>
</tr>
<tr>
<td>100008</td>
<td><code>DeribitSinceTimestamp</code></td>
<td>int</td>
<td>No</td>
<td>UTC Timestamp in milliseconds (integer number of milliseconds), if specified, the response returns the trades happened since that timestamp, applicable to the request for recent trades snapshot</td>
</tr>
<tr>
<td></td>
<td>Group <code>MDReqGrp</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>267</td>
<td><code>NoMdEntryTypes</code></td>
<td>NumInGroup</td>
<td>Yes</td>
<td>Number of entry types in the request</td>
</tr>
<tr>
<td>=&gt;269</td>
<td><code>MDEntryType</code></td>
<td>int</td>
<td>Yes</td>
<td><p>Valid values:</p> <ul><li><code>0</code> = Bid (Bid side of the order book),</li><li><code>1</code> = Offer (Ask side of the order book),</li><li><code>2</code> = Trade (Info about recent trades)</td>
</tr>
<tr>
<td></td>
<td>Group <code>InstrmtMDReqGrp</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>146</td>
<td><code>NoRelatedSym</code></td>
<td>NumInGroup</td>
<td>No</td>
<td>Number of symbols requested. Necessary if more than 1 Symbol requested</td>
</tr>
<tr>
<td>=&gt;55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>Yes</td>
<td>Instrument symbol. See instrument naming convention for more details</td>
</tr>
</tbody></table>

<p>When requesting a subscription (<code>SubscriptionRequestType</code>=1), the only supported
combinations are:</p>

<ul>
<li><code>MDUpdateType</code>=1, <code>MarketDepth</code>=0. This will result a <a href="#market-data-snapshotfull-refresh-w"><code>Market Data - Snapshot</code>(<code>W</code>)</a> with the whole order book, followed by incremental updates (X messages) through the whole order book depth.</li>
<li><code>MDUpdateType</code>=0, <code>MarketDepth</code>=(1,10,20). This results in <a href="#market-data-snapshotfull-refresh-w"><code>Market Data - Full Refresh</code>(<code>W</code>)</a> messages, containing the entire specified order book depth. Valid values for <code>MarketDepth</code> are 1, 10, 20.</li>
</ul>

<p>If multiple instrument symbols are specified then the system responds with
multiple market data messages corresponding to those instruments.</p>
<h3 id='response-212'>Response</h3>
<p>If the server is unable to supply the requested data, it will respond with a
<a href="#market-data-request-reject-y"><code>Market Data Request Reject</code>(<code>Y</code>)</a> message.</p>

<p>If the request called for a snapshot (<code>SubscriptionRequestType</code>(<code>263</code>)=0), the
server will respond with a <a href="#market-data-snapshotfull-refresh-w"><code>Market Data - Snapshot/Full Refresh</code>(<code>W</code>)</a> message.</p>

<p>If the request called for a snapshot and subscription
(<code>SubscriptionRequestType</code>(<code>263</code>)=1), the server will start sending <a href="#market-data-incremental-refresh-x"><code>Market
Data - Incremental Refresh</code>(<code>X</code>)</a> messages.</p>
<h2 id='market-data-request-reject-y'><code>Market Data Request Reject</code>(<code>Y</code>)</h2>
<p>If a <a href="#market-data-request-v"><code>Market Data Request</code>(<code>V</code>)</a> message is not
accepted, the exchange responds with a <code>Market Data Request Reject</code>(<code>Y</code>) message</p>
<h3 id='arguments-11'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>58</td>
<td><code>Text</code></td>
<td>String</td>
<td>No</td>
<td>Free format text string</td>
</tr>
<tr>
<td>262</td>
<td><code>MDReqID</code></td>
<td>String</td>
<td>Yes</td>
<td>ID of the original request</td>
</tr>
<tr>
<td>281</td>
<td><code>MDReqRejReason</code></td>
<td>char</td>
<td>Yes</td>
<td>Reason for the rejection of a <code>Market Data Request</code>(<code>V</code>).<p> Possible reasons: <ul><li><code>0</code> = Unknown symbol<li><code>1</code> = Duplicate MDReqID(<code>262</code>)<li><code>2</code> = Insufficient Bandwidth<li><code>3</code> = Insufficient Permissions<li><code>4</code> = Unsupported SubscriptionRequestType(<code>263</code>)<li><code>5</code> = Unsupported MarketDepth(<code>264</code>)<li><code>6</code> = Unsupported MDUpdateType(<code>265</code>)<li><code>7</code> = Unsupported AggregatedBook (<code>266</code>)<li><code>8</code> = Unsupported MDEntryType(<code>269</code>)<li><code>9</code> = Unsupported TradingSessionID(<code>336</code>)<li><code>A</code> = Unsupported Scope(<code>546</code>)<li><code>B</code> = Unsupported OpenCloseSettlFlag(<code>286</code>)<li><code>C</code> = Unsupported MDImplicitDelete(<code>547</code>)<li><code>D</code> = Insufficient credit</td>
</tr>
</tbody></table>
<h2 id='market-data-snapshot-full-refresh-w'><code>Market Data Snapshot/Full Refresh</code>(<code>W</code>)</h2>
<p><code>Market Data Snapshot/Full Refresh</code>(<code>W</code>) is used as the response to a
<a href="#market-data-request-v"><code>Market Data Request</code>(<code>V</code>)</a> message.</p>
<h3 id='arguments-12'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>Yes</td>
<td>Instrument symbol. See instrument naming convention for more details</td>
</tr>
<tr>
<td>262</td>
<td><code>MDReqID</code></td>
<td>String</td>
<td>No</td>
<td>ID of the original request, if it is applicable</td>
</tr>
<tr>
<td>311</td>
<td><code>UnderlyingSymbol</code></td>
<td>String</td>
<td>For options</td>
<td>Underlying symbol</td>
</tr>
<tr>
<td>810</td>
<td><code>UnderlyingPx</code></td>
<td>Price</td>
<td>For options</td>
<td>Price of the underlying instrument. Underlying instrument underlies the primary instrument</td>
</tr>
<tr>
<td>231</td>
<td><code>ContractMultiplier</code></td>
<td>float</td>
<td>No</td>
<td>Specifies a multiply factor to convert from contracts to total units</td>
</tr>
<tr>
<td>201</td>
<td><code>PutOrCall</code></td>
<td>int</td>
<td>No</td>
<td>Indicates whether an Option is for a put or call. Only for Options.<p>Possible values:<ul><li> <code>0</code> = put,</li> <li> <code>1</code> = call </li></ul></td>
</tr>
<tr>
<td>100087</td>
<td><code>TradeVolume24h</code></td>
<td>Qty</td>
<td>No</td>
<td>Defines 24h trade volume for the Symbol in the corresponding contract units</td>
</tr>
<tr>
<td>100090</td>
<td><code>MarkPrice</code></td>
<td>Price</td>
<td>No</td>
<td>Defines mark price for the Symbol</td>
</tr>
<tr>
<td>746</td>
<td><code>OpenInterest</code></td>
<td>float</td>
<td>No</td>
<td>Defines open interest for the Symbol</td>
</tr>
<tr>
<td>100092</td>
<td><code>CurrentFunding</code></td>
<td>Price</td>
<td>No</td>
<td>Current funding (perpetual only)</td>
</tr>
<tr>
<td>100093</td>
<td><code>Funding8h</code></td>
<td>Price</td>
<td>No</td>
<td>Funding in last 8h (perpetual only)</td>
</tr>
<tr>
<td></td>
<td>Group <code>MDFullGrp</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>268</td>
<td><code>NoMDEntries</code></td>
<td>NumInGroup</td>
<td>Yes</td>
<td>Repeating group. Specifies the number of entries in the group</td>
</tr>
<tr>
<td>=&gt;269</td>
<td><code>MDEntryType</code></td>
<td>int</td>
<td>Yes</td>
<td>Possible values:<ul><li> <code>0</code> = Bid (Bid side of the order book),<li> <code>1</code> = Offer (Ask side of the order book), <li><code>2</code> = Trade (in case of request for info about recent trades), <li><code>3</code> = Index Value (value of Index for INDEX instruments like <b>BTC-DERIBIT-INDEX</b>), <li><code>6</code> = Settlement Price(Estimated Delivery Price for INDEX instruments like <b>BTC-DERIBIT-INDEX</b>)</td>
</tr>
<tr>
<td>=&gt;270</td>
<td><code>MDEntryPx</code></td>
<td>Price</td>
<td>No</td>
<td>Price of an entry</td>
</tr>
<tr>
<td>=&gt;271</td>
<td><code>MDEntrySize</code></td>
<td>Qty</td>
<td>No</td>
<td>Size of an entry in Contract units corresponding to the ContractMultiplier in SecurityList</td>
</tr>
<tr>
<td>=&gt;272</td>
<td><code>MDEntryDate</code></td>
<td>UTCTimestamp</td>
<td>No</td>
<td>The timestamp for trade</td>
</tr>
<tr>
<td>=&gt;100009</td>
<td><code>DeribitTradeId</code></td>
<td>String</td>
<td>No</td>
<td>Id of the trade, in case of the request for trades</td>
</tr>
<tr>
<td>=&gt;54</td>
<td><code>Side</code></td>
<td>char</td>
<td>No</td>
<td>Side of trade.<p>Possible values:</p><ul><li> <code>1</code> = Buy,</li><li> <code>2</code> = Sell</li></td>
</tr>
<tr>
<td>=&gt;44</td>
<td><code>Price</code></td>
<td>Price</td>
<td>No</td>
<td>For trades, this is the index price at the trade moment (Deribit index)</td>
</tr>
<tr>
<td>=&gt;58</td>
<td><code>Text</code></td>
<td>String</td>
<td>No</td>
<td>For trade - the trade sequence number</td>
</tr>
<tr>
<td>=&gt;37</td>
<td><code>OrderId</code></td>
<td>String</td>
<td>No</td>
<td>For trade – taker&#39;s matching order id</td>
</tr>
<tr>
<td>=&gt;198</td>
<td><code>SecondaryOrderId</code></td>
<td>String</td>
<td>No</td>
<td>For trade – maker&#39;s matching order id</td>
</tr>
<tr>
<td>=&gt;39</td>
<td><code>OrdStatus</code></td>
<td>char</td>
<td>No</td>
<td>For trade – order status.<p>Possible values:</p><ul><li><code>0</code> = New,</li> <li><code>1</code> = Partially filled,</li> <li><code>2</code> = Filled,</li> <li><code>4</code> = Cancelled</li></ul></td>
</tr>
<tr>
<td>=&gt;100010</td>
<td><code>DeribitLabel</code></td>
<td>String</td>
<td>No</td>
<td>User defined max 64 grapheme clusters long, label of the order, in case of the request for trades. <b>This tag operates on grapheme clusters. A grapheme cluster is a user-perceived character, which can be represented by several unicode codepoints. Please refer to <a href="https://unicode.org/reports/tr29/">Unicode specification</a> for more details about the grapheme clusters</b></td>
</tr>
<tr>
<td>=&gt;100091</td>
<td><code>DeribitLiquidation</code></td>
<td>String</td>
<td>No</td>
<td>Optional field (only for trades caused by liquidation): &quot;M&quot; when maker side of trade was under liquidation, &quot;T&quot; when taker side was under liquidation, &quot;MT&quot; when both sides of trade were under liquidation. This field is hidden for public for the first hour after the trade in order to prevent traders from abusing this information.</td>
</tr>
<tr>
<td>=&gt;880</td>
<td><code>TrdMatchID</code></td>
<td>String</td>
<td>No</td>
<td>Only for trades. Block trade id - when trade was part of block trade. It can be included only if <code>DeribitShowBlockTradeId</code>(<code>9012</code>) is set to <code>Y</code> and <code>DeribitSkipBlockTrades</code>(<code>9011</code>) is set to <code>N</code></td>
</tr>
</tbody></table>

<p>CurrentFunding and Funding8h are present only in <code>W</code> message, not in <code>X</code> message
below.</p>
<h2 id='market-data-incremental-refresh-x'><code>Market Data Incremental Refresh</code>(<code>X</code>)</h2>
<p><code>Market Data – Incremental Refresh</code>(<code>X</code>) message is used for incremental updates
in case of <a href="#market-data-request-v"><code>Market Data Request</code>(<code>V</code>)</a> for Snapshot +
Subscribe</p>
<h3 id='arguments-13'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>Yes</td>
<td>Instrument symbol. See instrument naming convention for more details</td>
</tr>
<tr>
<td>262</td>
<td><code>MDReqID</code></td>
<td>String</td>
<td>No</td>
<td>ID of the original request, if it is applicable</td>
</tr>
<tr>
<td>231</td>
<td><code>ContractMultiplier</code></td>
<td>float</td>
<td>No</td>
<td>Specifies a multiply factor to convert from contracts to total units</td>
</tr>
<tr>
<td>201</td>
<td><code>PutOrCall</code></td>
<td>int</td>
<td>No</td>
<td>Indicates whether an Option is for a put or call. Only for Options.<p>Possible values:<ul><li> <code>0</code> = put,</li> <li> <code>1</code> = call </li></ul></td>
</tr>
<tr>
<td>100087</td>
<td><code>TradeVolume24h</code></td>
<td>Qty</td>
<td>No</td>
<td>Defines 24h trade volume for the Symbol in the corresponding contract units</td>
</tr>
<tr>
<td>100090</td>
<td><code>MarkPrice</code></td>
<td>Price</td>
<td>No</td>
<td>Defines mark price for the Symbol</td>
</tr>
<tr>
<td>746</td>
<td><code>OpenInterest</code></td>
<td>float</td>
<td>No</td>
<td>Defines open interest for the Symbol</td>
</tr>
<tr>
<td></td>
<td>Group <code>MDIncGrp</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>268</td>
<td><code>NoMDEntries</code></td>
<td>NumInGroup</td>
<td>Yes</td>
<td>Repeating group . Specifies the number of entries in the group</td>
</tr>
<tr>
<td>=&gt;279</td>
<td><code>MDUpdateAction</code></td>
<td>char</td>
<td>Yes</td>
<td>Type of Market Data update action. Valid values: <ul><li><code>0</code> = New,</li><li><code>1</code> = Change,</li><li> <code>2</code> = Delete</li></ul></td>
</tr>
<tr>
<td>=&gt;269</td>
<td><code>MDEntryType</code></td>
<td>int</td>
<td>No</td>
<td>Possible values:<ul><li> <code>0</code> = Bid (Bid side of the order book),<li> <code>1</code> = Offer (Ask side of the order book), <li><code>2</code> = Trade (In case of request for info about recent trades)</li></ul></td>
</tr>
<tr>
<td>=&gt;270</td>
<td><code>MDEntryPx</code></td>
<td>Price</td>
<td>No</td>
<td>Price of an entry</td>
</tr>
<tr>
<td>=&gt;271</td>
<td><code>MDEntrySize</code></td>
<td>Qty</td>
<td>No</td>
<td>Size of an entry in Contract units corresponding to the ContractMultiplier in SecurityList</td>
</tr>
<tr>
<td>=&gt;272</td>
<td><code>MDEntryDate</code></td>
<td>UTCTimestamp</td>
<td>No</td>
<td>The timestamp for trade</td>
</tr>
<tr>
<td>=&gt;100009</td>
<td><code>DeribitTradeId</code></td>
<td>String</td>
<td>No</td>
<td>Id of the trade, in case of the request for trades</td>
</tr>
<tr>
<td>=&gt;54</td>
<td><code>Side</code></td>
<td>char</td>
<td>No</td>
<td>Side of trade.<p>Possible values:</p><ul><li> <code>1</code> = Buy,</li><li> <code>2</code> = Sell</li></ul></td>
</tr>
<tr>
<td>=&gt;37</td>
<td><code>OrderId</code></td>
<td>String</td>
<td>No</td>
<td>For trade – order id</td>
</tr>
<tr>
<td>=&gt;198</td>
<td><code>SecondaryOrderId</code></td>
<td>String</td>
<td>No</td>
<td>For trade – matching order id</td>
</tr>
<tr>
<td>=&gt;39</td>
<td><code>OrdStatus</code></td>
<td>char</td>
<td>No</td>
<td>For trade – order status.<p>Possible values:</p><ul><li><code>0</code> = New,</li> <li><code>1</code> = Partially filled,</li> <li><code>2</code> = Filled,</li> <li><code>4</code> = Cancelled</li></ul></td>
</tr>
<tr>
<td>=&gt;100010</td>
<td><code>DeribitLabel</code></td>
<td>String</td>
<td>No</td>
<td>User defined max 64 grapheme clusters long, label of the order, in case of the request for trades. <b>This tag operates on grapheme clusters. A grapheme cluster is a user-perceived character, which can be represented by several unicode codepoints. Please refer to <a href="https://unicode.org/reports/tr29/">Unicode specification</a> for more details about the grapheme clusters</b></td>
</tr>
<tr>
<td>=&gt;44</td>
<td><code>Price</code></td>
<td>Price</td>
<td>No</td>
<td>For trades, this is the index price at the trade moment (Deribit index)</td>
</tr>
<tr>
<td>=&gt;58</td>
<td><code>Text</code></td>
<td>String</td>
<td>No</td>
<td>The trade sequence number</td>
</tr>
<tr>
<td>=&gt;100091</td>
<td><code>DeribitLiquidation</code></td>
<td>String</td>
<td>No</td>
<td>Optional field (only for trades caused by liquidation): &quot;M&quot; when maker side of trade was under liquidation, &quot;T&quot; when taker side was under liquidation, &quot;MT&quot; when both sides of trade were under liquidation. This field is hidden for public for the first hour after the trade in order to prevent traders from abusing this information.</td>
</tr>
<tr>
<td>=&gt;880</td>
<td><code>TrdMatchID</code></td>
<td>String</td>
<td>No</td>
<td>Only for trades. Block trade id - when trade was part of block trade. It can be included only if <code>DeribitShowBlockTradeId</code>(<code>9012</code>) is set to <code>Y</code> and <code>DeribitSkipBlockTrades</code>(<code>9011</code>) is set to <code>N</code></td>
</tr>
</tbody></table>
<h2 id='new-order-single-d'><code>New Order Single</code>(<code>D</code>)</h2>
<p>The <code>NEW ORDER SINGLE</code>(<code>D</code>) is used by the client to submit new orders to the
exchange.</p>
<h3 id='arguments-14'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>11</td>
<td><code>ClOrdID</code></td>
<td>String</td>
<td>Yes</td>
<td>Unique identifier for the order, assigned by the client, max 64 grapheme clusters. <b>This tag operates on grapheme clusters. A grapheme cluster is a user-perceived character, which can be represented by several unicode codepoints. Please refer to <a href="https://unicode.org/reports/tr29/">Unicode specification</a> for more details about the grapheme clusters</b></td>
</tr>
<tr>
<td>54</td>
<td><code>Side</code></td>
<td>char</td>
<td>Yes</td>
<td>Side of order.<p>Valid values:</p> <ul><li><code>1</code> = Buy,</li> <li><code>2</code> = Sell</li></ul></td>
</tr>
<tr>
<td>38</td>
<td><code>OrderQty</code></td>
<td>Qty</td>
<td>Yes</td>
<td>Order quantity. Depends on <code>QtyType</code>. When <code>QtyType</code> is set to <code>Units</code>, the <code>OrderQty</code> is specified in USD for perpetual and inverse futures, in the underlying base currency coin for linear futures, or in the amount of cryptocurrency contracts for options. The system will automatically convert <code>Units</code> to <code>Contracts</code> when the order is placed <strong>Please, note that Quantity is by default defined in Contract units corresponding to the ContractMultiplier in SecurityList</strong></td>
</tr>
<tr>
<td>44</td>
<td><code>Price</code></td>
<td>Price</td>
<td>Yes</td>
<td>Price</td>
</tr>
<tr>
<td>55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>Yes</td>
<td>Instrument symbol, e.g., <b>BTC-1JAN16</b>. See instrument naming convention for more details</td>
</tr>
<tr>
<td>62</td>
<td><code>ValidUntilTime</code></td>
<td>UTCTimestamp</td>
<td>No</td>
<td>Indicates expiration time of indication message, in UTC</td>
</tr>
<tr>
<td>18</td>
<td><code>ExecInst</code></td>
<td>MultipleCharValue</td>
<td>No</td>
<td>Currently is used to mark POST ONLY orders and REDUCE ONLY orders.<p>POST ONLY valid values:</p><ul><li><code>6</code> = &quot;Participate don&#39;t initiate&quot;, <li><code>A</code> = &quot;No cross&quot; (only together with 6, &quot;<code>6A</code>&quot; --  REJECT POST ONLY when the order is put to order the book unmodified or the request is rejected and order is cancelled),</li></ul> REDUCE ONLY valid values: <ul><li><code>E</code> = &quot;Do not increase - DNI&quot;</li></ul></td>
</tr>
<tr>
<td>40</td>
<td><code>OrdType</code></td>
<td>Char</td>
<td>No</td>
<td>Order type.<p> Valid values:<ul><li><code>1</code> = Market,</li><li><code>2</code> = Limit (by default),</li><li><code>K</code> = Market With Left Over as Limit (market limit),</li><li><code>4</code> = Stop limit (trailing stop),</li><li><code>J</code> = Market If Touched (stop limit, if <code>StopPx</code>(99) is set),</li><li><code>S</code> = Stop Limit on Bid or Offer (stop market, if <code>StopPx</code>(99) is set)</li></ul></p></td>
</tr>
<tr>
<td>59</td>
<td><code>TimeInForce</code></td>
<td>char</td>
<td>No</td>
<td>Specifies how long the order remains in effect. Absence of this field is interpreted as &quot;Good &#39;Til Cancelled&quot;.<p> Valid values:<ul><li><code>0</code> = Good &#39;Til Day(<code>GTD</code>),</li><li><code>1</code> = Good &#39;Til Cancelled(<code>GTC</code>),</li> <li><code>3</code> = Immediate or Cancel(<code>IOC</code>),</li> <li><code>4</code> = Fill or Kill(<code>FOK</code>)</li></ul></td>
</tr>
<tr>
<td>99</td>
<td><code>StopPx</code></td>
<td>Price</td>
<td>No</td>
<td>Price per unit of quantity</td>
</tr>
<tr>
<td>1138</td>
<td><code>DisplayQty</code></td>
<td>Qty</td>
<td>No</td>
<td>The (max) quantity to be displayed in the orderbook. Setting the <code>DisplayQty (1138)</code> = 0 is interpreted as no hidden volume, i.e. the full order quantity is displayed to the market. Omitting the field gives the same result.</td>
</tr>
<tr>
<td>1088</td>
<td><code>RefreshQty</code></td>
<td>Qty</td>
<td>No</td>
<td>Defines the quantity used to refresh <code>DisplayQty</code>.</td>
</tr>
<tr>
<td>854</td>
<td><code>QtyType</code></td>
<td>Int</td>
<td>No</td>
<td>Type of quantity. Valid values:<p><ul><li><code>0</code> = <code>Units</code>,</li><li><code>1</code> = <code>Contracts</code></li></ul></p> Default is <code>Contracts</code>. <p>When <code>QtyType</code> is <code>Units</code>, then for perpetual and inverse futures the <code>OrderQty</code> is in USD units, and for linear futures it is the underlying base currency coin, and for options it is the amount of corresponding cryptocurrency contracts, e.g., BTC or ETH. The <code>Units</code> will be recalculated into the system&#39;s <code>Contracts</code> on server automatically when the order is placed.</p></td>
</tr>
<tr>
<td>211</td>
<td><code>PegOffsetValue</code></td>
<td>Float</td>
<td>No</td>
<td>Amount (signed) added to the peg for a pegged order in the context of the <code>PegOffsetType</code>(836)</td>
</tr>
<tr>
<td>1094</td>
<td><code>PegPriceType</code></td>
<td>Int</td>
<td>No</td>
<td>Needs to be set for Trailing Stop order. Valid value:<p><ul><li><code>8</code> = Trailing Stop Peg</li></ul></p></td>
</tr>
<tr>
<td>100010</td>
<td><code>DeribitLabel</code></td>
<td>String</td>
<td>No</td>
<td>A custom label for your order, max 64 grapheme clusters. Can be used by <a href="#order-cancel-request-f"><code>Order Cancel Request</code>(<code>F</code>)</a> to amend the order later on</td>
</tr>
<tr>
<td>100012</td>
<td><code>DeribitAdvOrderType</code></td>
<td>char</td>
<td>No</td>
<td>Used to create advanced order for options. If it is present: <ul><li><code>0</code> = Implied Volatility Order (price defines fixed implied volatility in %),</li><li> <code>1</code> = USD Order (price defines fixed USD price of the option, advanced USD orders are not supported for linear options)</li></ul></td>
</tr>
<tr>
<td>9008</td>
<td><code>DeribitMMProtection</code></td>
<td>Boolean</td>
<td>No</td>
<td>Order Market Maker Protection (MMP) flag, default is <code>N</code>. <strong>Important: manual admin action is necessary to activate Market Maker Protection (MMP) for an account</strong></td>
</tr>
<tr>
<td>5127</td>
<td><code>DeribitConditionTriggerMethod</code></td>
<td>Int</td>
<td>No</td>
<td>Selects condition trigger method for algo orders. Valid values:<p><ul><li><code>1</code> = mark price,</li><li><code>2</code> = trade,</li><li><code>3</code> = index</li></ul></p></td>
</tr>
</tbody></table>
<h3 id='response-213'>Response</h3>
<p>Upon receiving a new order, the exchange responds with the <code>Execution
Report</code>(<code>8</code>) message communicating whether the order was accepted or rejected.</p>

<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>527</td>
<td><code>SecondaryExecID</code></td>
<td>String</td>
<td>No</td>
<td>ID of the last order change</td>
</tr>
<tr>
<td>37</td>
<td><code>OrderId</code></td>
<td>String</td>
<td>No</td>
<td>Unique identifier of the order, assigned by the Deribit</td>
</tr>
<tr>
<td>11</td>
<td><code>ClOrdID</code></td>
<td>String</td>
<td>No</td>
<td>Deribit replaces this field with the own value assigned by the server (it is not the <code>ClOrdID</code>(<code>11</code>) from <a href="#new-order-single-d"><code>New Order Single</code>(<code>D</code>)</a>)</td>
</tr>
<tr>
<td>41</td>
<td><code>OrigClOrdId</code></td>
<td>String</td>
<td>No</td>
<td>The original value assigned by the client in the <a href="#new-order-single-d"><code>New Order Single</code>(<code>D</code>)</a> message</td>
</tr>
<tr>
<td>39</td>
<td><code>OrdStatus</code></td>
<td>char</td>
<td>Yes</td>
<td>For trade – order status.<p>Possible values:</p><ul><li><code>0</code> = New,</li> <li><code>1</code> = Partially filled,</li> <li><code>2</code> = Filled,</li> <li><code>4</code> = Cancelled</li><li><code>8</code> = Rejected</ul></td>
</tr>
<tr>
<td>54</td>
<td><code>Side</code></td>
<td>char</td>
<td>Yes</td>
<td>Side of order.<p>Possible values:</p> <ul><li><code>1</code> = Buy,</li> <li><code>2</code> = Sell</li></ul></td>
</tr>
<tr>
<td>60</td>
<td><code>TransactTime</code></td>
<td>UTCTimestamp</td>
<td>Yes</td>
<td>Timestamp when the transaction represented by this <code>Execution Report</code>(<code>8</code>) message occurred. Fix timestamp</td>
</tr>
<tr>
<td>12</td>
<td><code>Commission</code></td>
<td>float</td>
<td>No</td>
<td>Deprecated. Always <code>0</code></td>
</tr>
<tr>
<td>151</td>
<td><code>LeavesQty</code></td>
<td>Qty</td>
<td>Yes</td>
<td>Order quantity open for further execution (<code>LeavesQty</code> = <code>OrderQty</code> - <code>CumQty</code>) in Contract units corresponding to the ContractMultiplier in SecurityList</td>
</tr>
<tr>
<td>14</td>
<td><code>CumQty</code></td>
<td>Qty</td>
<td>Yes</td>
<td>Total executed quantity or 0.0 in Contract units corresponding to the ContractMultiplier in SecurityList</td>
</tr>
<tr>
<td>38</td>
<td><code>OrderQty</code></td>
<td>Qty</td>
<td>Yes</td>
<td>Order quantity in Contract units corresponding to the ContractMultiplier in SecurityList</td>
</tr>
<tr>
<td>40</td>
<td><code>OrdType</code></td>
<td>Char</td>
<td>No</td>
<td>Order type.<p> Valid values:<ul><li><code>1</code> = Market,</li><li><code>2</code> = Limit,</li><li><code>K</code> = Market With Left Over as Limit (market limit),</li><li><code>4</code> = Stop limit (trailing stop),</li><li><code>J</code> = Market If Touched (stop limit, if <code>StopPx</code>(99) is set),</li><li><code>S</code> = Stop Limit on Bid or Offer (stop market, if <code>StopPx</code>(99) is set)</li></ul></p></td>
</tr>
<tr>
<td>44</td>
<td><code>Price</code></td>
<td>Price</td>
<td>Yes</td>
<td>Price</td>
</tr>
<tr>
<td>150</td>
<td><code>ExecType</code></td>
<td>char</td>
<td>No</td>
<td>Describes the specific Execution Report.<p> Possible values: <ul><li><code>I</code> = equal to  (Order Status),</li> <li><code>7</code> = (Stopped) for triggered stop orders,</li> <li><code>8</code> = Rejected,</li> <li> <code>3</code> = (Done for day) for GTD orders,</li> <li> <code>C</code> = (Expired) for the orders expired at delivery</li></ul></p></td>
</tr>
<tr>
<td>18</td>
<td><code>ExecInst</code></td>
<td>MultipleValueString</td>
<td>No</td>
<td>Currently is used to mark POST ONLY orders and REDUCE ONLY orders.<p>POST ONLY Possible values:</p><ul><li><code>6</code> = &quot;Participate don&#39;t initiate&quot;, <li><code>A</code> = &quot;No cross&quot; (only together with 6, &quot;<code>6A</code>&quot; --  REJECT POST ONLY when the order is put to the order book unmodified or the request is rejected and order is cancelled),</li></ul> REDUCE ONLY possible values: <ul><li><code>E</code> = &quot; Do not increase - DNI&quot;</li></ul></td>
</tr>
<tr>
<td>103</td>
<td><code>OrdRejReason</code></td>
<td>int</td>
<td>Yes</td>
<td>Possible reasons: <ul><li><code>0</code> = no reject (the request has been accepted)<li><code>1</code> = Unknown symbol<li><code>2</code> = Exchange closed<li><code>3</code> = Order exceeds limit<li><code>4</code> = Too late to enter<li><code>5</code> = Unknown order<li><code>6</code> = Duplicate Order (e.g. dupe <code>ClOrdID</code>(<code>11</code>))<li><code>7</code> = Duplicate of a verbally communicated order<li><code>8</code> = Stale order<li><code>9</code> = Trade along required<li><code>10</code> = Invalid Investor ID<li><code>11</code> = Unsupported order characteristic<li><code>12</code> = Surveillance Option<li><code>13</code> = Incorrect quantity<li><code>14</code> = Incorrect allocated quantity<li><code>15</code> = Unknown account(s)<li><code>16</code> = Price exceeds current price band<li><code>18</code> = Invalid price increment<li><code>99</code> = Other </ul> <p><strong>Note: Values 3, 4, and 5 will be used when rejecting an order due to pre-allocation information errors.</strong></td>
</tr>
<tr>
<td>58</td>
<td><code>Text</code></td>
<td>String</td>
<td>No</td>
<td>Free format text string, usually exceptions</td>
</tr>
<tr>
<td>207</td>
<td><code>SecurityExchange</code></td>
<td>String</td>
<td>No</td>
<td>&quot;Deribit&quot;</td>
</tr>
<tr>
<td>55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>Yes</td>
<td>Instrument symbol</td>
</tr>
<tr>
<td>99</td>
<td><code>StopPx</code></td>
<td>Price</td>
<td>No</td>
<td>Price per unit of quantity</td>
</tr>
<tr>
<td>854</td>
<td><code>QtyType</code></td>
<td>int</td>
<td>No</td>
<td>Type of quantity specified in a quantity. Currently only 1 - <code>Contracts</code></td>
</tr>
<tr>
<td>211</td>
<td><code>PegOffsetValue</code></td>
<td>Float</td>
<td>No</td>
<td>Amount (signed) added to the peg for a pegged order in the context of the <code>PegOffsetType</code>(836)</td>
</tr>
<tr>
<td>1094</td>
<td><code>PegPriceType</code></td>
<td>Int</td>
<td>No</td>
<td>Needs to be set for Trailing Stop order. Valid value:<p><ul><li><code>8</code> = Trailing Stop Peg</li></ul></p></td>
</tr>
<tr>
<td>231</td>
<td><code>ContractMultiplier</code></td>
<td>float</td>
<td>No</td>
<td>Specifies a multiply factor to convert from contracts to total units</td>
</tr>
<tr>
<td>6</td>
<td><code>AvgPx</code></td>
<td>float</td>
<td>No</td>
<td>Average execution price or 0.0 if not executed yet or rejected</td>
</tr>
<tr>
<td>1138</td>
<td><code>DisplayQty</code></td>
<td>Qty</td>
<td>No</td>
<td>The (max) quantity to be displayed in the orderbook.</td>
</tr>
<tr>
<td>9008</td>
<td><code>DeribitMMProtection</code></td>
<td>Boolean</td>
<td>No</td>
<td>Order Market Maker Protection (MMP) flag. <strong>Important: manual admin action is necessary to activate Market Maker Protection (MMP) for an account</strong></td>
</tr>
<tr>
<td>100012</td>
<td><code>DeribitAdvOrderType</code></td>
<td>int</td>
<td>No</td>
<td>If it is present then it denotes advanced order for options. <p>Possible values:<ul><li><code>0</code> = Implied Volatility Order (price defines fixed implied volatility in %),</li><li> <code>1</code> = USD Order (price defines fixed USD price of the option, advanced USD orders are not supported for linear options)</li></ul></p></td>
</tr>
<tr>
<td>1188</td>
<td><code>Volatility</code></td>
<td>float</td>
<td>No</td>
<td>Volatility for Implied Volatility Orders (options orders with fixed volatility)</td>
</tr>
<tr>
<td>839</td>
<td><code>PeggedPrice</code></td>
<td>Price</td>
<td>No</td>
<td>Value of fixed USD price for USD Orders (options orders with fixed USD price)</td>
</tr>
<tr>
<td>31</td>
<td><code>LastPx</code></td>
<td>Price</td>
<td>No</td>
<td>Price of this last fill</td>
</tr>
<tr>
<td>32</td>
<td><code>LastQty</code></td>
<td>Qty</td>
<td>No</td>
<td>Quantity bought/sold on this last fill</td>
</tr>
<tr>
<td>100010</td>
<td><code>DeribitLabel</code></td>
<td>String</td>
<td>No</td>
<td>A custom label for your order, max 64 grapheme clusters. Can be used by <a href="#order-cancel-request-f"><code>Order Cancel Request</code>(<code>F</code>)</a> to amend the order later on</td>
</tr>
<tr>
<td>9019</td>
<td><code>MMPGroup</code></td>
<td>String</td>
<td>No</td>
<td>A custom tag of MMP Group. This tag is present only for orders from Mass Quote.</td>
</tr>
<tr>
<td>9034</td>
<td><code>IsLiquidation</code></td>
<td>Boolean</td>
<td>No</td>
<td>A custom tag, <code>9034=Y</code> if the order was automatically created during liquidation.</td>
</tr>
<tr>
<td>9035</td>
<td><code>IsRebalance</code></td>
<td>Boolean</td>
<td>No</td>
<td>A custom tag, <code>9035=Y</code> if the order was automatically created during cross-collateral balance restoration.</td>
</tr>
<tr>
<td>9036</td>
<td><code>IsRiskReducing</code></td>
<td>Boolean</td>
<td>No</td>
<td>A custom tag, <code>9036=Y</code> if the order is marked by the platform as a risk reducing order (can apply only to orders placed by PM users).</td>
</tr>
<tr>
<td>302</td>
<td>QuoteSetID</td>
<td>String</td>
<td>No</td>
<td>identifier for the Quote Set. This tag is present only for orders from Mass Quote.</td>
</tr>
<tr>
<td>117</td>
<td>QuoteID</td>
<td>String</td>
<td>No</td>
<td>identifier for the Quote. This tag is present only for orders from Mass Quote.</td>
</tr>
<tr>
<td>299</td>
<td>QuoteEntryID</td>
<td>String</td>
<td>No</td>
<td>identifier for the Quote Entry. This tag is present only for orders from Mass Quote.</td>
</tr>
<tr>
<td></td>
<td>Group <code>FillsGrp</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>1362</td>
<td><code>NoFills</code></td>
<td>NumInGroup</td>
<td>No</td>
<td>Number of fill entries for the order</td>
</tr>
<tr>
<td>=&gt;1363</td>
<td><code>FillExecID</code></td>
<td>String</td>
<td>No</td>
<td>Unique identifier of execution, concatenated via &#39;#&#39; symbol and trade sequence number, e.g., <b>BTC-28SEP18#38</b></td>
</tr>
<tr>
<td>=&gt;1364</td>
<td><code>FillPx</code></td>
<td>Price</td>
<td>No</td>
<td>Price of this partial fill</td>
</tr>
<tr>
<td>=&gt;1365</td>
<td><code>FillQty</code></td>
<td>Qty</td>
<td>No</td>
<td>Quantity bought/sold on this partial fill</td>
</tr>
<tr>
<td>=&gt;1443</td>
<td><code>FillLiquidityInd</code></td>
<td>int</td>
<td>No</td>
<td>Indicator to identify whether this fill was a result of a liquidity provider providing or liquidity taker taking the liquidity.<p>Possible values:<ul><li><code>1</code> = Added Liquidity,</li> <li><code>2</code> = Removed Liquidity</li></ul></td>
</tr>
</tbody></table>
<h2 id='order-cancel-request-f'><code>Order Cancel Request</code>(<code>F</code>)</h2>
<p>This message requests the cancellation of a particular order. If an order has
been partially filled, only the remaining quantity can be cancelled. The request
should be accepted only if an order can successfully be cancelled without
executing further. The server generated identifiers should be used as
<code>OrigClOrdId</code>.</p>

<p>From Release 1.3.10, it is possible to cancel orders by <code>ClOrdID</code> or
<code>DeribitLabel</code>, and <code>OrigClOrdId</code> is not required anymore, however canceling
orders by <code>OrigClOrdId</code> is noticeably faster.</p>
<h4 id='important'>IMPORTANT:</h4>
<ul>
<li>to cancel an order by <code>ClOrdID</code> or <code>DeribitLabel</code>, this must be the only open order (with such <code>ClOrdID</code> or <code>DeribitLabel</code> respectively). To cancel many orders by <code>DeribitLabel</code>, use <a href="#order-mass-cancel-request-q"><code>Order MassCancel Request</code>(<code>q</code>)</a>.</li>
<li>when possible it is recommended to use faster <code>OrigClOrdId</code></li>
</ul>
<h3 id='arguments-15'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>11</td>
<td><code>ClOrdID</code></td>
<td>String</td>
<td>Required if <code>OrigClOrdId</code>, <code>DeribitLabel</code> are absent</td>
<td>Original order identifier assigned by the user. There must be the only open order with such <code>ClOrdID</code></td>
</tr>
<tr>
<td>41</td>
<td><code>OrigClOrdId</code></td>
<td>String</td>
<td>Required if <code>DeribitLabel</code>, <code>ClOrdID</code> are absent</td>
<td>Order identifier assigned by Deribit over the user one</td>
</tr>
<tr>
<td>100010</td>
<td><code>DeribitLabel</code></td>
<td>String</td>
<td>Required if <code>OrigClOrdId</code>, <code>ClOrdID</code> are absent</td>
<td>A custom label for your order, max 64 grapheme clusters. There must be the only open order with this <code>DeribitLabel</code> otherwise use <a href="#order-mass-cancel-request-q"><code>Order MassCancel Request</code>(<code>q</code>)</a>. <b>This tag operates on grapheme clusters. A grapheme cluster is a user-perceived character, which can be represented by several unicode codepoints. Please refer to <a href="https://unicode.org/reports/tr29/">Unicode specification</a> for more details about the grapheme clusters</b></td>
</tr>
<tr>
<td>55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>Required if <code>OrigClOrdId</code> is absent</td>
<td>Instrument symbol, e.g., <b>BTC-1JAN16</b></td>
</tr>
<tr>
<td>15</td>
<td><code>Currency</code></td>
<td>String</td>
<td>No</td>
<td>To speed up the search of the order by <code>DeribitLabel</code> or <code>ClOrdID</code></td>
</tr>
</tbody></table>
<h3 id='response-on-failure'>Response on failure</h3><h2 id='order-cancel-reject-9'><code>Order Cancel Reject</code>(<code>9</code>)</h2>
<p><code>Order Cancel Reject</code>(<code>9</code>) is issued by the exchange upon receipt of
<a href="#order-cancel-request-f"><code>Order Cancel Request</code>(<code>F</code>)</a> message which cannot be executed.</p>

<p>Alongside tags listed below, <code>Order Cancel Reject</code>(<code>9</code>) also sends corresponding tag (<code>ClOrdID</code>, <code>OrigClOrdId</code> or <code>DeribitLabel</code>), used by the user to cancel the order in <a href="#order-cancel-request-f"><code>Order Cancel Request</code>(<code>F</code>)</a> or <a href="#order-cancel-replace-request-g"><code>Order Cancel/Replace Request</code>(<code>G</code>)</a>.</p>

<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>52</td>
<td><code>SendingTime</code></td>
<td>UTCTimestamp</td>
<td>Yes</td>
<td>Time of message transmission expressed in UTC</td>
</tr>
<tr>
<td>39</td>
<td><code>OrdStatus</code></td>
<td>char</td>
<td>No</td>
<td>Order status. Present only if applicable. <p>Possible values:</p><ul><li><code>0</code> = New,</li> <li><code>1</code> = Partially filled,</li>  <li><code>4</code> = Cancelled,</li><li><code>6</code> = Pending cancel,</li><li><code>8</code> = Rejected</ul></td>
</tr>
<tr>
<td>58</td>
<td><code>Text</code></td>
<td>String</td>
<td>No</td>
<td>Text string explaining the reason for rejection</td>
</tr>
<tr>
<td>41</td>
<td><code>OrigClOrdId</code></td>
<td>String</td>
<td>No</td>
<td>Original order identifier assigned by the user</td>
</tr>
<tr>
<td>11</td>
<td><code>ClOrdID</code></td>
<td>String</td>
<td>No</td>
<td>Order identifier assigned by Deribit</td>
</tr>
<tr>
<td>100010</td>
<td><code>DeribitLabel</code></td>
<td>String</td>
<td>No</td>
<td>A custom label for your order</td>
</tr>
</tbody></table>
<h3 id='response-on-success'>Response on success</h3>
<p>The following <code>Execution Report</code>(<code>8</code>) is sent by the exchange upon successfully
processing a cancel request.</p>

<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>52</td>
<td><code>SendingTime</code></td>
<td>UTCTimestamp</td>
<td>Yes</td>
<td>Time of message transmission expressed in UTC</td>
</tr>
<tr>
<td>11</td>
<td><code>ClOrdID</code></td>
<td>String</td>
<td>No</td>
<td>Deribit replaces this field with the own value assigned by the server (it is not the client id from <a href="#new-order-single-d"><code>New Order Single</code>(<code>D</code>)</a>)</td>
</tr>
<tr>
<td>41</td>
<td><code>OrigClOrdId</code></td>
<td>String</td>
<td>No</td>
<td>The original value assigned by the client in the <a href="#new-order-single-d"><code>New Order Single</code>(<code>D</code>)</a> message</td>
</tr>
<tr>
<td>150</td>
<td><code>ExecType</code></td>
<td>char</td>
<td>No</td>
<td>Describes the specific Execution Report. <p>Possible values:</p> <ul><li><code>4</code> = Cancelled,</li> <li><code>6</code> = Pending Cancel</li></ul></td>
</tr>
<tr>
<td>39</td>
<td><code>OrdStatus</code></td>
<td>char</td>
<td>Yes</td>
<td>For trade – order status.<p>Possible values:</p><ul><li><code>0</code> = New,</li> <li><code>1</code> = Partially filled,</li>  <li><code>4</code> = Cancelled,</li><li><code>6</code> = Pending cancel,</li><li><code>8</code> = Rejected</ul></td>
</tr>
<tr>
<td>58</td>
<td><code>Text</code></td>
<td>String</td>
<td>Yes</td>
<td>Text string describing the result</td>
</tr>
</tbody></table>

<p>This brief Execution Report comes faster and just indicates that the order was
cancelled. Besides this brief report, the server always sends the last state of the
cancelled order as another Execution Report with Text=&quot;notification&quot; and all
details about the cancelled order. <p> <strong>MMP orders:</strong> if the Market Maker
Protection (MMP) order was cancelled by user request the <code>DeribitMMProtection
(9008)</code> flag is removed from the notification Execution Report. Presence of the
<code>DeribitMMProtection (9008)</code> flag in the Execution Report with status &quot;cancelled&quot;
means that the order has been cancelled by Market Maker Protection (MMP).</p>
<h2 id='order-mass-cancel-request-q'><code>Order Mass Cancel Request</code>(<code>q</code>)</h2>
<p><code>Order Mass Cancel Request</code>(<code>q</code>) message will trigger cancellation of a group of
orders.</p>

<p>From Release 1.3.10, it is possible to cancel orders by DeribitLabel, and the
option <code>10</code> of the <code>MassCancelRequestType</code>(<code>530</code>) has been added.</p>
<h3 id='arguments-16'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>11</td>
<td><code>ClOrdID</code></td>
<td>String</td>
<td>Yes</td>
<td>Unique ID of <code>Order Mass Cancel Request</code>(<code>q</code>) as assigned by the client, max 64 grapheme clusters. <b>This tag operates on grapheme clusters. A grapheme cluster is a user-perceived character, which can be represented by several unicode codepoints. Please refer to <a href="https://unicode.org/reports/tr29/">Unicode specification</a> for more details about the grapheme clusters</b></td>
</tr>
<tr>
<td>530</td>
<td><code>MassCancelRequestType</code></td>
<td>int</td>
<td>Yes</td>
<td>Specifies the type of cancellation requested. <p>Valid values:<ul><li><code>7</code> = all orders,</li> <li><code>5</code> = orders by security type,</li> <li><code>1</code> = orders by symbol, <li><code>10</code> = orders by DeribitLabel</li></ul></p></td>
</tr>
<tr>
<td>100010</td>
<td><code>DeribitLabel</code></td>
<td>String</td>
<td>if <code>MassCancelRequestType</code>(<code>530</code>)=10</td>
<td>A custom label for your order, max 64 grapheme clusters. Can be used by <a href="#order-cancel-request-f"><code>Order Cancel Request</code>(<code>F</code>)</a> to amend the order later on.  Equivalent of REST/WS <code>cancel_by_label</code></td>
</tr>
<tr>
<td>167</td>
<td><code>SecurityType</code></td>
<td>String</td>
<td>If <code>MassCancelRequestType</code>(<code>530</code>)=5</td>
<td>Describes type of security.<p> Possible values: <ul><li><code>FUT</code> for futures,</li><li> <code>OPT</code> for options,</li> <li> <code>FUTCO</code> for future combo,</li> <li><code>OPTCO</code> for option combo</li></ul></td>
</tr>
<tr>
<td>55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>If <code>MassCancelRequestType</code>(<code>530</code>)=1</td>
<td>The symbols for which to cancel all orders</td>
</tr>
<tr>
<td>15</td>
<td><code>Currency</code></td>
<td>String</td>
<td>No</td>
<td>To cancel only certain currency if it is applicable. See <a href="#security-list-request-x"><code>Security List Request</code>(<code>x</code>)</a></td>
</tr>
<tr>
<td>9031</td>
<td><code>FreezeQuotes</code></td>
<td>Boolean</td>
<td>No</td>
<td>Whether or not to reject incoming quotes for 1 second after cancelling</td>
</tr>
</tbody></table>
<h3 id='response-214'>Response</h3>
<p>After the cancellation, the server responds with
an <code>Order Mass Cancel Report</code>(<code>r</code>).</p>
<h2 id='order-mass-cancel-report-r'><code>Order Mass Cancel Report</code>(<code>r</code>)</h2>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>11</td>
<td><code>ClOrdID</code></td>
<td>String</td>
<td>No</td>
<td>Unique Identifier assigned by the client in the <a href="#order-mass-cancel-request-q"><code>Order Mass Cancel Request</code>(<code>q</code>)</a></td>
</tr>
<tr>
<td>37</td>
<td><code>OrderID</code></td>
<td>String</td>
<td>No</td>
<td>Unique ID assigned by Deribit for this order</td>
</tr>
<tr>
<td>530</td>
<td><code>MassCancelRequestType</code></td>
<td>int</td>
<td>Yes</td>
<td>Specifies the type of cancellation request. <p>Possible values:<ul><li><code>7</code> = all orders,</li> <li><code>5</code> = orders by security type,</li> <li><code>1</code> = orders by symbol, <li><code>10</code> = orders by DeribitLabel</li><li><code>11</code> = quote cancel -- response to <code>Quote Cancel</code> (<code>Z</code>) request used in mass quoting</li></ul></p></td>
</tr>
<tr>
<td>531</td>
<td><code>MassCancelResponse</code></td>
<td>int</td>
<td>No</td>
<td>If successful, echoes the <code>MassCancelRequestType</code>(<code>530</code>)</td>
</tr>
<tr>
<td>298</td>
<td><code>QuoteCancelType</code></td>
<td>int</td>
<td>No</td>
<td>May be present in case of reply to <code>Quote Cancel</code> (<code>Z</code>) request. 1 = Cancel for <code>Symbol</code>(<code>55</code>), 2 = Cancel for <code>SecurityType</code> (<code>167</code>), 4 = Cancel All Quotes, 5 = for <code>Currency</code> (<code>5</code>), 6 = for <code>QuoteSetID</code> (<code>302</code>), 7 = for Delta range</td>
</tr>
<tr>
<td>58</td>
<td><code>Text</code></td>
<td>String</td>
<td>No</td>
<td>&#39;success&#39;, if deletion was successful</td>
</tr>
<tr>
<td>532</td>
<td><code>MassCancelRejectReason</code></td>
<td>String</td>
<td>No</td>
<td>Reason why deletion failed.<p>Possible values:<ul><li><code>1</code> = Unknown security,</li> <li><code>5</code> = Unknown security type</li></ul></td>
</tr>
<tr>
<td>533</td>
<td><code>TotalAffectedOrders</code></td>
<td>int</td>
<td>No</td>
<td>Total number of orders affected by <a href="#order-mass-cancel-request-q"><code>Order Mass Cancel Request</code>(<code>q</code>)</a></td>
</tr>
<tr>
<td></td>
<td>Group <code>AffectedOrdGrp</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>534</td>
<td><code>NoAffectedOrders</code></td>
<td>int</td>
<td>No</td>
<td>Optional field used to indicate the number of order identifiers for orders affected by the <a href="#order-mass-cancel-request-q"><code>Order Mass Cancel Request</code>(<code>q</code>)</a></td>
</tr>
<tr>
<td>=&gt;41</td>
<td><code>OrigClOrdID</code></td>
<td>String</td>
<td>No</td>
<td>Required if <code>NoAffectedOrders</code>(<code>534</code>) &gt; 0. Indicates the client order id of an order affected by the <a href="#order-mass-cancel-request-q"><code>Order Mass Cancel Request</code>(<code>q</code>)</a></td>
</tr>
</tbody></table>
<h2 id='order-mass-status-request-af'><code>Order Mass Status Request</code>(<code>AF</code>)</h2>
<p><code>Order Mass Status Request</code>(<code>AF</code>) message requests the status of currently open
orders. The exchange should respond with a series of <code>Execution Reports</code>(<code>8</code>)
messages detailing orders.</p>
<h3 id='arguments-17'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>584</td>
<td><code>MassStatusReqID</code></td>
<td>String</td>
<td>Yes</td>
<td>Client-assigned unique ID of this request</td>
</tr>
<tr>
<td>585</td>
<td><code>MassStatusReqType</code></td>
<td>String</td>
<td>Yes</td>
<td>Specifies the scope of the mass status request. (see below)</td>
</tr>
<tr>
<td>9014</td>
<td><code>MassStatusReqIDType</code></td>
<td>int</td>
<td>No</td>
<td>For MassStatusReqType=7, it defines which ID or label represents the MassStatusReqID: 0 = OrigClOrdID, 1 = ClOrdId, 2 = DeribitLabel. Default is 0</td>
</tr>
<tr>
<td>11</td>
<td><code>Currency</code></td>
<td>String</td>
<td>Required if <code>MassStatusReqIDType</code> is 1 or 2 and <code>Symbol</code> is missing</td>
<td>To search the order by DeribitLabel or ClOrdID</td>
</tr>
<tr>
<td>55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>Required if <code>MassStatusReqIDType</code> is 1 or 2 and <code>Currency</code> is missing</td>
<td>If Currency is not specified, to search the order by DeribitLabel or ClOrdID</td>
</tr>
<tr>
<td>&lt;!--</td>
<td>9039</td>
<td><code>OrderHistoryIncludeUnfilled</code></td>
<td>Boolean</td>
<td>No</td>
</tr>
<tr>
<td>9040</td>
<td><code>OrderHistoryOffset</code></td>
<td>Integer</td>
<td>No</td>
<td>The offset for pagination, default - 0.  This tag may be used only for <code>MassStatusReqType</code>=10.</td>
</tr>
<tr>
<td>911</td>
<td><code>TotNumReports</code></td>
<td>int</td>
<td>No</td>
<td>For historical request (<code>MassStatusReqType</code>=10), it defines the number of requested items, default - 100. Maximum value is 1000.</td>
</tr>
</tbody></table>

<p>This message can be used in two ways: to request status of all your open orders,
or to request the status of a single order(This also applies to closed orders).</p>

<!-- This message can be used in following ways:

* to request status of all your open orders,
* to request the status of a single order(This also applies to closed orders).
* to request historical orders which were partially or fully filled (unfilled cancelled orders are present in history but only for a limited time period) -->

<p>To request the status of all orders, choose a random <code>MassStatusRequestId</code>, and
set <code>MassStatusReqType=7</code>. The server will respond with a series of <code>Execution Reports</code>(<code>8</code>) messages, where the first message contains <code>MassStatusReqType=7</code></p>

<!-- *To request the status of all orders*: choose a random `MassStatusRequestId`, and
set `MassStatusReqType=7`. The server will respond with a series of `Execution Reports`(`8`) messages, where the first message contains `MassStatusReqType=7`
and `TotNumReports` will be set to the number of reports to be expected as a
follow-up. -->

<p><em>To request the status of a specific order</em>: set <code>MassStatusReqType=1</code>, and set
<code>MassStatusReqId</code> to the order ID. Please keep in mind this message also applies
to closed orders.</p>

<p>It is allowed to request status for an order (or several orders) by <code>ClOrdID</code> or <code>DeribitLabel</code> for example when connection is broken and server-side generated ID-s are not received. In that case set <code>MassStatusReqType=7</code> and set <code>MassStatusReqIDType=1</code> for the search by <code>ClOrdID</code> or use <code>MassStatusReqIDType=2</code> for the search by <code>DeribitLabel</code>. In both cases <code>Currency</code> or <code>Symbol</code> are required for such a search.</p>

<!-- *To request historical orders*: set `MassStatusReqType=10` and specify `Currency` or `Symbol` for the request. To include fully unfilled orders in the response, set custom tag `OrderHistoryIncludeUnfilled` (`9037`) to `Y`. The default maximum number of reports is 100, use `TotNumReports` in the request for the different number if required (maximum 1000 reports is allowed, and `OrderHistoryOffset` (`9039`) custom tag can be used for the pagination). The server will respond with a series of `Execution Reports`(`8`) messages, where the first message contains `MassStatusReqType=7`
and `TotNumReports` will be set to the number of reports to be expected as a
follow-up. Open unfilled orders are not included in the historical data.  -->
<h3 id='response-215'>Response</h3>
<p>When the client requests the status of current orders, the exchange should reply
with a series of special <code>Execution Reports</code>(<code>8</code>), one for every order
requested.</p>

<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>37</td>
<td><code>OrderId</code></td>
<td>String</td>
<td>No</td>
<td>Unique identifier for Order as assigned by the Deribit</td>
</tr>
<tr>
<td>11</td>
<td><code>ClOrdID</code></td>
<td>String</td>
<td>No</td>
<td>Deribit replaces this field with the own value assigned by the server (it is not the client id from <a href="#new-order-single-d"><code>New Order Single</code>(<code>D</code>)</a>)</td>
</tr>
<tr>
<td>41</td>
<td><code>OrigClOrdId</code></td>
<td>String</td>
<td>No</td>
<td>The original value assigned by the client in the <a href="#new-order-single-d"><code>New Order Single</code>(<code>D</code>)</a> message</td>
</tr>
<tr>
<td>39</td>
<td><code>OrdStatus</code></td>
<td>char</td>
<td>Yes</td>
<td>For trade – order status.<p>Possible values:</p><ul><li><code>0</code> = New,</li> <li><code>1</code> = Partially filled,</li> <li><code>2</code> = Filled,</li> <li><code>4</code> = Cancelled</li><li><code>8</code> = Rejected</ul></td>
</tr>
<tr>
<td>54</td>
<td><code>Side</code></td>
<td>char</td>
<td>Yes</td>
<td>Side of order.<p>Possible values:</p> <ul><li><code>1</code> = Buy,</li> <li><code>2</code> = Sell</li></ul></td>
</tr>
<tr>
<td>60</td>
<td><code>TransactTime</code></td>
<td>UTCTimestamp</td>
<td>Yes</td>
<td>Timestamp when the transaction represented by this Execution Report occurred. Fix timestamp</td>
</tr>
<tr>
<td>12</td>
<td><code>Commission</code></td>
<td>float</td>
<td>No</td>
<td>Deprecated. Always <code>0</code></td>
</tr>
<tr>
<td>151</td>
<td><code>LeavesQty</code></td>
<td>Qty</td>
<td>Yes</td>
<td>Order quantity open for further execution (<code>LeavesQty</code> = <code>OrderQty</code> - <code>CumQty</code>) in Contract units corresponding to the ContractMultiplier in SecurityList</td>
</tr>
<tr>
<td>14</td>
<td><code>CumQty</code></td>
<td>Qty</td>
<td>Yes</td>
<td>Total executed quantity or 0.0 in Contract units corresponding to the ContractMultiplier in SecurityList</td>
</tr>
<tr>
<td>38</td>
<td><code>OrderQty</code></td>
<td>Qty</td>
<td>Yes</td>
<td>Order quantity in Contract units corresponding to the ContractMultiplier in SecurityList</td>
</tr>
<tr>
<td>40</td>
<td><code>OrdType</code></td>
<td>char</td>
<td>Yes</td>
<td>Order type.<p> Possible values:<ul><li><code>1</code> = Market,</li><li><code>2</code> = Limit (by default),</li><li><code>4</code> = Stop Limit,</li><li><code>S</code> = Stop Market</li></ul></p></td>
</tr>
<tr>
<td>44</td>
<td><code>Price</code></td>
<td>Price</td>
<td>Yes</td>
<td>Price</td>
</tr>
<tr>
<td>150</td>
<td><code>ExecType</code></td>
<td>char</td>
<td>No</td>
<td>Describes the specific Execution Report.<p> Possible values: <ul><li><code>I</code> = equal to  (Order Status), <li><code>7</code> = (Stopped) for triggered stop orders,</li> <li><code>8</code> = Rejected,</li> <li> <code>3</code> = (Done for day) for GTD orders, <li> <code>C</code> = (Expired) for the orders expired at delivery</td>
</tr>
<tr>
<td>18</td>
<td><code>ExecInst</code></td>
<td>MultipleCharValue</td>
<td>No</td>
<td>CCurrently is used to mark POST ONLY orders and REDUCE ONLY orders.<p>POST ONLY possible values:</p><ul><li><code>6</code> = &quot;Participate don&#39;t initiate&quot;, <li><code>A</code> = &quot;No cross&quot; (only together with 6, &quot;<code>6A</code>&quot; --  REJECT POST ONLY when the order is put to the order book unmodified or the request is rejected and order is cancelled),</li></ul> REDUCE ONLY possible values: <ul><li><code>E</code> = &quot; Do not increase - DNI&quot;</li></ul></td>
</tr>
<tr>
<td>103</td>
<td><code>OrdRejReason</code></td>
<td>int</td>
<td>Yes</td>
<td>Possible reasons: <ul><li><code>0</code> = no reject (the request has been accepted)<li><code>1</code> = Unknown symbol<li><code>2</code> = Exchange closed<li><code>3</code> = Order exceeds limit<li><code>4</code> = Too late to enter<li><code>5</code> = Unknown order<li><code>6</code> = Duplicate Order (e.g. dupe <code>ClOrdID</code>(<code>11</code>))<li><code>7</code> = Duplicate of a verbally communicated order<li><code>8</code> = Stale order<li><code>9</code> = Trade along required<li><code>10</code> = Invalid Investor ID<li><code>11</code> = Unsupported order characteristic<li><code>12</code> = Surveillance Option<li><code>13</code> = Incorrect quantity<li><code>14</code> = Incorrect allocated quantity<li><code>15</code> = Unknown account(s)<li><code>16</code> = Price exceeds current price band<li><code>18</code> = Invalid price increment<li><code>99</code> = Other </ul><p><strong>Note: Values 3, 4, and 5 will be used when rejecting an order due to pre-allocation information errors.</strong></td>
</tr>
<tr>
<td>58</td>
<td><code>Text</code></td>
<td>String</td>
<td>No</td>
<td>Free format text string, usually exceptions</td>
</tr>
<tr>
<td>207</td>
<td><code>SecurityExchange</code></td>
<td>String</td>
<td>No</td>
<td>&quot;Deribit&quot;</td>
</tr>
<tr>
<td>55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>Yes</td>
<td>Instrument symbol</td>
</tr>
<tr>
<td>854</td>
<td><code>QtyType</code></td>
<td>String</td>
<td>No</td>
<td>Type of quantity specified in a quantity. Currently only 1 - <code>Contracts</code></td>
</tr>
<tr>
<td>231</td>
<td><code>ContractMultiplier</code></td>
<td>float</td>
<td>No</td>
<td>Specifies a multiply factor to convert from contracts to total units</td>
</tr>
<tr>
<td>6</td>
<td><code>AvgPx</code></td>
<td>float</td>
<td>No</td>
<td>Average execution price or 0.0 if not executed yet or rejected</td>
</tr>
<tr>
<td>1138</td>
<td><code>DisplayQty</code></td>
<td>Qty</td>
<td>No</td>
<td>The (max) quantity to be displayed in the orderbook. Contract units corresponding to the ContractMultiplier in SecurityList</td>
</tr>
<tr>
<td>9008</td>
<td><code>DeribitMMProtection</code></td>
<td>Boolean</td>
<td>No</td>
<td>Order Market Maker Protection (MMP) flag. <strong>Important: manual admin action is necessary to activate Market Maker Protection MMP for an account</strong></td>
</tr>
<tr>
<td>100012</td>
<td><code>DeribitAdvOrderType</code></td>
<td>char</td>
<td>No</td>
<td>If it is present then it denotes advanced order for options. <p>Possible values:<ul><li><code>0</code> = Implied Volatility Order (price defines fixed implied volatility in %),</li><li> <code>1</code> = USD Order (price defines fixed USD price of the option, advanced USD orders are not supported for linear options)</li></ul></p></td>
</tr>
<tr>
<td>1188</td>
<td><code>Volatility</code></td>
<td>float</td>
<td>No</td>
<td>Volatility for Implied Volatility Orders (options orders with fixed volatility)</td>
</tr>
<tr>
<td>839</td>
<td><code>PeggedPrice</code></td>
<td>Price</td>
<td>No</td>
<td>Value of fixed USD price for USD Orders (options orders with fixed USD price)</td>
</tr>
<tr>
<td>31</td>
<td><code>LastPx</code></td>
<td>Price</td>
<td>No</td>
<td>Price of this last fill</td>
</tr>
<tr>
<td>32</td>
<td><code>LastQty</code></td>
<td>Qty</td>
<td>No</td>
<td>Quantity bought/sold on this last fill.</td>
</tr>
<tr>
<td>100010</td>
<td><code>DeribitLabel</code></td>
<td>String</td>
<td>No</td>
<td>A custom label for your order, max 64 grapheme clusters. Can be used by <a href="#order-cancel-request-f"><code>Order Cancel Request</code>(<code>F</code>)</a> to amend the order later on. <b>This tag operates on grapheme clusters. A grapheme cluster is a user-perceived character, which can be represented by several unicode codepoints. Please refer to <a href="https://unicode.org/reports/tr29/">Unicode specification</a> for more details about the grapheme clusters</b></td>
</tr>
<tr>
<td>9019</td>
<td><code>MMPGroup</code></td>
<td>String</td>
<td>No</td>
<td>A custom tag of MMP Group. This tag is present only for orders from Mass Quote</td>
</tr>
<tr>
<td>302</td>
<td>QuoteSetID</td>
<td>String</td>
<td>No</td>
<td>identifier for the Quote Set. This tag is present only for orders from Mass Quote.</td>
</tr>
<tr>
<td>117</td>
<td>QuoteID</td>
<td>String</td>
<td>No</td>
<td>identifier for the Quote. This tag is present only for orders from Mass Quote.</td>
</tr>
<tr>
<td>299</td>
<td>QuoteEntryID</td>
<td>String</td>
<td>No</td>
<td>identifier for the Quote Entry. This tag is present only for orders from Mass Quote.</td>
</tr>
<tr>
<td></td>
<td>Group <code>FillsGrp</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>1362</td>
<td><code>NoFills</code></td>
<td>NumInGroup</td>
<td>No</td>
<td>Number of fill entries for the order</td>
</tr>
<tr>
<td>=&gt;1363</td>
<td><code>FillExecID</code></td>
<td>String</td>
<td>No</td>
<td>Unique identifier of execution, concatenated via &#39;#&#39; symbol and trade sequence number, e.g., <b>BTC-28SEP18#38</b></td>
</tr>
<tr>
<td>=&gt;1364</td>
<td><code>FillPx</code></td>
<td>Price</td>
<td>No</td>
<td>Price of this partial fill</td>
</tr>
<tr>
<td>=&gt;1365</td>
<td><code>FillQty</code></td>
<td>Qty</td>
<td>No</td>
<td>Quantity bought/sold on this partial fill</td>
</tr>
<tr>
<td>=&gt;1443</td>
<td><code>FillLiquidityInd</code></td>
<td>int</td>
<td>No</td>
<td>Indicator to identify whether this fill was a result of a liquidity provider providing or liquidity taker taking the liquidity.<p>Possible values:<ul><li><code>1</code> = Added Liquidity,</li> <li><code>2</code> = Removed Liquidity</li></ul></td>
</tr>
</tbody></table>

<p>When responding to a <code>MassStatusReqType</code>=<code>7</code> request, the server precedes the
<code>Execution Reports</code>(<code>8</code>) messages with a special <code>Execution Reports</code>(<code>8</code>)
message:</p>

<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>584</td>
<td><code>MassStatusReqID</code></td>
<td>String</td>
<td>Yes</td>
<td>The <code>MassStatusReqID</code> from the request. (Only for the first message response to a <code>MassStatusReqType</code>=<code>7</code> request.)</td>
</tr>
<tr>
<td>585</td>
<td><code>MassStatusReqType</code></td>
<td>int</td>
<td>Yes</td>
<td>The <code>MassStatusReqType</code> from the request. (Only for the first message response to a <code>MassStatusReqType</code>=<code>7</code> request.)</td>
</tr>
<tr>
<td>911</td>
<td><code>TotNumReports</code></td>
<td>int</td>
<td>Yes</td>
<td>The total number of reports following this initial report</td>
</tr>
</tbody></table>
<h2 id='request-for-positions-an'><code>Request For Positions</code>(<code>AN</code>)</h2>
<p><code>Request For Positions</code>(<code>AN</code>) is used by the owner of a position to request a
Position Report.</p>
<h3 id='arguments-18'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>710</td>
<td><code>PosReqID</code></td>
<td>String</td>
<td>Yes</td>
<td>Unique identifier for the <code>Request for Positions</code>(<code>AN</code>) as assigned by the submitter</td>
</tr>
<tr>
<td>724</td>
<td><code>PosReqType</code></td>
<td>int</td>
<td>Yes</td>
<td><code>0</code> = Positions (currently)</td>
</tr>
<tr>
<td>263</td>
<td><code>SubscriptionRequestType</code></td>
<td>int</td>
<td>No</td>
<td>Subscription Request Type to get notifications about new or terminated instruments. Valid values: <ul><li> <code>0</code> = Snapshot,</li> <li><code>1</code> = Snapshot + Updates (Subscribe),</li> <li><code>2</code> = Disable previous Snapshot + Update Request (Unsubscribe)</li></ul></td>
</tr>
<tr>
<td>15</td>
<td><code>Currency</code></td>
<td>String</td>
<td>No</td>
<td>To request for certain currency only. If it is missing, all currencies are reported</td>
</tr>
</tbody></table>
<h3 id='response-216'>Response</h3>
<p>The server will respond with a <a href="#position-report-ap"><code>Position Report</code>(<code>AP</code>)</a>
message.</p>
<h2 id='position-report-ap'><code>Position Report</code>(<code>AP</code>)</h2>
<p>The <code>Position Report</code>(<code>AP</code>) message is returned by the holder of a position in
response to a <a href="#request-for-positions-an"><code>Request For Positions</code>(<code>AN</code>)</a> message.</p>
<h3 id='arguments-19'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>721</td>
<td><code>PosMaintRptID</code></td>
<td>String</td>
<td>Yes</td>
<td>Unique identifier for this position report</td>
</tr>
<tr>
<td>710</td>
<td><code>PosReqID</code></td>
<td>String</td>
<td>No</td>
<td>Unique identifier for the Request for Positions associated with this report</td>
</tr>
<tr>
<td>724</td>
<td><code>PosReqType</code></td>
<td>int</td>
<td>No</td>
<td>Used to specify the type of position request being made. <code>0</code> = Positions (currently)</td>
</tr>
<tr>
<td>728</td>
<td><code>PosReqResult</code></td>
<td>int</td>
<td>No</td>
<td>Result of a Request for Position.<p>Possible values: <ul><li> <code>0</code> = success,</li><li> <code>1</code> = unsupported request for positions,</li><li><code>99</code> = other</li></ul></p></td>
</tr>
<tr>
<td></td>
<td>Group <code>PositionQty</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>702</td>
<td><code>NoPositions</code></td>
<td>NumInGroup</td>
<td>No</td>
<td>Number of position entries following</td>
</tr>
<tr>
<td>=&gt;703</td>
<td><code>PosType</code></td>
<td>String</td>
<td>No</td>
<td>Type of quantity. <p>Possible values:<ul> <li><code>TQ</code> = Transaction Quantity</td>
</tr>
<tr>
<td>=&gt;704</td>
<td><code>LongQty</code></td>
<td>Qty</td>
<td>No</td>
<td>Qty for long position (<code>0</code> for short position) in Contract units corresponding to the ContractMultiplier in SecurityList</td>
</tr>
<tr>
<td>=&gt;705</td>
<td><code>ShortQty</code></td>
<td>Qty</td>
<td>No</td>
<td>Qty for short position (<code>0</code> for long position) in Contract units corresponding to the ContractMultiplier in SecurityList</td>
</tr>
<tr>
<td>=&gt;55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>No</td>
<td>Instrument symbol</td>
</tr>
<tr>
<td>=&gt;854</td>
<td><code>QtyType</code></td>
<td>int</td>
<td>No</td>
<td>Type of quantity specified in a quantity. Currently only 1 - <code>Contracts</code></td>
</tr>
<tr>
<td>=&gt;231</td>
<td><code>ContractMultiplier</code></td>
<td>float</td>
<td>No</td>
<td>Specifies a multiply factor to convert from contracts to total units</td>
</tr>
<tr>
<td>=&gt;883</td>
<td><code>UnderlyingEndPrice</code></td>
<td>Price</td>
<td>No</td>
<td>Mark price (reference price)</td>
</tr>
<tr>
<td>=&gt;54</td>
<td><code>Side</code></td>
<td>char</td>
<td>No</td>
<td>Side of order.<p>Possible values:</p> <ul><li><code>1</code> = Buy,</li> <li><code>2</code> = Sell</li></ul></td>
</tr>
<tr>
<td>=&gt;730</td>
<td><code>SettlPrice</code></td>
<td>Price</td>
<td>No</td>
<td>Average price</td>
</tr>
<tr>
<td>=&gt;96</td>
<td><code>RawData</code></td>
<td>String</td>
<td>No</td>
<td>Additional info, semi-colon separated: maintenance margin;initial margin;floating P/L</td>
</tr>
<tr>
<td>=&gt;100088</td>
<td><code>DeribitLiquidationPrice</code></td>
<td>Price</td>
<td>No</td>
<td>Estimated liquidation price</td>
</tr>
<tr>
<td>=&gt;100089</td>
<td><code>DeribitSizeInCurrency</code></td>
<td>Qty</td>
<td>No</td>
<td>Size in the underlying currency, for example BTC or ETH</td>
</tr>
</tbody></table>
<h2 id='user-request-be'><code>User Request</code>(<code>BE</code>)</h2>
<p>This message is used to request a report on a user&#39;s status and user account
info.</p>
<h3 id='arguments-20'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>923</td>
<td><code>UserRequestID</code></td>
<td>String</td>
<td>Yes</td>
<td>The request ID</td>
</tr>
<tr>
<td>924</td>
<td><code>UserRequestType</code></td>
<td>int</td>
<td>Yes</td>
<td>Should be equal to <code>4</code> (Request individual user status), only <code>UserRequestType</code>=<code>4</code> supported for now</td>
</tr>
<tr>
<td>553</td>
<td><code>Username</code></td>
<td>String</td>
<td>Yes</td>
<td>API authenticated &#39;Client ID&#39;, user can request only own info, should be the same as for <code>LOGON</code>(<code>A</code>)</td>
</tr>
<tr>
<td>15</td>
<td><code>Currency</code></td>
<td>String</td>
<td>No</td>
<td>Currency of the report. See <a href="#security-list-request-x"><code>Security List Request</code>(<code>x</code>)</a>. Default is BTC. <p>If <code>CROSS</code> is given as currency and user has cross collateral enabled, only the following fields are returned:</p><p><ul><li>100001 <code>DeribitUserEquity</code></li><li>100003 <code>DeribitUserInitialMargin</code></li><li>100004 <code>DeribitUserMaintenanceMargin</code></li><li>100013 <code>DeribitMarginBalance</code></li></ul></p></td>
</tr>
</tbody></table>
<h3 id='response-217'>Response</h3>
<p>The server will respond with a <code>User Response</code>(<code>BF</code>) message.</p>
<h2 id='user-response-bf'><code>User Response</code>(<code>BF</code>)</h2>
<p>This message is used to respond to a <a href="#user-request-be"><code>USER REQUEST</code>(<code>BE</code>)</a>
message, it reports the status of the user and user&#39;s account info.</p>
<h3 id='response-218'>Response</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>923</td>
<td><code>UserRequestID</code></td>
<td>String</td>
<td>Yes</td>
<td>The request ID</td>
</tr>
<tr>
<td>553</td>
<td><code>Username</code></td>
<td>String</td>
<td>Yes</td>
<td>User&#39;s API &#39;Client ID&#39;</td>
</tr>
<tr>
<td>926</td>
<td><code>UserStatus</code></td>
<td>int</td>
<td>No</td>
<td><code>1</code> = logged in, current implementation accepts USER REQUEST-s only from logged in users</td>
</tr>
<tr>
<td>15</td>
<td><code>Currency</code></td>
<td>String</td>
<td>No</td>
<td>Currency of the report. See <a href="#security-list-request-x"><code>Security List Request</code>(<code>x</code>)</a>. Default is BTC. <p>If <code>CROSS</code> is given as currency and user has cross collateral enabled, only the following fields are returned:</p><p><ul><li>100001 <code>DeribitUserEquity</code></li><li>100003 <code>DeribitUserInitialMargin</code></li><li>100004 <code>DeribitUserMaintenanceMargin</code></li><li>100013 <code>DeribitMarginBalance</code></li></ul></p></td>
</tr>
<tr>
<td>100001</td>
<td><code>DeribitUserEquity</code></td>
<td>float</td>
<td>No</td>
<td>Equity of the user</td>
</tr>
<tr>
<td>100002</td>
<td><code>DeribitUserBalance</code></td>
<td>float</td>
<td>No</td>
<td>Balance of the user</td>
</tr>
<tr>
<td>100003</td>
<td><code>DeribitUserInitialMargin</code></td>
<td>float</td>
<td>No</td>
<td>Initial margin of the user</td>
</tr>
<tr>
<td>100004</td>
<td><code>DeribitUserMaintenanceMargin</code></td>
<td>float</td>
<td>No</td>
<td>Maintenance margin of the user</td>
</tr>
<tr>
<td>100005</td>
<td><code>DeribitUnrealizedPl</code></td>
<td>float</td>
<td>No</td>
<td>Unrealized P/L of the user</td>
</tr>
<tr>
<td>100006</td>
<td><code>DeribitRealizedPl</code></td>
<td>float</td>
<td>No</td>
<td>Realized P/L of the user</td>
</tr>
<tr>
<td>100011</td>
<td><code>DeribitTotalPl</code></td>
<td>float</td>
<td>No</td>
<td>Total P/L of the user</td>
</tr>
<tr>
<td>100013</td>
<td><code>DeribitMarginBalance</code></td>
<td>float</td>
<td>No</td>
<td>Margin Balance</td>
</tr>
</tbody></table>
<h2 id='order-cancel-replace-request-g'><code>Order Cancel/Replace Request</code>(<code>G</code>)</h2>
<p>To change/edit the parameters of an existing order</p>

<p>From Release 1.3.10, it is possible to amend order by <code>ClOrdID</code> or
<code>DeribitLabel</code>, and <code>OrigClOrdId</code> is not required anymore, however amending
orders by <code>OrigClOrdId</code> is noticeably faster.</p>
<h4 id='important-2'>IMPORTANT:</h4>
<ul>
<li>to change the order using <code>ClOrdID</code> or <code>DeribitLabel</code>, this must be the only existing order with such <code>ClOrdID</code> or <code>DeribitLabel</code>.  Multiple orders with the same <code>ClOrdID</code> or <code>DeribitLabel</code> won&#39;t be amended that way.</li>
<li>when possible it is recommended to use faster <code>OrigClOrdId</code></li>
</ul>
<h3 id='arguments-21'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>11</td>
<td><code>ClOrdID</code></td>
<td>String</td>
<td>Required if <code>DeribitLabel</code>, <code>OrigClOrdId</code> are absent</td>
<td>Original order identifier assigned by the user, max 64 grapheme clusters. <b>This tag operates on grapheme clusters. A grapheme cluster is a user-perceived character, which can be represented by several unicode codepoints. Please refer to <a href="https://unicode.org/reports/tr29/">Unicode specification</a> for more details about the grapheme clusters</b></td>
</tr>
<tr>
<td>41</td>
<td><code>OrigClOrdId</code></td>
<td>String</td>
<td>Required if <code>DeribitLabel</code>, <code>ClOrdID</code> are absent</td>
<td>Order identifier assigned by Deribit over the user one</td>
</tr>
<tr>
<td>100010</td>
<td><code>DeribitLabel</code></td>
<td>String</td>
<td>Required if <code>OrigClOrdId</code>, <code>ClOrdID</code> are absent</td>
<td>A custom label for your order, max 64 grapheme clusters. Can be used by <a href="#order-cancel-request-f"><code>Order Cancel Request</code>(<code>F</code>)</a> to amend the order later on</td>
</tr>
<tr>
<td>55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>Yes</td>
<td>Instrument symbol, e.g., <b>BTC-1JAN16</b></td>
</tr>
<tr>
<td>62</td>
<td><code>ValidUntilTime</code></td>
<td>UTCTimestamp</td>
<td>No</td>
<td>Indicates expiration time of indication message, in UTC</td>
</tr>
<tr>
<td>15</td>
<td><code>Currency</code></td>
<td>String</td>
<td>No</td>
<td>To speed up the search of the order by <code>DeribitLabel</code> or <code>ClOrdID</code></td>
</tr>
<tr>
<td>54</td>
<td><code>Side</code></td>
<td>char</td>
<td>Yes</td>
<td>Should match the original order&#39;s side.<p>Valid values:</p> <ul><li><code>1</code> = Buy,</li> <li><code>2</code> = Sell</li></ul></td>
</tr>
<tr>
<td>38</td>
<td><code>OrderQty</code></td>
<td>Qty</td>
<td>Yes</td>
<td>Order quantity. Depends on <code>QtyType</code>. When <code>QtyType</code> is set to <code>Units</code>, the <code>OrderQty</code> is specified in USD for perpetual and inverse futures, in the underlying base currency coin for linear futures, or in the amount of cryptocurrency contracts for options. The system will automatically convert <code>Units</code> to <code>Contracts</code> when the order is placed <strong>Please, note that Quantity is by default defined in Contract units corresponding to the ContractMultiplier in SecurityList</strong></td>
</tr>
<tr>
<td>40</td>
<td><code>OrdType</code></td>
<td>char</td>
<td>No</td>
<td>Currently <code>2</code> - &#39;limit&#39;</td>
</tr>
<tr>
<td>44</td>
<td><code>Price</code></td>
<td>Price</td>
<td>No</td>
<td>Order price (for advanced options orders it could be volatility or USD value if applicable)</td>
</tr>
<tr>
<td>18</td>
<td><code>ExecInst</code></td>
<td>MultipleCharValue</td>
<td>No</td>
<td>Currently is used to mark POST ONLY orders and REDUCE ONLY orders.<p>POST ONLY valid values:</p><ul><li><code>6</code> = &quot;Participate don&#39;t initiate&quot;, <li><code>A</code> = &quot;No cross&quot; (only together with 6, &quot;<code>6A</code>&quot; --  REJECT POST ONLY when the order is put to order the book unmodified or the request is rejected and order is cancelled),</li></ul> REDUCE ONLY valid values: <ul><li><code>E</code> = &quot; Do not increase - DNI&quot;</li></ul></td>
</tr>
<tr>
<td>854</td>
<td><code>QtyType</code></td>
<td>Int</td>
<td>No</td>
<td>Type of quantity. Valid values:<p><ul><li><code>0</code> = <code>Units</code>,</li><li><code>1</code> = <code>Contracts</code></li></ul></p> Default is <code>Contracts</code>. <p>When <code>QtyType</code> is <code>Units</code>, then for perpetual and inverse futures the <code>OrderQty</code> is in USD units, and for linear futures it is the underlying base currency coin, and for options it is the amount of corresponding cryptocurrency contracts, e.g., BTC or ETH. The <code>Units</code> will be recalculated into the system&#39;s <code>Contracts</code> on server automatically when the order is placed.</p></td>
</tr>
<tr>
<td>9008</td>
<td><code>DeribitMMProtection</code></td>
<td>Boolean</td>
<td>No</td>
<td>Order Market Maker Protection (MMP) flag, if it is absent then the current MMP flag of the order is not changed. <code>N</code> removes the flag if it is set. <strong>Important: manual admin action is necessary to activate Market Maker Protection (MMP) for an account</strong></td>
</tr>
</tbody></table>
<h3 id='response-219'>Response</h3>
<p>See <code>New Order Single</code>(<code>D</code>) response</p>
<h2 id='execution-reports-8-about-order-changes'><code>Execution Reports</code>(<code>8</code>) about order changes</h2><h3 id='notification'>Notification</h3>
<p>The report <code>Execution Reports</code>(<code>8</code>) is similar to New Order Single or
Cancel/Replace responses</p>

<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>527</td>
<td><code>SecondaryExecID</code></td>
<td>String</td>
<td>No</td>
<td>ID of the order change, may be absent in case of status reports</td>
</tr>
<tr>
<td>37</td>
<td><code>OrderId</code></td>
<td>String</td>
<td>No</td>
<td>Unique identifier for Order as assigned by the Deribit</td>
</tr>
<tr>
<td>11</td>
<td><code>ClOrdID</code></td>
<td>String</td>
<td>No</td>
<td>Deribit replaces this field with the own value assigned by the server (it is not the client id from <a href="#new-order-single-d"><code>New Order Single</code>(<code>D</code>)</a>)</td>
</tr>
<tr>
<td>41</td>
<td><code>OrigClOrdId</code></td>
<td>String</td>
<td>No</td>
<td>The original value assigned by the client in the <a href="#new-order-single-d"><code>New Order Single</code>(<code>D</code>)</a> message</td>
</tr>
<tr>
<td>39</td>
<td><code>OrdStatus</code></td>
<td>char</td>
<td>Yes</td>
<td>For trade – order status.<p>Possible values:</p><ul><li><code>0</code> = New,</li> <li><code>1</code> = Partially filled,</li> <li><code>2</code> = Filled,</li> <li><code>4</code> = Cancelled</li><li><code>8</code> = Rejected</ul></td>
</tr>
<tr>
<td>54</td>
<td><code>Side</code></td>
<td>char</td>
<td>Yes</td>
<td>Side of order.<p>Possible values:</p> <ul><li><code>1</code> = Buy,</li> <li><code>2</code> = Sell</li></ul></td>
</tr>
<tr>
<td>60</td>
<td><code>TransactTime</code></td>
<td>UTCTimestamp</td>
<td>Yes</td>
<td>Time the transaction represented by this Execution Report occurred. Fix timestamp</td>
</tr>
<tr>
<td>12</td>
<td><code>Commission</code></td>
<td>float</td>
<td>No</td>
<td>Deprecated. Always <code>0</code></td>
</tr>
<tr>
<td>151</td>
<td><code>LeavesQty</code></td>
<td>Qty</td>
<td>Yes</td>
<td>Order quantity open for further execution (<code>LeavesQty</code> = <code>OrderQty</code> - <code>CumQty</code>) in Contract units corresponding to the ContractMultiplier in SecurityList</td>
</tr>
<tr>
<td>14</td>
<td><code>CumQty</code></td>
<td>Qty</td>
<td>Yes</td>
<td>Total executed quantity or 0.0 in Contract units corresponding to the ContractMultiplier in SecurityList</td>
</tr>
<tr>
<td>38</td>
<td><code>OrderQty</code></td>
<td>Qty</td>
<td>Yes</td>
<td>Order quantity in Contract units corresponding to the ContractMultiplier in SecurityList</td>
</tr>
<tr>
<td>5127</td>
<td><code>ConditionTriggerMethod</code></td>
<td>int</td>
<td>No</td>
<td>Trigger for a stop order.<p>Possible values: <ul><li><code>1</code> = Mark Price,</li> <li><code>2</code> = Last Price,</li> <li><code>3</code> = corresponding Index Price</li></ul></p></td>
</tr>
<tr>
<td>40</td>
<td><code>OrdType</code></td>
<td>char</td>
<td>Yes</td>
<td>Order type.<p> Possible values:<ul><li><code>1</code> = Market,</li><li><code>2</code> = Limit,</li><li><code>4</code> = Stop Limit,</li><li><code>S</code> = Stop Market (default: limit)</li></ul></p></td>
</tr>
<tr>
<td>44</td>
<td><code>Price</code></td>
<td>Price</td>
<td>No</td>
<td>Price, maybe be absent for Market and Stop Market orders</td>
</tr>
<tr>
<td>150</td>
<td><code>ExecType</code></td>
<td>char</td>
<td>No</td>
<td>Describes the specific Execution Report.<p> Possible values: <ul><li><code>I</code> = equal to  (Order Status), <li><code>7</code> = (Stopped) for triggered stop orders, <li><code>8</code> = Rejected,</li> <li> <code>3</code> = (Done for day) for GTD orders, <li> <code>C</code> = (Expired) for the orders expired at delivery</td>
</tr>
<tr>
<td>18</td>
<td><code>ExecInst</code></td>
<td>MultipleValueString</td>
<td>No</td>
<td>Currently is used to mark POST ONLY orders and REDUCE ONLY orders.<p>POST ONLY possible values:</p><ul><li><code>6</code> = &quot;Participate don&#39;t initiate&quot;, <li><code>A</code> = &quot;No cross&quot; (only together with 6, &quot;<code>6A</code>&quot; --  REJECT POST ONLY when the order is put to the order book unmodified or the request is rejected and order is cancelled),</li></ul> REDUCE ONLY possible values: <ul><li><code>E</code> = &quot; Do not increase - DNI&quot;</li></ul></td>
</tr>
<tr>
<td>99</td>
<td><code>StopPx</code></td>
<td>Price</td>
<td>No</td>
<td>Stop price for stop limit orders</td>
</tr>
<tr>
<td>103</td>
<td><code>OrdRejReason</code></td>
<td>int</td>
<td>Yes</td>
<td>Possible reasons: <ul><li><code>0</code> = no reject (the request has been accepted)<li><code>1</code> = Unknown symbol<li><code>2</code> = Exchange closed<li><code>3</code> = Order exceeds limit<li><code>4</code> = Too late to enter<li><code>5</code> = Unknown order<li><code>6</code> = Duplicate Order (e.g. dupe <code>ClOrdID</code>(<code>11</code>))<li><code>7</code> = Duplicate of a verbally communicated order<li><code>8</code> = Stale order<li><code>9</code> = Trade along required<li><code>10</code> = Invalid Investor ID<li><code>11</code> = Unsupported order characteristic<li><code>12</code> = Surveillance Option<li><code>13</code> = Incorrect quantity<li><code>14</code> = Incorrect allocated quantity<li><code>15</code> = Unknown account(s)<li><code>16</code> = Price exceeds current price band<li><code>18</code> = Invalid price increment<li><code>99</code> = Other</ul> <p><strong>Note: Values 3, 4, and 5 will be used when rejecting an order due to pre-allocation information errors.</strong></td>
</tr>
<tr>
<td>58</td>
<td><code>Text</code></td>
<td>String</td>
<td>No</td>
<td>Free format text string, usually exceptions</td>
</tr>
<tr>
<td>207</td>
<td><code>SecurityExchange</code></td>
<td>String</td>
<td>No</td>
<td>&quot;Deribit&quot;</td>
</tr>
<tr>
<td>55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>Yes</td>
<td>Instrument symbol</td>
</tr>
<tr>
<td>854</td>
<td><code>QtyType</code></td>
<td>int</td>
<td>No</td>
<td>Type of quantity specified in a quantity. Currently only 1 - <code>Contracts</code></td>
</tr>
<tr>
<td>231</td>
<td><code>ContractMultiplier</code></td>
<td>float</td>
<td>No</td>
<td>Specifies a multiply factor to convert from contracts to total units</td>
</tr>
<tr>
<td>6</td>
<td><code>AvgPx</code></td>
<td>float</td>
<td>No</td>
<td>Average execution price or 0.0 if not executed yet or rejected</td>
</tr>
<tr>
<td>1138</td>
<td><code>DisplayQty</code></td>
<td>Qty</td>
<td>No</td>
<td>The (max) quantity to be displayed in the orderbook.</td>
</tr>
<tr>
<td>100012</td>
<td><code>DeribitAdvOrderType</code></td>
<td>int</td>
<td>No</td>
<td>If it is present then it denotes advanced order for options. <p>Possible values:<ul><li><code>0</code> = Implied Volatility Order (price defines fixed implied volatility in %),</li><li> <code>1</code> = USD Order (price defines fixed USD price of the option, advanced USD orders are not supported for linear options)</li></ul></p></td>
</tr>
<tr>
<td>1188</td>
<td><code>Volatility</code></td>
<td>float</td>
<td>No</td>
<td>Volatility for Implied Volatility Orders (options orders with fixed volatility)</td>
</tr>
<tr>
<td>839</td>
<td><code>PeggedPrice</code></td>
<td>Price</td>
<td>No</td>
<td>Value of fixed USD price for USD Orders (options orders with fixed USD price)</td>
</tr>
<tr>
<td>31</td>
<td><code>LastPx</code></td>
<td>Price</td>
<td>No</td>
<td>Price of this last fill</td>
</tr>
<tr>
<td>32</td>
<td><code>LastQty</code></td>
<td>Qty</td>
<td>No</td>
<td>Quantity bought/sold on this last fill</td>
</tr>
<tr>
<td>100010</td>
<td><code>DeribitLabel</code></td>
<td>String</td>
<td>No</td>
<td>A custom label for your order, max 64 grapheme clusters. Can be used by <a href="#order-cancel-request-f"><code>Order Cancel Request</code>(<code>F</code>)</a> to amend the order later on. <b>This tag operates on grapheme clusters. A grapheme cluster is a user-perceived character, which can be represented by several unicode codepoints. Please refer to <a href="https://unicode.org/reports/tr29/">Unicode specification</a> for more details about the grapheme clusters</td>
</tr>
<tr>
<td>9008</td>
<td><code>DeribitMMProtection</code></td>
<td>Boolean</td>
<td>No</td>
<td>Order Market Maker Protection (MMP) flag</td>
</tr>
<tr>
<td>9019</td>
<td><code>MMPGroup</code></td>
<td>String</td>
<td>No</td>
<td>A custom tag of MMP Group. This tag is present only for orders from Mass Quote</td>
</tr>
<tr>
<td>302</td>
<td>QuoteSetID</td>
<td>String</td>
<td>No</td>
<td>identifier for the Quote Set. This tag is present only for orders from Mass Quote.</td>
</tr>
<tr>
<td>117</td>
<td>QuoteID</td>
<td>String</td>
<td>No</td>
<td>identifier for the Quote. This tag is present only for orders from Mass Quote.</td>
</tr>
<tr>
<td>299</td>
<td>QuoteEntryID</td>
<td>String</td>
<td>No</td>
<td>identifier for the Quote Entry. This tag is present only for orders from Mass Quote.</td>
</tr>
<tr>
<td></td>
<td>Group <code>FillsGrp</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>1362</td>
<td><code>NoFills</code></td>
<td>NumInGroup</td>
<td>No</td>
<td>Number of fill entries for the order</td>
</tr>
<tr>
<td>=&gt;1363</td>
<td><code>FillExecID</code></td>
<td>String</td>
<td>No</td>
<td>Unique identifier of execution, concatenated via &#39;#&#39; symbol and trade sequence number, e.g., <b>BTC-28SEP18#38</b></td>
</tr>
<tr>
<td>=&gt;1364</td>
<td><code>FillPx</code></td>
<td>Price</td>
<td>No</td>
<td>Price of this partial fill</td>
</tr>
<tr>
<td>=&gt;1365</td>
<td><code>FillQty</code></td>
<td>Qty</td>
<td>No</td>
<td>Quantity bought/sold on this partial fill</td>
</tr>
<tr>
<td>=&gt;1443</td>
<td><code>FillLiquidityInd</code></td>
<td>int</td>
<td>No</td>
<td>Indicator to identify whether this fill was a result of a liquidity provider providing or liquidity taker taking the liquidity.<p>Possible values:<ul><li><code>1</code> = Added Liquidity,</li> <li><code>2</code> = Removed Liquidity</li></ul></td>
</tr>
</tbody></table>
<h2 id='security-status-request-e'><code>Security Status Request</code>(<code>e</code>)</h2>
<p>This message provides for the ability to request the status of a security.</p>
<h3 id='arguments-22'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>324</td>
<td><code>SecurityStatusReqID</code></td>
<td>String</td>
<td>Yes</td>
<td>ID of the request</td>
</tr>
<tr>
<td>55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>Yes</td>
<td>Instrument symbol. See instrument naming convention for more details</td>
</tr>
<tr>
<td>263</td>
<td><code>SubscriptionRequestType</code></td>
<td>char</td>
<td>Yes</td>
<td><code>0</code> = <code>Snapshot</code>, <code>1</code> = <code>Snapshot + Updates</code> (<code>Subscribe</code>), <code>2</code> = <code>Unsubscribe</code> <p>(Please note that our system does not send notifications when currencies are <b>locked</b>. Users are advised to subscribe to the <a href="https://docs.deribit.com/#platform_state">platform_state</a> channel to monitor the state of currencies actively.)</p></td>
</tr>
</tbody></table>
<h3 id='response-220'>Response</h3>
<p>The server will respond with a <a href="#security-status-f"><code>Security Status</code> (<code>f</code>)</a>
message.</p>
<h2 id='security-status-f'><code>Security Status</code> (<code>f</code>)</h2>
<p>The <code>Security Status</code> (<code>f</code>) message provides for the ability to report changes
in status to a security.</p>
<h3 id='response-221'>Response</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>324</td>
<td><code>SecurityStatusReqID</code></td>
<td>String</td>
<td>No</td>
<td>ID of the request</td>
</tr>
<tr>
<td>55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>Yes</td>
<td>Instrument symbol</td>
</tr>
<tr>
<td>326</td>
<td><code>SecurityTradingStatus</code></td>
<td>int</td>
<td>No</td>
<td>Identifies the trading status.<p>Possible values: <ul><li><code>7</code> = Ready to trade,</li> <li><code>8</code> = Not Available for trading,</li> <li><code>20</code> = Unknown or Invalid</li></ul></p></td>
</tr>
<tr>
<td>330</td>
<td><code>BuyVolume</code></td>
<td>float</td>
<td>No</td>
<td>Volume in buy contracts, absent if there weren&#39;t any trades</td>
</tr>
<tr>
<td>331</td>
<td><code>SellVolume</code></td>
<td>float</td>
<td>No</td>
<td>Volume in sell contracts, absent if there weren&#39;t any trades</td>
</tr>
<tr>
<td>332</td>
<td><code>HighPx</code></td>
<td>Price</td>
<td>No</td>
<td>Price of the 24h highest trade, absent if there weren&#39;t any trades</td>
</tr>
<tr>
<td>333</td>
<td><code>LowPx</code></td>
<td>Price</td>
<td>No</td>
<td>Price of the 24h lowest trade, absent if there weren&#39;t any trades</td>
</tr>
<tr>
<td>31</td>
<td><code>LastPx</code></td>
<td>Price</td>
<td>No</td>
<td>The price of the latest trade, absent if there weren&#39;t any trades</td>
</tr>
<tr>
<td>58</td>
<td><code>Text</code></td>
<td>String</td>
<td>No</td>
<td>Explanatory text string of <code>SubscriptionRequestType</code> outcome. <p>Possible values: <ul><li><code>success</code> = Snapshot successfully provided,</li> <li><code>subscribed</code> = Subscription confirmed,</li> <li><code>unsubscribed</code> = Subscription cancelled</li></ul></p></td>
</tr>
</tbody></table>
<h2 id='mmprotection-limits-mm'><code>MMProtection Limits (MM)</code></h2>
<p><strong>Important: manual admin action is necessary to activate Market Maker
Protection (MMP) for an account.</strong> The <code>MMProtection Limits (MM)</code> message can be
used to set or get the limits for Market Maker Protection (MMP) for a currency pair.</p>
<h3 id='arguments-23'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>20114</td>
<td><code>ProtectionRequestID</code></td>
<td>String</td>
<td>Yes</td>
<td>Unique identifier assigned by the requestor. Will be returned in responses</td>
</tr>
<tr>
<td>15</td>
<td><code>Currency</code></td>
<td>String</td>
<td>Yes</td>
<td>First currency of the currency pair to set or get MMP for e.g. <code>BTC</code>, <code>ETH</code></td>
</tr>
<tr>
<td>5544</td>
<td><code>SecondaryCurrency</code></td>
<td>String</td>
<td>No</td>
<td>Secondary currency of the currency pair to set or get MMP for. e.g. <code>USD</code>, <code>USDC</code>, defaults to <code>USD</code> if not provided</td>
</tr>
<tr>
<td>20110</td>
<td><code>ProtectionQtyLimit</code></td>
<td>float</td>
<td>No</td>
<td>Specify the limit of the total traded contracts per underlying within the exposure time interval when market maker protection is triggered. When this value is met or exceeded the system automatically removes the quotes for the instruments connected to the underlying</td>
</tr>
<tr>
<td>20111</td>
<td><code>ProtectionDeltaLimit</code></td>
<td>float</td>
<td>No</td>
<td>The limit of the delta value per underlying within the exposure time interval when market maker protection is triggered. When this value is met or exceeded the system automatically removes the quotes for the instruments connected to the underlying</td>
</tr>
<tr>
<td>20112</td>
<td><code>FrozenLimit</code></td>
<td>float</td>
<td>Yes</td>
<td>Time interval in seconds when quotes are rejected after market maker protection has been triggered</td>
</tr>
<tr>
<td>20116</td>
<td><code>IntervalLength</code></td>
<td>int</td>
<td>Yes</td>
<td>Interval Length in seconds</td>
</tr>
<tr>
<td>20118</td>
<td><code>ProtectionVegaLimit</code></td>
<td>float</td>
<td>No</td>
<td>The limit of the vega value per underlying within the exposure time interval when market maker protection is triggered. When this value is met or exceeded the system automatically removes the quotes for the instruments connected to the underlying</td>
</tr>
<tr>
<td>9019</td>
<td><code>MMPGroup</code></td>
<td>String</td>
<td>No</td>
<td>A custom tag of MMP Group</td>
</tr>
</tbody></table>

<ul>
<li>To set <code>MMProtection Limits</code>, the message must contain all fields. In reply to this message, the server sends <a href="#mmprotection-limits-resultreject-mr"><code>MMProtection Limits Result/Reject</code> (<code>MR</code>)</a>.</li>
<li>To get current <code>MMProtection Limits</code>, the message must contain only <code>ProtectionRequestID</code> (<code>20114</code>) and <code>Currency</code> (<code>15</code>) fields (without all limits). In reply to this message, the server sends <code>MMProtection Limits (MM)</code> message with filled limits.</li>
</ul>
<h2 id='mmprotection-limits-result-reject-mr'><code>MMProtection Limits Result/Reject</code> (<code>MR</code>)</h2>
<p><strong>Important: manual admin action is necessary to activate Market Maker
Protection (MMP) for an account.</strong> This message is sent by the server in reply
to <a href="#mmprotection-limits-mm"><code>MMProtection Limits</code> (<code>MM</code>)</a> or <a href="#mmprotection-reset-mz"><code>MMProtectionReset</code> (<code>MZ</code>)</a></p>
<h3 id='response-222'>Response</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>20114</td>
<td><code>ProtectionRequestID</code></td>
<td>String</td>
<td>Yes</td>
<td>Identifier taken from corresponding <a href="#mmprotection-limits-mm"><code>MM</code></a> or <a href="#mmprotection-reset-mz"><code>MZ</code></a> message</td>
</tr>
<tr>
<td>20117</td>
<td><code>ProtectionRequestResult</code></td>
<td>Boolean</td>
<td>Yes</td>
<td><code>Y</code> = applied or succeeded, <code>N</code> = rejected</td>
</tr>
<tr>
<td>58</td>
<td><code>Text</code></td>
<td>String</td>
<td>No</td>
<td>Text describes reject reason or equal to <code>&quot;success&quot;</code></td>
</tr>
</tbody></table>
<h2 id='mmprotection-reset-mz'><code>MMProtection Reset</code> (<code>MZ</code>)</h2>
<p><strong>Important: manual admin action is necessary to activate Market Maker
Protection (MMP) for an account.</strong> This message resets Market Maker Protection
(MMP) after triggering.</p>
<h3 id='arguments-24'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>20114</td>
<td><code>ProtectionRequestID</code></td>
<td>String</td>
<td>Yes</td>
<td>Unique identifier assigned by the requestor. Will be returned in responses</td>
</tr>
<tr>
<td>15</td>
<td><code>Currency</code></td>
<td>String</td>
<td>Yes</td>
<td>First currency of the currency pair to reset MMP for. e.g. <code>BTC</code>, <code>ETH</code></td>
</tr>
<tr>
<td>5544</td>
<td><code>SecondaryCurrency</code></td>
<td>String</td>
<td>No</td>
<td>Secondary currency of the currency pair to reset MMP for. e.g. <code>USD</code>, <code>USDC</code>, defaults to <code>USD</code> if not provided</td>
</tr>
<tr>
<td>9019</td>
<td><code>MMPGroup</code></td>
<td>String</td>
<td>No</td>
<td>A custom tag of MMP Group</td>
</tr>
</tbody></table>
<h3 id='response-223'>Response</h3>
<p>The server sends <code>MMProtection Result (MR)</code> message as a response.</p>
<h2 id='security-definition-request-c'><code>Security Definition Request</code> (<code>c</code>)</h2>
<p>Request a specific Security to be traded with the second party. The request
security is defined as a multileg security made up of two or more instrument
legs. Also it can be used to query a list of combo-instrument securities offered
by a trading parties. (this method is FIX equivalent of <code>private/create_combo</code>,
<code>public/get_combo_ids</code> and <code>private/get_combo_details</code> request for WS/HTTPS
end-points depending on <code>SecurityRequestType (321)</code> tag value).</p>
<h3 id='arguments-25'>Arguments</h3>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>320</td>
<td><code>SecurityReqID</code></td>
<td>String</td>
<td>Yes</td>
<td>Request identifier</td>
</tr>
<tr>
<td>321</td>
<td><code>SecurityRequestType</code></td>
<td>int</td>
<td>Yes</td>
<td>Type of <code>Security Definition Request</code>(<code>c</code>).<p>Valid values: <ul><li><code>0</code> = Request Security details, specifications by <code>SecurityId</code>,</li><li><code>1</code> = Request Security identity for the specifications provided, the combo-instrument will be created if necessary. </li><li><code>3</code> = Request list of existing combo-instruments</li></ul></p></td>
</tr>
<tr>
<td>15</td>
<td><code>Currency</code></td>
<td>String</td>
<td>Yes</td>
<td>Required is <code>SecurityRequestType</code> = <code>3</code>, examples: <code>BTC</code>, <code>ETH</code></td>
</tr>
<tr>
<td>48</td>
<td><code>SecurityID</code></td>
<td>String</td>
<td>No</td>
<td>Required if <code>SecurityRequestType</code> = <code>0</code>. Identifies combo instrument.</td>
</tr>
<tr>
<td></td>
<td>Group <code>InstrmtLegGrp</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>555</td>
<td><code>NoLegs</code></td>
<td>int</td>
<td>Yes</td>
<td>Number of legs that make up the Security</td>
</tr>
<tr>
<td>=&gt;600</td>
<td><code>LegSymbol</code></td>
<td>String</td>
<td>No</td>
<td>Non-combo instrument name</td>
</tr>
<tr>
<td>=&gt;624</td>
<td><code>LegSide</code></td>
<td>char</td>
<td>No</td>
<td>Valid values:<ul> <li><code>1</code> = Buy,</li> <li><code>2</code> = Sell</li></ul></td>
</tr>
<tr>
<td>=&gt;623</td>
<td><code>LegRatioQty</code></td>
<td>int</td>
<td>No</td>
<td>Positive integer for the strategy</td>
</tr>
</tbody></table>
<h3 id='response-224'>Response</h3>
<p>The server sends <a href="#security-definition-d"><code>Security Definition (d)</code></a> message as
a response, or rejects the request</p>
<h2 id='security-definition-d'><code>Security Definition</code> (<code>d</code>)</h2>
<p>The Security Definition <d> message is used for the following:</p>

<ul>
<li>Accept the security defined in a <a href="#security-definition-request-c"><code>Security Definition Request (c)</code></a> message with changes to the definition and/or identity of the security.</li>
<li>Reject the security requested in a Security Definition Request message</li>
</ul>

<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>320</td>
<td><code>SecurityReqID</code></td>
<td>String</td>
<td>Yes</td>
<td>Request identifier</td>
</tr>
<tr>
<td>322</td>
<td><code>SecurityResponseID</code></td>
<td>sting</td>
<td>Yes</td>
<td>Equal to the <code>SecurityReqID</code></td>
</tr>
<tr>
<td>323</td>
<td><code>SecurityResponseType</code></td>
<td>int</td>
<td>Yes</td>
<td>Type of Security Definition response. <p>Valid values: <ul><li><code>2</code> = accept security proposal with possible revisions as indicated in the message,</li> <li><code>5</code> = reject proposal</li></ul></p></td>
</tr>
<tr>
<td>55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>No</td>
<td>Common, &quot;human understood&quot; representation of the security</td>
</tr>
<tr>
<td>48</td>
<td><code>SecurityID</code></td>
<td>String</td>
<td>No</td>
<td>Takes precedence in identifying security to counterparty.</td>
</tr>
<tr>
<td>22</td>
<td><code>SecurityIDSource</code></td>
<td>String</td>
<td>No</td>
<td><code>101</code> = Multi-cast identifier, <code>102</code> = Combo instrument identifier</td>
</tr>
<tr>
<td>225</td>
<td><code>IssueDate</code></td>
<td>UTCTimestamp</td>
<td>No</td>
<td>Creation timestamp</td>
</tr>
<tr>
<td>873</td>
<td><code>DatedDate</code></td>
<td>UTCTimestamp</td>
<td>No</td>
<td>State timestamp</td>
</tr>
<tr>
<td>58</td>
<td><code>Text</code></td>
<td>String</td>
<td>No</td>
<td>Explanatory text string</td>
</tr>
<tr>
<td></td>
<td>Group <code>UnderlyingInstrument</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>711</td>
<td><code>NoUnderlyings</code></td>
<td>int</td>
<td>No</td>
<td>Number of underlying items in the group, if applicable. Underlying group is present in reply to <a href="#security-definition-request-c"><code>Security Definition Request (c)</code></a> with <code>SecurityRequestType(321)</code> = 3</td>
</tr>
<tr>
<td>=&gt;311</td>
<td><code>UnderlyingSymbol</code></td>
<td>String</td>
<td>No</td>
<td>Combo-instrument symbols in reply to <a href="#security-definition-request-c"><code>Security Definition Request (c)</code></a> with <code>SecurityRequestType(321)</code> = 3</td>
</tr>
<tr>
<td>965</td>
<td><code>SecurityStatus</code></td>
<td>String</td>
<td>No</td>
<td>Denotes the current state of the Instrument. <p>Valid values: <ul><li><code>1</code> = Active, <li><code>2</code> = Inactive, <li><code>3</code> = RFQ, <li><code>4</code> = Closed,</li> <li><code>12</code> = Archivized</li></ul></p></td>
</tr>
<tr>
<td></td>
<td>Group <code>InstrmtLegGrp</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>555</td>
<td><code>NoLegs</code></td>
<td>int</td>
<td>Yes</td>
<td>Number of legs that make up the Security</td>
</tr>
<tr>
<td>=&gt;600</td>
<td><code>LegSymbol</code></td>
<td>String</td>
<td>No</td>
<td>Non-combo instrument name</td>
</tr>
<tr>
<td>=&gt;623</td>
<td><code>LegRatioQty</code></td>
<td>int</td>
<td>No</td>
<td>Positive or negative adjusted to the strategy definition</td>
</tr>
</tbody></table>
<h2 id='quote-request-r'><code>Quote Request</code> (<code>R</code>)</h2>
<p>The message for requesting for quotes from Deribit RFQ market. The request can
be used as the equivalent of WS/REST private/send_rfq, as well as can be received
via RFQ subscription or in the snapshots.</p>

<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>131</td>
<td><code>QuoteReqID</code></td>
<td>String</td>
<td>Yes</td>
<td>Request identifier</td>
</tr>
<tr>
<td>58</td>
<td><code>Text</code></td>
<td>String</td>
<td>No</td>
<td>Explanatory text string</td>
</tr>
<tr>
<td>387</td>
<td><code>TotalVolumeTraded</code></td>
<td>Qty</td>
<td>No</td>
<td>Traded volume</td>
</tr>
<tr>
<td>60</td>
<td><code>TransactTime</code></td>
<td>UTCTimestamp</td>
<td>No</td>
<td>Update time (last trade or when requested)</td>
</tr>
<tr>
<td></td>
<td>Group <code>QuotReqGrp</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>146</td>
<td><code>NoRelatedSym</code></td>
<td>int</td>
<td>Yes</td>
<td>Number of related symbols in Request. Currently it must be equal to <code>1</code>, only 1 symbol is supported for now</td>
</tr>
<tr>
<td>=&gt;55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>No</td>
<td>Common, &quot;human understood&quot; representation of the security</td>
</tr>
<tr>
<td>=&gt;167</td>
<td><code>SecurityType</code></td>
<td>String</td>
<td>No</td>
<td>Describes type of security.<p> Valid values: <ul><li><code>FUT</code> for futures,</li><li> <code>OPT</code> for options,</li> <li> <code>FUTCO</code> for future combo,</li> <li><code>OPTCO</code> for option combo</li></ul></td>
</tr>
<tr>
<td>=&gt;54</td>
<td><code>Side</code></td>
<td>char</td>
<td>No</td>
<td>Side of order.<p>Valid values:</p> <ul><li><code>1</code> = Buy,</li> <li><code>2</code> = Sell</li></ul></td>
</tr>
<tr>
<td>=&gt;38</td>
<td><code>OrderQty</code></td>
<td>Qty</td>
<td>No</td>
<td>Order quantity in contracts</td>
</tr>
</tbody></table>
<h3 id='response-225'>Response</h3>
<p>In case of success, the response will be
a <a href="#quote-status-report-ai"><code>Quote Status Report (AI)</code></a>. If the request fails,
the <a href="#quote-request-reject-ag"><code>Quote Request Reject (AG)</code></a> will be sent, or session level
<a href="#reject3"><code>Reject(3)</code></a> if processing of request is impossible.</p>
<h2 id='quote-request-reject-ag'><code>Quote Request Reject</code> (<code>AG</code>)</h2>
<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>131</td>
<td><code>QuoteReqID</code></td>
<td>String</td>
<td>Yes</td>
<td>Request identifier</td>
</tr>
<tr>
<td>658</td>
<td><code>QuoteRequestRejectReason</code></td>
<td>int</td>
<td>Yes</td>
<td>Reason <a href="#quote-request-r"><code>QuoteRequest (R)</code></a> was rejected: <ul><li> <code>101</code> = exceeded rate limit, <li><code>102</code> = service unavailable temporary, <li><code>3</code> = limit exceeded, <li><code>1</code> = non-implemented feature requested, <li><code>6</code> = account is not authorized to request quote, <li><code>99</code> = other reason of reject</li></ul></td>
</tr>
<tr>
<td>58</td>
<td><code>Text</code></td>
<td>String</td>
<td>No</td>
<td>Text describes the reject reason. <p>Possible values:</p><ul><li><code>1</code> = missing or unknown symbol,</li> <li><code>3</code> = quote request exceeds limit,</li> <li><code>6</code> = account is locked,</li> <li><code>99</code> = other reason,</li> <li><code>101</code> = rate limit exceeded,</li> <li><code>102</code> = temporary unavailable</li></ul></td>
</tr>
<tr>
<td></td>
<td>Group <code>QuotReqRjctGrp</code></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>146</td>
<td><code>NoRelatedSym</code></td>
<td>int</td>
<td>Yes</td>
<td>Number of related symbols in Request</td>
</tr>
<tr>
<td>=&gt;55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>No</td>
<td>Common, &quot;human understood&quot; representation of the security</td>
</tr>
</tbody></table>
<h2 id='quote-status-report-ai'><code>Quote Status Report</code> (<code>AI</code>)</h2>
<p>The message is used in response to <a href="#quote-request-r"><code>Quote Request (R)</code></a> and
also for reporting expired quotes when a user subscribes for quotes via
<a href="#rfq-request-ah"><code>RFQ Request (AH)</code></a>.</p>

<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>131</td>
<td><code>QuoteReqID</code></td>
<td>String</td>
<td>No</td>
<td>Request identifier which triggered the report, if applicable</td>
</tr>
<tr>
<td>117</td>
<td><code>QuoteID</code></td>
<td>int</td>
<td>No</td>
<td>Unique identifier for quote</td>
</tr>
<tr>
<td>297</td>
<td><code>QuoteStatus</code></td>
<td>int</td>
<td>Yes</td>
<td>Identifies the status of the quote acknowledgement.<p>Possible values:</p><ul> <li><code>0</code> = Accepted,</li> <li><code>7</code> = Expired</li></td>
</tr>
<tr>
<td>55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>No</td>
<td>Common, &quot;human understood&quot; representation of the security</td>
</tr>
<tr>
<td>54</td>
<td><code>Side</code></td>
<td>int</td>
<td>No</td>
<td>Side of order.<p>Possible values:</p> <ul><li><code>1</code> = Buy,</li> <li><code>2</code> = Sell</li></ul></td>
</tr>
<tr>
<td>60</td>
<td><code>TransactTime</code></td>
<td>UTCTimestamp</td>
<td>No</td>
<td>Timestamp for last trade or quote creation</td>
</tr>
<tr>
<td>58</td>
<td><code>Text</code></td>
<td>String</td>
<td>No</td>
<td>Explanatory text string</td>
</tr>
</tbody></table>
<h2 id='rfq-request-ah'><code>RFQ Request</code> (<code>AH</code>)</h2>
<p>RFQ request is sent by trader interested in receiving quote requests from other
traders. It is possible to subscribe for new quotes as well as to get a snapshot
of the current quotes in the system.</p>

<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>644</td>
<td><code>RFQReqID</code></td>
<td>String</td>
<td>Yes</td>
<td>Request ID</td>
</tr>
<tr>
<td>15</td>
<td><code>Currency</code></td>
<td>Currency</td>
<td>Yes</td>
<td>Base currency which quotes requester is interested in</td>
</tr>
<tr>
<td>167</td>
<td><code>SecurityType</code></td>
<td>String</td>
<td>No</td>
<td>Describes type of security.<p> Valid values: <ul><li><code>FUT</code> for futures,</li><li> <code>OPT</code> for options,</li> <li> <code>FUTCO</code> for future combo,</li> <li><code>OPTCO</code> for option combo</li></ul></td>
</tr>
<tr>
<td>263</td>
<td><code>SubscriptionRequestType</code></td>
<td>char</td>
<td>No</td>
<td>Subscription Request Type to get notifications about new or terminated instruments. Valid values: <ul><li> <code>0</code> = Snapshot,</li> <li><code>1</code> = Snapshot + Updates (Subscribe),</li> <li><code>2</code> = Disable previous Snapshot + Update Request (Unsubscribe)</li></ul></td>
</tr>
</tbody></table>
<h3 id='response-226'>Response</h3>
<p>RFQ request can be used to request existing
<a href="#quote-request-r"><code>Quote Requests (R)</code></a> as well as to subscribe for new
<a href="#quote-request-r"><code>Quote Requests (R)</code></a> and <a href="#quote-status-report-ai"><code>Quote Status Reports (AI)</code></a>
about expiration of the requests.</p>
<h2 id='tradecapturereportrequest-ad'><code>TradeCaptureReportRequest</code> (<code>AD</code>)</h2>
<p>Request one or more trade capture reports based upon selection criteria provided
on the trade capture report request.</p>

<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>568</td>
<td><code>TradeRequestID</code></td>
<td>String</td>
<td>Yes</td>
<td>Identifier for the trade request</td>
</tr>
<tr>
<td>569</td>
<td><code>TradeRequestType</code></td>
<td>Int</td>
<td>Yes</td>
<td>Describes request type.<p>Valid value:<ul><li><code>0</code> for all trades</li></ul></p></td>
</tr>
<tr>
<td>55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>Yes</td>
<td>Common, &quot;human understood&quot; representation of the security, e.g., <b>BTC-28JUL17</b>, see instrument naming convention for more details</td>
</tr>
<tr>
<td>263</td>
<td><code>SubscriptionRequestType</code></td>
<td>char</td>
<td>No</td>
<td>Used to subscribe / unsubscribe for trade capture reports If the field is absent, the value 1 will be the default (subscription). Valid values:<p><ul><li>1 = Subscribe</li><li> 2 = Unsubscribe</li></ul> (Note: 0 = Snapshot is not implemented for now)</td>
</tr>
</tbody></table>
<h2 id='tradecapturereportrequestack-aq'><code>TradeCaptureReportRequestAck</code> (<code>AQ</code>)</h2>
<p>The Trade Capture Request Ack message is used to:
* Provide an acknowledgement to a Trade Capture Report Request <AD> in the case
  where the Trade Capture Report Request <AD> is used to specify a subscription.
* The Trade Capture Request was invalid for some business reason, such as the
  request is not authorized, invalid or unknown instrument, party, trading
  session, etc.</p>

<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>568</td>
<td><code>TradeRequestID</code></td>
<td>String</td>
<td>Yes</td>
<td>Identifier for the trade request</td>
</tr>
<tr>
<td>569</td>
<td><code>TradeRequestType</code></td>
<td>Int</td>
<td>Yes</td>
<td>Describes request type.<p>Valid value:<ul><li><code>0</code> for all trades</li></ul></p></td>
</tr>
<tr>
<td>571</td>
<td><code>TradeRequestResult</code></td>
<td>Int</td>
<td>Yes</td>
<td>Result of Trade Request.<p>Valid values:<ul><li><code>0</code> - Successful</li><li><code>2</code> - Invalid type of trade requested</li></ul></p></td>
</tr>
<tr>
<td>750</td>
<td><code>TradeRequestStatus</code></td>
<td>Int</td>
<td>Yes</td>
<td>Status of Trade Request.<p>Valid values:<ul><li><code>0</code> - Accepted</li><li><code>2</code> - Rejected</li></ul></p></td>
</tr>
<tr>
<td>55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>Yes</td>
<td>Common, &quot;human understood&quot; representation of the security, e.g., <b>BTC-28JUL17</b>, see instrument naming convention for more details</td>
</tr>
</tbody></table>
<h2 id='tradecapturereport-ae'><code>TradeCaptureReport</code> (<code>AE</code>)</h2>
<p>Used to report trades between counterparties.</p>

<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>568</td>
<td><code>TradeRequestId</code></td>
<td>String</td>
<td>No</td>
<td>Request ID if the Trade Capture Report <AE> is in response to a Trade Capture Report Request <AD></td>
</tr>
<tr>
<td>570</td>
<td><code>PreviouslyReported</code></td>
<td>Boolean</td>
<td>Yes</td>
<td>Indicates if the trade capture report was previously reported to the counterparty</td>
</tr>
<tr>
<td>55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>Yes</td>
<td>Common, &quot;human understood&quot; representation of the security, e.g., <b>BTC-28JUL17</b>, see instrument naming convention for more details</td>
</tr>
<tr>
<td>32</td>
<td><code>LastQty</code></td>
<td>Qty</td>
<td>Yes</td>
<td>Trade Quantity</td>
</tr>
<tr>
<td>31</td>
<td><code>LastPx</code></td>
<td>Price</td>
<td>Yes</td>
<td>Trade Price</td>
</tr>
<tr>
<td>1003</td>
<td><code>TradeId</code></td>
<td>String</td>
<td>Yes</td>
<td>The unique ID assigned to the trade</td>
</tr>
<tr>
<td>1040</td>
<td><code>SecondaryTradeId</code></td>
<td>String</td>
<td>No</td>
<td>Block Trade ID or Combo Trade ID</td>
</tr>
<tr>
<td>75</td>
<td><code>TradeDate</code></td>
<td>LocalMktDate</td>
<td>Yes</td>
<td>Indicates date of trade referenced in this message in YYYYMMDD format.</td>
</tr>
<tr>
<td>60</td>
<td><code>TransactTime</code></td>
<td>UTCTimestamp</td>
<td>Yes</td>
<td>Time of execution/order creation (expressed in UTC (Universal Time Coordinated, also known as &quot;GMT&quot;)</td>
</tr>
<tr>
<td>555</td>
<td><code>NoLegs</code></td>
<td>NumInGroup</td>
<td>No</td>
<td>Number of legs. Identifies a Multi-leg Execution if present and non-zero.</td>
</tr>
<tr>
<td>=&gt;600</td>
<td><code>LegSymbol</code></td>
<td>String</td>
<td>No</td>
<td>Multileg instrument&#39;s individual security&#39;s Symbol.</td>
</tr>
<tr>
<td>=&gt;687</td>
<td><code>LegQty</code></td>
<td>Qty</td>
<td>Yes</td>
<td>Quantity of the leg</td>
</tr>
<tr>
<td>=&gt;566</td>
<td><code>LegPrice</code></td>
<td>Price</td>
<td>Yes</td>
<td>Price for leg of a multileg</td>
</tr>
<tr>
<td>=&gt;624</td>
<td><code>LegSide</code></td>
<td>Char</td>
<td>Yes</td>
<td>The side of this individual leg (multileg security).<p>Valid values: <ul><li><code>1</code> - Buy</li><li><code>2</code>- Sell</li></ul></p></td>
</tr>
<tr>
<td>552</td>
<td><code>NoSides</code></td>
<td>NumInGroup</td>
<td>Yes</td>
<td>Number of sides</td>
</tr>
<tr>
<td>=&gt;54</td>
<td><code>Side</code></td>
<td>Char</td>
<td>Yes</td>
<td>Side of order.<p>Valid values: <ul><li><code>1</code> - Buy</li><li><code>2</code>- Sell</li></ul></p></td>
</tr>
<tr>
<td>=&gt;37</td>
<td><code>OrderId</code></td>
<td>String</td>
<td>Yes</td>
<td>Unique identifier for Order as assigned by sell-side</td>
</tr>
<tr>
<td>=&gt;12</td>
<td><code>Commission</code></td>
<td>Amt</td>
<td>Yes</td>
<td>Commission deducted from the requesting party</td>
</tr>
<tr>
<td>=&gt;479</td>
<td><code>CommCurrency</code></td>
<td>Currency</td>
<td>Yes</td>
<td>Specifies currency to be use for Commission <12></td>
</tr>
</tbody></table>
<h2 id='mass-quote-i'><code>Mass Quote</code> (<code>i</code>)</h2>
<p>Place buy and/or sell orders on one or more instruments. This endpoint can only be used after approval from the administrators. The repeating group structure follows the standard FIX specification, as follows:</p>

<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>117</td>
<td><code>QuoteID</code></td>
<td>String</td>
<td>Yes</td>
<td>Identifier of a mass quote message. Can be used to match trades to requests. We recommend using an incrementing counter.</td>
</tr>
<tr>
<td>9019</td>
<td><code>MMPGroup</code></td>
<td>String</td>
<td>Yes</td>
<td>Custom tag of the MMP group. An MMP group has to be used and only one quote can exist per instrument per side per MMP group.</td>
</tr>
<tr>
<td>62</td>
<td><code>ValidUntilTime</code></td>
<td>UTCTimestamp</td>
<td>No</td>
<td>Indicates expiration time of indication for the request, in UTC.</td>
</tr>
<tr>
<td>296</td>
<td><code>NoQuoteSets</code></td>
<td>NumInGroup</td>
<td>Yes</td>
<td>The number of QuoteSets in the repeating group.</td>
</tr>
<tr>
<td>=&gt; 302</td>
<td><code>QuoteSetID</code></td>
<td>String</td>
<td>Yes</td>
<td>Identifier for the QuoteSet. Can be used in <code>Quote Cancel</code> (<code>Z</code>).</td>
</tr>
<tr>
<td>=&gt; 304</td>
<td><code>TotNoQuoteEntries</code></td>
<td>int</td>
<td>No</td>
<td>Total number of quotes for the quote set. IMPORTANT: For now, splitting QuoteSets over several messages is not supported.</td>
</tr>
<tr>
<td>=&gt; 295</td>
<td><code>NoQuoteEntries</code></td>
<td>NumInGroup</td>
<td>Yes</td>
<td>Number of quotes in the QuoteSet repeating group.</td>
</tr>
<tr>
<td>=&gt; =&gt;   299</td>
<td><code>QuoteEntryID</code></td>
<td>String</td>
<td>Yes</td>
<td>Identifier of the quote. It is echoed in the <code>Mass Quote Acknowledgement</code> (<code>b</code>).</td>
</tr>
<tr>
<td>=&gt;  =&gt;   55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>Yes</td>
<td>Common, &quot;human understood&quot; representation of the security, e.g., <b>BTC-28JUL17</b>, see instrument naming convention for more details.</td>
</tr>
<tr>
<td>=&gt;  =&gt;   132</td>
<td><code>BidPx</code></td>
<td>Price</td>
<td>No</td>
<td>Bid price. If no price is supplied, only the quantity is amended.</td>
</tr>
<tr>
<td>=&gt;  =&gt;   133</td>
<td><code>OfferPx</code></td>
<td>Price</td>
<td>No</td>
<td>Offer  price. If no price is supplied, only the quantity is amended.</td>
</tr>
<tr>
<td>=&gt;  =&gt;   134</td>
<td><code>BidSize</code></td>
<td>Qty</td>
<td>No</td>
<td>Bid quantity in contracts. If no quantity is supplied, only the price is amended.</td>
</tr>
<tr>
<td>=&gt;  =&gt;   135</td>
<td><code>OfferSize</code></td>
<td>Qty</td>
<td>No</td>
<td>Offer quantity in contracts. If no quantity is supplied, only the price is amended.</td>
</tr>
<tr>
<td>=&gt;  =&gt;   18</td>
<td><code>ExecInst</code></td>
<td>MultipleCharValue</td>
<td>No</td>
<td>Supports post-only and post-only-reject, see <code>NewOrderSingle</code> (<code>D</code>).</td>
</tr>
</tbody></table>

<p><code>Mass Quote</code> (<code>i</code>) requires <code>Cancel On Disconnect</code> enabled and MMP.</p>

<p>Request example:</p>

<p><span style="white-space: pre">
MassQuote
 QuoteID=&quot;MyQuote1&quot;
 9019=&quot;default&quot;
   NoQuote_sets=1
     QuoteSetID=1
     TotNoQuoteEntries=2
     NoQuoteEntries=2
     QuoteEntry_id=1
     Symbol=&quot;BTC-PERPETUAL&quot;
     BidPx=41000.0
     OfferPx=42000.0
     BidSize=10.0
     OfferSize=10.0
     QuoteEntryID=2
     Symbol=&quot;BTC-29DEC23&quot;
     BidPx=41500.0
     BidSize=5.0
</span></p>

<p>In reply to <code>Mass Quote</code> (<code>i</code>), the server sends  <code>Mass Quote Acknowledgement</code> (<code>b</code>) message as well as corresponding <code>Execution Report</code>-s (<code>8</code>). The reports and acknowledgement are send asynchronously and via different queues, so the precedence of acknowledgement message is not guaranteed.</p>
<h2 id='mass-quote-acknowledgement-b'><code>Mass Quote Acknowledgement</code> (<code>b</code>)</h2>
<p><code>Mass Quote Acknowledgement</code> (<code>b</code>) is a reply to a <code>Mass Quote</code> (<code>i</code>) message. The message contains orders, trades and possible errors resulting from  the <code>Mass Quote</code> (<code>i</code>) message. The <code>QuoteEntries</code> are not grouped by <code>QuoteSets</code> for performance reasons, only marked with <code>QuoteSetID</code>s.</p>

<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>117</td>
<td><code>QuoteID</code></td>
<td>String</td>
<td>No</td>
<td>The same QuoteID as supplied in the <code>Mass Quote</code> (<code>i</code>) message.</td>
</tr>
<tr>
<td>297</td>
<td><code>QuoteStatus</code></td>
<td>int</td>
<td>Yes</td>
<td>Status of the mass quote as a whole. <code>0</code> = <code>Accepted</code>, <code>5</code> = <code>Rejected</code></td>
</tr>
<tr>
<td>300</td>
<td><code>QuoteRejectReason</code></td>
<td>int</td>
<td>No</td>
<td>Reason <code>Mass Quote</code> (<code>i</code>) was rejected. <code>1</code> = Unknown symbol (Security), <code>2</code> = Exchange(Security) closed, <code>3</code> = <code>Mass Quote</code> (<code>i</code>) size exceeds limit, <code>4</code> = Timed out (Too late to enter), <code>9</code> = Not allowed to quote security, <code>99</code> = Other</td>
</tr>
<tr>
<td>295</td>
<td><code>NoQuoteEntries</code></td>
<td>NumInGroup</td>
<td>No</td>
<td>Number of quotes in the repeating group.</td>
</tr>
<tr>
<td>=&gt; 299</td>
<td><code>QuoteEntryID</code></td>
<td>String</td>
<td>No</td>
<td>Echoed from the <code>Mass Quote</code> (<code>i</code>) message for orders. For trades, it is the trade ID.</td>
</tr>
<tr>
<td>=&gt; 9020</td>
<td><code>QuoteEntryType</code></td>
<td>int</td>
<td>No</td>
<td><code>0</code> = order, <code>1</code> = trade, <code>2</code> = error</td>
</tr>
<tr>
<td>=&gt; 302</td>
<td><code>QuoteSetID</code></td>
<td>String</td>
<td>No</td>
<td>Identifier of the QuoteSet supplied in <code>Mass Quote</code> (<code>i</code>). Only present for orders.</td>
</tr>
<tr>
<td>=&gt; 1167</td>
<td><code>QuoteEntryStatus</code></td>
<td>int</td>
<td>No</td>
<td>Status of individual Quote Entry. <code>0</code> = Accepted, <code>5</code> = Rejected, <code>17</code> = Cancelled, <code>0</code> = Accepted, <code>5</code> = Rejected, <code>17</code> = Cancelled, <code>18</code> = Cancelled by MMP, <code>19</code> = Replaced, <code>20</code> = Filled, <code>21</code> = Open, <code>22</code> = Closed, <code>23</code> = Triggered, <code>24</code> = Untriggered, <code>25</code> = Unknown</td>
</tr>
<tr>
<td>=&gt;  55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>No</td>
<td>Common, &quot;human understood&quot; representation of the security, e.g., <code>BTC-28JUL17</code>, see instrument naming convention for more details.</td>
</tr>
<tr>
<td>=&gt;  54</td>
<td><code>Side</code></td>
<td>char</td>
<td>No</td>
<td>Side of the entry.</td>
</tr>
<tr>
<td>=&gt;  192</td>
<td><code>OrderQty2</code></td>
<td>Qty</td>
<td>No</td>
<td>Size of the trade in contracts, in case of a trade.</td>
</tr>
<tr>
<td>=&gt; 37</td>
<td><code>OrderId</code></td>
<td>String</td>
<td>No</td>
<td>Unique identifier of the quote, assigned by the exchange. It follows the format of OrderIDs for regular orders.</td>
</tr>
<tr>
<td>=&gt; 60</td>
<td><code>TransactTime</code></td>
<td>UTCTimestamp</td>
<td>No</td>
<td>Timestamp of the transaction.</td>
</tr>
<tr>
<td>=&gt;  132</td>
<td><code>BidPx</code></td>
<td>Price</td>
<td>No</td>
<td>Bid price.</td>
</tr>
<tr>
<td>=&gt;  134</td>
<td><code>BidSize</code></td>
<td>Qty</td>
<td>No</td>
<td>Bid quantity in contracts.</td>
</tr>
<tr>
<td>=&gt;  133</td>
<td><code>OfferPx</code></td>
<td>Price</td>
<td>No</td>
<td>Offer price.</td>
</tr>
<tr>
<td>=&gt;  135</td>
<td><code>OfferSize</code></td>
<td>Qty</td>
<td>No</td>
<td>Offer quantity in contracts.</td>
</tr>
<tr>
<td>=&gt; 368</td>
<td><code>QuoteEntryRejectReason</code></td>
<td>int</td>
<td>No</td>
<td>RPC error code, in case of an error.</td>
</tr>
<tr>
<td>=&gt;  58</td>
<td><code>Text</code></td>
<td>String</td>
<td>No</td>
<td>The error description, in case of an error.</td>
</tr>
</tbody></table>
<h2 id='quote-cancel-z'><code>Quote Cancel</code> (<code>Z</code>)</h2>
<p>The <code>Quote Cancel</code> (<code>Z</code>) message is used by an originator of quotes to cancel his quotes and related orders.</p>

<p>The Quote Cancel message supports cancelation of:
* All quotes
* Quotes for a specific symbol
* All quotes for a security kind (like futures, options)
* By QuoteSetID
* By base Currency of the instruments
* By Delta range</p>

<p>The canceling is accomplished by indicating the type of cancelation in the <code>QuoteCancelType</code> (<code>298</code>) field and optional additional parameters.</p>

<p>The message is equivalent of the <code>private/cancel_quotes</code> and shares the same semantic, so it is quite different from the other exchanges. The same as the Websockets &quot;alter-ego&quot; it is acknowledged only via list (possibly empty) of cancelled orders, namely as the <code>Order Mass Cancel Report</code> (<code>r</code>) with <code>ClOrdID</code> equal to the <code>QuoteMsgID</code> of the request, with the affected order ID&#39;s and subsequent <code>Execution Report</code> (<code>8</code>)-s for each individual cancelled order if there are any. </p>

<table><thead>
<tr>
<th>Tag</th>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Comments</th>
</tr>
</thead><tbody>
<tr>
<td>1166</td>
<td><code>QuoteMsgID</code></td>
<td>String</td>
<td>No</td>
<td>Optionally used to supply a message identifier for a quote cancel.</td>
</tr>
<tr>
<td>298</td>
<td><code>QuoteCancelType</code></td>
<td>int</td>
<td>No</td>
<td>Default is 4.    Identifies the type of <code>Quote Cancel</code> (<code>Z</code>) request. 1 = Cancel for <code>Symbol</code>(<code>55</code>), 2 = Cancel for <code>SecurityType</code> (<code>167</code>), 4 = Cancel All Quotes, 5 = for <code>Currency</code> (<code>5</code>), 6 = for <code>QuoteSetID</code> (<code>302</code>), 7 = for Delta range defined by <code>MinDelta</code> and <code>MaxDelta</code> see below</td>
</tr>
<tr>
<td>55</td>
<td><code>Symbol</code></td>
<td>String</td>
<td>Required if <code>QuoteCancelType</code> = 1</td>
<td>Common, &quot;human understood&quot; representation of the security, e.g., <code>BTC-28JUL17</code>, see instrument naming convention for more details.</td>
</tr>
<tr>
<td>15</td>
<td><code>Currency</code></td>
<td>String</td>
<td>if <code>QuoteCancelType</code> = 2, 5 or 7</td>
<td>Currency</td>
</tr>
<tr>
<td>9031</td>
<td><code>FreezeQuotes</code></td>
<td>Boolean</td>
<td>No</td>
<td>Whether or not to reject incoming quotes for 1 second after cancelling</td>
</tr>
<tr>
<td>167</td>
<td><code>SecurityType</code></td>
<td>String</td>
<td>If <code>QuoteCancelType</code>=2</td>
<td>Describes type of security.<p> Possible values: <ul><li><code>FUT</code> for futures,</li><li> <code>OPT</code> for options,</li> <li> <code>FUTCO</code> for future combo,</li> <li><code>OPTCO</code> for option combo</li><li><code>SPOT</code> for spot</li></ul></td>
</tr>
<tr>
<td>302</td>
<td><code>QuoteSetID</code></td>
<td>String</td>
<td>Required if <code>QuoteCancelType</code> = 6</td>
<td>Identifier for the Quote Set</td>
</tr>
<tr>
<td>9032</td>
<td><code>MinDelta</code></td>
<td>float</td>
<td>Required if <code>QuoteCancelType</code> = 7</td>
<td>Min Delta to cancel by delta range</td>
</tr>
<tr>
<td>9033</td>
<td><code>MaxDelta</code></td>
<td>float</td>
<td>Required if <code>QuoteCancelType</code> = 7</td>
<td>Max Delta to cancel by delta range</td>
</tr>
</tbody></table>
<h2 id='changes-log'>Changes Log</h2><h3 id='release-10-06-2025'>Release 10.06.2025</h3>
<ul>
<li><code>MaxShow(210)</code> is replaced with <code>DisplayQty(1138)</code>. The iceberg orders cannot be fully invisible anymore. Setting the <code>DisplayQty (1138)</code> = 0 is interpreted as no hidden volume, i.e. the full order quantity is displayed to the market. Omitting the field gives the same result.</li>
<li><code>Execution Reports</code> (<code>8</code>): added nonmandatory tag <code>RefreshQty</code> (<code>1088</code>)</li>
</ul>
<h3 id='release-06-03-2025'>Release 06.03.2025</h3>
<ul>
<li>Support for non-printable ASCII characters (such as control characters ranging from 0x00 to 0x1F) in string values has been removed to ensure compliance with the WS/REST API. Attempting to use non-printable ASCII characters will now result in a decoding error.</li>
</ul>
<h3 id='release-04-02-2025'>Release 04.02.2025</h3>
<ul>
<li><code>Order Cancel/Replace Request</code> (<code>G</code>): removed support of undocumented tag <code>MaxShow</code> (<code>210</code>) in compliance with WS/REST API</li>
</ul>

<!-- ### Release 03.09.24
* `Order Mass Status Request`(`AF`):  added `History`(`10`) value of the `MassStatusReqType`(`585`) tag for retrieving history of orders that have been partially or fully filled, added optional tags  `OrderHistoryIncludeUnfilled` (`9037`), `OrderHistoryOffset` (`9039`), `TotNumReports`  (`911`). -->
<h3 id='release-08-08-24'>Release 08.08.24</h3>
<ul>
<li><code>Order Mass Cancel Request</code> (<code>q</code>): added <code>FreezeQuotes</code> (<code>9031</code>) tag</li>
</ul>
<h3 id='release-03-07-24'>Release 03.07.24</h3>
<ul>
<li><code>Mass Quote Acknowledgement</code> (<code>b</code>): added more values of <code>QuoteEntryStatus</code> (<code>1167</code>)</li>
<li><code>MMProtection Limits</code> (<code>MM</code>): added <code>ProtectionVegaLimit</code> (<code>20118</code>)</li>
</ul>
<h3 id='release-04-06-24'>Release 04.06.24</h3>
<ul>
<li><code>New Order Single</code> (<code>D</code>): added nonmandatory tag <code>ValidUntilTime</code> (<code>62</code>)</li>
<li><code>Order Cancel/Replace Request</code> (<code>G</code>): added nonmandatory tag <code>ValidUntilTime</code> (<code>62</code>)</li>
<li><code>Mass Quote</code> (<code>i</code>): added nonmandatory tag <code>ValidUntilTime</code> (<code>62</code>)</li>
<li> <code>Execution Reports</code> (<code>8</code>): added nonmandatory tags <code>IsLiquidation</code> (<code>9034</code>), <code>IsRebalance</code> (<code>9035</code>), <code>IsRiskReducing</code> (<code>9036</code>)</li>
<li><code>SecurityListRequest</code> (<code>x</code>): added <code>Currency</code>, <code>SecurityType</code>, <code>SecondaryCurrency</code></li>
</ul>
<h3 id='release-09-03-24'>Release 09.03.24</h3>
<ul>
<li><code>SecurityStatusRequest</code> (<code>e</code>): added subscription</li>
<li><code>SecurityStatus</code> (<code>f</code>): added Text field</li>
<li>Changed scope for <code>MMProtection Limits</code> (<code>MM</code>) from <code>account</code> to <code>trade</code></li>
</ul>
<h3 id='release-13-02-24'>Release 13.02.24</h3>
<ul>
<li>Added <code>Mass Quote</code> (<code>i</code>)</li>
<li>Added <code>Mass Quote Acknowledgement</code> (<code>b</code>)</li>
<li><code>Execution Reports</code> (<code>8</code>): added nonmandatory tags <code>MMPGroup</code> (<code>9019</code>), <code>QuoteSetID</code> (<code>302</code>), <code>QuoteID</code> (<code>117</code>), <code>QuoteEntryID</code> (<code>299</code>) related to Mass Quoting</li>
<li>Added <code>Quote Cancel</code> (<code>Z</code>)</li>
<li><code>Mass Cancel Report</code> (<code>r</code>): added one more type for <code>MassCancelRequestType</code>,  added optional field <code>QuoteCancelType</code> for mass cancel reports generated by <code>Quote Cancel</code> (<code>Z</code>), <code>ClOrdID</code> is not required tag anymore</li>
<li><code>MMProtection Reset</code> (<code>MZ</code>), <code>MMProtection Limits</code> (<code>MM</code>) -- added optional <code>MMPGroup</code>.</li>
</ul>
<h3 id='release-12-12-23'>Release 12.12.23</h3>
<ul>
<li>Fixed an issue where <code>Reject</code> (<code>3</code>) was incorrectly returned instead of <code>OrderCancelReject</code> (<code>9</code>), with the specified <code>ClOrdID</code>, <code>DeribitLabel</code>, or <code>OrigClOrdId</code>, in response to an <code>Order Cancel Request</code> (<code>F</code>).</li>
</ul>
<h3 id='release-1-3-21'>Release 1.3.21</h3>
<ul>
<li><code>User Request</code>(<code>BE</code>): added <code>CROSS</code> as currency</li>
</ul>
<h3 id='release-1-3-20'>Release 1.3.20</h3>
<ul>
<li>DeribitLiquidation is hidden from the public for the first hour after the trade (to prevent abusing).</li>
</ul>
<h3 id='release-1-3-19'>Release 1.3.19</h3>
<ul>
<li>changed <code>MMProtectionLimits</code> and <code>MMProtectionReset</code> to work with currency pair instead of a single currency.</li>
</ul>
<h3 id='release-1-3-18'>Release 1.3.18</h3>
<ul>
<li>added the following messages: TradeCaptureReportRequest (AD), TradeCaptureReportRequestAck (AQ), and TradeCaptureReport (AE). Clients can now utilize these to subscribe for receiving reports on their own trades.</li>
</ul>
<h3 id='release-1-3-17'>Release 1.3.17</h3>
<ul>
<li>added fields NoTickRules(1205), StartTickPriceRange(1206), TickIncrement(1208) to the instrument for tick size steps</li>
<li>added option DisplayIncrementSteps(9018) to <code>Logon</code> and <code>Security List Request</code>(<code>x</code>) so the client can enable receiving the above mentioned new fields in the instrument</li>
</ul>
<h3 id='release-1-3-16'>Release 1.3.16</h3>
<ul>
<li>added possibility to search closed orders by ClOrdID or DeribitLabel via OrderMassStatusRequest</li>
</ul>
<h3 id='release-1-3-16-2'>Release 1.3.16</h3>
<ul>
<li>incremental refresh for indices now has 1 entry instead of 2</li>
<li>BTC-DVOL, ETH-DVOL are renamed in compliance with other indices: BTCDVOL_USDC-DERIBIT-INDEX, ETHDVOL_USDC-DERIBIT-INDEX</li>
</ul>
<h3 id='release-1-3-15'>Release 1.3.15</h3>
<ul>
<li>SecurityList (y): added new value FXSPOT of SecurityType for currency exchange spot market.</li>
<li>SecurityList (y): added PriceQuoteCurrency (1524)</li>
</ul>
<h3 id='release-1-3-14'>Release 1.3.14</h3>
<ul>
<li>Documentation alignment</li>
</ul>
<h3 id='release-1-3-13'>Release 1.3.13</h3>
<p>Added combo API:</p>

<ul>
<li>added Security Definition Request (c)</li>
<li>added Security Definition (d)</li>
</ul>

<p>Added RFQ API:</p>

<ul>
<li>added Quote Request (R)</li>
<li>added Quote Request Reject (AG)</li>
<li>added Quote Status Report (AI)</li>
<li>added RFQ Request (AH)</li>
</ul>
<h3 id='release-1-3-12'>Release 1.3.12</h3>
<ul>
<li>MarketData Request (V) added DeribitShowBlockTradeId (9012)</li>
<li>MarketData (W) and (X): added TrdMatchID(880) as blocktrade ID</li>
</ul>
<h3 id='release-1-3-11'>Release 1.3.11</h3>
<ul>
<li>MarketData Request (V): added DeribitSkipBlockTrades (9011)</li>
</ul>
<h3 id='release-1-3-10'>Release 1.3.10</h3>
<ul>
<li>added possibility to use client&#39;s ClOrdID and DeribitLabel in Order Cancel Request(F), Order Mass Cancel Request(q) and Order Cancel/Replace Request(G) without exchange generated OrigClOrdID (equivalent of REST/WS cancel_by_label etc)</li>
</ul>
<h3 id='release-1-3-09'>Release 1.3.09</h3>
<ul>
<li>Added Sequence Reset(4)</li>
<li>Security List Request(x) added SubscriptionRequestType(263) - possibilty to get notifications about new or terminated instruments</li>
<li>SecurityList (y): added SecurityStatus(965) in the notifications</li>
</ul>
<h3 id='release-1-3-08'>Release 1.3.08</h3>
<ul>
<li>Logon(A): Added custom tag ConnectionOnlyExecutionReports(9010)</li>
</ul>
<h3 id='release-1-3-07'>Release 1.3.07</h3>
<ul>
<li>Order Cancel/Replace Request (G): adjusted behavior for MMP orders when DeribitMMProtection (9008) flag is not specified</li>
</ul>
<h3 id='release-1-3-06'>Release 1.3.06</h3>
<ul>
<li>SecurityList (y): added Deribit Volatility Index instruments: BTC-VIX, ETH-VIX</li>
<li>MarketData Request (V): added requests for Deribit Volatility Index</li>
</ul>
<h3 id='release-1-3-05'>Release 1.3.05</h3>
<ul>
<li>Added MMProtection Limits (MM)</li>
<li>Added MMProtection Limits Result/Reject (MR)</li>
<li>Added MMProtection Reset (MZ)</li>
<li>New Order Single (D): added nonmandatory DeribitMMProtection (9008)</li>
<li>Order Cancel/Replace Request (G): added nonmandatory DeribitMMProtection (9008)</li>
<li>Execution Reports (8): added nonmandatory DeribitMMProtection (9008)</li>
</ul>
<h3 id='release-1-3-04'>Release 1.3.04</h3>
<ul>
<li>Logon(A): Added custom tag DeribitSequential(9007)</li>
<li>Execution Reports (8): added SecondaryExecID which is ID of the last change of the order</li>
</ul>
<h3 id='release-1-3-03'>Release 1.3.03</h3>
<ul>
<li>Added SecurityStatusRequest(e) request and SecurityStatus(f) response</li>
</ul>
<h3 id='release-1-3-02'>Release 1.3.02</h3>
<ul>
<li>Execution Reports (8): added FillsGrp for non-immediate fills also (before it was only for immediate fills)</li>
<li>Position Report (AP): added missing PosType (703) added into PositionQty block</li>
<li>Execution Reports (8): added LastQty (32) and LastPx (31)</li>
</ul>
<h3 id='release-1-3-01'>Release 1.3.01</h3>
<ul>
<li>MarketData Request (V): added support for multiple Symbols (NoRelatedSym and followed group of Symbols)</li>
<li>MarketData (W) and (X): added custom field DeribitLiquidation (100091)</li>
</ul>
<h3 id='release-1-3-00'>Release 1.3.00</h3>
<ul>
<li>MarketData (W) and (X): added OpenInterest (746)</li>
<li>MarketData (W) and (X): added MarkPrice (100090)</li>
<li>MarketData (W) and (X): added UnderlyingSymbol(311)</li>
<li>MarketData (W) and (X): added UnderlyingPx(810)</li>
<li>MarketData (W) and (X): added ContractMultiplier(231)</li>
<li>Position Report (AP): added ContractMultiplier(231)</li>
<li>Position Report (AP): added UnderlyingEndPrice(883)</li>
<li>SecurityList (y): PutOrCall changed for compliance - put = 0, call = 1</li>
<li>SecurityList (y): added InstrumentPricePrecision(2576)</li>
<li>SecurityList (y): added MinPriceIncrement(969)</li>
<li>SecurityList (y): added UnderlyingSymbol(311)</li>
<li>SecurityList (y): added MinTradeVol(562)</li>
<li>User Request(BE): added parameter Currency(15), default is BTC</li>
<li>Order Mass Cancel Request(q): added  parameter Currency(15)</li>
<li>added notification for StopLimit and StopMarket Orders. StopMarket orders has OrdType=S</li>
<li>Execution Report (8): added ContractMultiplier(231)</li>
<li>Execution Report (8): added ConditionTriggerMethod(5127)</li>
</ul>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="javascript">javascript</a>
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
</html>
